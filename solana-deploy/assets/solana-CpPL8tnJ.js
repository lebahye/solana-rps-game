var Su=Object.defineProperty;var Eu=(r,e,t)=>e in r?Su(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ce=(r,e,t)=>Eu(r,typeof e!="symbol"?e+"":e,t);import{g as an,r as _u,a as rc,b as Au}from"./vendor-D44yUz92.js";import{r as $r}from"./buffer-ClfaVKLN.js";var ot=$r();const tp=an(ot);var X=_u();const G=an(X);var xs={exports:{}},bo;function xu(){return bo||(bo=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(c,d,g){this.fn=c,this.context=d,this.once=g||!1}function s(c,d,g,w,E){if(typeof g!="function")throw new TypeError("The listener must be a function");var A=new i(g,w||c,E),I=t?t+d:d;return c._events[I]?c._events[I].fn?c._events[I]=[c._events[I],A]:c._events[I].push(A):(c._events[I]=A,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],g,w;if(this._eventsCount===0)return d;for(w in g=this._events)e.call(g,w)&&d.push(t?w.slice(1):w);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(g)):d},l.prototype.listeners=function(d){var g=t?t+d:d,w=this._events[g];if(!w)return[];if(w.fn)return[w.fn];for(var E=0,A=w.length,I=new Array(A);E<A;E++)I[E]=w[E].fn;return I},l.prototype.listenerCount=function(d){var g=t?t+d:d,w=this._events[g];return w?w.fn?1:w.length:0},l.prototype.emit=function(d,g,w,E,A,I){var x=t?t+d:d;if(!this._events[x])return!1;var v=this._events[x],T=arguments.length,N,B;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),T){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,g),!0;case 3:return v.fn.call(v.context,g,w),!0;case 4:return v.fn.call(v.context,g,w,E),!0;case 5:return v.fn.call(v.context,g,w,E,A),!0;case 6:return v.fn.call(v.context,g,w,E,A,I),!0}for(B=1,N=new Array(T-1);B<T;B++)N[B-1]=arguments[B];v.fn.apply(v.context,N)}else{var D=v.length,H;for(B=0;B<D;B++)switch(v[B].once&&this.removeListener(d,v[B].fn,void 0,!0),T){case 1:v[B].fn.call(v[B].context);break;case 2:v[B].fn.call(v[B].context,g);break;case 3:v[B].fn.call(v[B].context,g,w);break;case 4:v[B].fn.call(v[B].context,g,w,E);break;default:if(!N)for(H=1,N=new Array(T-1);H<T;H++)N[H-1]=arguments[H];v[B].fn.apply(v[B].context,N)}}return!0},l.prototype.on=function(d,g,w){return s(this,d,g,w,!1)},l.prototype.once=function(d,g,w){return s(this,d,g,w,!0)},l.prototype.removeListener=function(d,g,w,E){var A=t?t+d:d;if(!this._events[A])return this;if(!g)return o(this,A),this;var I=this._events[A];if(I.fn)I.fn===g&&(!E||I.once)&&(!w||I.context===w)&&o(this,A);else{for(var x=0,v=[],T=I.length;x<T;x++)(I[x].fn!==g||E&&!I[x].once||w&&I[x].context!==w)&&v.push(I[x]);v.length?this._events[A]=v.length===1?v[0]:v:o(this,A)}return this},l.prototype.removeAllListeners=function(d){var g;return d?(g=t?t+d:d,this._events[g]&&o(this,g)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,r.exports=l}(xs)),xs.exports}var Bu=xu();const ku=an(Bu);class ve extends Error{constructor(e,t){super(e),this.error=t}}class Nn extends ve{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class ep extends ve{constructor(){super(...arguments),this.name="WalletLoadError"}}class Yn extends ve{constructor(){super(...arguments),this.name="WalletConfigError"}}class Jn extends ve{constructor(){super(...arguments),this.name="WalletConnectionError"}}class sc extends ve{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class Iu extends ve{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Mn extends ve{constructor(){super(...arguments),this.name="WalletAccountError"}}class ic extends ve{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class Fe extends ve{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class fn extends ve{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class hn extends ve{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class oc extends ve{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class vo extends ve{constructor(){super(...arguments),this.name="WalletSignInError"}}var bt;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(bt||(bt={}));class ac extends ku{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,n={}){const i=this.publicKey;if(!i)throw new Fe;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,e}}function np(r){if(typeof window>"u"||typeof document>"u")return;const e=[];function t(){if(r())for(const s of e)s()}const n=setInterval(t,1e3);e.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",t,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",t))),document.readyState!=="complete"&&(window.addEventListener("load",t,{once:!0}),e.push(()=>window.removeEventListener("load",t))),t()}function rp(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),e=r.includes("iphone")||r.includes("ipad"),t=r.includes("safari");return e&&t}function dn(r){return"version"in r}class Ru extends ac{async sendTransaction(e,t,n={}){let i=!0;try{if(dn(e)){if(!this.supportedTransactionVersions)throw new fn("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new fn(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const s=e.serialize();return await t.sendRawTransaction(s,n)}catch(s){throw s instanceof hn?(i=!1,s):new fn(s?.message,s)}}else try{const{signers:s,...o}=n;e=await this.prepareTransaction(e,t,o),s?.length&&e.partialSign(...s),e=await this.signTransaction(e);const l=e.serialize();return await t.sendRawTransaction(l,o)}catch(s){throw s instanceof hn?(i=!1,s):new fn(s?.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(e){for(const n of e)if(dn(n)){if(!this.supportedTransactionVersions)throw new hn("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new hn(`Signing transaction version ${n.version} isn't supported by this wallet`)}const t=[];for(const n of e)t.push(await this.signTransaction(n));return t}}class Mu extends Ru{}class Cu extends Mu{}const rn="solana:signAndSendTransaction",Bs="solana:signIn",jn="solana:signMessage",de="solana:signTransaction",cc="standard:connect",So="standard:disconnect",uc="standard:events";function Tu(r){return cc in r.features&&uc in r.features&&(rn in r.features||de in r.features)}var Eo;(function(r){r.Mainnet="mainnet-beta",r.Testnet="testnet",r.Devnet="devnet"})(Eo||(Eo={}));function _o(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Lu(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function jr(r,...e){if(!Lu(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Nu(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");_o(r.outputLen),_o(r.blockLen)}function Lr(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Pu(r,e){jr(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const kn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ks(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Ue(r,e){return r<<32-e|r>>>e}function Ou(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function ji(r){return typeof r=="string"&&(r=Ou(r)),jr(r),r}function Uu(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];jr(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}class lc{clone(){return this._cloneInto()}}function fc(r){const e=n=>r().update(ji(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function hc(r=32){if(kn&&typeof kn.getRandomValues=="function")return kn.getRandomValues(new Uint8Array(r));if(kn&&typeof kn.randomBytes=="function")return kn.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}function qu(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),l=Number(t&s),c=n?4:0,d=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+d,l,n)}function Fu(r,e,t){return r&e^~r&t}function Du(r,e,t){return r&e^r&t^e&t}class dc extends lc{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ks(this.buffer)}update(e){Lr(this);const{view:t,buffer:n,blockLen:i}=this;e=ji(e);const s=e.length;for(let o=0;o<s;){const l=Math.min(i-this.pos,s-o);if(l===i){const c=ks(e);for(;i<=s-o;o+=i)this.process(c,o);continue}n.set(e.subarray(o,o+l),this.pos),this.pos+=l,o+=l,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Lr(this),Pu(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let w=o;w<i;w++)t[w]=0;qu(n,i-8,BigInt(this.length*8),s),this.process(n,0);const l=ks(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,g=this.get();if(d>g.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<d;w++)l.setUint32(4*w,g[w],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:s,destroyed:o,pos:l}=this;return e.length=i,e.pos=l,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(n),e}}const yr=BigInt(2**32-1),Ci=BigInt(32);function gc(r,e=!1){return e?{h:Number(r&yr),l:Number(r>>Ci&yr)}:{h:Number(r>>Ci&yr)|0,l:Number(r&yr)|0}}function zu(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:o}=gc(r[i],e);[t[i],n[i]]=[s,o]}return[t,n]}const Wu=(r,e)=>BigInt(r>>>0)<<Ci|BigInt(e>>>0),Ku=(r,e,t)=>r>>>t,Hu=(r,e,t)=>r<<32-t|e>>>t,$u=(r,e,t)=>r>>>t|e<<32-t,ju=(r,e,t)=>r<<32-t|e>>>t,Vu=(r,e,t)=>r<<64-t|e>>>t-32,Gu=(r,e,t)=>r>>>t-32|e<<64-t,Zu=(r,e)=>e,Yu=(r,e)=>r,Ju=(r,e,t)=>r<<t|e>>>32-t,Xu=(r,e,t)=>e<<t|r>>>32-t,Qu=(r,e,t)=>e<<t-32|r>>>64-t,tl=(r,e,t)=>r<<t-32|e>>>64-t;function el(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const nl=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),rl=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,sl=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),il=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,ol=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),al=(r,e,t,n,i,s)=>e+t+n+i+s+(r/2**32|0)|0,at={fromBig:gc,split:zu,toBig:Wu,shrSH:Ku,shrSL:Hu,rotrSH:$u,rotrSL:ju,rotrBH:Vu,rotrBL:Gu,rotr32H:Zu,rotr32L:Yu,rotlSH:Ju,rotlSL:Xu,rotlBH:Qu,rotlBL:tl,add:el,add3L:nl,add3H:rl,add4L:sl,add4H:il,add5H:al,add5L:ol},[cl,ul]=at.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Je=new Uint32Array(80),Xe=new Uint32Array(80);class ll extends dc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:s,Cl:o,Dh:l,Dl:c,Eh:d,El:g,Fh:w,Fl:E,Gh:A,Gl:I,Hh:x,Hl:v}=this;return[e,t,n,i,s,o,l,c,d,g,w,E,A,I,x,v]}set(e,t,n,i,s,o,l,c,d,g,w,E,A,I,x,v){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=l|0,this.Dl=c|0,this.Eh=d|0,this.El=g|0,this.Fh=w|0,this.Fl=E|0,this.Gh=A|0,this.Gl=I|0,this.Hh=x|0,this.Hl=v|0}process(e,t){for(let B=0;B<16;B++,t+=4)Je[B]=e.getUint32(t),Xe[B]=e.getUint32(t+=4);for(let B=16;B<80;B++){const D=Je[B-15]|0,H=Xe[B-15]|0,F=at.rotrSH(D,H,1)^at.rotrSH(D,H,8)^at.shrSH(D,H,7),$=at.rotrSL(D,H,1)^at.rotrSL(D,H,8)^at.shrSL(D,H,7),K=Je[B-2]|0,C=Xe[B-2]|0,P=at.rotrSH(K,C,19)^at.rotrBH(K,C,61)^at.shrSH(K,C,6),O=at.rotrSL(K,C,19)^at.rotrBL(K,C,61)^at.shrSL(K,C,6),U=at.add4L($,O,Xe[B-7],Xe[B-16]),b=at.add4H(U,F,P,Je[B-7],Je[B-16]);Je[B]=b|0,Xe[B]=U|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:l,Cl:c,Dh:d,Dl:g,Eh:w,El:E,Fh:A,Fl:I,Gh:x,Gl:v,Hh:T,Hl:N}=this;for(let B=0;B<80;B++){const D=at.rotrSH(w,E,14)^at.rotrSH(w,E,18)^at.rotrBH(w,E,41),H=at.rotrSL(w,E,14)^at.rotrSL(w,E,18)^at.rotrBL(w,E,41),F=w&A^~w&x,$=E&I^~E&v,K=at.add5L(N,H,$,ul[B],Xe[B]),C=at.add5H(K,T,D,F,cl[B],Je[B]),P=K|0,O=at.rotrSH(n,i,28)^at.rotrBH(n,i,34)^at.rotrBH(n,i,39),U=at.rotrSL(n,i,28)^at.rotrBL(n,i,34)^at.rotrBL(n,i,39),b=n&s^n&l^s&l,a=i&o^i&c^o&c;T=x|0,N=v|0,x=A|0,v=I|0,A=w|0,I=E|0,{h:w,l:E}=at.add(d|0,g|0,C|0,P|0),d=l|0,g=c|0,l=s|0,c=o|0,s=n|0,o=i|0;const h=at.add3L(P,U,a);n=at.add3H(h,C,O,b),i=h|0}({h:n,l:i}=at.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=at.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:l,l:c}=at.add(this.Ch|0,this.Cl|0,l|0,c|0),{h:d,l:g}=at.add(this.Dh|0,this.Dl|0,d|0,g|0),{h:w,l:E}=at.add(this.Eh|0,this.El|0,w|0,E|0),{h:A,l:I}=at.add(this.Fh|0,this.Fl|0,A|0,I|0),{h:x,l:v}=at.add(this.Gh|0,this.Gl|0,x|0,v|0),{h:T,l:N}=at.add(this.Hh|0,this.Hl|0,T|0,N|0),this.set(n,i,s,o,l,c,d,g,w,E,A,I,x,v,T,N)}roundClean(){Je.fill(0),Xe.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const fl=fc(()=>new ll);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vr=BigInt(0),Gr=BigInt(1),hl=BigInt(2);function yn(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function ur(r){if(!yn(r))throw new Error("Uint8Array expected")}function Ve(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}const dl=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function bn(r){ur(r);let e="";for(let t=0;t<r.length;t++)e+=dl[r[t]];return e}function Cn(r){const e=r.toString(16);return e.length&1?"0"+e:e}function Vi(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Vr:BigInt("0x"+r)}const We={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ao(r){if(r>=We._0&&r<=We._9)return r-We._0;if(r>=We.A&&r<=We.F)return r-(We.A-10);if(r>=We.a&&r<=We.f)return r-(We.a-10)}function qn(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=Ao(r.charCodeAt(s)),l=Ao(r.charCodeAt(s+1));if(o===void 0||l===void 0){const c=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[i]=o*16+l}return n}function wn(r){return Vi(bn(r))}function Pn(r){return ur(r),Vi(bn(Uint8Array.from(r).reverse()))}function Fn(r,e){return qn(r.toString(16).padStart(e*2,"0"))}function rr(r,e){return Fn(r,e).reverse()}function gl(r){return qn(Cn(r))}function oe(r,e,t){let n;if(typeof e=="string")try{n=qn(e)}catch(s){throw new Error(r+" must be hex string or Uint8Array, cause: "+s)}else if(yn(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}function vn(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];ur(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const s=r[n];t.set(s,i),i+=s.length}return t}function pl(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function ml(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}const Is=r=>typeof r=="bigint"&&Vr<=r;function Zr(r,e,t){return Is(r)&&Is(e)&&Is(t)&&e<=r&&r<t}function Ce(r,e,t,n){if(!Zr(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function pc(r){let e;for(e=0;r>Vr;r>>=Gr,e+=1);return e}function wl(r,e){return r>>BigInt(e)&Gr}function yl(r,e,t){return r|(t?Gr:Vr)<<BigInt(e)}const Gi=r=>(hl<<BigInt(r-1))-Gr,Rs=r=>new Uint8Array(r),xo=r=>Uint8Array.from(r);function mc(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=Rs(r),i=Rs(r),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},l=(...w)=>t(i,n,...w),c=(w=Rs())=>{i=l(xo([0]),w),n=l(),w.length!==0&&(i=l(xo([1]),w),n=l())},d=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let w=0;const E=[];for(;w<e;){n=l();const A=n.slice();E.push(A),w+=n.length}return vn(...E)};return(w,E)=>{o(),c(w);let A;for(;!(A=E(d()));)c();return o(),A}}const bl={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||yn(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Wn(r,e,t={}){const n=(i,s,o)=>{const l=bl[s];if(typeof l!="function")throw new Error("invalid validator function");const c=r[i];if(!(o&&c===void 0)&&!l(c,r))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(t))n(i,s,!0);return r}const vl=()=>{throw new Error("not implemented")};function sr(r){const e=new WeakMap;return(t,...n)=>{const i=e.get(t);if(i!==void 0)return i;const s=r(t,...n);return e.set(t,s),s}}const Sl=Object.freeze(Object.defineProperty({__proto__:null,aInRange:Ce,abool:Ve,abytes:ur,bitGet:wl,bitLen:pc,bitMask:Gi,bitSet:yl,bytesToHex:bn,bytesToNumberBE:wn,bytesToNumberLE:Pn,concatBytes:vn,createHmacDrbg:mc,ensureBytes:oe,equalBytes:pl,hexToBytes:qn,hexToNumber:Vi,inRange:Zr,isBytes:yn,memoized:sr,notImplemented:vl,numberToBytesBE:Fn,numberToBytesLE:rr,numberToHexUnpadded:Cn,numberToVarBytesBE:gl,utf8ToBytes:ml,validateObject:Wn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const le=BigInt(0),Rt=BigInt(1),ln=BigInt(2),El=BigInt(3),Ti=BigInt(4),Bo=BigInt(5),ko=BigInt(8);function St(r,e){const t=r%e;return t>=le?t:e+t}function _l(r,e,t){if(e<le)throw new Error("invalid exponent, negatives unsupported");if(t<=le)throw new Error("invalid modulus");if(t===Rt)return le;let n=Rt;for(;e>le;)e&Rt&&(n=n*r%t),r=r*r%t,e>>=Rt;return n}function Pt(r,e,t){let n=r;for(;e-- >le;)n*=n,n%=t;return n}function Li(r,e){if(r===le)throw new Error("invert: expected non-zero number");if(e<=le)throw new Error("invert: expected positive modulus, got "+e);let t=St(r,e),n=e,i=le,s=Rt;for(;t!==le;){const l=n/t,c=n%t,d=i-s*l;n=t,t=c,i=s,s=d}if(n!==Rt)throw new Error("invert: does not exist");return St(i,e)}function Al(r){const e=(r-Rt)/ln;let t,n,i;for(t=r-Rt,n=0;t%ln===le;t/=ln,n++);for(i=ln;i<r&&_l(i,e,r)!==r-Rt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(r+Rt)/Ti;return function(c,d){const g=c.pow(d,o);if(!c.eql(c.sqr(g),d))throw new Error("Cannot find square root");return g}}const s=(t+Rt)/ln;return function(l,c){if(l.pow(c,e)===l.neg(l.ONE))throw new Error("Cannot find square root");let d=n,g=l.pow(l.mul(l.ONE,i),t),w=l.pow(c,s),E=l.pow(c,t);for(;!l.eql(E,l.ONE);){if(l.eql(E,l.ZERO))return l.ZERO;let A=1;for(let x=l.sqr(E);A<d&&!l.eql(x,l.ONE);A++)x=l.sqr(x);const I=l.pow(g,Rt<<BigInt(d-A-1));g=l.sqr(I),w=l.mul(w,I),E=l.mul(E,g),d=A}return w}}function xl(r){if(r%Ti===El){const e=(r+Rt)/Ti;return function(n,i){const s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(r%ko===Bo){const e=(r-Bo)/ko;return function(n,i){const s=n.mul(i,ln),o=n.pow(s,e),l=n.mul(i,o),c=n.mul(n.mul(l,ln),o),d=n.mul(l,n.sub(c,n.ONE));if(!n.eql(n.sqr(d),i))throw new Error("Cannot find square root");return d}}return Al(r)}const Bl=(r,e)=>(St(r,e)&Rt)===Rt,kl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Il(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=kl.reduce((n,i)=>(n[i]="function",n),e);return Wn(r,t)}function Rl(r,e,t){if(t<le)throw new Error("invalid exponent, negatives unsupported");if(t===le)return r.ONE;if(t===Rt)return e;let n=r.ONE,i=e;for(;t>le;)t&Rt&&(n=r.mul(n,i)),i=r.sqr(i),t>>=Rt;return n}function Ml(r,e){const t=new Array(e.length),n=e.reduce((s,o,l)=>r.is0(o)?s:(t[l]=s,r.mul(s,o)),r.ONE),i=r.inv(n);return e.reduceRight((s,o,l)=>r.is0(o)?s:(t[l]=r.mul(s,t[l]),r.mul(s,o)),i),t}function wc(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Yr(r,e,t=!1,n={}){if(r<=le)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:i,nByteLength:s}=wc(r,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const l=Object.freeze({ORDER:r,isLE:t,BITS:i,BYTES:s,MASK:Gi(i),ZERO:le,ONE:Rt,create:c=>St(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return le<=c&&c<r},is0:c=>c===le,isOdd:c=>(c&Rt)===Rt,neg:c=>St(-c,r),eql:(c,d)=>c===d,sqr:c=>St(c*c,r),add:(c,d)=>St(c+d,r),sub:(c,d)=>St(c-d,r),mul:(c,d)=>St(c*d,r),pow:(c,d)=>Rl(l,c,d),div:(c,d)=>St(c*Li(d,r),r),sqrN:c=>c*c,addN:(c,d)=>c+d,subN:(c,d)=>c-d,mulN:(c,d)=>c*d,inv:c=>Li(c,r),sqrt:n.sqrt||(c=>(o||(o=xl(r)),o(l,c))),invertBatch:c=>Ml(l,c),cmov:(c,d,g)=>g?d:c,toBytes:c=>t?rr(c,s):Fn(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return t?Pn(c):wn(c)}});return Object.freeze(l)}function yc(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function bc(r){const e=yc(r);return e+Math.ceil(e/2)}function Cl(r,e,t=!1){const n=r.length,i=yc(e),s=bc(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=t?Pn(r):wn(r),l=St(o,e-Rt)+Rt;return t?rr(l,i):Fn(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Io=BigInt(0),br=BigInt(1);function Ms(r,e){const t=e.negate();return r?t:e}function vc(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function Cs(r,e){vc(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1);return{windows:t,windowSize:n}}function Tl(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function Ll(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const Ts=new WeakMap,Sc=new WeakMap;function Ls(r){return Sc.get(r)||1}function Ec(r,e){return{constTimeNegate:Ms,hasPrecomputes(t){return Ls(t)!==1},unsafeLadder(t,n,i=r.ZERO){let s=t;for(;n>Io;)n&br&&(i=i.add(s)),s=s.double(),n>>=br;return i},precomputeWindow(t,n){const{windows:i,windowSize:s}=Cs(n,e),o=[];let l=t,c=l;for(let d=0;d<i;d++){c=l,o.push(c);for(let g=1;g<s;g++)c=c.add(l),o.push(c);l=c.double()}return o},wNAF(t,n,i){const{windows:s,windowSize:o}=Cs(t,e);let l=r.ZERO,c=r.BASE;const d=BigInt(2**t-1),g=2**t,w=BigInt(t);for(let E=0;E<s;E++){const A=E*o;let I=Number(i&d);i>>=w,I>o&&(I-=g,i+=br);const x=A,v=A+Math.abs(I)-1,T=E%2!==0,N=I<0;I===0?c=c.add(Ms(T,n[x])):l=l.add(Ms(N,n[v]))}return{p:l,f:c}},wNAFUnsafe(t,n,i,s=r.ZERO){const{windows:o,windowSize:l}=Cs(t,e),c=BigInt(2**t-1),d=2**t,g=BigInt(t);for(let w=0;w<o;w++){const E=w*l;if(i===Io)break;let A=Number(i&c);if(i>>=g,A>l&&(A-=d,i+=br),A===0)continue;let I=n[E+Math.abs(A)-1];A<0&&(I=I.negate()),s=s.add(I)}return s},getPrecomputes(t,n,i){let s=Ts.get(n);return s||(s=this.precomputeWindow(n,t),t!==1&&Ts.set(n,i(s))),s},wNAFCached(t,n,i){const s=Ls(t);return this.wNAF(s,this.getPrecomputes(s,t,i),n)},wNAFCachedUnsafe(t,n,i,s){const o=Ls(t);return o===1?this.unsafeLadder(t,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),n,s)},setWindowSize(t,n){vc(n,e),Sc.set(t,n),Ts.delete(t)}}}function _c(r,e,t,n){if(Tl(t,r),Ll(n,e),t.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=r.ZERO,s=pc(BigInt(t.length)),o=s>12?s-3:s>4?s-2:s?2:1,l=(1<<o)-1,c=new Array(l+1).fill(i),d=Math.floor((e.BITS-1)/o)*o;let g=i;for(let w=d;w>=0;w-=o){c.fill(i);for(let A=0;A<n.length;A++){const I=n[A],x=Number(I>>BigInt(w)&BigInt(l));c[x]=c[x].add(t[A])}let E=i;for(let A=c.length-1,I=i;A>0;A--)I=I.add(c[A]),E=E.add(I);if(g=g.add(E),w!==0)for(let A=0;A<o;A++)g=g.double()}return g}function Zi(r){return Il(r.Fp),Wn(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...wc(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Le=BigInt(0),Ee=BigInt(1),vr=BigInt(2),Nl=BigInt(8),Pl={zip215:!0};function Ol(r){const e=Zi(r);return Wn(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Ul(r){const e=Ol(r),{Fp:t,n,prehash:i,hash:s,randomBytes:o,nByteLength:l,h:c}=e,d=vr<<BigInt(l*8)-Ee,g=t.create,w=Yr(e.n,e.nBitLength),E=e.uvRatio||((p,m)=>{try{return{isValid:!0,value:t.sqrt(p*t.inv(m))}}catch{return{isValid:!1,value:Le}}}),A=e.adjustScalarBytes||(p=>p),I=e.domain||((p,m,S)=>{if(Ve("phflag",S),m.length||S)throw new Error("Contexts/pre-hash are not supported");return p});function x(p,m){Ce("coordinate "+p,m,Le,d)}function v(p){if(!(p instanceof B))throw new Error("ExtendedPoint expected")}const T=sr((p,m)=>{const{ex:S,ey:R,ez:L}=p,_=p.is0();m==null&&(m=_?Nl:t.inv(L));const u=g(S*m),f=g(R*m),y=g(L*m);if(_)return{x:Le,y:Ee};if(y!==Ee)throw new Error("invZ was invalid");return{x:u,y:f}}),N=sr(p=>{const{a:m,d:S}=e;if(p.is0())throw new Error("bad point: ZERO");const{ex:R,ey:L,ez:_,et:u}=p,f=g(R*R),y=g(L*L),k=g(_*_),q=g(k*k),j=g(f*m),Z=g(k*g(j+y)),et=g(q+g(S*g(f*y)));if(Z!==et)throw new Error("bad point: equation left != right (1)");const ht=g(R*L),ut=g(_*u);if(ht!==ut)throw new Error("bad point: equation left != right (2)");return!0});class B{constructor(m,S,R,L){this.ex=m,this.ey=S,this.ez=R,this.et=L,x("x",m),x("y",S),x("z",R),x("t",L),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof B)throw new Error("extended point not allowed");const{x:S,y:R}=m||{};return x("x",S),x("y",R),new B(S,R,Ee,g(S*R))}static normalizeZ(m){const S=t.invertBatch(m.map(R=>R.ez));return m.map((R,L)=>R.toAffine(S[L])).map(B.fromAffine)}static msm(m,S){return _c(B,w,m,S)}_setWindowSize(m){F.setWindowSize(this,m)}assertValidity(){N(this)}equals(m){v(m);const{ex:S,ey:R,ez:L}=this,{ex:_,ey:u,ez:f}=m,y=g(S*f),k=g(_*L),q=g(R*f),j=g(u*L);return y===k&&q===j}is0(){return this.equals(B.ZERO)}negate(){return new B(g(-this.ex),this.ey,this.ez,g(-this.et))}double(){const{a:m}=e,{ex:S,ey:R,ez:L}=this,_=g(S*S),u=g(R*R),f=g(vr*g(L*L)),y=g(m*_),k=S+R,q=g(g(k*k)-_-u),j=y+u,Z=j-f,et=y-u,ht=g(q*Z),ut=g(j*et),ft=g(q*et),Ae=g(Z*j);return new B(ht,ut,Ae,ft)}add(m){v(m);const{a:S,d:R}=e,{ex:L,ey:_,ez:u,et:f}=this,{ex:y,ey:k,ez:q,et:j}=m;if(S===BigInt(-1)){const Et=g((_-L)*(k+y)),_t=g((_+L)*(k-y)),Bn=g(_t-Et);if(Bn===Le)return this.double();const At=g(u*vr*j),xt=g(f*vr*q),$n=xt+At,Bt=_t+Et,kt=xt-At,mr=g($n*Bn),Lt=g(Bt*kt),Nt=g($n*kt),wr=g(Bn*Bt);return new B(mr,Lt,wr,Nt)}const Z=g(L*y),et=g(_*k),ht=g(f*R*j),ut=g(u*q),ft=g((L+_)*(y+k)-Z-et),Ae=ut-ht,pt=ut+ht,wt=g(et-S*Z),gr=g(ft*Ae),Ct=g(pt*wt),Tt=g(ft*wt),pr=g(Ae*pt);return new B(gr,Ct,pr,Tt)}subtract(m){return this.add(m.negate())}wNAF(m){return F.wNAFCached(this,m,B.normalizeZ)}multiply(m){const S=m;Ce("scalar",S,Ee,n);const{p:R,f:L}=this.wNAF(S);return B.normalizeZ([R,L])[0]}multiplyUnsafe(m,S=B.ZERO){const R=m;return Ce("scalar",R,Le,n),R===Le?H:this.is0()||R===Ee?this:F.wNAFCachedUnsafe(this,R,B.normalizeZ,S)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return F.unsafeLadder(this,n).is0()}toAffine(m){return T(this,m)}clearCofactor(){const{h:m}=e;return m===Ee?this:this.multiplyUnsafe(m)}static fromHex(m,S=!1){const{d:R,a:L}=e,_=t.BYTES;m=oe("pointHex",m,_),Ve("zip215",S);const u=m.slice(),f=m[_-1];u[_-1]=f&-129;const y=Pn(u),k=S?d:t.ORDER;Ce("pointHex.y",y,Le,k);const q=g(y*y),j=g(q-Ee),Z=g(R*q-L);let{isValid:et,value:ht}=E(j,Z);if(!et)throw new Error("Point.fromHex: invalid y coordinate");const ut=(ht&Ee)===Ee,ft=(f&128)!==0;if(!S&&ht===Le&&ft)throw new Error("Point.fromHex: x=0 and x_0=1");return ft!==ut&&(ht=g(-ht)),B.fromAffine({x:ht,y})}static fromPrivateKey(m){return C(m).point}toRawBytes(){const{x:m,y:S}=this.toAffine(),R=rr(S,t.BYTES);return R[R.length-1]|=m&Ee?128:0,R}toHex(){return bn(this.toRawBytes())}}B.BASE=new B(e.Gx,e.Gy,Ee,g(e.Gx*e.Gy)),B.ZERO=new B(Le,Ee,Ee,Le);const{BASE:D,ZERO:H}=B,F=Ec(B,l*8);function $(p){return St(p,n)}function K(p){return $(Pn(p))}function C(p){const m=t.BYTES;p=oe("private key",p,m);const S=oe("hashed private key",s(p),2*m),R=A(S.slice(0,m)),L=S.slice(m,2*m),_=K(R),u=D.multiply(_),f=u.toRawBytes();return{head:R,prefix:L,scalar:_,point:u,pointBytes:f}}function P(p){return C(p).pointBytes}function O(p=new Uint8Array,...m){const S=vn(...m);return K(s(I(S,oe("context",p),!!i)))}function U(p,m,S={}){p=oe("message",p),i&&(p=i(p));const{prefix:R,scalar:L,pointBytes:_}=C(m),u=O(S.context,R,p),f=D.multiply(u).toRawBytes(),y=O(S.context,f,_,p),k=$(u+y*L);Ce("signature.s",k,Le,n);const q=vn(f,rr(k,t.BYTES));return oe("result",q,t.BYTES*2)}const b=Pl;function a(p,m,S,R=b){const{context:L,zip215:_}=R,u=t.BYTES;p=oe("signature",p,2*u),m=oe("message",m),S=oe("publicKey",S,u),_!==void 0&&Ve("zip215",_),i&&(m=i(m));const f=Pn(p.slice(u,2*u));let y,k,q;try{y=B.fromHex(S,_),k=B.fromHex(p.slice(0,u),_),q=D.multiplyUnsafe(f)}catch{return!1}if(!_&&y.isSmallOrder())return!1;const j=O(L,k.toRawBytes(),y.toRawBytes(),m);return k.add(y.multiplyUnsafe(j)).subtract(q).clearCofactor().equals(B.ZERO)}return D._setWindowSize(8),{CURVE:e,getPublicKey:P,sign:U,verify:a,ExtendedPoint:B,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>o(t.BYTES),precompute(p=8,m=B.BASE){return m._setWindowSize(p),m.multiply(BigInt(3)),m}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ro=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const ql=BigInt(1),Mo=BigInt(2);BigInt(3);const Fl=BigInt(5),Dl=BigInt(8);function zl(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),s=Yi,l=r*r%s*r%s,c=Pt(l,Mo,s)*l%s,d=Pt(c,ql,s)*r%s,g=Pt(d,Fl,s)*d%s,w=Pt(g,e,s)*g%s,E=Pt(w,t,s)*w%s,A=Pt(E,n,s)*E%s,I=Pt(A,i,s)*A%s,x=Pt(I,i,s)*A%s,v=Pt(x,e,s)*g%s;return{pow_p_5_8:Pt(v,Mo,s)*r%s,b2:l}}function Wl(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function Kl(r,e){const t=Yi,n=St(e*e*e,t),i=St(n*n*e,t),s=zl(r*i).pow_p_5_8;let o=St(r*n*s,t);const l=St(e*o*o,t),c=o,d=St(o*Ro,t),g=l===r,w=l===St(-r,t),E=l===St(-r*Ro,t);return g&&(o=c),(w||E)&&(o=d),Bl(o,t)&&(o=St(-o,t)),{isValid:g||w,value:o}}const Hl=Yr(Yi,void 0,!0),$l={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Hl,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Dl,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:fl,randomBytes:hc,adjustScalarBytes:Wl,uvRatio:Kl},lr=Ul($l);var Br={exports:{}},jl=Br.exports,Co;function Ac(){return Co||(Co=1,function(r){(function(e,t){function n(b,a){if(!b)throw new Error(a||"Assertion failed")}function i(b,a){b.super_=a;var h=function(){};h.prototype=a.prototype,b.prototype=new h,b.prototype.constructor=b}function s(b,a,h){if(s.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((a==="le"||a==="be")&&(h=a,a=10),this._init(b||0,a||10,h||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=$r().Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,h){return a.cmp(h)>0?a:h},s.min=function(a,h){return a.cmp(h)<0?a:h},s.prototype._init=function(a,h,p){if(typeof a=="number")return this._initNumber(a,h,p);if(typeof a=="object")return this._initArray(a,h,p);h==="hex"&&(h=16),n(h===(h|0)&&h>=2&&h<=36),a=a.toString().replace(/\s+/g,"");var m=0;a[0]==="-"&&(m++,this.negative=1),m<a.length&&(h===16?this._parseHex(a,m,p):(this._parseBase(a,h,m),p==="le"&&this._initArray(this.toArray(),h,p)))},s.prototype._initNumber=function(a,h,p){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),h,p)},s.prototype._initArray=function(a,h,p){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var S,R,L=0;if(p==="be")for(m=a.length-1,S=0;m>=0;m-=3)R=a[m]|a[m-1]<<8|a[m-2]<<16,this.words[S]|=R<<L&67108863,this.words[S+1]=R>>>26-L&67108863,L+=24,L>=26&&(L-=26,S++);else if(p==="le")for(m=0,S=0;m<a.length;m+=3)R=a[m]|a[m+1]<<8|a[m+2]<<16,this.words[S]|=R<<L&67108863,this.words[S+1]=R>>>26-L&67108863,L+=24,L>=26&&(L-=26,S++);return this._strip()};function l(b,a){var h=b.charCodeAt(a);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;n(!1,"Invalid character in "+b)}function c(b,a,h){var p=l(b,h);return h-1>=a&&(p|=l(b,h-1)<<4),p}s.prototype._parseHex=function(a,h,p){this.length=Math.ceil((a.length-h)/6),this.words=new Array(this.length);for(var m=0;m<this.length;m++)this.words[m]=0;var S=0,R=0,L;if(p==="be")for(m=a.length-1;m>=h;m-=2)L=c(a,h,m)<<S,this.words[R]|=L&67108863,S>=18?(S-=18,R+=1,this.words[R]|=L>>>26):S+=8;else{var _=a.length-h;for(m=_%2===0?h+1:h;m<a.length;m+=2)L=c(a,h,m)<<S,this.words[R]|=L&67108863,S>=18?(S-=18,R+=1,this.words[R]|=L>>>26):S+=8}this._strip()};function d(b,a,h,p){for(var m=0,S=0,R=Math.min(b.length,h),L=a;L<R;L++){var _=b.charCodeAt(L)-48;m*=p,_>=49?S=_-49+10:_>=17?S=_-17+10:S=_,n(_>=0&&S<p,"Invalid character"),m+=S}return m}s.prototype._parseBase=function(a,h,p){this.words=[0],this.length=1;for(var m=0,S=1;S<=67108863;S*=h)m++;m--,S=S/h|0;for(var R=a.length-p,L=R%m,_=Math.min(R,R-L)+p,u=0,f=p;f<_;f+=m)u=d(a,f,f+m,h),this.imuln(S),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(L!==0){var y=1;for(u=d(a,f,a.length,h),f=0;f<L;f++)y*=h;this.imuln(y),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var h=0;h<this.length;h++)a.words[h]=this.words[h];a.length=this.length,a.negative=this.negative,a.red=this.red};function g(b,a){b.words=a.words,b.length=a.length,b.negative=a.negative,b.red=a.red}if(s.prototype._move=function(a){g(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=w}catch{s.prototype.inspect=w}else s.prototype.inspect=w;function w(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var E=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,h){a=a||10,h=h|0||1;var p;if(a===16||a==="hex"){p="";for(var m=0,S=0,R=0;R<this.length;R++){var L=this.words[R],_=((L<<m|S)&16777215).toString(16);S=L>>>24-m&16777215,m+=2,m>=26&&(m-=26,R--),S!==0||R!==this.length-1?p=E[6-_.length]+_+p:p=_+p}for(S!==0&&(p=S.toString(16)+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(a===(a|0)&&a>=2&&a<=36){var u=A[a],f=I[a];p="";var y=this.clone();for(y.negative=0;!y.isZero();){var k=y.modrn(f).toString(a);y=y.idivn(f),y.isZero()?p=k+p:p=E[u-k.length]+k+p}for(this.isZero()&&(p="0"+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(a,h){return this.toArrayLike(o,a,h)}),s.prototype.toArray=function(a,h){return this.toArrayLike(Array,a,h)};var x=function(a,h){return a.allocUnsafe?a.allocUnsafe(h):new a(h)};s.prototype.toArrayLike=function(a,h,p){this._strip();var m=this.byteLength(),S=p||Math.max(1,m);n(m<=S,"byte array longer than desired length"),n(S>0,"Requested array length <= 0");var R=x(a,S),L=h==="le"?"LE":"BE";return this["_toArrayLike"+L](R,m),R},s.prototype._toArrayLikeLE=function(a,h){for(var p=0,m=0,S=0,R=0;S<this.length;S++){var L=this.words[S]<<R|m;a[p++]=L&255,p<a.length&&(a[p++]=L>>8&255),p<a.length&&(a[p++]=L>>16&255),R===6?(p<a.length&&(a[p++]=L>>24&255),m=0,R=0):(m=L>>>24,R+=2)}if(p<a.length)for(a[p++]=m;p<a.length;)a[p++]=0},s.prototype._toArrayLikeBE=function(a,h){for(var p=a.length-1,m=0,S=0,R=0;S<this.length;S++){var L=this.words[S]<<R|m;a[p--]=L&255,p>=0&&(a[p--]=L>>8&255),p>=0&&(a[p--]=L>>16&255),R===6?(p>=0&&(a[p--]=L>>24&255),m=0,R=0):(m=L>>>24,R+=2)}if(p>=0)for(a[p--]=m;p>=0;)a[p--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var h=a,p=0;return h>=4096&&(p+=13,h>>>=13),h>=64&&(p+=7,h>>>=7),h>=8&&(p+=4,h>>>=4),h>=2&&(p+=2,h>>>=2),p+h},s.prototype._zeroBits=function(a){if(a===0)return 26;var h=a,p=0;return(h&8191)===0&&(p+=13,h>>>=13),(h&127)===0&&(p+=7,h>>>=7),(h&15)===0&&(p+=4,h>>>=4),(h&3)===0&&(p+=2,h>>>=2),(h&1)===0&&p++,p},s.prototype.bitLength=function(){var a=this.words[this.length-1],h=this._countBits(a);return(this.length-1)*26+h};function v(b){for(var a=new Array(b.bitLength()),h=0;h<a.length;h++){var p=h/26|0,m=h%26;a[h]=b.words[p]>>>m&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,h=0;h<this.length;h++){var p=this._zeroBits(this.words[h]);if(a+=p,p!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]|a.words[h];return this._strip()},s.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var h;this.length>a.length?h=a:h=this;for(var p=0;p<h.length;p++)this.words[p]=this.words[p]&a.words[p];return this.length=h.length,this._strip()},s.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var h,p;this.length>a.length?(h=this,p=a):(h=a,p=this);for(var m=0;m<p.length;m++)this.words[m]=h.words[m]^p.words[m];if(this!==h)for(;m<h.length;m++)this.words[m]=h.words[m];return this.length=h.length,this._strip()},s.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var h=Math.ceil(a/26)|0,p=a%26;this._expand(h),p>0&&h--;for(var m=0;m<h;m++)this.words[m]=~this.words[m]&67108863;return p>0&&(this.words[m]=~this.words[m]&67108863>>26-p),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,h){n(typeof a=="number"&&a>=0);var p=a/26|0,m=a%26;return this._expand(p+1),h?this.words[p]=this.words[p]|1<<m:this.words[p]=this.words[p]&~(1<<m),this._strip()},s.prototype.iadd=function(a){var h;if(this.negative!==0&&a.negative===0)return this.negative=0,h=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,h=this.isub(a),a.negative=1,h._normSign();var p,m;this.length>a.length?(p=this,m=a):(p=a,m=this);for(var S=0,R=0;R<m.length;R++)h=(p.words[R]|0)+(m.words[R]|0)+S,this.words[R]=h&67108863,S=h>>>26;for(;S!==0&&R<p.length;R++)h=(p.words[R]|0)+S,this.words[R]=h&67108863,S=h>>>26;if(this.length=p.length,S!==0)this.words[this.length]=S,this.length++;else if(p!==this)for(;R<p.length;R++)this.words[R]=p.words[R];return this},s.prototype.add=function(a){var h;return a.negative!==0&&this.negative===0?(a.negative=0,h=this.sub(a),a.negative^=1,h):a.negative===0&&this.negative!==0?(this.negative=0,h=a.sub(this),this.negative=1,h):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var h=this.iadd(a);return a.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var p=this.cmp(a);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var m,S;p>0?(m=this,S=a):(m=a,S=this);for(var R=0,L=0;L<S.length;L++)h=(m.words[L]|0)-(S.words[L]|0)+R,R=h>>26,this.words[L]=h&67108863;for(;R!==0&&L<m.length;L++)h=(m.words[L]|0)+R,R=h>>26,this.words[L]=h&67108863;if(R===0&&L<m.length&&m!==this)for(;L<m.length;L++)this.words[L]=m.words[L];return this.length=Math.max(this.length,L),m!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function T(b,a,h){h.negative=a.negative^b.negative;var p=b.length+a.length|0;h.length=p,p=p-1|0;var m=b.words[0]|0,S=a.words[0]|0,R=m*S,L=R&67108863,_=R/67108864|0;h.words[0]=L;for(var u=1;u<p;u++){for(var f=_>>>26,y=_&67108863,k=Math.min(u,a.length-1),q=Math.max(0,u-b.length+1);q<=k;q++){var j=u-q|0;m=b.words[j]|0,S=a.words[q]|0,R=m*S+y,f+=R/67108864|0,y=R&67108863}h.words[u]=y|0,_=f|0}return _!==0?h.words[u]=_|0:h.length--,h._strip()}var N=function(a,h,p){var m=a.words,S=h.words,R=p.words,L=0,_,u,f,y=m[0]|0,k=y&8191,q=y>>>13,j=m[1]|0,Z=j&8191,et=j>>>13,ht=m[2]|0,ut=ht&8191,ft=ht>>>13,Ae=m[3]|0,pt=Ae&8191,wt=Ae>>>13,gr=m[4]|0,Ct=gr&8191,Tt=gr>>>13,pr=m[5]|0,Et=pr&8191,_t=pr>>>13,Bn=m[6]|0,At=Bn&8191,xt=Bn>>>13,$n=m[7]|0,Bt=$n&8191,kt=$n>>>13,mr=m[8]|0,Lt=mr&8191,Nt=mr>>>13,wr=m[9]|0,Ut=wr&8191,qt=wr>>>13,co=S[0]|0,Ft=co&8191,Dt=co>>>13,uo=S[1]|0,zt=uo&8191,Wt=uo>>>13,lo=S[2]|0,Kt=lo&8191,Ht=lo>>>13,fo=S[3]|0,$t=fo&8191,jt=fo>>>13,ho=S[4]|0,Vt=ho&8191,Gt=ho>>>13,go=S[5]|0,Zt=go&8191,Yt=go>>>13,po=S[6]|0,Jt=po&8191,Xt=po>>>13,mo=S[7]|0,Qt=mo&8191,te=mo>>>13,wo=S[8]|0,ee=wo&8191,ne=wo>>>13,yo=S[9]|0,re=yo&8191,se=yo>>>13;p.negative=a.negative^h.negative,p.length=19,_=Math.imul(k,Ft),u=Math.imul(k,Dt),u=u+Math.imul(q,Ft)|0,f=Math.imul(q,Dt);var os=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(os>>>26)|0,os&=67108863,_=Math.imul(Z,Ft),u=Math.imul(Z,Dt),u=u+Math.imul(et,Ft)|0,f=Math.imul(et,Dt),_=_+Math.imul(k,zt)|0,u=u+Math.imul(k,Wt)|0,u=u+Math.imul(q,zt)|0,f=f+Math.imul(q,Wt)|0;var as=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(as>>>26)|0,as&=67108863,_=Math.imul(ut,Ft),u=Math.imul(ut,Dt),u=u+Math.imul(ft,Ft)|0,f=Math.imul(ft,Dt),_=_+Math.imul(Z,zt)|0,u=u+Math.imul(Z,Wt)|0,u=u+Math.imul(et,zt)|0,f=f+Math.imul(et,Wt)|0,_=_+Math.imul(k,Kt)|0,u=u+Math.imul(k,Ht)|0,u=u+Math.imul(q,Kt)|0,f=f+Math.imul(q,Ht)|0;var cs=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(cs>>>26)|0,cs&=67108863,_=Math.imul(pt,Ft),u=Math.imul(pt,Dt),u=u+Math.imul(wt,Ft)|0,f=Math.imul(wt,Dt),_=_+Math.imul(ut,zt)|0,u=u+Math.imul(ut,Wt)|0,u=u+Math.imul(ft,zt)|0,f=f+Math.imul(ft,Wt)|0,_=_+Math.imul(Z,Kt)|0,u=u+Math.imul(Z,Ht)|0,u=u+Math.imul(et,Kt)|0,f=f+Math.imul(et,Ht)|0,_=_+Math.imul(k,$t)|0,u=u+Math.imul(k,jt)|0,u=u+Math.imul(q,$t)|0,f=f+Math.imul(q,jt)|0;var us=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(us>>>26)|0,us&=67108863,_=Math.imul(Ct,Ft),u=Math.imul(Ct,Dt),u=u+Math.imul(Tt,Ft)|0,f=Math.imul(Tt,Dt),_=_+Math.imul(pt,zt)|0,u=u+Math.imul(pt,Wt)|0,u=u+Math.imul(wt,zt)|0,f=f+Math.imul(wt,Wt)|0,_=_+Math.imul(ut,Kt)|0,u=u+Math.imul(ut,Ht)|0,u=u+Math.imul(ft,Kt)|0,f=f+Math.imul(ft,Ht)|0,_=_+Math.imul(Z,$t)|0,u=u+Math.imul(Z,jt)|0,u=u+Math.imul(et,$t)|0,f=f+Math.imul(et,jt)|0,_=_+Math.imul(k,Vt)|0,u=u+Math.imul(k,Gt)|0,u=u+Math.imul(q,Vt)|0,f=f+Math.imul(q,Gt)|0;var ls=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(ls>>>26)|0,ls&=67108863,_=Math.imul(Et,Ft),u=Math.imul(Et,Dt),u=u+Math.imul(_t,Ft)|0,f=Math.imul(_t,Dt),_=_+Math.imul(Ct,zt)|0,u=u+Math.imul(Ct,Wt)|0,u=u+Math.imul(Tt,zt)|0,f=f+Math.imul(Tt,Wt)|0,_=_+Math.imul(pt,Kt)|0,u=u+Math.imul(pt,Ht)|0,u=u+Math.imul(wt,Kt)|0,f=f+Math.imul(wt,Ht)|0,_=_+Math.imul(ut,$t)|0,u=u+Math.imul(ut,jt)|0,u=u+Math.imul(ft,$t)|0,f=f+Math.imul(ft,jt)|0,_=_+Math.imul(Z,Vt)|0,u=u+Math.imul(Z,Gt)|0,u=u+Math.imul(et,Vt)|0,f=f+Math.imul(et,Gt)|0,_=_+Math.imul(k,Zt)|0,u=u+Math.imul(k,Yt)|0,u=u+Math.imul(q,Zt)|0,f=f+Math.imul(q,Yt)|0;var fs=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(fs>>>26)|0,fs&=67108863,_=Math.imul(At,Ft),u=Math.imul(At,Dt),u=u+Math.imul(xt,Ft)|0,f=Math.imul(xt,Dt),_=_+Math.imul(Et,zt)|0,u=u+Math.imul(Et,Wt)|0,u=u+Math.imul(_t,zt)|0,f=f+Math.imul(_t,Wt)|0,_=_+Math.imul(Ct,Kt)|0,u=u+Math.imul(Ct,Ht)|0,u=u+Math.imul(Tt,Kt)|0,f=f+Math.imul(Tt,Ht)|0,_=_+Math.imul(pt,$t)|0,u=u+Math.imul(pt,jt)|0,u=u+Math.imul(wt,$t)|0,f=f+Math.imul(wt,jt)|0,_=_+Math.imul(ut,Vt)|0,u=u+Math.imul(ut,Gt)|0,u=u+Math.imul(ft,Vt)|0,f=f+Math.imul(ft,Gt)|0,_=_+Math.imul(Z,Zt)|0,u=u+Math.imul(Z,Yt)|0,u=u+Math.imul(et,Zt)|0,f=f+Math.imul(et,Yt)|0,_=_+Math.imul(k,Jt)|0,u=u+Math.imul(k,Xt)|0,u=u+Math.imul(q,Jt)|0,f=f+Math.imul(q,Xt)|0;var hs=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(hs>>>26)|0,hs&=67108863,_=Math.imul(Bt,Ft),u=Math.imul(Bt,Dt),u=u+Math.imul(kt,Ft)|0,f=Math.imul(kt,Dt),_=_+Math.imul(At,zt)|0,u=u+Math.imul(At,Wt)|0,u=u+Math.imul(xt,zt)|0,f=f+Math.imul(xt,Wt)|0,_=_+Math.imul(Et,Kt)|0,u=u+Math.imul(Et,Ht)|0,u=u+Math.imul(_t,Kt)|0,f=f+Math.imul(_t,Ht)|0,_=_+Math.imul(Ct,$t)|0,u=u+Math.imul(Ct,jt)|0,u=u+Math.imul(Tt,$t)|0,f=f+Math.imul(Tt,jt)|0,_=_+Math.imul(pt,Vt)|0,u=u+Math.imul(pt,Gt)|0,u=u+Math.imul(wt,Vt)|0,f=f+Math.imul(wt,Gt)|0,_=_+Math.imul(ut,Zt)|0,u=u+Math.imul(ut,Yt)|0,u=u+Math.imul(ft,Zt)|0,f=f+Math.imul(ft,Yt)|0,_=_+Math.imul(Z,Jt)|0,u=u+Math.imul(Z,Xt)|0,u=u+Math.imul(et,Jt)|0,f=f+Math.imul(et,Xt)|0,_=_+Math.imul(k,Qt)|0,u=u+Math.imul(k,te)|0,u=u+Math.imul(q,Qt)|0,f=f+Math.imul(q,te)|0;var ds=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(ds>>>26)|0,ds&=67108863,_=Math.imul(Lt,Ft),u=Math.imul(Lt,Dt),u=u+Math.imul(Nt,Ft)|0,f=Math.imul(Nt,Dt),_=_+Math.imul(Bt,zt)|0,u=u+Math.imul(Bt,Wt)|0,u=u+Math.imul(kt,zt)|0,f=f+Math.imul(kt,Wt)|0,_=_+Math.imul(At,Kt)|0,u=u+Math.imul(At,Ht)|0,u=u+Math.imul(xt,Kt)|0,f=f+Math.imul(xt,Ht)|0,_=_+Math.imul(Et,$t)|0,u=u+Math.imul(Et,jt)|0,u=u+Math.imul(_t,$t)|0,f=f+Math.imul(_t,jt)|0,_=_+Math.imul(Ct,Vt)|0,u=u+Math.imul(Ct,Gt)|0,u=u+Math.imul(Tt,Vt)|0,f=f+Math.imul(Tt,Gt)|0,_=_+Math.imul(pt,Zt)|0,u=u+Math.imul(pt,Yt)|0,u=u+Math.imul(wt,Zt)|0,f=f+Math.imul(wt,Yt)|0,_=_+Math.imul(ut,Jt)|0,u=u+Math.imul(ut,Xt)|0,u=u+Math.imul(ft,Jt)|0,f=f+Math.imul(ft,Xt)|0,_=_+Math.imul(Z,Qt)|0,u=u+Math.imul(Z,te)|0,u=u+Math.imul(et,Qt)|0,f=f+Math.imul(et,te)|0,_=_+Math.imul(k,ee)|0,u=u+Math.imul(k,ne)|0,u=u+Math.imul(q,ee)|0,f=f+Math.imul(q,ne)|0;var gs=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(gs>>>26)|0,gs&=67108863,_=Math.imul(Ut,Ft),u=Math.imul(Ut,Dt),u=u+Math.imul(qt,Ft)|0,f=Math.imul(qt,Dt),_=_+Math.imul(Lt,zt)|0,u=u+Math.imul(Lt,Wt)|0,u=u+Math.imul(Nt,zt)|0,f=f+Math.imul(Nt,Wt)|0,_=_+Math.imul(Bt,Kt)|0,u=u+Math.imul(Bt,Ht)|0,u=u+Math.imul(kt,Kt)|0,f=f+Math.imul(kt,Ht)|0,_=_+Math.imul(At,$t)|0,u=u+Math.imul(At,jt)|0,u=u+Math.imul(xt,$t)|0,f=f+Math.imul(xt,jt)|0,_=_+Math.imul(Et,Vt)|0,u=u+Math.imul(Et,Gt)|0,u=u+Math.imul(_t,Vt)|0,f=f+Math.imul(_t,Gt)|0,_=_+Math.imul(Ct,Zt)|0,u=u+Math.imul(Ct,Yt)|0,u=u+Math.imul(Tt,Zt)|0,f=f+Math.imul(Tt,Yt)|0,_=_+Math.imul(pt,Jt)|0,u=u+Math.imul(pt,Xt)|0,u=u+Math.imul(wt,Jt)|0,f=f+Math.imul(wt,Xt)|0,_=_+Math.imul(ut,Qt)|0,u=u+Math.imul(ut,te)|0,u=u+Math.imul(ft,Qt)|0,f=f+Math.imul(ft,te)|0,_=_+Math.imul(Z,ee)|0,u=u+Math.imul(Z,ne)|0,u=u+Math.imul(et,ee)|0,f=f+Math.imul(et,ne)|0,_=_+Math.imul(k,re)|0,u=u+Math.imul(k,se)|0,u=u+Math.imul(q,re)|0,f=f+Math.imul(q,se)|0;var ps=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(ps>>>26)|0,ps&=67108863,_=Math.imul(Ut,zt),u=Math.imul(Ut,Wt),u=u+Math.imul(qt,zt)|0,f=Math.imul(qt,Wt),_=_+Math.imul(Lt,Kt)|0,u=u+Math.imul(Lt,Ht)|0,u=u+Math.imul(Nt,Kt)|0,f=f+Math.imul(Nt,Ht)|0,_=_+Math.imul(Bt,$t)|0,u=u+Math.imul(Bt,jt)|0,u=u+Math.imul(kt,$t)|0,f=f+Math.imul(kt,jt)|0,_=_+Math.imul(At,Vt)|0,u=u+Math.imul(At,Gt)|0,u=u+Math.imul(xt,Vt)|0,f=f+Math.imul(xt,Gt)|0,_=_+Math.imul(Et,Zt)|0,u=u+Math.imul(Et,Yt)|0,u=u+Math.imul(_t,Zt)|0,f=f+Math.imul(_t,Yt)|0,_=_+Math.imul(Ct,Jt)|0,u=u+Math.imul(Ct,Xt)|0,u=u+Math.imul(Tt,Jt)|0,f=f+Math.imul(Tt,Xt)|0,_=_+Math.imul(pt,Qt)|0,u=u+Math.imul(pt,te)|0,u=u+Math.imul(wt,Qt)|0,f=f+Math.imul(wt,te)|0,_=_+Math.imul(ut,ee)|0,u=u+Math.imul(ut,ne)|0,u=u+Math.imul(ft,ee)|0,f=f+Math.imul(ft,ne)|0,_=_+Math.imul(Z,re)|0,u=u+Math.imul(Z,se)|0,u=u+Math.imul(et,re)|0,f=f+Math.imul(et,se)|0;var ms=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(ms>>>26)|0,ms&=67108863,_=Math.imul(Ut,Kt),u=Math.imul(Ut,Ht),u=u+Math.imul(qt,Kt)|0,f=Math.imul(qt,Ht),_=_+Math.imul(Lt,$t)|0,u=u+Math.imul(Lt,jt)|0,u=u+Math.imul(Nt,$t)|0,f=f+Math.imul(Nt,jt)|0,_=_+Math.imul(Bt,Vt)|0,u=u+Math.imul(Bt,Gt)|0,u=u+Math.imul(kt,Vt)|0,f=f+Math.imul(kt,Gt)|0,_=_+Math.imul(At,Zt)|0,u=u+Math.imul(At,Yt)|0,u=u+Math.imul(xt,Zt)|0,f=f+Math.imul(xt,Yt)|0,_=_+Math.imul(Et,Jt)|0,u=u+Math.imul(Et,Xt)|0,u=u+Math.imul(_t,Jt)|0,f=f+Math.imul(_t,Xt)|0,_=_+Math.imul(Ct,Qt)|0,u=u+Math.imul(Ct,te)|0,u=u+Math.imul(Tt,Qt)|0,f=f+Math.imul(Tt,te)|0,_=_+Math.imul(pt,ee)|0,u=u+Math.imul(pt,ne)|0,u=u+Math.imul(wt,ee)|0,f=f+Math.imul(wt,ne)|0,_=_+Math.imul(ut,re)|0,u=u+Math.imul(ut,se)|0,u=u+Math.imul(ft,re)|0,f=f+Math.imul(ft,se)|0;var ws=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(ws>>>26)|0,ws&=67108863,_=Math.imul(Ut,$t),u=Math.imul(Ut,jt),u=u+Math.imul(qt,$t)|0,f=Math.imul(qt,jt),_=_+Math.imul(Lt,Vt)|0,u=u+Math.imul(Lt,Gt)|0,u=u+Math.imul(Nt,Vt)|0,f=f+Math.imul(Nt,Gt)|0,_=_+Math.imul(Bt,Zt)|0,u=u+Math.imul(Bt,Yt)|0,u=u+Math.imul(kt,Zt)|0,f=f+Math.imul(kt,Yt)|0,_=_+Math.imul(At,Jt)|0,u=u+Math.imul(At,Xt)|0,u=u+Math.imul(xt,Jt)|0,f=f+Math.imul(xt,Xt)|0,_=_+Math.imul(Et,Qt)|0,u=u+Math.imul(Et,te)|0,u=u+Math.imul(_t,Qt)|0,f=f+Math.imul(_t,te)|0,_=_+Math.imul(Ct,ee)|0,u=u+Math.imul(Ct,ne)|0,u=u+Math.imul(Tt,ee)|0,f=f+Math.imul(Tt,ne)|0,_=_+Math.imul(pt,re)|0,u=u+Math.imul(pt,se)|0,u=u+Math.imul(wt,re)|0,f=f+Math.imul(wt,se)|0;var ys=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(ys>>>26)|0,ys&=67108863,_=Math.imul(Ut,Vt),u=Math.imul(Ut,Gt),u=u+Math.imul(qt,Vt)|0,f=Math.imul(qt,Gt),_=_+Math.imul(Lt,Zt)|0,u=u+Math.imul(Lt,Yt)|0,u=u+Math.imul(Nt,Zt)|0,f=f+Math.imul(Nt,Yt)|0,_=_+Math.imul(Bt,Jt)|0,u=u+Math.imul(Bt,Xt)|0,u=u+Math.imul(kt,Jt)|0,f=f+Math.imul(kt,Xt)|0,_=_+Math.imul(At,Qt)|0,u=u+Math.imul(At,te)|0,u=u+Math.imul(xt,Qt)|0,f=f+Math.imul(xt,te)|0,_=_+Math.imul(Et,ee)|0,u=u+Math.imul(Et,ne)|0,u=u+Math.imul(_t,ee)|0,f=f+Math.imul(_t,ne)|0,_=_+Math.imul(Ct,re)|0,u=u+Math.imul(Ct,se)|0,u=u+Math.imul(Tt,re)|0,f=f+Math.imul(Tt,se)|0;var bs=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(bs>>>26)|0,bs&=67108863,_=Math.imul(Ut,Zt),u=Math.imul(Ut,Yt),u=u+Math.imul(qt,Zt)|0,f=Math.imul(qt,Yt),_=_+Math.imul(Lt,Jt)|0,u=u+Math.imul(Lt,Xt)|0,u=u+Math.imul(Nt,Jt)|0,f=f+Math.imul(Nt,Xt)|0,_=_+Math.imul(Bt,Qt)|0,u=u+Math.imul(Bt,te)|0,u=u+Math.imul(kt,Qt)|0,f=f+Math.imul(kt,te)|0,_=_+Math.imul(At,ee)|0,u=u+Math.imul(At,ne)|0,u=u+Math.imul(xt,ee)|0,f=f+Math.imul(xt,ne)|0,_=_+Math.imul(Et,re)|0,u=u+Math.imul(Et,se)|0,u=u+Math.imul(_t,re)|0,f=f+Math.imul(_t,se)|0;var vs=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(vs>>>26)|0,vs&=67108863,_=Math.imul(Ut,Jt),u=Math.imul(Ut,Xt),u=u+Math.imul(qt,Jt)|0,f=Math.imul(qt,Xt),_=_+Math.imul(Lt,Qt)|0,u=u+Math.imul(Lt,te)|0,u=u+Math.imul(Nt,Qt)|0,f=f+Math.imul(Nt,te)|0,_=_+Math.imul(Bt,ee)|0,u=u+Math.imul(Bt,ne)|0,u=u+Math.imul(kt,ee)|0,f=f+Math.imul(kt,ne)|0,_=_+Math.imul(At,re)|0,u=u+Math.imul(At,se)|0,u=u+Math.imul(xt,re)|0,f=f+Math.imul(xt,se)|0;var Ss=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,_=Math.imul(Ut,Qt),u=Math.imul(Ut,te),u=u+Math.imul(qt,Qt)|0,f=Math.imul(qt,te),_=_+Math.imul(Lt,ee)|0,u=u+Math.imul(Lt,ne)|0,u=u+Math.imul(Nt,ee)|0,f=f+Math.imul(Nt,ne)|0,_=_+Math.imul(Bt,re)|0,u=u+Math.imul(Bt,se)|0,u=u+Math.imul(kt,re)|0,f=f+Math.imul(kt,se)|0;var Es=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(Es>>>26)|0,Es&=67108863,_=Math.imul(Ut,ee),u=Math.imul(Ut,ne),u=u+Math.imul(qt,ee)|0,f=Math.imul(qt,ne),_=_+Math.imul(Lt,re)|0,u=u+Math.imul(Lt,se)|0,u=u+Math.imul(Nt,re)|0,f=f+Math.imul(Nt,se)|0;var _s=(L+_|0)+((u&8191)<<13)|0;L=(f+(u>>>13)|0)+(_s>>>26)|0,_s&=67108863,_=Math.imul(Ut,re),u=Math.imul(Ut,se),u=u+Math.imul(qt,re)|0,f=Math.imul(qt,se);var As=(L+_|0)+((u&8191)<<13)|0;return L=(f+(u>>>13)|0)+(As>>>26)|0,As&=67108863,R[0]=os,R[1]=as,R[2]=cs,R[3]=us,R[4]=ls,R[5]=fs,R[6]=hs,R[7]=ds,R[8]=gs,R[9]=ps,R[10]=ms,R[11]=ws,R[12]=ys,R[13]=bs,R[14]=vs,R[15]=Ss,R[16]=Es,R[17]=_s,R[18]=As,L!==0&&(R[19]=L,p.length++),p};Math.imul||(N=T);function B(b,a,h){h.negative=a.negative^b.negative,h.length=b.length+a.length;for(var p=0,m=0,S=0;S<h.length-1;S++){var R=m;m=0;for(var L=p&67108863,_=Math.min(S,a.length-1),u=Math.max(0,S-b.length+1);u<=_;u++){var f=S-u,y=b.words[f]|0,k=a.words[u]|0,q=y*k,j=q&67108863;R=R+(q/67108864|0)|0,j=j+L|0,L=j&67108863,R=R+(j>>>26)|0,m+=R>>>26,R&=67108863}h.words[S]=L,p=R,R=m}return p!==0?h.words[S]=p:h.length--,h._strip()}function D(b,a,h){return B(b,a,h)}s.prototype.mulTo=function(a,h){var p,m=this.length+a.length;return this.length===10&&a.length===10?p=N(this,a,h):m<63?p=T(this,a,h):m<1024?p=B(this,a,h):p=D(this,a,h),p},s.prototype.mul=function(a){var h=new s(null);return h.words=new Array(this.length+a.length),this.mulTo(a,h)},s.prototype.mulf=function(a){var h=new s(null);return h.words=new Array(this.length+a.length),D(this,a,h)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var h=a<0;h&&(a=-a),n(typeof a=="number"),n(a<67108864);for(var p=0,m=0;m<this.length;m++){var S=(this.words[m]|0)*a,R=(S&67108863)+(p&67108863);p>>=26,p+=S/67108864|0,p+=R>>>26,this.words[m]=R&67108863}return p!==0&&(this.words[m]=p,this.length++),h?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var h=v(a);if(h.length===0)return new s(1);for(var p=this,m=0;m<h.length&&h[m]===0;m++,p=p.sqr());if(++m<h.length)for(var S=p.sqr();m<h.length;m++,S=S.sqr())h[m]!==0&&(p=p.mul(S));return p},s.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var h=a%26,p=(a-h)/26,m=67108863>>>26-h<<26-h,S;if(h!==0){var R=0;for(S=0;S<this.length;S++){var L=this.words[S]&m,_=(this.words[S]|0)-L<<h;this.words[S]=_|R,R=L>>>26-h}R&&(this.words[S]=R,this.length++)}if(p!==0){for(S=this.length-1;S>=0;S--)this.words[S+p]=this.words[S];for(S=0;S<p;S++)this.words[S]=0;this.length+=p}return this._strip()},s.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,h,p){n(typeof a=="number"&&a>=0);var m;h?m=(h-h%26)/26:m=0;var S=a%26,R=Math.min((a-S)/26,this.length),L=67108863^67108863>>>S<<S,_=p;if(m-=R,m=Math.max(0,m),_){for(var u=0;u<R;u++)_.words[u]=this.words[u];_.length=R}if(R!==0)if(this.length>R)for(this.length-=R,u=0;u<this.length;u++)this.words[u]=this.words[u+R];else this.words[0]=0,this.length=1;var f=0;for(u=this.length-1;u>=0&&(f!==0||u>=m);u--){var y=this.words[u]|0;this.words[u]=f<<26-S|y>>>S,f=y&L}return _&&f!==0&&(_.words[_.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,h,p){return n(this.negative===0),this.iushrn(a,h,p)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var h=a%26,p=(a-h)/26,m=1<<h;if(this.length<=p)return!1;var S=this.words[p];return!!(S&m)},s.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var h=a%26,p=(a-h)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(h!==0&&p++,this.length=Math.min(p,this.length),h!==0){var m=67108863^67108863>>>h<<h;this.words[this.length-1]&=m}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},s.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,h,p){var m=a.length+p,S;this._expand(m);var R,L=0;for(S=0;S<a.length;S++){R=(this.words[S+p]|0)+L;var _=(a.words[S]|0)*h;R-=_&67108863,L=(R>>26)-(_/67108864|0),this.words[S+p]=R&67108863}for(;S<this.length-p;S++)R=(this.words[S+p]|0)+L,L=R>>26,this.words[S+p]=R&67108863;if(L===0)return this._strip();for(n(L===-1),L=0,S=0;S<this.length;S++)R=-(this.words[S]|0)+L,L=R>>26,this.words[S]=R&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,h){var p=this.length-a.length,m=this.clone(),S=a,R=S.words[S.length-1]|0,L=this._countBits(R);p=26-L,p!==0&&(S=S.ushln(p),m.iushln(p),R=S.words[S.length-1]|0);var _=m.length-S.length,u;if(h!=="mod"){u=new s(null),u.length=_+1,u.words=new Array(u.length);for(var f=0;f<u.length;f++)u.words[f]=0}var y=m.clone()._ishlnsubmul(S,1,_);y.negative===0&&(m=y,u&&(u.words[_]=1));for(var k=_-1;k>=0;k--){var q=(m.words[S.length+k]|0)*67108864+(m.words[S.length+k-1]|0);for(q=Math.min(q/R|0,67108863),m._ishlnsubmul(S,q,k);m.negative!==0;)q--,m.negative=0,m._ishlnsubmul(S,1,k),m.isZero()||(m.negative^=1);u&&(u.words[k]=q)}return u&&u._strip(),m._strip(),h!=="div"&&p!==0&&m.iushrn(p),{div:u||null,mod:m}},s.prototype.divmod=function(a,h,p){if(n(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var m,S,R;return this.negative!==0&&a.negative===0?(R=this.neg().divmod(a,h),h!=="mod"&&(m=R.div.neg()),h!=="div"&&(S=R.mod.neg(),p&&S.negative!==0&&S.iadd(a)),{div:m,mod:S}):this.negative===0&&a.negative!==0?(R=this.divmod(a.neg(),h),h!=="mod"&&(m=R.div.neg()),{div:m,mod:R.mod}):(this.negative&a.negative)!==0?(R=this.neg().divmod(a.neg(),h),h!=="div"&&(S=R.mod.neg(),p&&S.negative!==0&&S.isub(a)),{div:R.div,mod:S}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?h==="div"?{div:this.divn(a.words[0]),mod:null}:h==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,h)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var h=this.divmod(a);if(h.mod.isZero())return h.div;var p=h.div.negative!==0?h.mod.isub(a):h.mod,m=a.ushrn(1),S=a.andln(1),R=p.cmp(m);return R<0||S===1&&R===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},s.prototype.modrn=function(a){var h=a<0;h&&(a=-a),n(a<=67108863);for(var p=(1<<26)%a,m=0,S=this.length-1;S>=0;S--)m=(p*m+(this.words[S]|0))%a;return h?-m:m},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var h=a<0;h&&(a=-a),n(a<=67108863);for(var p=0,m=this.length-1;m>=0;m--){var S=(this.words[m]|0)+p*67108864;this.words[m]=S/a|0,p=S%a}return this._strip(),h?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var h=this,p=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var m=new s(1),S=new s(0),R=new s(0),L=new s(1),_=0;h.isEven()&&p.isEven();)h.iushrn(1),p.iushrn(1),++_;for(var u=p.clone(),f=h.clone();!h.isZero();){for(var y=0,k=1;(h.words[0]&k)===0&&y<26;++y,k<<=1);if(y>0)for(h.iushrn(y);y-- >0;)(m.isOdd()||S.isOdd())&&(m.iadd(u),S.isub(f)),m.iushrn(1),S.iushrn(1);for(var q=0,j=1;(p.words[0]&j)===0&&q<26;++q,j<<=1);if(q>0)for(p.iushrn(q);q-- >0;)(R.isOdd()||L.isOdd())&&(R.iadd(u),L.isub(f)),R.iushrn(1),L.iushrn(1);h.cmp(p)>=0?(h.isub(p),m.isub(R),S.isub(L)):(p.isub(h),R.isub(m),L.isub(S))}return{a:R,b:L,gcd:p.iushln(_)}},s.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var h=this,p=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var m=new s(1),S=new s(0),R=p.clone();h.cmpn(1)>0&&p.cmpn(1)>0;){for(var L=0,_=1;(h.words[0]&_)===0&&L<26;++L,_<<=1);if(L>0)for(h.iushrn(L);L-- >0;)m.isOdd()&&m.iadd(R),m.iushrn(1);for(var u=0,f=1;(p.words[0]&f)===0&&u<26;++u,f<<=1);if(u>0)for(p.iushrn(u);u-- >0;)S.isOdd()&&S.iadd(R),S.iushrn(1);h.cmp(p)>=0?(h.isub(p),m.isub(S)):(p.isub(h),S.isub(m))}var y;return h.cmpn(1)===0?y=m:y=S,y.cmpn(0)<0&&y.iadd(a),y},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var h=this.clone(),p=a.clone();h.negative=0,p.negative=0;for(var m=0;h.isEven()&&p.isEven();m++)h.iushrn(1),p.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;p.isEven();)p.iushrn(1);var S=h.cmp(p);if(S<0){var R=h;h=p,p=R}else if(S===0||p.cmpn(1)===0)break;h.isub(p)}while(!0);return p.iushln(m)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){n(typeof a=="number");var h=a%26,p=(a-h)/26,m=1<<h;if(this.length<=p)return this._expand(p+1),this.words[p]|=m,this;for(var S=m,R=p;S!==0&&R<this.length;R++){var L=this.words[R]|0;L+=S,S=L>>>26,L&=67108863,this.words[R]=L}return S!==0&&(this.words[R]=S,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var h=a<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var p;if(this.length>1)p=1;else{h&&(a=-a),n(a<=67108863,"Number is too big");var m=this.words[0]|0;p=m===a?0:m<a?-1:1}return this.negative!==0?-p|0:p},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var h=this.ucmp(a);return this.negative!==0?-h|0:h},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var h=0,p=this.length-1;p>=0;p--){var m=this.words[p]|0,S=a.words[p]|0;if(m!==S){m<S?h=-1:m>S&&(h=1);break}}return h},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new O(a)},s.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var H={k256:null,p224:null,p192:null,p25519:null};function F(b,a){this.name=b,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}F.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},F.prototype.ireduce=function(a){var h=a,p;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),p=h.bitLength();while(p>this.n);var m=p<this.n?-1:h.ucmp(this.p);return m===0?(h.words[0]=0,h.length=1):m>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},F.prototype.split=function(a,h){a.iushrn(this.n,0,h)},F.prototype.imulK=function(a){return a.imul(this.k)};function $(){F.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i($,F),$.prototype.split=function(a,h){for(var p=4194303,m=Math.min(a.length,9),S=0;S<m;S++)h.words[S]=a.words[S];if(h.length=m,a.length<=9){a.words[0]=0,a.length=1;return}var R=a.words[9];for(h.words[h.length++]=R&p,S=10;S<a.length;S++){var L=a.words[S]|0;a.words[S-10]=(L&p)<<4|R>>>22,R=L}R>>>=22,a.words[S-10]=R,R===0&&a.length>10?a.length-=10:a.length-=9},$.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var h=0,p=0;p<a.length;p++){var m=a.words[p]|0;h+=m*977,a.words[p]=h&67108863,h=m*64+(h/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function K(){F.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(K,F);function C(){F.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(C,F);function P(){F.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(P,F),P.prototype.imulK=function(a){for(var h=0,p=0;p<a.length;p++){var m=(a.words[p]|0)*19+h,S=m&67108863;m>>>=26,a.words[p]=S,h=m}return h!==0&&(a.words[a.length++]=h),a},s._prime=function(a){if(H[a])return H[a];var h;if(a==="k256")h=new $;else if(a==="p224")h=new K;else if(a==="p192")h=new C;else if(a==="p25519")h=new P;else throw new Error("Unknown prime "+a);return H[a]=h,h};function O(b){if(typeof b=="string"){var a=s._prime(b);this.m=a.p,this.prime=a}else n(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}O.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},O.prototype._verify2=function(a,h){n((a.negative|h.negative)===0,"red works only with positives"),n(a.red&&a.red===h.red,"red works only with red numbers")},O.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(g(a,a.umod(this.m)._forceRed(this)),a)},O.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},O.prototype.add=function(a,h){this._verify2(a,h);var p=a.add(h);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},O.prototype.iadd=function(a,h){this._verify2(a,h);var p=a.iadd(h);return p.cmp(this.m)>=0&&p.isub(this.m),p},O.prototype.sub=function(a,h){this._verify2(a,h);var p=a.sub(h);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},O.prototype.isub=function(a,h){this._verify2(a,h);var p=a.isub(h);return p.cmpn(0)<0&&p.iadd(this.m),p},O.prototype.shl=function(a,h){return this._verify1(a),this.imod(a.ushln(h))},O.prototype.imul=function(a,h){return this._verify2(a,h),this.imod(a.imul(h))},O.prototype.mul=function(a,h){return this._verify2(a,h),this.imod(a.mul(h))},O.prototype.isqr=function(a){return this.imul(a,a.clone())},O.prototype.sqr=function(a){return this.mul(a,a)},O.prototype.sqrt=function(a){if(a.isZero())return a.clone();var h=this.m.andln(3);if(n(h%2===1),h===3){var p=this.m.add(new s(1)).iushrn(2);return this.pow(a,p)}for(var m=this.m.subn(1),S=0;!m.isZero()&&m.andln(1)===0;)S++,m.iushrn(1);n(!m.isZero());var R=new s(1).toRed(this),L=R.redNeg(),_=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,_).cmp(L)!==0;)u.redIAdd(L);for(var f=this.pow(u,m),y=this.pow(a,m.addn(1).iushrn(1)),k=this.pow(a,m),q=S;k.cmp(R)!==0;){for(var j=k,Z=0;j.cmp(R)!==0;Z++)j=j.redSqr();n(Z<q);var et=this.pow(f,new s(1).iushln(q-Z-1));y=y.redMul(et),f=et.redSqr(),k=k.redMul(f),q=Z}return y},O.prototype.invm=function(a){var h=a._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},O.prototype.pow=function(a,h){if(h.isZero())return new s(1).toRed(this);if(h.cmpn(1)===0)return a.clone();var p=4,m=new Array(1<<p);m[0]=new s(1).toRed(this),m[1]=a;for(var S=2;S<m.length;S++)m[S]=this.mul(m[S-1],a);var R=m[0],L=0,_=0,u=h.bitLength()%26;for(u===0&&(u=26),S=h.length-1;S>=0;S--){for(var f=h.words[S],y=u-1;y>=0;y--){var k=f>>y&1;if(R!==m[0]&&(R=this.sqr(R)),k===0&&L===0){_=0;continue}L<<=1,L|=k,_++,!(_!==p&&(S!==0||y!==0))&&(R=this.mul(R,m[L]),_=0,L=0)}u=26}return R},O.prototype.convertTo=function(a){var h=a.umod(this.m);return h===a?h.clone():h},O.prototype.convertFrom=function(a){var h=a.clone();return h.red=null,h},s.mont=function(a){return new U(a)};function U(b){O.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(U,O),U.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},U.prototype.convertFrom=function(a){var h=this.imod(a.mul(this.rinv));return h.red=null,h},U.prototype.imul=function(a,h){if(a.isZero()||h.isZero())return a.words[0]=0,a.length=1,a;var p=a.imul(h),m=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=p.isub(m).iushrn(this.shift),R=S;return S.cmp(this.m)>=0?R=S.isub(this.m):S.cmpn(0)<0&&(R=S.iadd(this.m)),R._forceRed(this)},U.prototype.mul=function(a,h){if(a.isZero()||h.isZero())return new s(0)._forceRed(this);var p=a.mul(h),m=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=p.isub(m).iushrn(this.shift),R=S;return S.cmp(this.m)>=0?R=S.isub(this.m):S.cmpn(0)<0&&(R=S.iadd(this.m)),R._forceRed(this)},U.prototype.invm=function(a){var h=this.imod(a._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,jl)}(Br)),Br.exports}var Vl=Ac();const To=an(Vl);var Sr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Lo;function Gl(){return Lo||(Lo=1,function(r,e){var t=$r(),n=t.Buffer;function i(o,l){for(var c in o)l[c]=o[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=s);function s(o,l,c){return n(o,l,c)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,l,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,l,c)},s.alloc=function(o,l,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var d=n(o);return l!==void 0?typeof c=="string"?d.fill(l,c):d.fill(l):d.fill(0),d},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}}(Sr,Sr.exports)),Sr.exports}var Ns,No;function Zl(){if(No)return Ns;No=1;var r=Gl().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),l=o.charCodeAt(0);if(n[l]!==255)throw new TypeError(o+" is ambiguous");n[l]=s}var c=t.length,d=t.charAt(0),g=Math.log(c)/Math.log(256),w=Math.log(256)/Math.log(c);function E(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=r.from(x)),!r.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var v=0,T=0,N=0,B=x.length;N!==B&&x[N]===0;)N++,v++;for(var D=(B-N)*w+1>>>0,H=new Uint8Array(D);N!==B;){for(var F=x[N],$=0,K=D-1;(F!==0||$<T)&&K!==-1;K--,$++)F+=256*H[K]>>>0,H[K]=F%c>>>0,F=F/c>>>0;if(F!==0)throw new Error("Non-zero carry");T=$,N++}for(var C=D-T;C!==D&&H[C]===0;)C++;for(var P=d.repeat(v);C<D;++C)P+=t.charAt(H[C]);return P}function A(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return r.alloc(0);for(var v=0,T=0,N=0;x[v]===d;)T++,v++;for(var B=(x.length-v)*g+1>>>0,D=new Uint8Array(B);v<x.length;){var H=x.charCodeAt(v);if(H>255)return;var F=n[H];if(F===255)return;for(var $=0,K=B-1;(F!==0||$<N)&&K!==-1;K--,$++)F+=c*D[K]>>>0,D[K]=F%256>>>0,F=F/256>>>0;if(F!==0)throw new Error("Non-zero carry");N=$,v++}for(var C=B-N;C!==B&&D[C]===0;)C++;var P=r.allocUnsafe(T+(B-C));P.fill(0,0,T);for(var O=T;C!==B;)P[O++]=D[C++];return P}function I(x){var v=A(x);if(v)return v;throw new Error("Non-base"+c+" character")}return{encode:E,decodeUnsafe:A,decode:I}}return Ns=e,Ns}var Ps,Po;function xc(){if(Po)return Ps;Po=1;var r=Zl(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Ps=r(e),Ps}var Yl=xc();const pe=an(Yl),Jl=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qe=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),tn=new Uint32Array(64);class Xl extends dc{constructor(){super(64,32,8,!1),this.A=Qe[0]|0,this.B=Qe[1]|0,this.C=Qe[2]|0,this.D=Qe[3]|0,this.E=Qe[4]|0,this.F=Qe[5]|0,this.G=Qe[6]|0,this.H=Qe[7]|0}get(){const{A:e,B:t,C:n,D:i,E:s,F:o,G:l,H:c}=this;return[e,t,n,i,s,o,l,c]}set(e,t,n,i,s,o,l,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=l|0,this.H=c|0}process(e,t){for(let w=0;w<16;w++,t+=4)tn[w]=e.getUint32(t,!1);for(let w=16;w<64;w++){const E=tn[w-15],A=tn[w-2],I=Ue(E,7)^Ue(E,18)^E>>>3,x=Ue(A,17)^Ue(A,19)^A>>>10;tn[w]=x+tn[w-7]+I+tn[w-16]|0}let{A:n,B:i,C:s,D:o,E:l,F:c,G:d,H:g}=this;for(let w=0;w<64;w++){const E=Ue(l,6)^Ue(l,11)^Ue(l,25),A=g+E+Fu(l,c,d)+Jl[w]+tn[w]|0,x=(Ue(n,2)^Ue(n,13)^Ue(n,22))+Du(n,i,s)|0;g=d,d=c,c=l,l=o+A|0,o=s,s=i,i=n,n=A+x|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,l=l+this.E|0,c=c+this.F|0,d=d+this.G|0,g=g+this.H|0,this.set(n,i,s,o,l,c,d,g)}roundClean(){tn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ni=fc(()=>new Xl);var mt={};function He(r,e,t){return e<=r&&r<=t}function Jr(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function Ql(r){for(var e=String(r),t=e.length,n=0,i=[];n<t;){var s=e.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===t-1)i.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var l=s&1023,c=o&1023;i.push(65536+(l<<10)+c),n+=1}else i.push(65533)}n+=1}return i}function tf(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var Nr=-1;function Ji(r){this.tokens=[].slice.call(r)}Ji.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Nr},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var Dn=-1;function Os(r,e){if(r)throw TypeError("Decoder error");return e||65533}var Pr="utf-8";function Or(r,e){if(!(this instanceof Or))return new Or(r,e);if(r=r!==void 0?String(r).toLowerCase():Pr,r!==Pr)throw new Error("Encoding not supported. Only utf-8 is supported");e=Jr(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Or.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=Jr(t),this._streaming||(this._decoder=new ef({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new Ji(n),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==Dn);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===Dn)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),tf(s)}};function Ur(r,e){if(!(this instanceof Ur))return new Ur(r,e);if(r=r!==void 0?String(r).toLowerCase():Pr,r!==Pr)throw new Error("Encoding not supported. Only utf-8 is supported");e=Jr(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Ur.prototype={encode:function(e,t){e=e?String(e):"",t=Jr(t),this._streaming||(this._encoder=new nf(this._options)),this._streaming=!!t.stream;for(var n=[],i=new Ji(Ql(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Dn);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Dn;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function ef(r){var e=r.fatal,t=0,n=0,i=0,s=128,o=191;this.handler=function(l,c){if(c===Nr&&i!==0)return i=0,Os(e);if(c===Nr)return Dn;if(i===0){if(He(c,0,127))return c;if(He(c,194,223))i=1,t=c-192;else if(He(c,224,239))c===224&&(s=160),c===237&&(o=159),i=2,t=c-224;else if(He(c,240,244))c===240&&(s=144),c===244&&(o=143),i=3,t=c-240;else return Os(e);return t=t<<6*i,null}if(!He(c,s,o))return t=i=n=0,s=128,o=191,l.prepend(c),Os(e);if(s=128,o=191,n+=1,t+=c-128<<6*(i-n),n!==i)return null;var d=t;return t=i=n=0,d}}function nf(r){r.fatal,this.handler=function(e,t){if(t===Nr)return Dn;if(He(t,0,127))return t;var n,i;He(t,128,2047)?(n=1,i=192):He(t,2048,65535)?(n=2,i=224):He(t,65536,1114111)&&(n=3,i=240);for(var s=[(t>>6*n)+i];n>0;){var o=t>>6*(n-1);s.push(128|o&63),n-=1}return s}}const rf=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Or,TextEncoder:Ur},Symbol.toStringTag,{value:"Module"})),sf=rc(rf);var Oo;function of(){if(Oo)return mt;Oo=1;var r=mt&&mt.__createBinding||(Object.create?function(C,P,O,U){U===void 0&&(U=O),Object.defineProperty(C,U,{enumerable:!0,get:function(){return P[O]}})}:function(C,P,O,U){U===void 0&&(U=O),C[U]=P[O]}),e=mt&&mt.__setModuleDefault||(Object.create?function(C,P){Object.defineProperty(C,"default",{enumerable:!0,value:P})}:function(C,P){C.default=P}),t=mt&&mt.__decorate||function(C,P,O,U){var b=arguments.length,a=b<3?P:U===null?U=Object.getOwnPropertyDescriptor(P,O):U,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(C,P,O,U);else for(var p=C.length-1;p>=0;p--)(h=C[p])&&(a=(b<3?h(a):b>3?h(P,O,a):h(P,O))||a);return b>3&&a&&Object.defineProperty(P,O,a),a},n=mt&&mt.__importStar||function(C){if(C&&C.__esModule)return C;var P={};if(C!=null)for(var O in C)O!=="default"&&Object.hasOwnProperty.call(C,O)&&r(P,C,O);return e(P,C),P},i=mt&&mt.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(mt,"__esModule",{value:!0}),mt.deserializeUnchecked=mt.deserialize=mt.serialize=mt.BinaryReader=mt.BinaryWriter=mt.BorshError=mt.baseDecode=mt.baseEncode=void 0;const s=i(Ac()),o=i(xc()),l=n(sf),c=typeof TextDecoder!="function"?l.TextDecoder:TextDecoder,d=new c("utf-8",{fatal:!0});function g(C){return typeof C=="string"&&(C=Buffer.from(C,"utf8")),o.default.encode(Buffer.from(C))}mt.baseEncode=g;function w(C){return Buffer.from(o.default.decode(C))}mt.baseDecode=w;const E=1024;class A extends Error{constructor(P){super(P),this.fieldPath=[],this.originalMessage=P}addToFieldPath(P){this.fieldPath.splice(0,0,P),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}mt.BorshError=A;class I{constructor(){this.buf=Buffer.alloc(E),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(E)]))}writeU8(P){this.maybeResize(),this.buf.writeUInt8(P,this.length),this.length+=1}writeU16(P){this.maybeResize(),this.buf.writeUInt16LE(P,this.length),this.length+=2}writeU32(P){this.maybeResize(),this.buf.writeUInt32LE(P,this.length),this.length+=4}writeU64(P){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(P).toArray("le",8)))}writeU128(P){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(P).toArray("le",16)))}writeU256(P){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(P).toArray("le",32)))}writeU512(P){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(P).toArray("le",64)))}writeBuffer(P){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),P,Buffer.alloc(E)]),this.length+=P.length}writeString(P){this.maybeResize();const O=Buffer.from(P,"utf8");this.writeU32(O.length),this.writeBuffer(O)}writeFixedArray(P){this.writeBuffer(Buffer.from(P))}writeArray(P,O){this.maybeResize(),this.writeU32(P.length);for(const U of P)this.maybeResize(),O(U)}toArray(){return this.buf.subarray(0,this.length)}}mt.BinaryWriter=I;function x(C,P,O){const U=O.value;O.value=function(...b){try{return U.apply(this,b)}catch(a){if(a instanceof RangeError){const h=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(h)>=0)throw new A("Reached the end of buffer when deserializing")}throw a}}}class v{constructor(P){this.buf=P,this.offset=0}readU8(){const P=this.buf.readUInt8(this.offset);return this.offset+=1,P}readU16(){const P=this.buf.readUInt16LE(this.offset);return this.offset+=2,P}readU32(){const P=this.buf.readUInt32LE(this.offset);return this.offset+=4,P}readU64(){const P=this.readBuffer(8);return new s.default(P,"le")}readU128(){const P=this.readBuffer(16);return new s.default(P,"le")}readU256(){const P=this.readBuffer(32);return new s.default(P,"le")}readU512(){const P=this.readBuffer(64);return new s.default(P,"le")}readBuffer(P){if(this.offset+P>this.buf.length)throw new A(`Expected buffer length ${P} isn't within bounds`);const O=this.buf.slice(this.offset,this.offset+P);return this.offset+=P,O}readString(){const P=this.readU32(),O=this.readBuffer(P);try{return d.decode(O)}catch(U){throw new A(`Error decoding UTF-8 string: ${U}`)}}readFixedArray(P){return new Uint8Array(this.readBuffer(P))}readArray(P){const O=this.readU32(),U=Array();for(let b=0;b<O;++b)U.push(P());return U}}t([x],v.prototype,"readU8",null),t([x],v.prototype,"readU16",null),t([x],v.prototype,"readU32",null),t([x],v.prototype,"readU64",null),t([x],v.prototype,"readU128",null),t([x],v.prototype,"readU256",null),t([x],v.prototype,"readU512",null),t([x],v.prototype,"readString",null),t([x],v.prototype,"readFixedArray",null),t([x],v.prototype,"readArray",null),mt.BinaryReader=v;function T(C){return C.charAt(0).toUpperCase()+C.slice(1)}function N(C,P,O,U,b){try{if(typeof U=="string")b[`write${T(U)}`](O);else if(U instanceof Array)if(typeof U[0]=="number"){if(O.length!==U[0])throw new A(`Expecting byte array of length ${U[0]}, but got ${O.length} bytes`);b.writeFixedArray(O)}else if(U.length===2&&typeof U[1]=="number"){if(O.length!==U[1])throw new A(`Expecting byte array of length ${U[1]}, but got ${O.length} bytes`);for(let a=0;a<U[1];a++)N(C,null,O[a],U[0],b)}else b.writeArray(O,a=>{N(C,P,a,U[0],b)});else if(U.kind!==void 0)switch(U.kind){case"option":{O==null?b.writeU8(0):(b.writeU8(1),N(C,P,O,U.type,b));break}case"map":{b.writeU32(O.size),O.forEach((a,h)=>{N(C,P,h,U.key,b),N(C,P,a,U.value,b)});break}default:throw new A(`FieldType ${U} unrecognized`)}else B(C,O,b)}catch(a){throw a instanceof A&&a.addToFieldPath(P),a}}function B(C,P,O){if(typeof P.borshSerialize=="function"){P.borshSerialize(O);return}const U=C.get(P.constructor);if(!U)throw new A(`Class ${P.constructor.name} is missing in schema`);if(U.kind==="struct")U.fields.map(([b,a])=>{N(C,b,P[b],a,O)});else if(U.kind==="enum"){const b=P[U.field];for(let a=0;a<U.values.length;++a){const[h,p]=U.values[a];if(h===b){O.writeU8(a),N(C,h,P[h],p,O);break}}}else throw new A(`Unexpected schema kind: ${U.kind} for ${P.constructor.name}`)}function D(C,P,O=I){const U=new O;return B(C,P,U),U.toArray()}mt.serialize=D;function H(C,P,O,U){try{if(typeof O=="string")return U[`read${T(O)}`]();if(O instanceof Array){if(typeof O[0]=="number")return U.readFixedArray(O[0]);if(typeof O[1]=="number"){const b=[];for(let a=0;a<O[1];a++)b.push(H(C,null,O[0],U));return b}else return U.readArray(()=>H(C,P,O[0],U))}if(O.kind==="option")return U.readU8()?H(C,P,O.type,U):void 0;if(O.kind==="map"){let b=new Map;const a=U.readU32();for(let h=0;h<a;h++){const p=H(C,P,O.key,U),m=H(C,P,O.value,U);b.set(p,m)}return b}return F(C,O,U)}catch(b){throw b instanceof A&&b.addToFieldPath(P),b}}function F(C,P,O){if(typeof P.borshDeserialize=="function")return P.borshDeserialize(O);const U=C.get(P);if(!U)throw new A(`Class ${P.name} is missing in schema`);if(U.kind==="struct"){const b={};for(const[a,h]of C.get(P).fields)b[a]=H(C,a,h,O);return new P(b)}if(U.kind==="enum"){const b=O.readU8();if(b>=U.values.length)throw new A(`Enum index: ${b} is out of range`);const[a,h]=U.values[b],p=H(C,a,h,O);return new P({[a]:p})}throw new A(`Unexpected schema kind: ${U.kind} for ${P.constructor.name}`)}function $(C,P,O,U=v){const b=new U(O),a=F(C,P,b);if(b.offset<O.length)throw new A(`Unexpected ${O.length-b.offset} bytes after deserialized data`);return a}mt.deserialize=$;function K(C,P,O,U=v){const b=new U(O);return F(C,P,b)}return mt.deserializeUnchecked=K,mt}var Us=of(),W={},Uo;function af(){if(Uo)return W;Uo=1,Object.defineProperty(W,"__esModule",{value:!0}),W.s16=W.s8=W.nu64be=W.u48be=W.u40be=W.u32be=W.u24be=W.u16be=W.nu64=W.u48=W.u40=W.u32=W.u24=W.u16=W.u8=W.offset=W.greedy=W.Constant=W.UTF8=W.CString=W.Blob=W.Boolean=W.BitField=W.BitStructure=W.VariantLayout=W.Union=W.UnionLayoutDiscriminator=W.UnionDiscriminator=W.Structure=W.Sequence=W.DoubleBE=W.Double=W.FloatBE=W.Float=W.NearInt64BE=W.NearInt64=W.NearUInt64BE=W.NearUInt64=W.IntBE=W.Int=W.UIntBE=W.UInt=W.OffsetLayout=W.GreedyCount=W.ExternalLayout=W.bindConstructorLayout=W.nameWithProperty=W.Layout=W.uint8ArrayToBuffer=W.checkUint8Array=void 0,W.constant=W.utf8=W.cstr=W.blob=W.unionLayoutDiscriminator=W.union=W.seq=W.bits=W.struct=W.f64be=W.f64=W.f32be=W.f32=W.ns64be=W.s48be=W.s40be=W.s32be=W.s24be=W.s16be=W.ns64=W.s48=W.s40=W.s32=W.s24=void 0;const r=$r();function e(u){if(!(u instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}W.checkUint8Array=e;function t(u){return e(u),r.Buffer.from(u.buffer,u.byteOffset,u.length)}W.uint8ArrayToBuffer=t;let n=class{constructor(f,y){if(!Number.isInteger(f))throw new TypeError("span must be an integer");this.span=f,this.property=y}makeDestinationObject(){return{}}getSpan(f,y){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(f){const y=Object.create(this.constructor.prototype);return Object.assign(y,this),y.property=f,y}fromArray(f){}};W.Layout=n;function i(u,f){return f.property?u+"["+f.property+"]":u}W.nameWithProperty=i;function s(u,f){if(typeof u!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(u,"layout_"))throw new Error("Class is already bound to a layout");if(!(f&&f instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(f,"boundConstructor_"))throw new Error("layout is already bound to a constructor");u.layout_=f,f.boundConstructor_=u,f.makeDestinationObject=()=>new u,Object.defineProperty(u.prototype,"encode",{value(y,k){return f.encode(this,y,k)},writable:!0}),Object.defineProperty(u,"decode",{value(y,k){return f.decode(y,k)},writable:!0})}W.bindConstructorLayout=s;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}W.ExternalLayout=o;class l extends o{constructor(f=1,y){if(!Number.isInteger(f)||0>=f)throw new TypeError("elementSpan must be a (positive) integer");super(-1,y),this.elementSpan=f}isCount(){return!0}decode(f,y=0){e(f);const k=f.length-y;return Math.floor(k/this.elementSpan)}encode(f,y,k){return 0}}W.GreedyCount=l;class c extends o{constructor(f,y=0,k){if(!(f instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(y))throw new TypeError("offset must be integer or undefined");super(f.span,k||f.property),this.layout=f,this.offset=y}isCount(){return this.layout instanceof d||this.layout instanceof g}decode(f,y=0){return this.layout.decode(f,y+this.offset)}encode(f,y,k=0){return this.layout.encode(f,y,k+this.offset)}}W.OffsetLayout=c;class d extends n{constructor(f,y){if(super(f,y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,y=0){return t(f).readUIntLE(y,this.span)}encode(f,y,k=0){return t(y).writeUIntLE(f,k,this.span),this.span}}W.UInt=d;class g extends n{constructor(f,y){if(super(f,y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,y=0){return t(f).readUIntBE(y,this.span)}encode(f,y,k=0){return t(y).writeUIntBE(f,k,this.span),this.span}}W.UIntBE=g;class w extends n{constructor(f,y){if(super(f,y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,y=0){return t(f).readIntLE(y,this.span)}encode(f,y,k=0){return t(y).writeIntLE(f,k,this.span),this.span}}W.Int=w;class E extends n{constructor(f,y){if(super(f,y),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,y=0){return t(f).readIntBE(y,this.span)}encode(f,y,k=0){return t(y).writeIntBE(f,k,this.span),this.span}}W.IntBE=E;const A=Math.pow(2,32);function I(u){const f=Math.floor(u/A),y=u-f*A;return{hi32:f,lo32:y}}function x(u,f){return u*A+f}class v extends n{constructor(f){super(8,f)}decode(f,y=0){const k=t(f),q=k.readUInt32LE(y),j=k.readUInt32LE(y+4);return x(j,q)}encode(f,y,k=0){const q=I(f),j=t(y);return j.writeUInt32LE(q.lo32,k),j.writeUInt32LE(q.hi32,k+4),8}}W.NearUInt64=v;class T extends n{constructor(f){super(8,f)}decode(f,y=0){const k=t(f),q=k.readUInt32BE(y),j=k.readUInt32BE(y+4);return x(q,j)}encode(f,y,k=0){const q=I(f),j=t(y);return j.writeUInt32BE(q.hi32,k),j.writeUInt32BE(q.lo32,k+4),8}}W.NearUInt64BE=T;class N extends n{constructor(f){super(8,f)}decode(f,y=0){const k=t(f),q=k.readUInt32LE(y),j=k.readInt32LE(y+4);return x(j,q)}encode(f,y,k=0){const q=I(f),j=t(y);return j.writeUInt32LE(q.lo32,k),j.writeInt32LE(q.hi32,k+4),8}}W.NearInt64=N;class B extends n{constructor(f){super(8,f)}decode(f,y=0){const k=t(f),q=k.readInt32BE(y),j=k.readUInt32BE(y+4);return x(q,j)}encode(f,y,k=0){const q=I(f),j=t(y);return j.writeInt32BE(q.hi32,k),j.writeUInt32BE(q.lo32,k+4),8}}W.NearInt64BE=B;class D extends n{constructor(f){super(4,f)}decode(f,y=0){return t(f).readFloatLE(y)}encode(f,y,k=0){return t(y).writeFloatLE(f,k),4}}W.Float=D;class H extends n{constructor(f){super(4,f)}decode(f,y=0){return t(f).readFloatBE(y)}encode(f,y,k=0){return t(y).writeFloatBE(f,k),4}}W.FloatBE=H;class F extends n{constructor(f){super(8,f)}decode(f,y=0){return t(f).readDoubleLE(y)}encode(f,y,k=0){return t(y).writeDoubleLE(f,k),8}}W.Double=F;class $ extends n{constructor(f){super(8,f)}decode(f,y=0){return t(f).readDoubleBE(y)}encode(f,y,k=0){return t(y).writeDoubleBE(f,k),8}}W.DoubleBE=$;class K extends n{constructor(f,y,k){if(!(f instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(y instanceof o&&y.isCount()||Number.isInteger(y)&&0<=y))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let q=-1;!(y instanceof o)&&0<f.span&&(q=y*f.span),super(q,k),this.elementLayout=f,this.count=y}getSpan(f,y=0){if(0<=this.span)return this.span;let k=0,q=this.count;if(q instanceof o&&(q=q.decode(f,y)),0<this.elementLayout.span)k=q*this.elementLayout.span;else{let j=0;for(;j<q;)k+=this.elementLayout.getSpan(f,y+k),++j}return k}decode(f,y=0){const k=[];let q=0,j=this.count;for(j instanceof o&&(j=j.decode(f,y));q<j;)k.push(this.elementLayout.decode(f,y)),y+=this.elementLayout.getSpan(f,y),q+=1;return k}encode(f,y,k=0){const q=this.elementLayout,j=f.reduce((Z,et)=>Z+q.encode(et,y,k+Z),0);return this.count instanceof o&&this.count.encode(f.length,y,k),j}}W.Sequence=K;class C extends n{constructor(f,y,k){if(!(Array.isArray(f)&&f.reduce((j,Z)=>j&&Z instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof y=="boolean"&&k===void 0&&(k=y,y=void 0);for(const j of f)if(0>j.span&&j.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let q=-1;try{q=f.reduce((j,Z)=>j+Z.getSpan(),0)}catch{}super(q,y),this.fields=f,this.decodePrefixes=!!k}getSpan(f,y=0){if(0<=this.span)return this.span;let k=0;try{k=this.fields.reduce((q,j)=>{const Z=j.getSpan(f,y);return y+=Z,q+Z},0)}catch{throw new RangeError("indeterminate span")}return k}decode(f,y=0){e(f);const k=this.makeDestinationObject();for(const q of this.fields)if(q.property!==void 0&&(k[q.property]=q.decode(f,y)),y+=q.getSpan(f,y),this.decodePrefixes&&f.length===y)break;return k}encode(f,y,k=0){const q=k;let j=0,Z=0;for(const et of this.fields){let ht=et.span;if(Z=0<ht?ht:0,et.property!==void 0){const ut=f[et.property];ut!==void 0&&(Z=et.encode(ut,y,k),0>ht&&(ht=et.getSpan(y,k)))}j=k,k+=ht}return j+Z-q}fromArray(f){const y=this.makeDestinationObject();for(const k of this.fields)k.property!==void 0&&0<f.length&&(y[k.property]=f.shift());return y}layoutFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const y of this.fields)if(y.property===f)return y}offsetOf(f){if(typeof f!="string")throw new TypeError("property must be string");let y=0;for(const k of this.fields){if(k.property===f)return y;0>k.span?y=-1:0<=y&&(y+=k.span)}}}W.Structure=C;class P{constructor(f){this.property=f}decode(f,y){throw new Error("UnionDiscriminator is abstract")}encode(f,y,k){throw new Error("UnionDiscriminator is abstract")}}W.UnionDiscriminator=P;class O extends P{constructor(f,y){if(!(f instanceof o&&f.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(y||f.property||"variant"),this.layout=f}decode(f,y){return this.layout.decode(f,y)}encode(f,y,k){return this.layout.encode(f,y,k)}}W.UnionLayoutDiscriminator=O;class U extends n{constructor(f,y,k){let q;if(f instanceof d||f instanceof g)q=new O(new c(f));else if(f instanceof o&&f.isCount())q=new O(f);else if(f instanceof P)q=f;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(y===void 0&&(y=null),!(y===null||y instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(y!==null){if(0>y.span)throw new Error("defaultLayout must have constant span");y.property===void 0&&(y=y.replicate("content"))}let j=-1;y&&(j=y.span,0<=j&&(f instanceof d||f instanceof g)&&(j+=q.layout.span)),super(j,k),this.discriminator=q,this.usesPrefixDiscriminator=f instanceof d||f instanceof g,this.defaultLayout=y,this.registry={};let Z=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(et){return Z(et)},this.configGetSourceVariant=function(et){Z=et.bind(this)}}getSpan(f,y=0){if(0<=this.span)return this.span;const k=this.getVariant(f,y);if(!k)throw new Error("unable to determine span for unrecognized variant");return k.getSpan(f,y)}defaultGetSourceVariant(f){if(Object.prototype.hasOwnProperty.call(f,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(f,this.defaultLayout.property))return;const y=this.registry[f[this.discriminator.property]];if(y&&(!y.layout||y.property&&Object.prototype.hasOwnProperty.call(f,y.property)))return y}else for(const y in this.registry){const k=this.registry[y];if(k.property&&Object.prototype.hasOwnProperty.call(f,k.property))return k}throw new Error("unable to infer src variant")}decode(f,y=0){let k;const q=this.discriminator,j=q.decode(f,y),Z=this.registry[j];if(Z===void 0){const et=this.defaultLayout;let ht=0;this.usesPrefixDiscriminator&&(ht=q.layout.span),k=this.makeDestinationObject(),k[q.property]=j,k[et.property]=et.decode(f,y+ht)}else k=Z.decode(f,y);return k}encode(f,y,k=0){const q=this.getSourceVariant(f);if(q===void 0){const j=this.discriminator,Z=this.defaultLayout;let et=0;return this.usesPrefixDiscriminator&&(et=j.layout.span),j.encode(f[j.property],y,k),et+Z.encode(f[Z.property],y,k+et)}return q.encode(f,y,k)}addVariant(f,y,k){const q=new b(this,f,y,k);return this.registry[f]=q,q}getVariant(f,y=0){let k;return f instanceof Uint8Array?k=this.discriminator.decode(f,y):k=f,this.registry[k]}}W.Union=U;class b extends n{constructor(f,y,k,q){if(!(f instanceof U))throw new TypeError("union must be a Union");if(!Number.isInteger(y)||0>y)throw new TypeError("variant must be a (non-negative) integer");if(typeof k=="string"&&q===void 0&&(q=k,k=null),k){if(!(k instanceof n))throw new TypeError("layout must be a Layout");if(f.defaultLayout!==null&&0<=k.span&&k.span>f.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof q!="string")throw new TypeError("variant must have a String property")}let j=f.span;0>f.span&&(j=k?k.span:0,0<=j&&f.usesPrefixDiscriminator&&(j+=f.discriminator.layout.span)),super(j,q),this.union=f,this.variant=y,this.layout=k||null}getSpan(f,y=0){if(0<=this.span)return this.span;let k=0;this.union.usesPrefixDiscriminator&&(k=this.union.discriminator.layout.span);let q=0;return this.layout&&(q=this.layout.getSpan(f,y+k)),k+q}decode(f,y=0){const k=this.makeDestinationObject();if(this!==this.union.getVariant(f,y))throw new Error("variant mismatch");let q=0;return this.union.usesPrefixDiscriminator&&(q=this.union.discriminator.layout.span),this.layout?k[this.property]=this.layout.decode(f,y+q):this.property?k[this.property]=!0:this.union.usesPrefixDiscriminator&&(k[this.union.discriminator.property]=this.variant),k}encode(f,y,k=0){let q=0;if(this.union.usesPrefixDiscriminator&&(q=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(f,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,y,k);let j=q;if(this.layout&&(this.layout.encode(f[this.property],y,k+q),j+=this.layout.getSpan(y,k+q),0<=this.union.span&&j>this.union.span))throw new Error("encoded variant overruns containing union");return j}fromArray(f){if(this.layout)return this.layout.fromArray(f)}}W.VariantLayout=b;function a(u){return 0>u&&(u+=4294967296),u}class h extends n{constructor(f,y,k){if(!(f instanceof d||f instanceof g))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof y=="string"&&k===void 0&&(k=y,y=!1),4<f.span)throw new RangeError("word cannot exceed 32 bits");super(f.span,k),this.word=f,this.msb=!!y,this.fields=[];let q=0;this._packedSetValue=function(j){return q=a(j),this},this._packedGetValue=function(){return q}}decode(f,y=0){const k=this.makeDestinationObject(),q=this.word.decode(f,y);this._packedSetValue(q);for(const j of this.fields)j.property!==void 0&&(k[j.property]=j.decode(f));return k}encode(f,y,k=0){const q=this.word.decode(y,k);this._packedSetValue(q);for(const j of this.fields)if(j.property!==void 0){const Z=f[j.property];Z!==void 0&&j.encode(Z)}return this.word.encode(this._packedGetValue(),y,k)}addField(f,y){const k=new p(this,f,y);return this.fields.push(k),k}addBoolean(f){const y=new m(this,f);return this.fields.push(y),y}fieldFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const y of this.fields)if(y.property===f)return y}}W.BitStructure=h;class p{constructor(f,y,k){if(!(f instanceof h))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(y)||0>=y)throw new TypeError("bits must be positive integer");const q=8*f.span,j=f.fields.reduce((Z,et)=>Z+et.bits,0);if(y+j>q)throw new Error("bits too long for span remainder ("+(q-j)+" of "+q+" remain)");this.container=f,this.bits=y,this.valueMask=(1<<y)-1,y===32&&(this.valueMask=4294967295),this.start=j,this.container.msb&&(this.start=q-j-y),this.wordMask=a(this.valueMask<<this.start),this.property=k}decode(f,y){const k=this.container._packedGetValue();return a(k&this.wordMask)>>>this.start}encode(f){if(typeof f!="number"||!Number.isInteger(f)||f!==a(f&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const y=this.container._packedGetValue(),k=a(f<<this.start);this.container._packedSetValue(a(y&~this.wordMask)|k)}}W.BitField=p;class m extends p{constructor(f,y){super(f,1,y)}decode(f,y){return!!super.decode(f,y)}encode(f){typeof f=="boolean"&&(f=+f),super.encode(f)}}W.Boolean=m;class S extends n{constructor(f,y){if(!(f instanceof o&&f.isCount()||Number.isInteger(f)&&0<=f))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let k=-1;f instanceof o||(k=f),super(k,y),this.length=f}getSpan(f,y){let k=this.span;return 0>k&&(k=this.length.decode(f,y)),k}decode(f,y=0){let k=this.span;return 0>k&&(k=this.length.decode(f,y)),t(f).slice(y,y+k)}encode(f,y,k){let q=this.length;if(this.length instanceof o&&(q=f.length),!(f instanceof Uint8Array&&q===f.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+q+") Uint8Array as src");if(k+q>y.length)throw new RangeError("encoding overruns Uint8Array");const j=t(f);return t(y).write(j.toString("hex"),k,q,"hex"),this.length instanceof o&&this.length.encode(q,y,k),q}}W.Blob=S;class R extends n{constructor(f){super(-1,f)}getSpan(f,y=0){e(f);let k=y;for(;k<f.length&&f[k]!==0;)k+=1;return 1+k-y}decode(f,y=0){const k=this.getSpan(f,y);return t(f).slice(y,y+k-1).toString("utf-8")}encode(f,y,k=0){typeof f!="string"&&(f=String(f));const q=r.Buffer.from(f,"utf8"),j=q.length;if(k+j>y.length)throw new RangeError("encoding overruns Buffer");const Z=t(y);return q.copy(Z,k),Z[k+j]=0,j+1}}W.CString=R;class L extends n{constructor(f,y){if(typeof f=="string"&&y===void 0&&(y=f,f=void 0),f===void 0)f=-1;else if(!Number.isInteger(f))throw new TypeError("maxSpan must be an integer");super(-1,y),this.maxSpan=f}getSpan(f,y=0){return e(f),f.length-y}decode(f,y=0){const k=this.getSpan(f,y);if(0<=this.maxSpan&&this.maxSpan<k)throw new RangeError("text length exceeds maxSpan");return t(f).slice(y,y+k).toString("utf-8")}encode(f,y,k=0){typeof f!="string"&&(f=String(f));const q=r.Buffer.from(f,"utf8"),j=q.length;if(0<=this.maxSpan&&this.maxSpan<j)throw new RangeError("text length exceeds maxSpan");if(k+j>y.length)throw new RangeError("encoding overruns Buffer");return q.copy(t(y),k),j}}W.UTF8=L;class _ extends n{constructor(f,y){super(0,y),this.value=f}decode(f,y){return this.value}encode(f,y,k){return 0}}return W.Constant=_,W.greedy=(u,f)=>new l(u,f),W.offset=(u,f,y)=>new c(u,f,y),W.u8=u=>new d(1,u),W.u16=u=>new d(2,u),W.u24=u=>new d(3,u),W.u32=u=>new d(4,u),W.u40=u=>new d(5,u),W.u48=u=>new d(6,u),W.nu64=u=>new v(u),W.u16be=u=>new g(2,u),W.u24be=u=>new g(3,u),W.u32be=u=>new g(4,u),W.u40be=u=>new g(5,u),W.u48be=u=>new g(6,u),W.nu64be=u=>new T(u),W.s8=u=>new w(1,u),W.s16=u=>new w(2,u),W.s24=u=>new w(3,u),W.s32=u=>new w(4,u),W.s40=u=>new w(5,u),W.s48=u=>new w(6,u),W.ns64=u=>new N(u),W.s16be=u=>new E(2,u),W.s24be=u=>new E(3,u),W.s32be=u=>new E(4,u),W.s40be=u=>new E(5,u),W.s48be=u=>new E(6,u),W.ns64be=u=>new B(u),W.f32=u=>new D(u),W.f32be=u=>new H(u),W.f64=u=>new F(u),W.f64be=u=>new $(u),W.struct=(u,f,y)=>new C(u,f,y),W.bits=(u,f,y)=>new h(u,f,y),W.seq=(u,f,y)=>new K(u,f,y),W.union=(u,f,y)=>new U(u,f,y),W.unionLayoutDiscriminator=(u,f)=>new O(u,f),W.blob=(u,f)=>new S(u,f),W.cstr=u=>new R(u),W.utf8=(u,f)=>new L(u,f),W.constant=(u,f)=>new _(u,f),W}var M=af(),cn={},qo;function cf(){if(qo)return cn;qo=1,Object.defineProperty(cn,"__esModule",{value:!0});function r(i){{const s=Buffer.from(i);s.reverse();const o=s.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}cn.toBigIntLE=r;function e(i){{const s=i.toString("hex");return s.length===0?BigInt(0):BigInt(`0x${s}`)}}cn.toBigIntBE=e;function t(i,s){{const o=i.toString(16),l=Buffer.from(o.padStart(s*2,"0").slice(0,s*2),"hex");return l.reverse(),l}}cn.toBufferLE=t;function n(i,s){{const o=i.toString(16);return Buffer.from(o.padStart(s*2,"0").slice(0,s*2),"hex")}}return cn.toBufferBE=n,cn}var Fo=cf();class uf extends TypeError{constructor(e,t){let n;const{message:i,explanation:s,...o}=e,{path:l}=e,c=l.length===0?i:`At path: ${l.join(".")} -- ${i}`;super(s??c),s!=null&&(this.cause=c),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function lf(r){return fr(r)&&typeof r[Symbol.iterator]=="function"}function fr(r){return typeof r=="object"&&r!=null}function qr(r){return fr(r)&&!Array.isArray(r)}function Oe(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function ff(r){const{done:e,value:t}=r.next();return e?void 0:t}function hf(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=e,{type:o}=t,{refinement:l,message:c=`Expected a value of type \`${o}\`${l?` with refinement \`${l}\``:""}, but received: \`${Oe(n)}\``}=r;return{value:n,type:o,refinement:l,key:i[i.length-1],path:i,branch:s,...r,message:c}}function*Do(r,e,t,n){lf(r)||(r=[r]);for(const i of r){const s=hf(i,e,t,n);s&&(yield s)}}function*Xi(r,e,t={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:o=!1}=t,l={path:n,branch:i,mask:o};s&&(r=e.coercer(r,l));let c="valid";for(const d of e.validator(r,l))d.explanation=t.message,c="not_valid",yield[d,void 0];for(let[d,g,w]of e.entries(r,l)){const E=Xi(g,w,{path:d===void 0?n:[...n,d],branch:d===void 0?i:[...i,g],coerce:s,mask:o,message:t.message});for(const A of E)A[0]?(c=A[0].refinement!=null?"not_refined":"not_valid",yield[A[0],void 0]):s&&(g=A[1],d===void 0?r=g:r instanceof Map?r.set(d,g):r instanceof Set?r.add(g):fr(r)&&(g!==void 0||d in r)&&(r[d]=g))}if(c!=="not_valid")for(const d of e.refiner(r,l))d.explanation=t.message,c="not_refined",yield[d,void 0];c==="valid"&&(yield[void 0,r])}let ze=class{constructor(e){const{type:t,schema:n,validator:i,refiner:s,coercer:o=c=>c,entries:l=function*(){}}=e;this.type=t,this.schema=n,this.entries=l,this.coercer=o,i?this.validator=(c,d)=>{const g=i(c,d);return Do(g,d,this,c)}:this.validator=()=>[],s?this.refiner=(c,d)=>{const g=s(c,d);return Do(g,d,this,c)}:this.refiner=()=>[]}assert(e,t){return df(e,this,t)}create(e,t){return J(e,this,t)}is(e){return Bc(e,this)}mask(e,t){return gf(e,this,t)}validate(e,t={}){return hr(e,this,t)}};function df(r,e,t){const n=hr(r,e,{message:t});if(n[0])throw n[0]}function J(r,e,t){const n=hr(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function gf(r,e,t){const n=hr(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function Bc(r,e){return!hr(r,e)[0]}function hr(r,e,t={}){const n=Xi(r,e,t),i=ff(n);return i[0]?[new uf(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function Sn(r,e){return new ze({type:r,schema:null,validator:e})}function pf(){return Sn("any",()=>!0)}function Q(r){return new ze({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Oe(e)}`}})}function De(){return Sn("boolean",r=>typeof r=="boolean")}function Qi(r){return Sn("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${Oe(e)}`)}function It(r){const e=Oe(r),t=typeof r;return new ze({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${Oe(n)}`}})}function mf(){return Sn("never",()=>!1)}function tt(r){return new ze({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function z(){return Sn("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${Oe(r)}`)}function st(r){return new ze({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function kc(r,e){return new ze({type:"record",schema:null,*entries(t){if(fr(t))for(const n in t){const i=t[n];yield[n,n,r],yield[n,i,e]}},validator(t){return qr(t)||`Expected an object, but received: ${Oe(t)}`},coercer(t){return qr(t)?{...t}:t}})}function Y(){return Sn("string",r=>typeof r=="string"||`Expected a string, but received: ${Oe(r)}`)}function to(r){const e=mf();return new ze({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let i=0;i<n;i++)yield[i,t[i],r[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${Oe(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function V(r){const e=Object.keys(r);return new ze({type:"type",schema:r,*entries(t){if(fr(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return qr(t)||`Expected an object, but received: ${Oe(t)}`},coercer(t){return qr(t)?{...t}:t}})}function Se(r){const e=r.map(t=>t.type).join(" | ");return new ze({type:"union",schema:null,coercer(t,n){for(const i of r){const[s,o]=i.validate(t,{coerce:!0,mask:n.mask});if(!s)return o}return t},validator(t,n){const i=[];for(const s of r){const[...o]=Xi(t,s,n),[l]=o;if(l[0])for(const[c]of o)c&&i.push(c);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Oe(t)}`,...i]}})}function Kn(){return Sn("unknown",()=>!0)}function dr(r,e,t){return new ze({...r,coercer:(n,i)=>Bc(n,e)?r.coercer(t(n,i),i):r.coercer(n,i)})}var Er,wf=new Uint8Array(16);function Ic(){if(!Er&&(Er=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Er))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Er(wf)}const yf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Xr(r){return typeof r=="string"&&yf.test(r)}var fe=[];for(var qs=0;qs<256;++qs)fe.push((qs+256).toString(16).substr(1));function Qr(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(fe[r[e+0]]+fe[r[e+1]]+fe[r[e+2]]+fe[r[e+3]]+"-"+fe[r[e+4]]+fe[r[e+5]]+"-"+fe[r[e+6]]+fe[r[e+7]]+"-"+fe[r[e+8]]+fe[r[e+9]]+"-"+fe[r[e+10]]+fe[r[e+11]]+fe[r[e+12]]+fe[r[e+13]]+fe[r[e+14]]+fe[r[e+15]]).toLowerCase();if(!Xr(t))throw TypeError("Stringified UUID is invalid");return t}var zo,Fs,Ds=0,zs=0;function bf(r,e,t){var n=e&&t||0,i=e||new Array(16);r=r||{};var s=r.node||zo,o=r.clockseq!==void 0?r.clockseq:Fs;if(s==null||o==null){var l=r.random||(r.rng||Ic)();s==null&&(s=zo=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),o==null&&(o=Fs=(l[6]<<8|l[7])&16383)}var c=r.msecs!==void 0?r.msecs:Date.now(),d=r.nsecs!==void 0?r.nsecs:zs+1,g=c-Ds+(d-zs)/1e4;if(g<0&&r.clockseq===void 0&&(o=o+1&16383),(g<0||c>Ds)&&r.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ds=c,zs=d,Fs=o,c+=122192928e5;var w=((c&268435455)*1e4+d)%4294967296;i[n++]=w>>>24&255,i[n++]=w>>>16&255,i[n++]=w>>>8&255,i[n++]=w&255;var E=c/4294967296*1e4&268435455;i[n++]=E>>>8&255,i[n++]=E&255,i[n++]=E>>>24&15|16,i[n++]=E>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var A=0;A<6;++A)i[n+A]=s[A];return e||Qr(i)}function Rc(r){if(!Xr(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function vf(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var Sf="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Ef="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Mc(r,e,t){function n(i,s,o,l){if(typeof i=="string"&&(i=vf(i)),typeof s=="string"&&(s=Rc(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+i.length);if(c.set(s),c.set(i,s.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,o){l=l||0;for(var d=0;d<16;++d)o[l+d]=c[d];return o}return Qr(c)}try{n.name=r}catch{}return n.DNS=Sf,n.URL=Ef,n}function _f(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return Af(xf(Bf(r),r.length*8))}function Af(r){for(var e=[],t=r.length*32,n="0123456789abcdef",i=0;i<t;i+=8){var s=r[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(o)}return e}function Cc(r){return(r+64>>>9<<4)+14+1}function xf(r,e){r[e>>5]|=128<<e%32,r[Cc(e)-1]=e;for(var t=1732584193,n=-271733879,i=-1732584194,s=271733878,o=0;o<r.length;o+=16){var l=t,c=n,d=i,g=s;t=me(t,n,i,s,r[o],7,-680876936),s=me(s,t,n,i,r[o+1],12,-389564586),i=me(i,s,t,n,r[o+2],17,606105819),n=me(n,i,s,t,r[o+3],22,-1044525330),t=me(t,n,i,s,r[o+4],7,-176418897),s=me(s,t,n,i,r[o+5],12,1200080426),i=me(i,s,t,n,r[o+6],17,-1473231341),n=me(n,i,s,t,r[o+7],22,-45705983),t=me(t,n,i,s,r[o+8],7,1770035416),s=me(s,t,n,i,r[o+9],12,-1958414417),i=me(i,s,t,n,r[o+10],17,-42063),n=me(n,i,s,t,r[o+11],22,-1990404162),t=me(t,n,i,s,r[o+12],7,1804603682),s=me(s,t,n,i,r[o+13],12,-40341101),i=me(i,s,t,n,r[o+14],17,-1502002290),n=me(n,i,s,t,r[o+15],22,1236535329),t=we(t,n,i,s,r[o+1],5,-165796510),s=we(s,t,n,i,r[o+6],9,-1069501632),i=we(i,s,t,n,r[o+11],14,643717713),n=we(n,i,s,t,r[o],20,-373897302),t=we(t,n,i,s,r[o+5],5,-701558691),s=we(s,t,n,i,r[o+10],9,38016083),i=we(i,s,t,n,r[o+15],14,-660478335),n=we(n,i,s,t,r[o+4],20,-405537848),t=we(t,n,i,s,r[o+9],5,568446438),s=we(s,t,n,i,r[o+14],9,-1019803690),i=we(i,s,t,n,r[o+3],14,-187363961),n=we(n,i,s,t,r[o+8],20,1163531501),t=we(t,n,i,s,r[o+13],5,-1444681467),s=we(s,t,n,i,r[o+2],9,-51403784),i=we(i,s,t,n,r[o+7],14,1735328473),n=we(n,i,s,t,r[o+12],20,-1926607734),t=ye(t,n,i,s,r[o+5],4,-378558),s=ye(s,t,n,i,r[o+8],11,-2022574463),i=ye(i,s,t,n,r[o+11],16,1839030562),n=ye(n,i,s,t,r[o+14],23,-35309556),t=ye(t,n,i,s,r[o+1],4,-1530992060),s=ye(s,t,n,i,r[o+4],11,1272893353),i=ye(i,s,t,n,r[o+7],16,-155497632),n=ye(n,i,s,t,r[o+10],23,-1094730640),t=ye(t,n,i,s,r[o+13],4,681279174),s=ye(s,t,n,i,r[o],11,-358537222),i=ye(i,s,t,n,r[o+3],16,-722521979),n=ye(n,i,s,t,r[o+6],23,76029189),t=ye(t,n,i,s,r[o+9],4,-640364487),s=ye(s,t,n,i,r[o+12],11,-421815835),i=ye(i,s,t,n,r[o+15],16,530742520),n=ye(n,i,s,t,r[o+2],23,-995338651),t=be(t,n,i,s,r[o],6,-198630844),s=be(s,t,n,i,r[o+7],10,1126891415),i=be(i,s,t,n,r[o+14],15,-1416354905),n=be(n,i,s,t,r[o+5],21,-57434055),t=be(t,n,i,s,r[o+12],6,1700485571),s=be(s,t,n,i,r[o+3],10,-1894986606),i=be(i,s,t,n,r[o+10],15,-1051523),n=be(n,i,s,t,r[o+1],21,-2054922799),t=be(t,n,i,s,r[o+8],6,1873313359),s=be(s,t,n,i,r[o+15],10,-30611744),i=be(i,s,t,n,r[o+6],15,-1560198380),n=be(n,i,s,t,r[o+13],21,1309151649),t=be(t,n,i,s,r[o+4],6,-145523070),s=be(s,t,n,i,r[o+11],10,-1120210379),i=be(i,s,t,n,r[o+2],15,718787259),n=be(n,i,s,t,r[o+9],21,-343485551),t=sn(t,l),n=sn(n,c),i=sn(i,d),s=sn(s,g)}return[t,n,i,s]}function Bf(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(Cc(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function sn(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function kf(r,e){return r<<e|r>>>32-e}function ts(r,e,t,n,i,s){return sn(kf(sn(sn(e,r),sn(n,s)),i),t)}function me(r,e,t,n,i,s,o){return ts(e&t|~e&n,r,e,i,s,o)}function we(r,e,t,n,i,s,o){return ts(e&n|t&~n,r,e,i,s,o)}function ye(r,e,t,n,i,s,o){return ts(e^t^n,r,e,i,s,o)}function be(r,e,t,n,i,s,o){return ts(t^(e|~n),r,e,i,s,o)}var If=Mc("v3",48,_f);function Rf(r,e,t){r=r||{};var n=r.random||(r.rng||Ic)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return Qr(n)}function Mf(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function Ws(r,e){return r<<e|r>>>32-e}function Cf(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,o=Math.ceil(s/16),l=new Array(o),c=0;c<o;++c){for(var d=new Uint32Array(16),g=0;g<16;++g)d[g]=r[c*64+g*4]<<24|r[c*64+g*4+1]<<16|r[c*64+g*4+2]<<8|r[c*64+g*4+3];l[c]=d}l[o-1][14]=(r.length-1)*8/Math.pow(2,32),l[o-1][14]=Math.floor(l[o-1][14]),l[o-1][15]=(r.length-1)*8&4294967295;for(var w=0;w<o;++w){for(var E=new Uint32Array(80),A=0;A<16;++A)E[A]=l[w][A];for(var I=16;I<80;++I)E[I]=Ws(E[I-3]^E[I-8]^E[I-14]^E[I-16],1);for(var x=t[0],v=t[1],T=t[2],N=t[3],B=t[4],D=0;D<80;++D){var H=Math.floor(D/20),F=Ws(x,5)+Mf(H,v,T,N)+B+e[H]+E[D]>>>0;B=N,N=T,T=Ws(v,30)>>>0,v=x,x=F}t[0]=t[0]+x>>>0,t[1]=t[1]+v>>>0,t[2]=t[2]+T>>>0,t[3]=t[3]+N>>>0,t[4]=t[4]+B>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Tf=Mc("v5",80,Cf);const Lf="00000000-0000-0000-0000-000000000000";function Nf(r){if(!Xr(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const Pf=Object.freeze(Object.defineProperty({__proto__:null,NIL:Lf,parse:Rc,stringify:Qr,v1:bf,v3:If,v4:Rf,v5:Tf,validate:Xr,version:Nf},Symbol.toStringTag,{value:"Module"})),Tc=rc(Pf);var Ks,Wo;function Of(){if(Wo)return Ks;Wo=1;const r=Tc.v4;return Ks=function(t,n,i,s){if(typeof t!="string")throw new TypeError(t+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const l={method:t};if(o===2&&(l.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");l.params=n}if(typeof i>"u"){const c=typeof s.generator=="function"?s.generator:function(){return r()};l.id=c(l,s)}else o===2&&i===null?s.notificationIdNull&&(l.id=null):l.id=i;return l},Ks}var Hs,Ko;function Uf(){if(Ko)return Hs;Ko=1;const r=Tc.v4,e=Of(),t=function(n,i){if(!(this instanceof t))return new t(n,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return r()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=n};return Hs=t,t.prototype.request=function(n,i,s,o){const l=this;let c=null;const d=Array.isArray(n)&&typeof i=="function";if(this.options.version===1&&d)throw new TypeError("JSON-RPC 1.0 does not support batching");if(d||!d&&n&&typeof n=="object"&&typeof i=="function")o=i,c=n;else{typeof s=="function"&&(o=s,s=void 0);const E=typeof o=="function";try{c=e(n,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(A){if(E)return o(A);throw A}if(!E)return c}let w;try{w=JSON.stringify(c,this.options.replacer)}catch(E){return o(E)}return this.callServer(w,function(E,A){l._parseResponse(E,A,o)}),c},t.prototype._parseResponse=function(n,i,s){if(n){s(n);return}if(!i)return s();let o;try{o=JSON.parse(i,this.options.reviver)}catch(l){return s(l)}if(s.length===3)if(Array.isArray(o)){const l=function(d){return typeof d.error<"u"},c=function(d){return!l(d)};return s(null,o.filter(l),o.filter(c))}else return s(null,o.error,o.result);s(null,o)},Hs}var qf=Uf();const Ff=an(qf);var $s={exports:{}},Ho;function Df(){return Ho||(Ho=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(c,d,g){this.fn=c,this.context=d,this.once=g||!1}function s(c,d,g,w,E){if(typeof g!="function")throw new TypeError("The listener must be a function");var A=new i(g,w||c,E),I=t?t+d:d;return c._events[I]?c._events[I].fn?c._events[I]=[c._events[I],A]:c._events[I].push(A):(c._events[I]=A,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],g,w;if(this._eventsCount===0)return d;for(w in g=this._events)e.call(g,w)&&d.push(t?w.slice(1):w);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(g)):d},l.prototype.listeners=function(d){var g=t?t+d:d,w=this._events[g];if(!w)return[];if(w.fn)return[w.fn];for(var E=0,A=w.length,I=new Array(A);E<A;E++)I[E]=w[E].fn;return I},l.prototype.listenerCount=function(d){var g=t?t+d:d,w=this._events[g];return w?w.fn?1:w.length:0},l.prototype.emit=function(d,g,w,E,A,I){var x=t?t+d:d;if(!this._events[x])return!1;var v=this._events[x],T=arguments.length,N,B;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),T){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,g),!0;case 3:return v.fn.call(v.context,g,w),!0;case 4:return v.fn.call(v.context,g,w,E),!0;case 5:return v.fn.call(v.context,g,w,E,A),!0;case 6:return v.fn.call(v.context,g,w,E,A,I),!0}for(B=1,N=new Array(T-1);B<T;B++)N[B-1]=arguments[B];v.fn.apply(v.context,N)}else{var D=v.length,H;for(B=0;B<D;B++)switch(v[B].once&&this.removeListener(d,v[B].fn,void 0,!0),T){case 1:v[B].fn.call(v[B].context);break;case 2:v[B].fn.call(v[B].context,g);break;case 3:v[B].fn.call(v[B].context,g,w);break;case 4:v[B].fn.call(v[B].context,g,w,E);break;default:if(!N)for(H=1,N=new Array(T-1);H<T;H++)N[H-1]=arguments[H];v[B].fn.apply(v[B].context,N)}}return!0},l.prototype.on=function(d,g,w){return s(this,d,g,w,!1)},l.prototype.once=function(d,g,w){return s(this,d,g,w,!0)},l.prototype.removeListener=function(d,g,w,E){var A=t?t+d:d;if(!this._events[A])return this;if(!g)return o(this,A),this;var I=this._events[A];if(I.fn)I.fn===g&&(!E||I.once)&&(!w||I.context===w)&&o(this,A);else{for(var x=0,v=[],T=I.length;x<T;x++)(I[x].fn!==g||E&&!I[x].once||w&&I[x].context!==w)&&v.push(I[x]);v.length?this._events[A]=v.length===1?v[0]:v:o(this,A)}return this},l.prototype.removeAllListeners=function(d){var g;return d?(g=t?t+d:d,this._events[g]&&o(this,g)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,r.exports=l}($s)),$s.exports}var zf=Df();const Lc=an(zf);var Wf=class extends Lc{constructor(e,t,n){super();ce(this,"socket");this.socket=new window.WebSocket(e,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,t,n){const i=n||t;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,n){this.socket.addEventListener(e,t,n)}};function Kf(r,e){return new Wf(r,e)}var Hf=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},$f=class extends Lc{constructor(e,t="ws://localhost:8080",{autoconnect:n=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...l}={},c,d){super();ce(this,"address");ce(this,"rpc_id");ce(this,"queue");ce(this,"options");ce(this,"autoconnect");ce(this,"ready");ce(this,"reconnect");ce(this,"reconnect_timer_id");ce(this,"reconnect_interval");ce(this,"max_reconnects");ce(this,"rest_options");ce(this,"current_reconnects");ce(this,"generate_request_id");ce(this,"socket");ce(this,"webSocketFactory");ce(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=n,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=l,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),d?this.dataPack=d:this.dataPack=new Hf,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,n,i){return!i&&typeof n=="object"&&(i=n,n=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const l=this.generate_request_id(e,t),c={jsonrpc:"2.0",method:e,params:t||void 0,id:l};this.socket.send(this.dataPack.encode(c),i,d=>{if(d)return o(d);this.queue[l]={promise:[s,o]},n&&(this.queue[l].timeout=setTimeout(()=>{delete this.queue[l],o(new Error("reply timeout"))},n))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((n,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);n()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=ot.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const i=[n.notification];if(n.params.constructor===Object)i.push(n.params);else for(let s=0;s<n.params.length;s++)i.push(n.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n?.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",n,i),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval)))})}};class Nc extends lc{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Nu(e);const n=ji(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Lr(this),this.iHash.update(e),this}digestInto(e){Lr(this),jr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:l}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=l,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Pc=(r,e,t)=>new Nc(r,e).update(t).digest();Pc.create=(r,e)=>new Nc(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $o(r){r.lowS!==void 0&&Ve("lowS",r.lowS),r.prehash!==void 0&&Ve("prehash",r.prehash)}function jf(r){const e=Zi(r);Wn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=e;if(t){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Vf,hexToBytes:Gf}=Sl;class Zf extends Error{constructor(e=""){super(e)}}const Ke={Err:Zf,_tlv:{encode:(r,e)=>{const{Err:t}=Ke;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,i=Cn(n);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=n>127?Cn(i.length/2|128):"";return Cn(r)+s+i+e},decode(r,e){const{Err:t}=Ke;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new t("tlv.decode(long): indefinite length not supported");if(c>4)throw new t("tlv.decode(long): byte length is too big");const d=e.subarray(n,n+c);if(d.length!==c)throw new t("tlv.decode: length bytes not complete");if(d[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const g of d)o=o<<8|g;if(n+=c,o<128)throw new t("tlv.decode(long): not minimal encoding")}const l=e.subarray(n,n+o);if(l.length!==o)throw new t("tlv.decode: wrong value length");return{v:l,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=Ke;if(r<$e)throw new e("integer: negative integers are not allowed");let t=Cn(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=Ke;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Vf(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=Ke,i=typeof r=="string"?Gf(r):r;ur(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:l,l:c}=n.decode(2,s),{v:d,l:g}=n.decode(2,c);if(g.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(l),s:t.decode(d)}},hexFromSig(r){const{_tlv:e,_int:t}=Ke,n=e.encode(2,t.encode(r.r)),i=e.encode(2,t.encode(r.s)),s=n+i;return e.encode(48,s)}},$e=BigInt(0),ue=BigInt(1);BigInt(2);const jo=BigInt(3);BigInt(4);function Yf(r){const e=jf(r),{Fp:t}=e,n=Yr(e.n,e.nBitLength),i=e.toBytes||((x,v,T)=>{const N=v.toAffine();return vn(Uint8Array.from([4]),t.toBytes(N.x),t.toBytes(N.y))}),s=e.fromBytes||(x=>{const v=x.subarray(1),T=t.fromBytes(v.subarray(0,t.BYTES)),N=t.fromBytes(v.subarray(t.BYTES,2*t.BYTES));return{x:T,y:N}});function o(x){const{a:v,b:T}=e,N=t.sqr(x),B=t.mul(N,x);return t.add(t.add(B,t.mul(x,v)),T)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function l(x){return Zr(x,ue,e.n)}function c(x){const{allowedPrivateKeyLengths:v,nByteLength:T,wrapPrivateKey:N,n:B}=e;if(v&&typeof x!="bigint"){if(yn(x)&&(x=bn(x)),typeof x!="string"||!v.includes(x.length))throw new Error("invalid private key");x=x.padStart(T*2,"0")}let D;try{D=typeof x=="bigint"?x:wn(oe("private key",x,T))}catch{throw new Error("invalid private key, expected hex or "+T+" bytes, got "+typeof x)}return N&&(D=St(D,B)),Ce("private key",D,ue,B),D}function d(x){if(!(x instanceof E))throw new Error("ProjectivePoint expected")}const g=sr((x,v)=>{const{px:T,py:N,pz:B}=x;if(t.eql(B,t.ONE))return{x:T,y:N};const D=x.is0();v==null&&(v=D?t.ONE:t.inv(B));const H=t.mul(T,v),F=t.mul(N,v),$=t.mul(B,v);if(D)return{x:t.ZERO,y:t.ZERO};if(!t.eql($,t.ONE))throw new Error("invZ was invalid");return{x:H,y:F}}),w=sr(x=>{if(x.is0()){if(e.allowInfinityPoint&&!t.is0(x.py))return;throw new Error("bad point: ZERO")}const{x:v,y:T}=x.toAffine();if(!t.isValid(v)||!t.isValid(T))throw new Error("bad point: x or y not FE");const N=t.sqr(T),B=o(v);if(!t.eql(N,B))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class E{constructor(v,T,N){if(this.px=v,this.py=T,this.pz=N,v==null||!t.isValid(v))throw new Error("x required");if(T==null||!t.isValid(T))throw new Error("y required");if(N==null||!t.isValid(N))throw new Error("z required");Object.freeze(this)}static fromAffine(v){const{x:T,y:N}=v||{};if(!v||!t.isValid(T)||!t.isValid(N))throw new Error("invalid affine point");if(v instanceof E)throw new Error("projective point not allowed");const B=D=>t.eql(D,t.ZERO);return B(T)&&B(N)?E.ZERO:new E(T,N,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const T=t.invertBatch(v.map(N=>N.pz));return v.map((N,B)=>N.toAffine(T[B])).map(E.fromAffine)}static fromHex(v){const T=E.fromAffine(s(oe("pointHex",v)));return T.assertValidity(),T}static fromPrivateKey(v){return E.BASE.multiply(c(v))}static msm(v,T){return _c(E,n,v,T)}_setWindowSize(v){I.setWindowSize(this,v)}assertValidity(){w(this)}hasEvenY(){const{y:v}=this.toAffine();if(t.isOdd)return!t.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){d(v);const{px:T,py:N,pz:B}=this,{px:D,py:H,pz:F}=v,$=t.eql(t.mul(T,F),t.mul(D,B)),K=t.eql(t.mul(N,F),t.mul(H,B));return $&&K}negate(){return new E(this.px,t.neg(this.py),this.pz)}double(){const{a:v,b:T}=e,N=t.mul(T,jo),{px:B,py:D,pz:H}=this;let F=t.ZERO,$=t.ZERO,K=t.ZERO,C=t.mul(B,B),P=t.mul(D,D),O=t.mul(H,H),U=t.mul(B,D);return U=t.add(U,U),K=t.mul(B,H),K=t.add(K,K),F=t.mul(v,K),$=t.mul(N,O),$=t.add(F,$),F=t.sub(P,$),$=t.add(P,$),$=t.mul(F,$),F=t.mul(U,F),K=t.mul(N,K),O=t.mul(v,O),U=t.sub(C,O),U=t.mul(v,U),U=t.add(U,K),K=t.add(C,C),C=t.add(K,C),C=t.add(C,O),C=t.mul(C,U),$=t.add($,C),O=t.mul(D,H),O=t.add(O,O),C=t.mul(O,U),F=t.sub(F,C),K=t.mul(O,P),K=t.add(K,K),K=t.add(K,K),new E(F,$,K)}add(v){d(v);const{px:T,py:N,pz:B}=this,{px:D,py:H,pz:F}=v;let $=t.ZERO,K=t.ZERO,C=t.ZERO;const P=e.a,O=t.mul(e.b,jo);let U=t.mul(T,D),b=t.mul(N,H),a=t.mul(B,F),h=t.add(T,N),p=t.add(D,H);h=t.mul(h,p),p=t.add(U,b),h=t.sub(h,p),p=t.add(T,B);let m=t.add(D,F);return p=t.mul(p,m),m=t.add(U,a),p=t.sub(p,m),m=t.add(N,B),$=t.add(H,F),m=t.mul(m,$),$=t.add(b,a),m=t.sub(m,$),C=t.mul(P,p),$=t.mul(O,a),C=t.add($,C),$=t.sub(b,C),C=t.add(b,C),K=t.mul($,C),b=t.add(U,U),b=t.add(b,U),a=t.mul(P,a),p=t.mul(O,p),b=t.add(b,a),a=t.sub(U,a),a=t.mul(P,a),p=t.add(p,a),U=t.mul(b,p),K=t.add(K,U),U=t.mul(m,p),$=t.mul(h,$),$=t.sub($,U),U=t.mul(h,b),C=t.mul(m,C),C=t.add(C,U),new E($,K,C)}subtract(v){return this.add(v.negate())}is0(){return this.equals(E.ZERO)}wNAF(v){return I.wNAFCached(this,v,E.normalizeZ)}multiplyUnsafe(v){const{endo:T,n:N}=e;Ce("scalar",v,$e,N);const B=E.ZERO;if(v===$e)return B;if(this.is0()||v===ue)return this;if(!T||I.hasPrecomputes(this))return I.wNAFCachedUnsafe(this,v,E.normalizeZ);let{k1neg:D,k1:H,k2neg:F,k2:$}=T.splitScalar(v),K=B,C=B,P=this;for(;H>$e||$>$e;)H&ue&&(K=K.add(P)),$&ue&&(C=C.add(P)),P=P.double(),H>>=ue,$>>=ue;return D&&(K=K.negate()),F&&(C=C.negate()),C=new E(t.mul(C.px,T.beta),C.py,C.pz),K.add(C)}multiply(v){const{endo:T,n:N}=e;Ce("scalar",v,ue,N);let B,D;if(T){const{k1neg:H,k1:F,k2neg:$,k2:K}=T.splitScalar(v);let{p:C,f:P}=this.wNAF(F),{p:O,f:U}=this.wNAF(K);C=I.constTimeNegate(H,C),O=I.constTimeNegate($,O),O=new E(t.mul(O.px,T.beta),O.py,O.pz),B=C.add(O),D=P.add(U)}else{const{p:H,f:F}=this.wNAF(v);B=H,D=F}return E.normalizeZ([B,D])[0]}multiplyAndAddUnsafe(v,T,N){const B=E.BASE,D=(F,$)=>$===$e||$===ue||!F.equals(B)?F.multiplyUnsafe($):F.multiply($),H=D(this,T).add(D(v,N));return H.is0()?void 0:H}toAffine(v){return g(this,v)}isTorsionFree(){const{h:v,isTorsionFree:T}=e;if(v===ue)return!0;if(T)return T(E,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:T}=e;return v===ue?this:T?T(E,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return Ve("isCompressed",v),this.assertValidity(),i(E,this,v)}toHex(v=!0){return Ve("isCompressed",v),bn(this.toRawBytes(v))}}E.BASE=new E(e.Gx,e.Gy,t.ONE),E.ZERO=new E(t.ZERO,t.ONE,t.ZERO);const A=e.nBitLength,I=Ec(E,e.endo?Math.ceil(A/2):A);return{CURVE:e,ProjectivePoint:E,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:l}}function Jf(r){const e=Zi(r);return Wn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Xf(r){const e=Jf(r),{Fp:t,n}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(a){return St(a,n)}function l(a){return Li(a,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:d,weierstrassEquation:g,isWithinCurveOrder:w}=Yf({...e,toBytes(a,h,p){const m=h.toAffine(),S=t.toBytes(m.x),R=vn;return Ve("isCompressed",p),p?R(Uint8Array.from([h.hasEvenY()?2:3]),S):R(Uint8Array.from([4]),S,t.toBytes(m.y))},fromBytes(a){const h=a.length,p=a[0],m=a.subarray(1);if(h===i&&(p===2||p===3)){const S=wn(m);if(!Zr(S,ue,t.ORDER))throw new Error("Point is not on curve");const R=g(S);let L;try{L=t.sqrt(R)}catch(f){const y=f instanceof Error?": "+f.message:"";throw new Error("Point is not on curve"+y)}const _=(L&ue)===ue;return(p&1)===1!==_&&(L=t.neg(L)),{x:S,y:L}}else if(h===s&&p===4){const S=t.fromBytes(m.subarray(0,t.BYTES)),R=t.fromBytes(m.subarray(t.BYTES,2*t.BYTES));return{x:S,y:R}}else{const S=i,R=s;throw new Error("invalid Point, expected length of "+S+", or uncompressed "+R+", got "+h)}}}),E=a=>bn(Fn(a,e.nByteLength));function A(a){const h=n>>ue;return a>h}function I(a){return A(a)?o(-a):a}const x=(a,h,p)=>wn(a.slice(h,p));class v{constructor(h,p,m){this.r=h,this.s=p,this.recovery=m,this.assertValidity()}static fromCompact(h){const p=e.nByteLength;return h=oe("compactSignature",h,p*2),new v(x(h,0,p),x(h,p,2*p))}static fromDER(h){const{r:p,s:m}=Ke.toSig(oe("DER",h));return new v(p,m)}assertValidity(){Ce("r",this.r,ue,n),Ce("s",this.s,ue,n)}addRecoveryBit(h){return new v(this.r,this.s,h)}recoverPublicKey(h){const{r:p,s:m,recovery:S}=this,R=F(oe("msgHash",h));if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");const L=S===2||S===3?p+e.n:p;if(L>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const _=(S&1)===0?"02":"03",u=c.fromHex(_+E(L)),f=l(L),y=o(-R*f),k=o(m*f),q=c.BASE.multiplyAndAddUnsafe(u,y,k);if(!q)throw new Error("point at infinify");return q.assertValidity(),q}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return qn(this.toDERHex())}toDERHex(){return Ke.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return qn(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}const T={isValidPrivateKey(a){try{return d(a),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const a=bc(e.n);return Cl(e.randomBytes(a),e.n)},precompute(a=8,h=c.BASE){return h._setWindowSize(a),h.multiply(BigInt(3)),h}};function N(a,h=!0){return c.fromPrivateKey(a).toRawBytes(h)}function B(a){const h=yn(a),p=typeof a=="string",m=(h||p)&&a.length;return h?m===i||m===s:p?m===2*i||m===2*s:a instanceof c}function D(a,h,p=!0){if(B(a))throw new Error("first arg must be private key");if(!B(h))throw new Error("second arg must be public key");return c.fromHex(h).multiply(d(a)).toRawBytes(p)}const H=e.bits2int||function(a){if(a.length>8192)throw new Error("input is too large");const h=wn(a),p=a.length*8-e.nBitLength;return p>0?h>>BigInt(p):h},F=e.bits2int_modN||function(a){return o(H(a))},$=Gi(e.nBitLength);function K(a){return Ce("num < 2^"+e.nBitLength,a,$e,$),Fn(a,e.nByteLength)}function C(a,h,p=P){if(["recovered","canonical"].some(Z=>Z in p))throw new Error("sign() legacy options not supported");const{hash:m,randomBytes:S}=e;let{lowS:R,prehash:L,extraEntropy:_}=p;R==null&&(R=!0),a=oe("msgHash",a),$o(p),L&&(a=oe("prehashed msgHash",m(a)));const u=F(a),f=d(h),y=[K(f),K(u)];if(_!=null&&_!==!1){const Z=_===!0?S(t.BYTES):_;y.push(oe("extraEntropy",Z))}const k=vn(...y),q=u;function j(Z){const et=H(Z);if(!w(et))return;const ht=l(et),ut=c.BASE.multiply(et).toAffine(),ft=o(ut.x);if(ft===$e)return;const Ae=o(ht*o(q+ft*f));if(Ae===$e)return;let pt=(ut.x===ft?0:2)|Number(ut.y&ue),wt=Ae;return R&&A(Ae)&&(wt=I(Ae),pt^=1),new v(ft,wt,pt)}return{seed:k,k2sig:j}}const P={lowS:e.lowS,prehash:!1},O={lowS:e.lowS,prehash:!1};function U(a,h,p=P){const{seed:m,k2sig:S}=C(a,h,p),R=e;return mc(R.hash.outputLen,R.nByteLength,R.hmac)(m,S)}c.BASE._setWindowSize(8);function b(a,h,p,m=O){const S=a;h=oe("msgHash",h),p=oe("publicKey",p);const{lowS:R,prehash:L,format:_}=m;if($o(m),"strict"in m)throw new Error("options.strict was renamed to lowS");if(_!==void 0&&_!=="compact"&&_!=="der")throw new Error("format must be compact or der");const u=typeof S=="string"||yn(S),f=!u&&!_&&typeof S=="object"&&S!==null&&typeof S.r=="bigint"&&typeof S.s=="bigint";if(!u&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let y,k;try{if(f&&(y=new v(S.r,S.s)),u){try{_!=="compact"&&(y=v.fromDER(S))}catch(pt){if(!(pt instanceof Ke.Err))throw pt}!y&&_!=="der"&&(y=v.fromCompact(S))}k=c.fromHex(p)}catch{return!1}if(!y||R&&y.hasHighS())return!1;L&&(h=e.hash(h));const{r:q,s:j}=y,Z=F(h),et=l(j),ht=o(Z*et),ut=o(q*et),ft=c.BASE.multiplyAndAddUnsafe(k,ht,ut)?.toAffine();return ft?o(ft.x)===q:!1}return{CURVE:e,getPublicKey:N,getSharedSecret:D,sign:U,verify:b,ProjectivePoint:c,Signature:v,utils:T}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Qf(r){return{hash:r,hmac:(e,...t)=>Pc(r,e,Uu(...t)),randomBytes:hc}}function th(r,e){const t=n=>Xf({...r,...Qf(n)});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Vo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),eh=BigInt(1),Pi=BigInt(2),Go=(r,e)=>(r+e/Pi)/e;function nh(r){const e=Oc,t=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),l=BigInt(44),c=BigInt(88),d=r*r*r%e,g=d*d*r%e,w=Pt(g,t,e)*g%e,E=Pt(w,t,e)*g%e,A=Pt(E,Pi,e)*d%e,I=Pt(A,i,e)*A%e,x=Pt(I,s,e)*I%e,v=Pt(x,l,e)*x%e,T=Pt(v,c,e)*v%e,N=Pt(T,l,e)*x%e,B=Pt(N,t,e)*g%e,D=Pt(B,o,e)*I%e,H=Pt(D,n,e)*d%e,F=Pt(H,Pi,e);if(!Oi.eql(Oi.sqr(F),r))throw new Error("Cannot find square root");return F}const Oi=Yr(Oc,void 0,void 0,{sqrt:nh}),rh=th({a:BigInt(0),b:BigInt(7),Fp:Oi,n:Vo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=Vo,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-eh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),l=Go(s*r,e),c=Go(-n*r,e);let d=St(r-l*t-c*i,e),g=St(-l*n-c*s,e);const w=d>o,E=g>o;if(w&&(d=e-d),E&&(g=e-g),d>o||g>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:w,k1:d,k2neg:E,k2:g}}}},Ni);BigInt(0);const Zo=()=>{const r=lr.utils.randomPrivateKey(),e=Ui(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},Ui=lr.getPublicKey;function Yo(r){try{return lr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Uc=(r,e)=>lr.sign(r,e.slice(0,32)),sh=lr.verify,he=r=>ot.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ot.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ot.Buffer.from(r);class ih{constructor(e){Object.assign(this,e)}encode(){return ot.Buffer.from(Us.serialize(kr,this))}static decode(e){return Us.deserialize(kr,this,e)}static decodeUnchecked(e){return Us.deserializeUnchecked(kr,this,e)}}const kr=new Map;var qc;const oh=32,on=32;function ah(r){return r._bn!==void 0}let Jo=1;class it extends ih{constructor(e){if(super({}),this._bn=void 0,ah(e))this._bn=e._bn;else{if(typeof e=="string"){const t=pe.decode(e);if(t.length!=on)throw new Error("Invalid public key input");this._bn=new To(t)}else this._bn=new To(e);if(this._bn.byteLength()>on)throw new Error("Invalid public key input")}}static unique(){const e=new it(Jo);return Jo+=1,new it(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return pe.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ot.Buffer);if(e.length===on)return e;const t=ot.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const i=ot.Buffer.concat([e.toBuffer(),ot.Buffer.from(t),n.toBuffer()]),s=Ni(i);return new it(s)}static createProgramAddressSync(e,t){let n=ot.Buffer.alloc(0);e.forEach(function(s){if(s.length>oh)throw new TypeError("Max seed length exceeded");n=ot.Buffer.concat([n,he(s)])}),n=ot.Buffer.concat([n,t.toBuffer(),ot.Buffer.from("ProgramDerivedAddress")]);const i=Ni(n);if(Yo(i))throw new Error("Invalid seeds, address must fall off the curve");return new it(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{const s=e.concat(ot.Buffer.from([n]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new it(e);return Yo(t.toBytes())}}qc=it;it.default=new qc("11111111111111111111111111111111");kr.set(it,{kind:"struct",fields:[["_bn","u256"]]});new it("BPFLoader1111111111111111111111111111111111");const On=1232,eo=127,ir=64;class Fc extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Fc.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Dc extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Dc.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Xn extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Xn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Fr{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,o)=>{n.set(s.toBase58(),o)});const i=s=>{const o=n.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const lt=(r="publicKey")=>M.blob(32,r),ch=(r="signature")=>M.blob(64,r),Tn=(r="string")=>{const e=M.struct([M.u32("length"),M.u32("lengthPadding"),M.blob(M.offset(M.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,o)=>t(s,o).chars.toString(),i.encode=(s,o,l)=>{const c={chars:ot.Buffer.from(s,"utf8")};return n(c,o,l)},i.alloc=s=>M.u32().span+M.u32().span+ot.Buffer.from(s,"utf8").length,i},uh=(r="authorized")=>M.struct([lt("staker"),lt("withdrawer")],r),lh=(r="lockup")=>M.struct([M.ns64("unixTimestamp"),M.ns64("epoch"),lt("custodian")],r),fh=(r="voteInit")=>M.struct([lt("nodePubkey"),lt("authorizedVoter"),lt("authorizedWithdrawer"),M.u8("commission")],r),hh=(r="voteAuthorizeWithSeedArgs")=>M.struct([M.u32("voteAuthorizationType"),lt("currentAuthorityDerivedKeyOwnerPubkey"),Tn("currentAuthorityDerivedKeySeed"),lt("newAuthorized")],r);function zc(r,e){const t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*t(i.elementLayout)}else if("fields"in i)return zc({layout:i},e[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Be(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function ke(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function vt(r,e){if(!r)throw new Error(e||"Assertion failed")}class es{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,i=o=>{const l=o.toBase58();let c=n.get(l);return c===void 0&&(c={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(l,c)),c},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const l of o.keys){const c=i(l.pubkey);c.isSigner||(c.isSigner=l.isSigner),c.isWritable||(c.isWritable=l.isWritable)}}return new es(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];vt(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,c])=>c.isSigner&&c.isWritable),n=e.filter(([,c])=>c.isSigner&&!c.isWritable),i=e.filter(([,c])=>!c.isSigner&&c.isWritable),s=e.filter(([,c])=>!c.isSigner&&!c.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{vt(t.length>0,"Expected at least one writable signer key");const[c]=t[0];vt(c===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const l=[...t.map(([c])=>new it(c)),...n.map(([c])=>new it(c)),...i.map(([c])=>new it(c)),...s.map(([c])=>new it(c))];return[o,l]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,t){const n=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(t(o)){const l=new it(s),c=e.findIndex(d=>d.equals(l));c>=0&&(vt(c<256,"Max lookup table index exceeded"),n.push(c),i.push(l),this.keyMetaMap.delete(s))}return[n,i]}}const Wc="Reached end of buffer unexpectedly";function je(r){if(r.length===0)throw new Error(Wc);return r.shift()}function Ie(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(Wc);return r.splice(...e)}class Ge{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new it(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:pe.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Fr(this.staticAccountKeys)}static compile(e){const t=es.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),o=new Fr(i).compileInstructions(e.instructions).map(l=>({programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:pe.encode(l.data)}));return new Ge({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];ke(t,e);const n=this.instructions.map(w=>{const{accounts:E,programIdIndex:A}=w,I=Array.from(pe.decode(w.data));let x=[];ke(x,E.length);let v=[];return ke(v,I.length),{programIdIndex:A,keyIndicesCount:ot.Buffer.from(x),keyIndices:E,dataLength:ot.Buffer.from(v),data:I}});let i=[];ke(i,n.length);let s=ot.Buffer.alloc(On);ot.Buffer.from(i).copy(s);let o=i.length;n.forEach(w=>{const A=M.struct([M.u8("programIdIndex"),M.blob(w.keyIndicesCount.length,"keyIndicesCount"),M.seq(M.u8("keyIndex"),w.keyIndices.length,"keyIndices"),M.blob(w.dataLength.length,"dataLength"),M.seq(M.u8("userdatum"),w.data.length,"data")]).encode(w,s,o);o+=A}),s=s.slice(0,o);const l=M.struct([M.blob(1,"numRequiredSignatures"),M.blob(1,"numReadonlySignedAccounts"),M.blob(1,"numReadonlyUnsignedAccounts"),M.blob(t.length,"keyCount"),M.seq(lt("key"),e,"keys"),lt("recentBlockhash")]),c={numRequiredSignatures:ot.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ot.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ot.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ot.Buffer.from(t),keys:this.accountKeys.map(w=>he(w.toBytes())),recentBlockhash:pe.decode(this.recentBlockhash)};let d=ot.Buffer.alloc(2048);const g=l.encode(c,d);return s.copy(d,g),d.slice(0,g+s.length)}static from(e){let t=[...e];const n=je(t);if(n!==(n&eo))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=je(t),s=je(t),o=Be(t);let l=[];for(let E=0;E<o;E++){const A=Ie(t,0,on);l.push(new it(ot.Buffer.from(A)))}const c=Ie(t,0,on),d=Be(t);let g=[];for(let E=0;E<d;E++){const A=je(t),I=Be(t),x=Ie(t,0,I),v=Be(t),T=Ie(t,0,v),N=pe.encode(ot.Buffer.from(T));g.push({programIdIndex:A,accounts:x,data:N})}const w={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:pe.encode(ot.Buffer.from(c)),accountKeys:l,instructions:g};return new Ge(w)}}class or{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Fr(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((o,l)=>o+l.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=es.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const g of s){const w=t.extractTableLookup(g);if(w!==void 0){const[E,{writable:A,readonly:I}]=w;n.push(E),i.writable.push(...A),i.readonly.push(...I)}}const[o,l]=t.getMessageComponents(),d=new Fr(l,i).compileInstructions(e.instructions);return new or({header:o,staticAccountKeys:l,recentBlockhash:e.recentBlockhash,compiledInstructions:d,addressTableLookups:n})}serialize(){const e=Array();ke(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();ke(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();ke(s,this.addressTableLookups.length);const o=M.struct([M.u8("prefix"),M.struct([M.u8("numRequiredSignatures"),M.u8("numReadonlySignedAccounts"),M.u8("numReadonlyUnsignedAccounts")],"header"),M.blob(e.length,"staticAccountKeysLength"),M.seq(lt(),this.staticAccountKeys.length,"staticAccountKeys"),lt("recentBlockhash"),M.blob(n.length,"instructionsLength"),M.blob(t.length,"serializedInstructions"),M.blob(s.length,"addressTableLookupsLength"),M.blob(i.length,"serializedAddressTableLookups")]),l=new Uint8Array(On),d=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(g=>g.toBytes()),recentBlockhash:pe.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},l);return l.slice(0,d)}serializeInstructions(){let e=0;const t=new Uint8Array(On);for(const n of this.compiledInstructions){const i=Array();ke(i,n.accountKeyIndexes.length);const s=Array();ke(s,n.data.length);const o=M.struct([M.u8("programIdIndex"),M.blob(i.length,"encodedAccountKeyIndexesLength"),M.seq(M.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),M.blob(s.length,"encodedDataLength"),M.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(On);for(const n of this.addressTableLookups){const i=Array();ke(i,n.writableIndexes.length);const s=Array();ke(s,n.readonlyIndexes.length);const o=M.struct([lt("accountKey"),M.blob(i.length,"encodedWritableIndexesLength"),M.seq(M.u8(),n.writableIndexes.length,"writableIndexes"),M.blob(s.length,"encodedReadonlyIndexesLength"),M.seq(M.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=je(t),i=n&eo;vt(n!==i,"Expected versioned message but received legacy message");const s=i;vt(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:je(t),numReadonlySignedAccounts:je(t),numReadonlyUnsignedAccounts:je(t)},l=[],c=Be(t);for(let I=0;I<c;I++)l.push(new it(Ie(t,0,on)));const d=pe.encode(Ie(t,0,on)),g=Be(t),w=[];for(let I=0;I<g;I++){const x=je(t),v=Be(t),T=Ie(t,0,v),N=Be(t),B=new Uint8Array(Ie(t,0,N));w.push({programIdIndex:x,accountKeyIndexes:T,data:B})}const E=Be(t),A=[];for(let I=0;I<E;I++){const x=new it(Ie(t,0,on)),v=Be(t),T=Ie(t,0,v),N=Be(t),B=Ie(t,0,N);A.push({accountKey:x,writableIndexes:T,readonlyIndexes:B})}return new or({header:o,staticAccountKeys:l,recentBlockhash:d,compiledInstructions:w,addressTableLookups:A})}}const no={deserializeMessageVersion(r){const e=r[0],t=e&eo;return t===e?"legacy":t},deserialize:r=>{const e=no.deserializeMessageVersion(r);if(e==="legacy")return Ge.from(r);if(e===0)return or.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let en=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const dh=ot.Buffer.alloc(ir).fill(0);class Ne{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ot.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Te{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Ne(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let x=0;x<t.length;x++)if(t[x].programId===void 0)throw new Error(`Transaction instruction index ${x} has undefined program id`);const i=[],s=[];t.forEach(x=>{x.keys.forEach(T=>{s.push({...T})});const v=x.programId.toString();i.includes(v)||i.push(v)}),i.forEach(x=>{s.push({pubkey:new it(x),isSigner:!1,isWritable:!1})});const o=[];s.forEach(x=>{const v=x.pubkey.toString(),T=o.findIndex(N=>N.pubkey.toString()===v);T>-1?(o[T].isWritable=o[T].isWritable||x.isWritable,o[T].isSigner=o[T].isSigner||x.isSigner):o.push(x)}),o.sort(function(x,v){if(x.isSigner!==v.isSigner)return x.isSigner?-1:1;if(x.isWritable!==v.isWritable)return x.isWritable?-1:1;const T={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return x.pubkey.toBase58().localeCompare(v.pubkey.toBase58(),"en",T)});const l=o.findIndex(x=>x.pubkey.equals(n));if(l>-1){const[x]=o.splice(l,1);x.isSigner=!0,x.isWritable=!0,o.unshift(x)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const x of this.signatures){const v=o.findIndex(T=>T.pubkey.equals(x.publicKey));if(v>-1)o[v].isSigner||(o[v].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${x.publicKey.toString()}`)}let c=0,d=0,g=0;const w=[],E=[];o.forEach(({pubkey:x,isSigner:v,isWritable:T})=>{v?(w.push(x.toString()),c+=1,T||(d+=1)):(E.push(x.toString()),T||(g+=1))});const A=w.concat(E),I=t.map(x=>{const{data:v,programId:T}=x;return{programIdIndex:A.indexOf(T.toString()),accounts:x.keys.map(N=>A.indexOf(N.pubkey.toString())),data:pe.encode(v)}});return I.forEach(x=>{vt(x.programIdIndex>=0),x.accounts.forEach(v=>vt(v>=0))}),new Ge({header:{numRequiredSignatures:c,numReadonlySignedAccounts:d,numReadonlyUnsignedAccounts:g},accountKeys:A,recentBlockhash:e,instructions:I})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(i=>{const s=Uc(n,i.secretKey);this._addSignature(i.publicKey,he(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){vt(t.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ot.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:i,publicKey:s}of this.signatures)i===null?t&&(n.missing||(n.missing=[])).push(s):sh(i,e,s.toBytes())||(n.invalid||(n.invalid=[])).push(s);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(i,t);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(l=>l.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(l=>l.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,n=[];ke(n,t.length);const i=n.length+t.length*64+e.length,s=ot.Buffer.alloc(i);return vt(t.length<256),ot.Buffer.from(n).copy(s,0),t.forEach(({signature:o},l)=>{o!==null&&(vt(o.length===64,"signature has invalid length"),ot.Buffer.from(o).copy(s,n.length+l*64))}),e.copy(s,n.length+t.length*64),vt(s.length<=On,`Transaction too large: ${s.length} > ${On}`),s}get keys(){return vt(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return vt(this.instructions.length===1),this.instructions[0].programId}get data(){return vt(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Be(t);let i=[];for(let s=0;s<n;s++){const o=Ie(t,0,ir);i.push(pe.encode(ot.Buffer.from(o)))}return Te.populate(Ge.from(t),i)}static populate(e,t=[]){const n=new Te;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const o={signature:i==pe.encode(dh)?null:pe.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const l=e.accountKeys[o];return{pubkey:l,isSigner:n.signatures.some(c=>c.publicKey.toString()===l.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new Ne({keys:s,programId:e.accountKeys[i.programIdIndex],data:pe.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class ar{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)vt(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(ir));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();ke(t,this.signatures.length);const n=M.struct([M.blob(t.length,"encodedSignaturesLength"),M.seq(ch(),this.signatures.length,"signatures"),M.blob(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const n=[],i=Be(t);for(let o=0;o<i;o++)n.push(new Uint8Array(Ie(t,0,ir)));const s=no.deserialize(new Uint8Array(t));return new ar(s,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(o=>o.equals(i.publicKey));vt(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=Uc(t,i.secretKey)}}addSignature(e,t){vt(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));vt(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const gh=160,ph=64,mh=gh/ph,wh=1e3/mh;new it("SysvarC1ock11111111111111111111111111111111");new it("SysvarEpochSchedu1e111111111111111111111111");new it("Sysvar1nstructions1111111111111111111111111");const js=new it("SysvarRecentB1ockHashes11111111111111111111"),Xo=new it("SysvarRent111111111111111111111111111111111");new it("SysvarRewards111111111111111111111111111111");new it("SysvarS1otHashes111111111111111111111111111");new it("SysvarS1otHistory11111111111111111111111111");new it("SysvarStakeHistory1111111111111111111111111");class Qo extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let l;switch(e){case"send":l=`Transaction ${t} resulted in an error. 
${n}. `+s+o;break;case"simulate":l=`Simulation failed. 
Message: ${n}. 
`+s+o;break;default:l=`Unknown action '${(c=>c)(e)}'`}super(l),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,t(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class rt extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}function Rn(r){return new Promise(e=>setTimeout(e,r))}function Re(r,e){const t=r.layout.span>=0?r.layout.span:zc(r,e),n=ot.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}const yh=M.nu64("lamportsPerSignature"),Kc=M.struct([M.u32("version"),M.u32("state"),lt("authorizedPubkey"),lt("nonce"),M.struct([yh],"feeCalculator")]),ta=Kc.span;class ro{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Kc.decode(he(e),0);return new ro({authorizedPubkey:new it(t.authorizedPubkey),nonce:new it(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const bh=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},vh=r=>e=>{const t=M.blob(r,e),{encode:n,decode:i}=bh(t),s=t;return s.decode=(o,l)=>{const c=i(o,l);return Fo.toBigIntLE(ot.Buffer.from(c))},s.encode=(o,l,c)=>{const d=Fo.toBufferLE(o,r);return n(d,l,c)},s},zn=vh(8),Me=Object.freeze({Create:{index:0,layout:M.struct([M.u32("instruction"),M.ns64("lamports"),M.ns64("space"),lt("programId")])},Assign:{index:1,layout:M.struct([M.u32("instruction"),lt("programId")])},Transfer:{index:2,layout:M.struct([M.u32("instruction"),zn("lamports")])},CreateWithSeed:{index:3,layout:M.struct([M.u32("instruction"),lt("base"),Tn("seed"),M.ns64("lamports"),M.ns64("space"),lt("programId")])},AdvanceNonceAccount:{index:4,layout:M.struct([M.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:M.struct([M.u32("instruction"),lt("authorized")])},AuthorizeNonceAccount:{index:7,layout:M.struct([M.u32("instruction"),lt("authorized")])},Allocate:{index:8,layout:M.struct([M.u32("instruction"),M.ns64("space")])},AllocateWithSeed:{index:9,layout:M.struct([M.u32("instruction"),lt("base"),Tn("seed"),M.ns64("space"),lt("programId")])},AssignWithSeed:{index:10,layout:M.struct([M.u32("instruction"),lt("base"),Tn("seed"),lt("programId")])},TransferWithSeed:{index:11,layout:M.struct([M.u32("instruction"),zn("lamports"),Tn("seed"),lt("programId")])},UpgradeNonceAccount:{index:12,layout:M.struct([M.u32("instruction")])}});class Dr{constructor(){}static createAccount(e){const t=Me.Create,n=Re(t,{lamports:e.lamports,space:e.space,programId:he(e.programId.toBuffer())});return new Ne({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const i=Me.TransferWithSeed;t=Re(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:he(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Me.Transfer;t=Re(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Ne({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const i=Me.AssignWithSeed;t=Re(i,{base:he(e.basePubkey.toBuffer()),seed:e.seed,programId:he(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Me.Assign;t=Re(i,{programId:he(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ne({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Me.CreateWithSeed,n=Re(t,{base:he(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:he(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Ne({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Te;"basePubkey"in e&&"seed"in e?t.add(Dr.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:ta,programId:this.programId})):t.add(Dr.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:ta,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Me.InitializeNonceAccount,n=Re(t,{authorized:he(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:js,isSigner:!1,isWritable:!1},{pubkey:Xo,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Ne(i)}static nonceAdvance(e){const t=Me.AdvanceNonceAccount,n=Re(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:js,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Ne(i)}static nonceWithdraw(e){const t=Me.WithdrawNonceAccount,n=Re(t,{lamports:e.lamports});return new Ne({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:js,isSigner:!1,isWritable:!1},{pubkey:Xo,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Me.AuthorizeNonceAccount,n=Re(t,{authorized:he(e.newAuthorizedPubkey.toBuffer())});return new Ne({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const i=Me.AllocateWithSeed;t=Re(i,{base:he(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:he(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Me.Allocate;t=Re(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ne({keys:n,programId:this.programId,data:t})}}Dr.programId=new it("11111111111111111111111111111111");new it("BPFLoader2111111111111111111111111111111111");function Sh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Vs,ea;function Eh(){if(ea)return Vs;ea=1;var r=Object.prototype.toString,e=Object.keys||function(n){var i=[];for(var s in n)i.push(s);return i};function t(n,i){var s,o,l,c,d,g,w;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),i);if(w=r.call(n),w==="[object Array]"){for(l="[",o=n.length-1,s=0;s<o;s++)l+=t(n[s],!0)+",";return o>-1&&(l+=t(n[s],!0)),l+"]"}else if(w==="[object Object]"){for(c=e(n).sort(),o=c.length,l="",s=0;s<o;)d=c[s],g=t(n[d],!1),g!==void 0&&(l&&(l+=","),l+=JSON.stringify(d)+":"+g),s++;return"{"+l+"}"}else return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Vs=function(n){var i=t(n,!1);if(i!==void 0)return""+i},Vs}var _h=Eh(),na=Sh(_h);const Vn=32;function Gs(r){let e=0;for(;r>1;)r/=2,e++;return e}function Ah(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class xh{constructor(e,t,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Gs(Ah(e+Vn+1))-Gs(Vn)-1,n=this.getSlotsInEpoch(t),i=e-(n-Vn);return[t,i]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Vn:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Gs(Vn)):this.slotsPerEpoch}}var Bh=globalThis.fetch;class kh extends $f{constructor(e,t,n){const i=s=>{const o=Kf(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function Ih(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const ra=56;class sa{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=Ih(Rh,e),n=e.length-ra;vt(n>=0,"lookup table is invalid"),vt(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=M.struct([M.seq(lt(),i,"addresses")]).decode(e.slice(ra));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new it(t.authority[0]):void 0,addresses:s.map(o=>new it(o))}}}const Rh={index:1,layout:M.struct([M.u32("typeIndex"),zn("deactivationSlot"),M.nu64("lastExtendedSlot"),M.u8("lastExtendedStartIndex"),M.u8(),M.seq(lt(),M.offset(M.u8(),-1),"authority")])},Mh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Ch(r){const e=r.match(Mh);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,i,s]=e,o=r.startsWith("https:")?"wss:":"ws:",l=i==null?null:parseInt(i.slice(1),10),c=l==null?"":`:${l+1}`;return`${o}//${n}${c}${s}`}const Mt=dr(Qi(it),Y(),r=>new it(r)),Hc=to([Y(),It("base64")]),so=dr(Qi(ot.Buffer),Hc,r=>ot.Buffer.from(r[0],"base64")),Th=30*1e3;function Lh(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function yt(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function ia(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function $c(r){return Se([V({jsonrpc:It("2.0"),id:Y(),result:r}),V({jsonrpc:It("2.0"),id:Y(),error:V({code:Kn(),message:Y(),data:st(pf())})})])}const Nh=$c(Kn());function ct(r){return dr($c(r),Nh,e=>"error"in e?e:{...e,result:J(e.result,r)})}function Ot(r){return ct(V({context:V({slot:z()}),value:r}))}function ns(r){return V({context:V({slot:z()}),value:r})}function Zs(r,e){return r===0?new or({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new it(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:pe.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Ge(e)}const Ph=V({foundation:z(),foundationTerm:z(),initial:z(),taper:z(),terminal:z()}),Oh=ct(Q(tt(V({epoch:z(),effectiveSlot:z(),amount:z(),postBalance:z(),commission:st(tt(z()))})))),Uh=Q(V({slot:z(),prioritizationFee:z()})),qh=V({total:z(),validator:z(),foundation:z(),epoch:z()}),Fh=V({epoch:z(),slotIndex:z(),slotsInEpoch:z(),absoluteSlot:z(),blockHeight:st(z()),transactionCount:st(z())}),Dh=V({slotsPerEpoch:z(),leaderScheduleSlotOffset:z(),warmup:De(),firstNormalEpoch:z(),firstNormalSlot:z()}),zh=kc(Y(),Q(z())),En=tt(Se([V({}),Y()])),Wh=V({err:En}),Kh=It("receivedSignature"),Hh=V({"solana-core":Y(),"feature-set":st(z())}),$h=V({program:Y(),programId:Mt,parsed:Kn()}),jh=V({programId:Mt,accounts:Q(Mt),data:Y()}),oa=Ot(V({err:tt(Se([V({}),Y()])),logs:tt(Q(Y())),accounts:st(tt(Q(tt(V({executable:De(),owner:Y(),lamports:z(),data:Q(Y()),rentEpoch:st(z())}))))),unitsConsumed:st(z()),returnData:st(tt(V({programId:Y(),data:to([Y(),It("base64")])}))),innerInstructions:st(tt(Q(V({index:z(),instructions:Q(Se([$h,jh]))}))))})),Vh=Ot(V({byIdentity:kc(Y(),Q(z())),range:V({firstSlot:z(),lastSlot:z()})}));function Gh(r,e,t,n,i,s){const o=t||Bh;let l;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let c;return n&&(c=async(g,w)=>{const E=await new Promise((A,I)=>{try{n(g,w,(x,v)=>A([x,v]))}catch(x){I(x)}});return await o(...E)}),new Ff(async(g,w)=>{const E={method:"POST",body:g,agent:l,headers:Object.assign({"Content-Type":"application/json"},e||{},Gd)};try{let A=5,I,x=500;for(;c?I=await c(r,E):I=await o(r,E),!(I.status!==429||i===!0||(A-=1,A===0));)console.error(`Server responded with ${I.status} ${I.statusText}.  Retrying after ${x}ms delay...`),await Rn(x),x*=2;const v=await I.text();I.ok?w(null,v):w(new Error(`${I.status} ${I.statusText}: ${v}`))}catch(A){A instanceof Error&&w(A)}},{})}function Zh(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(s,o)=>{if(s){i(s);return}n(o)})})}function Yh(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const i=e.map(s=>r.request(s.methodName,s.args));r.request(i,(s,o)=>{if(s){n(s);return}t(o)})})}const Jh=ct(Ph),Xh=ct(qh),Qh=ct(Uh),td=ct(Fh),ed=ct(Dh),nd=ct(zh),rd=ct(z()),sd=Ot(V({total:z(),circulating:z(),nonCirculating:z(),nonCirculatingAccounts:Q(Mt)})),qi=V({amount:Y(),uiAmount:tt(z()),decimals:z(),uiAmountString:st(Y())}),id=Ot(Q(V({address:Mt,amount:Y(),uiAmount:tt(z()),decimals:z(),uiAmountString:st(Y())}))),od=Ot(Q(V({pubkey:Mt,account:V({executable:De(),owner:Mt,lamports:z(),data:so,rentEpoch:z()})}))),Fi=V({program:Y(),parsed:Kn(),space:z()}),ad=Ot(Q(V({pubkey:Mt,account:V({executable:De(),owner:Mt,lamports:z(),data:Fi,rentEpoch:z()})}))),cd=Ot(Q(V({lamports:z(),address:Mt}))),cr=V({executable:De(),owner:Mt,lamports:z(),data:so,rentEpoch:z()}),ud=V({pubkey:Mt,account:cr}),ld=dr(Se([Qi(ot.Buffer),Fi]),Se([Hc,Fi]),r=>Array.isArray(r)?J(r,so):r),Di=V({executable:De(),owner:Mt,lamports:z(),data:ld,rentEpoch:z()}),fd=V({pubkey:Mt,account:Di}),hd=V({state:Se([It("active"),It("inactive"),It("activating"),It("deactivating")]),active:z(),inactive:z()}),dd=ct(Q(V({signature:Y(),slot:z(),err:En,memo:tt(Y()),blockTime:st(tt(z()))}))),gd=ct(Q(V({signature:Y(),slot:z(),err:En,memo:tt(Y()),blockTime:st(tt(z()))}))),pd=V({subscription:z(),result:ns(cr)}),md=V({pubkey:Mt,account:cr}),wd=V({subscription:z(),result:ns(md)}),yd=V({parent:z(),slot:z(),root:z()}),bd=V({subscription:z(),result:yd}),vd=Se([V({type:Se([It("firstShredReceived"),It("completed"),It("optimisticConfirmation"),It("root")]),slot:z(),timestamp:z()}),V({type:It("createdBank"),parent:z(),slot:z(),timestamp:z()}),V({type:It("frozen"),slot:z(),timestamp:z(),stats:V({numTransactionEntries:z(),numSuccessfulTransactions:z(),numFailedTransactions:z(),maxTransactionsPerEntry:z()})}),V({type:It("dead"),slot:z(),timestamp:z(),err:Y()})]),Sd=V({subscription:z(),result:vd}),Ed=V({subscription:z(),result:ns(Se([Wh,Kh]))}),_d=V({subscription:z(),result:z()}),Ad=V({pubkey:Y(),gossip:tt(Y()),tpu:tt(Y()),rpc:tt(Y()),version:tt(Y())}),aa=V({votePubkey:Y(),nodePubkey:Y(),activatedStake:z(),epochVoteAccount:De(),epochCredits:Q(to([z(),z(),z()])),commission:z(),lastVote:z(),rootSlot:tt(z())}),xd=ct(V({current:Q(aa),delinquent:Q(aa)})),Bd=Se([It("processed"),It("confirmed"),It("finalized")]),kd=V({slot:z(),confirmations:tt(z()),err:En,confirmationStatus:st(Bd)}),Id=Ot(Q(tt(kd))),Rd=ct(z()),jc=V({accountKey:Mt,writableIndexes:Q(z()),readonlyIndexes:Q(z())}),io=V({signatures:Q(Y()),message:V({accountKeys:Q(Y()),header:V({numRequiredSignatures:z(),numReadonlySignedAccounts:z(),numReadonlyUnsignedAccounts:z()}),instructions:Q(V({accounts:Q(z()),data:Y(),programIdIndex:z()})),recentBlockhash:Y(),addressTableLookups:st(Q(jc))})}),Vc=V({pubkey:Mt,signer:De(),writable:De(),source:st(Se([It("transaction"),It("lookupTable")]))}),Gc=V({accountKeys:Q(Vc),signatures:Q(Y())}),Zc=V({parsed:Kn(),program:Y(),programId:Mt}),Yc=V({accounts:Q(Mt),data:Y(),programId:Mt}),Md=Se([Yc,Zc]),Cd=Se([V({parsed:Kn(),program:Y(),programId:Y()}),V({accounts:Q(Y()),data:Y(),programId:Y()})]),Jc=dr(Md,Cd,r=>"accounts"in r?J(r,Yc):J(r,Zc)),Xc=V({signatures:Q(Y()),message:V({accountKeys:Q(Vc),instructions:Q(Jc),recentBlockhash:Y(),addressTableLookups:st(tt(Q(jc)))})}),zr=V({accountIndex:z(),mint:Y(),owner:st(Y()),programId:st(Y()),uiTokenAmount:qi}),Qc=V({writable:Q(Mt),readonly:Q(Mt)}),rs=V({err:En,fee:z(),innerInstructions:st(tt(Q(V({index:z(),instructions:Q(V({accounts:Q(z()),data:Y(),programIdIndex:z()}))})))),preBalances:Q(z()),postBalances:Q(z()),logMessages:st(tt(Q(Y()))),preTokenBalances:st(tt(Q(zr))),postTokenBalances:st(tt(Q(zr))),loadedAddresses:st(Qc),computeUnitsConsumed:st(z())}),oo=V({err:En,fee:z(),innerInstructions:st(tt(Q(V({index:z(),instructions:Q(Jc)})))),preBalances:Q(z()),postBalances:Q(z()),logMessages:st(tt(Q(Y()))),preTokenBalances:st(tt(Q(zr))),postTokenBalances:st(tt(Q(zr))),loadedAddresses:st(Qc),computeUnitsConsumed:st(z())}),Hn=Se([It(0),It("legacy")]),_n=V({pubkey:Y(),lamports:z(),postBalance:tt(z()),rewardType:tt(Y()),commission:st(tt(z()))}),Td=ct(tt(V({blockhash:Y(),previousBlockhash:Y(),parentSlot:z(),transactions:Q(V({transaction:io,meta:tt(rs),version:st(Hn)})),rewards:st(Q(_n)),blockTime:tt(z()),blockHeight:tt(z())}))),Ld=ct(tt(V({blockhash:Y(),previousBlockhash:Y(),parentSlot:z(),rewards:st(Q(_n)),blockTime:tt(z()),blockHeight:tt(z())}))),Nd=ct(tt(V({blockhash:Y(),previousBlockhash:Y(),parentSlot:z(),transactions:Q(V({transaction:Gc,meta:tt(rs),version:st(Hn)})),rewards:st(Q(_n)),blockTime:tt(z()),blockHeight:tt(z())}))),Pd=ct(tt(V({blockhash:Y(),previousBlockhash:Y(),parentSlot:z(),transactions:Q(V({transaction:Xc,meta:tt(oo),version:st(Hn)})),rewards:st(Q(_n)),blockTime:tt(z()),blockHeight:tt(z())}))),Od=ct(tt(V({blockhash:Y(),previousBlockhash:Y(),parentSlot:z(),transactions:Q(V({transaction:Gc,meta:tt(oo),version:st(Hn)})),rewards:st(Q(_n)),blockTime:tt(z()),blockHeight:tt(z())}))),Ud=ct(tt(V({blockhash:Y(),previousBlockhash:Y(),parentSlot:z(),rewards:st(Q(_n)),blockTime:tt(z()),blockHeight:tt(z())}))),qd=ct(tt(V({blockhash:Y(),previousBlockhash:Y(),parentSlot:z(),transactions:Q(V({transaction:io,meta:tt(rs)})),rewards:st(Q(_n)),blockTime:tt(z())}))),ca=ct(tt(V({blockhash:Y(),previousBlockhash:Y(),parentSlot:z(),signatures:Q(Y()),blockTime:tt(z())}))),Ys=ct(tt(V({slot:z(),meta:tt(rs),blockTime:st(tt(z())),transaction:io,version:st(Hn)}))),_r=ct(tt(V({slot:z(),transaction:Xc,meta:tt(oo),blockTime:st(tt(z())),version:st(Hn)}))),Fd=Ot(V({blockhash:Y(),lastValidBlockHeight:z()})),Dd=Ot(De()),zd=V({slot:z(),numTransactions:z(),numSlots:z(),samplePeriodSecs:z()}),Wd=ct(Q(zd)),Kd=Ot(tt(V({feeCalculator:V({lamportsPerSignature:z()})}))),Hd=ct(Y()),$d=ct(Y()),jd=V({err:En,logs:Q(Y()),signature:Y()}),Vd=V({result:ns(jd),subscription:z()}),Gd={"solana-client":"js/1.0.0-maintenance"};class Zd{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const d={};return async g=>{const{commitment:w,config:E}=yt(g),A=this._buildArgs([],w,void 0,E),I=na(A);return d[I]=d[I]??(async()=>{try{const x=await this._rpcRequest("getBlockHeight",A),v=J(x,ct(z()));if("error"in v)throw new rt(v.error,"failed to get block height information");return v.result}finally{delete d[I]}})(),await d[I]}})();let n,i,s,o,l,c;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,l=t.disableRetryOnRateLimit,c=t.httpAgent),this._rpcEndpoint=Lh(e),this._rpcWsEndpoint=n||Ch(e),this._rpcClient=Gh(e,i,s,o,l,c),this._rpcRequest=Zh(this._rpcClient),this._rpcBatchRequest=Yh(this._rpcClient),this._rpcWebSocket=new kh(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:i}=yt(t),s=this._buildArgs([e.toBase58()],n,void 0,i),o=await this._rpcRequest("getBalance",s),l=J(o,Ot(z()));if("error"in l)throw new rt(l.error,`failed to get balance for ${e.toBase58()}`);return l.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=J(t,ct(tt(z())));if("error"in n)throw new rt(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=J(e,ct(z()));if("error"in t)throw new rt(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=J(e,rd);if("error"in t)throw new rt(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),i=J(n,sd);if("error"in i)throw new rt(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),s=J(i,Ot(qi));if("error"in s)throw new rt(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),s=J(i,Ot(qi));if("error"in s)throw new rt(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,n){const{commitment:i,config:s}=yt(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const l=this._buildArgs(o,i,"base64",s),c=await this._rpcRequest("getTokenAccountsByOwner",l),d=J(c,od);if("error"in d)throw new rt(d.error,`failed to get token accounts owned by account ${e.toBase58()}`);return d.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),l=J(o,ad);if("error"in l)throw new rt(l.error,`failed to get token accounts owned by account ${e.toBase58()}`);return l.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),s=J(i,cd);if("error"in s)throw new rt(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),s=J(i,id);if("error"in s)throw new rt(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:i}=yt(t),s=this._buildArgs([e.toBase58()],n,"base64",i),o=await this._rpcRequest("getAccountInfo",s),l=J(o,Ot(tt(cr)));if("error"in l)throw new rt(l.error,`failed to get info about account ${e.toBase58()}`);return l.result}async getParsedAccountInfo(e,t){const{commitment:n,config:i}=yt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),l=J(o,Ot(tt(Di)));if("error"in l)throw new rt(l.error,`failed to get info about account ${e.toBase58()}`);return l.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:i}=yt(t),s=e.map(d=>d.toBase58()),o=this._buildArgs([s],n,"jsonParsed",i),l=await this._rpcRequest("getMultipleAccounts",o),c=J(l,Ot(Q(tt(Di))));if("error"in c)throw new rt(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:i}=yt(t),s=e.map(d=>d.toBase58()),o=this._buildArgs([s],n,"base64",i),l=await this._rpcRequest("getMultipleAccounts",o),c=J(l,Ot(Q(tt(cr))));if("error"in c)throw new rt(c.error,`failed to get info for accounts ${s}`);return c.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:i,config:s}=yt(t),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??s?.epoch}),l=await this._rpcRequest("getStakeActivation",o),c=J(l,ct(hd));if("error"in c)throw new rt(c.error,`failed to get Stake Activation ${e.toBase58()}`);return c.result}async getProgramAccounts(e,t){const{commitment:n,config:i}=yt(t),{encoding:s,...o}=i||{},l=this._buildArgs([e.toBase58()],n,s||"base64",{...o,...o.filters?{filters:ia(o.filters)}:null}),c=await this._rpcRequest("getProgramAccounts",l),d=Q(ud),g=o.withContext===!0?J(c,Ot(d)):J(c,ct(d));if("error"in g)throw new rt(g.error,`failed to get accounts owned by program ${e.toBase58()}`);return g.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:i}=yt(t),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),l=J(o,ct(Q(fd)));if("error"in l)throw new rt(l.error,`failed to get accounts owned by program ${e.toBase58()}`);return l.result}async confirmTransaction(e,t){let n;if(typeof e=="string")n=e;else{const s=e;if(s.abortSignal?.aborted)return Promise.reject(s.abortSignal.reason);n=s.signature}let i;try{i=pe.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return vt(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,s=!1;const o=new Promise((c,d)=>{try{n=this.onSignature(t,(w,E)=>{n=void 0;const A={context:E,value:w};c({__type:en.PROCESSED,response:A})},e);const g=new Promise(w=>{n==null?w():i=this._onSubscriptionStateChange(n,E=>{E==="subscribed"&&w()})});(async()=>{if(await g,s)return;const w=await this.getSignatureStatus(t);if(s||w==null)return;const{context:E,value:A}=w;if(A!=null)if(A?.err)d(A.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(A.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(A.confirmationStatus==="processed"||A.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,c({__type:en.PROCESSED,response:{context:E,value:A}})}})()}catch(g){d(g)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let s=!1;const o=new Promise(w=>{const E=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let A=await E();if(!s){for(;A<=n;)if(await Rn(1e3),s||(A=await E(),s))return;w({__type:en.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:l,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),d=this.getCancellationPromise(t);let g;try{const w=await Promise.race([d,c,o]);if(w.__type===en.PROCESSED)g=w.response;else throw new Fc(i)}finally{s=!0,l()}return g}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let l=!1;const c=new Promise(A=>{let I=s,x=null;const v=async()=>{try{const{context:T,value:N}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return x=T.slot,N?.nonce}catch{return I}};(async()=>{if(I=await v(),!l)for(;;){if(s!==I){A({__type:en.NONCE_INVALID,slotInWhichNonceDidAdvance:x});return}if(await Rn(2e3),l||(I=await v(),l))return}})()}),{abortConfirmation:d,confirmationPromise:g}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),w=this.getCancellationPromise(t);let E;try{const A=await Promise.race([w,g,c]);if(A.__type===en.PROCESSED)E=A.response;else{let I;for(;;){const x=await this.getSignatureStatus(o);if(x==null)break;if(x.context.slot<(A.slotInWhichNonceDidAdvance??n)){await Rn(400);continue}I=x;break}if(I?.value){const x=e||"finalized",{confirmationStatus:v}=I.value;switch(x){case"processed":case"recent":if(v!=="processed"&&v!=="confirmed"&&v!=="finalized")throw new Xn(o);break;case"confirmed":case"single":case"singleGossip":if(v!=="confirmed"&&v!=="finalized")throw new Xn(o);break;case"finalized":case"max":case"root":if(v!=="finalized")throw new Xn(o);break;default:}E={context:I.context,value:{err:I.value.err}}}else throw new Xn(o)}}finally{l=!0,d()}return E}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const i=new Promise(c=>{let d=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{d=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>c({__type:en.TIMED_OUT,timeoutMs:d}),d)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let l;try{const c=await Promise.race([o,i]);if(c.__type===en.PROCESSED)l=c.response;else throw new Dc(t,c.timeoutMs/1e3)}finally{clearTimeout(n),s()}return l}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=J(e,ct(Q(Ad)));if("error"in t)throw new rt(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=J(n,xd);if("error"in i)throw new rt(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:n}=yt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlot",i),o=J(s,ct(z()));if("error"in o)throw new rt(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=yt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getSlotLeader",i),o=J(s,ct(Y()));if("error"in o)throw new rt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),s=J(i,ct(Q(Mt)));if("error"in s)throw new rt(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:n,value:i}=await this.getSignatureStatuses([e],t);vt(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const i=await this._rpcRequest("getSignatureStatuses",n),s=J(i,Id);if("error"in s)throw new rt(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:n}=yt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getTransactionCount",i),o=J(s,ct(z()));if("error"in o)throw new rt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=J(n,Jh);if("error"in i)throw new rt(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){const{commitment:i,config:s}=yt(n),o=this._buildArgs([e.map(d=>d.toBase58())],i,void 0,{...s,epoch:t??s?.epoch}),l=await this._rpcRequest("getInflationReward",o),c=J(l,Oh);if("error"in c)throw new rt(c.error,"failed to get inflation reward");return c.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=J(e,Xh);if("error"in t)throw new rt(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=yt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getEpochInfo",i),o=J(s,td);if("error"in o)throw new rt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=J(e,ed);if("error"in t)throw new rt(t.error,"failed to get epoch schedule");const n=t.result;return new xh(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=J(e,nd);if("error"in t)throw new rt(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=J(i,Rd);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=J(t,Wd);if("error"in n)throw new rt(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=J(i,Kd);if("error"in s)throw new rt(s.error,"failed to get fee calculator");const{context:o,value:l}=s.result;return{context:o,value:l!==null?l.feeCalculator:null}}async getFeeForMessage(e,t){const n=he(e.serialize()).toString("base64"),i=this._buildArgs([n],t),s=await this._rpcRequest("getFeeForMessage",i),o=J(s,Ot(tt(z())));if("error"in o)throw new rt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map(o=>o.toBase58()),n=t?.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=J(i,Qh);if("error"in s)throw new rt(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=yt(e),i=this._buildArgs([],t,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),o=J(s,Fd);if("error"in o)throw new rt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:i}=yt(t),s=this._buildArgs([e],n,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),l=J(o,Dd);if("error"in l)throw new rt(l.error,"failed to determine if the blockhash `"+e+"`is valid");return l.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=J(e,ct(Hh));if("error"in t)throw new rt(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=J(e,ct(Y()));if("error"in t)throw new rt(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:i}=yt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const l=J(o,Nd);if("error"in l)throw l.error;return l.result}case"none":{const l=J(o,Ld);if("error"in l)throw l.error;return l.result}default:{const l=J(o,Td);if("error"in l)throw l.error;const{result:c}=l;return c?{...c,transactions:c.transactions.map(({transaction:d,meta:g,version:w})=>({meta:g,transaction:{...d,message:Zs(w,d.message)},version:w}))}:null}}}catch(l){throw new rt(l,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:i}=yt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i?.transactionDetails){case"accounts":{const l=J(o,Od);if("error"in l)throw l.error;return l.result}case"none":{const l=J(o,Ud);if("error"in l)throw l.error;return l.result}default:{const l=J(o,Pd);if("error"in l)throw l.error;return l.result}}}catch(l){throw new rt(l,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:l,...c}=e;n=l,t=c}const i=this._buildArgs([],n,"base64",t),s=await this._rpcRequest("getBlockProduction",i),o=J(s,Vh);if("error"in o)throw new rt(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:i}=yt(t),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getTransaction",s),l=J(o,Ys);if("error"in l)throw new rt(l.error,"failed to get transaction");const c=l.result;return c&&{...c,transaction:{...c.transaction,message:Zs(c.version,c.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:i}=yt(t),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),l=J(o,_r);if("error"in l)throw new rt(l.error,"failed to get transaction");return l.result}async getParsedTransactions(e,t){const{commitment:n,config:i}=yt(t),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(c=>{const d=J(c,_r);if("error"in d)throw new rt(d.error,"failed to get transactions");return d.result})}async getTransactions(e,t){const{commitment:n,config:i}=yt(t),s=e.map(c=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([c],n,void 0,i)}));return(await this._rpcBatchRequest(s)).map(c=>{const d=J(c,Ys);if("error"in d)throw new rt(d.error,"failed to get transactions");const g=d.result;return g&&{...g,transaction:{...g.transaction,message:Zs(g.version,g.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getBlock",n),s=J(i,qd);if("error"in s)throw new rt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const l={...o,transactions:o.transactions.map(({transaction:c,meta:d})=>{const g=new Ge(c.message);return{meta:d,transaction:{...c,message:g}}})};return{...l,transactions:l.transactions.map(({transaction:c,meta:d})=>({meta:d,transaction:Te.populate(c.message,c.signatures)}))}}async getBlocks(e,t,n){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),s=await this._rpcRequest("getBlocks",i),o=J(s,ct(Q(z())));if("error"in o)throw new rt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=J(i,ca);if("error"in s)throw new rt(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=J(i,ca);if("error"in s)throw new rt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getTransaction",n),s=J(i,Ys);if("error"in s)throw new rt(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const l=new Ge(o.transaction.message),c=o.transaction.signatures;return{...o,transaction:Te.populate(l,c)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getTransaction",n),s=J(i,_r);if("error"in s)throw new rt(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const l=J(o,_r);if("error"in l)throw new rt(l.error,"failed to get confirmed transactions");return l.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const c=await this.getConfirmedBlockSignatures(t,"finalized");c.signatures.length>0&&(i.until=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}let o=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>o));)try{const c=await this.getConfirmedBlockSignatures(n);c.signatures.length>0&&(i.before=c.signatures[c.signatures.length-1].toString())}catch(c){if(c instanceof Error&&c.message.includes("skipped"))continue;throw c}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(c=>c.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=J(s,dd);if("error"in o)throw new rt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),o=J(s,gd);if("error"in o)throw new rt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new sa({key:e,state:sa.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,t){const{context:n,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=ro.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=J(n,Hd);if("error"in i)throw new rt(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Rn(100);const n=Date.now()-this._blockhashInfo.lastFetch>=Th;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Rn(wh/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=yt(e),i=this._buildArgs([],t,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=J(s,Ot(z()));if("error"in o)throw new rt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const x=e.serialize(),v=ot.Buffer.from(x).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const T=t||{};T.encoding="base64","commitment"in T||(T.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(T.innerInstructions=t.innerInstructions);const N=[v,T],B=await this._rpcRequest("simulateTransaction",N),D=J(B,oa);if("error"in D)throw new Error("failed to simulate transaction: "+D.error.message);return D.result}let i;if(e instanceof Te){let I=e;i=new Te,i.feePayer=I.feePayer,i.instructions=e.instructions,i.nonceInfo=I.nonceInfo,i.signatures=I.signatures}else i=Te.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let I=this._disableBlockhashCaching;for(;;){const x=await this._blockhashWithExpiryBlockHeight(I);if(i.lastValidBlockHeight=x.lastValidBlockHeight,i.recentBlockhash=x.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const v=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(v)&&!this._blockhashInfo.transactionSignatures.includes(v)){this._blockhashInfo.simulatedSignatures.push(v);break}else I=!0}}const o=i._compile(),l=o.serialize(),d=i._serialize(l).toString("base64"),g={encoding:"base64",commitment:this.commitment};if(n){const I=(Array.isArray(n)?n:o.nonProgramIds()).map(x=>x.toBase58());g.accounts={encoding:"base64",addresses:I}}s&&(g.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(g.innerInstructions=t.innerInstructions);const w=[d,g],E=await this._rpcRequest("simulateTransaction",w),A=J(E,oa);if("error"in A){let I;if("data"in A.error&&(I=A.error.data.logs,I&&Array.isArray(I))){const x=`
    `,v=x+I.join(x);console.error(A.error.message,v)}throw new Qo({action:"simulate",signature:"",transactionMessage:A.error.message,logs:I})}return A.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const l=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=l.lastValidBlockHeight,e.recentBlockhash=l.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const c=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(c))o=!0;else{this._blockhashInfo.transactionSignatures.push(c);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,t){const n=he(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},i=t&&t.skipPreflight,s=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const o=[e,n],l=await this._rpcRequest("sendTransaction",o),c=J(l,$d);if("error"in c){let d;throw"data"in c.error&&(d=c.error.data.logs),new Qo({action:i?"send":"simulate",signature:"",transactionMessage:c.error.message,logs:d})}return c.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){const n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(s=>{try{s(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var s;const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[n]||(s[n]=new Set);return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const l=await this._rpcWebSocket.call(o,s);this._setSubscription(n,{...i,serverSubscriptionId:l,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[l]=i.callbacks,await this._updateSubscriptions()}catch(l){if(console.error(`Received ${l instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:l}),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(l){if(l instanceof Error&&console.error(`${o} error:`,l.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=J(e,pd);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,i=na([e.method,t]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[i];vt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:i,config:s}=yt(n),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=J(e,wd);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){const{commitment:s,config:o}=yt(n),l=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:ia(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},l)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=J(e,Vd);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=J(e,bd);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=J(e,Sd);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){const s=t||this._commitment;if(s||n||i){let o={};n&&(o.encoding=n),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=J(e,Ed);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,l)=>{if(o.type==="status"){t(o.result,l);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),l=this._makeSubscription({callback:(c,d)=>{t(c,d);try{this.removeSignatureListener(l)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return l}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=J(e,_d);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Ir{constructor(e){this._keypair=void 0,this._keypair=e??Zo()}static generate(){return new Ir(Zo())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const i=e.slice(0,32),s=Ui(i);for(let o=0;o<32;o++)if(n[o]!==s[o])throw new Error("provided secretKey is invalid")}return new Ir({publicKey:n,secretKey:e})}static fromSeed(e){const t=Ui(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Ir({publicKey:t,secretKey:n})}get publicKey(){return new it(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:M.struct([M.u32("instruction"),zn("recentSlot"),M.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:M.struct([M.u32("instruction")])},ExtendLookupTable:{index:2,layout:M.struct([M.u32("instruction"),zn(),M.seq(lt(),M.offset(M.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:M.struct([M.u32("instruction")])},CloseLookupTable:{index:4,layout:M.struct([M.u32("instruction")])}});new it("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:M.struct([M.u8("instruction"),M.u32("units"),M.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:M.struct([M.u8("instruction"),M.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:M.struct([M.u8("instruction"),M.u32("units")])},SetComputeUnitPrice:{index:3,layout:M.struct([M.u8("instruction"),zn("microLamports")])}});new it("ComputeBudget111111111111111111111111111111");M.struct([M.u8("numSignatures"),M.u8("padding"),M.u16("signatureOffset"),M.u16("signatureInstructionIndex"),M.u16("publicKeyOffset"),M.u16("publicKeyInstructionIndex"),M.u16("messageDataOffset"),M.u16("messageDataSize"),M.u16("messageInstructionIndex")]);new it("Ed25519SigVerify111111111111111111111111111");rh.utils.isValidPrivateKey;M.struct([M.u8("numSignatures"),M.u16("signatureOffset"),M.u8("signatureInstructionIndex"),M.u16("ethAddressOffset"),M.u8("ethAddressInstructionIndex"),M.u16("messageDataOffset"),M.u16("messageDataSize"),M.u8("messageInstructionIndex"),M.blob(20,"ethAddress"),M.blob(64,"signature"),M.u8("recoveryId")]);new it("KeccakSecp256k11111111111111111111111111111");var tu;new it("StakeConfig11111111111111111111111111111111");class eu{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}tu=eu;eu.default=new tu(0,0,it.default);Object.freeze({Initialize:{index:0,layout:M.struct([M.u32("instruction"),uh(),lh()])},Authorize:{index:1,layout:M.struct([M.u32("instruction"),lt("newAuthorized"),M.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:M.struct([M.u32("instruction")])},Split:{index:3,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},Withdraw:{index:4,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},Deactivate:{index:5,layout:M.struct([M.u32("instruction")])},Merge:{index:7,layout:M.struct([M.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:M.struct([M.u32("instruction"),lt("newAuthorized"),M.u32("stakeAuthorizationType"),Tn("authoritySeed"),lt("authorityOwner")])}});new it("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:M.struct([M.u32("instruction"),fh()])},Authorize:{index:1,layout:M.struct([M.u32("instruction"),lt("newAuthorized"),M.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:M.struct([M.u32("instruction"),M.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:M.struct([M.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:M.struct([M.u32("instruction"),hh()])}});new it("Vote111111111111111111111111111111111111111");new it("Va1idator1nfo111111111111111111111111111111");V({name:Y(),website:st(Y()),details:st(Y()),iconUrl:st(Y()),keybaseUsername:st(Y())});new it("Vote111111111111111111111111111111111111111");M.struct([lt("nodePubkey"),lt("authorizedWithdrawer"),M.u8("commission"),M.nu64(),M.seq(M.struct([M.nu64("slot"),M.u32("confirmationCount")]),M.offset(M.u32(),-8),"votes"),M.u8("rootSlotValid"),M.nu64("rootSlot"),M.nu64(),M.seq(M.struct([M.nu64("epoch"),lt("authorizedVoter")]),M.offset(M.u32(),-8),"authorizedVoters"),M.struct([M.seq(M.struct([lt("authorizedPubkey"),M.nu64("epochOfLastAuthorizedSwitch"),M.nu64("targetEpoch")]),32,"buf"),M.nu64("idx"),M.u8("isEmpty")],"priorVoters"),M.nu64(),M.seq(M.struct([M.nu64("epoch"),M.nu64("credits"),M.nu64("prevCredits")]),M.offset(M.u32(),-8),"epochCredits"),M.struct([M.nu64("slot"),M.nu64("timestamp")],"lastTimestamp")]);const ua={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function op(r,e){const t="https";if(!r)return ua[t].devnet;const n=ua[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}const ap=1e9,nu=X.createContext({});function Yd(){return X.useContext(nu)}const cp=({children:r,endpoint:e,config:t={commitment:"confirmed"}})=>{const n=X.useMemo(()=>new Zd(e,t),[e,t]);return G.createElement(nu.Provider,{value:{connection:n}},r)};class la extends ve{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const Jd=[],ss={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){Pe("call","select")},connect(){return Promise.reject(Pe("call","connect"))},disconnect(){return Promise.reject(Pe("call","disconnect"))},sendTransaction(){return Promise.reject(Pe("call","sendTransaction"))},signTransaction(){return Promise.reject(Pe("call","signTransaction"))},signAllTransactions(){return Promise.reject(Pe("call","signAllTransactions"))},signMessage(){return Promise.reject(Pe("call","signMessage"))},signIn(){return Promise.reject(Pe("call","signIn"))}};Object.defineProperty(ss,"wallets",{get(){return Pe("read","wallets"),Jd}});Object.defineProperty(ss,"wallet",{get(){return Pe("read","wallet"),null}});Object.defineProperty(ss,"publicKey",{get(){return Pe("read","publicKey"),null}});function Pe(r,e){const t=new Error(`You have tried to ${r} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(t),t}const ru=X.createContext(ss);function su(){return X.useContext(ru)}function Xd(r,e){const t=X.useState(()=>{try{const s=localStorage.getItem(r);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return e}),n=t[0],i=X.useRef(!0);return X.useEffect(()=>{if(i.current){i.current=!1;return}try{n===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(n))}catch(s){typeof window<"u"&&console.error(s)}},[n,r]),t}function Js(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const fa="solana:mainnet",Qd="solana:devnet",t0="solana:testnet",e0="solana:localnet",n0="https://api.mainnet-beta.solana.com";function r0(r){return r.includes(n0)?fa:/\bdevnet\b/i.test(r)?Qd:/\btestnet\b/i.test(r)?t0:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?e0:fa}function s0(r){let e=`${r.domain} wants you to sign in with your Solana account:
`;e+=`${r.address}`,r.statement&&(e+=`

${r.statement}`);const t=[];if(r.uri&&t.push(`URI: ${r.uri}`),r.version&&t.push(`Version: ${r.version}`),r.chainId&&t.push(`Chain ID: ${r.chainId}`),r.nonce&&t.push(`Nonce: ${r.nonce}`),r.issuedAt&&t.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&t.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&t.push(`Not Before: ${r.notBefore}`),r.requestId&&t.push(`Request ID: ${r.requestId}`),r.resources){t.push("Resources:");for(const n of r.resources)t.push(`- ${n}`)}return t.length&&(e+=`

${t.join(`
`)}`),e}const Ze={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class Ye extends Error{constructor(...e){const[t,n,i]=e;super(n),this.code=t,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class iu extends Error{constructor(...e){const[t,n,i,s]=e;super(i),this.code=n,this.data=s,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function ae(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(g){try{d(n.next(g))}catch(w){o(w)}}function c(g){try{d(n.throw(g))}catch(w){o(w)}}function d(g){g.done?s(g.value):i(g.value).then(l,c)}d((n=n.apply(r,[])).next())})}function Xs(r,e){return ae(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("raw",r),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,t),i=new Uint8Array(t.byteLength+n.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(n),t.byteLength),i})}function i0(r){return window.btoa(r)}function o0(r){return s0(r)}function a0(r){return i0(o0(r))}const c0="solana:signTransactions",ha="solana:cloneAuthorization";function u0(r,e){return new Proxy({},{get(t,n){return t[n]==null&&(t[n]=function(i){return ae(this,void 0,void 0,function*(){const{method:s,params:o}=l0(n,i,r),l=yield e(s,o);return s==="authorize"&&o.sign_in_payload&&!l.sign_in_result&&(l.sign_in_result=yield h0(o.sign_in_payload,l,e)),f0(n,l,r)})}),t[n]},defineProperty(){return!1},deleteProperty(){return!1}})}function l0(r,e,t){let n=e,i=r.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:s}=n;if(t==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=n.cluster}n.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}n.chain=s}}case"reauthorize":{const{auth_token:s,identity:o}=n;if(s)switch(t){case"legacy":{i="reauthorize",n={auth_token:s,identity:o};break}default:{i="authorize";break}}break}}return{method:i,params:n}}function f0(r,e,t){switch(r){case"getCapabilities":{const n=e;switch(t){case"legacy":{const i=[c0];return n.supports_clone_authorization===!0&&i.push(ha),Object.assign(Object.assign({},n),{features:i})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes(ha)})}}}return e}function h0(r,e,t){var n;return ae(this,void 0,void 0,function*(){const i=(n=r.domain)!==null&&n!==void 0?n:window.location.host,s=e.accounts[0].address,o=a0(Object.assign(Object.assign({},r),{domain:i,address:s})),l=yield t("sign_messages",{addresses:[s],payloads:[o]});return{address:s,signed_message:o,signature:l.signed_payloads[0].slice(o.length)}})}const gn=4;function d0(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(gn);return new DataView(e).setUint32(0,r,!1),new Uint8Array(e)}const zi=12,ou=65;function g0(r,e,t){return ae(this,void 0,void 0,function*(){const n=d0(e),i=new Uint8Array(zi);crypto.getRandomValues(i);const s=yield crypto.subtle.encrypt(cu(n,i),t,new TextEncoder().encode(r)),o=new Uint8Array(n.byteLength+i.byteLength+s.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),o.set(new Uint8Array(s),n.byteLength+i.byteLength),o})}function au(r,e){return ae(this,void 0,void 0,function*(){const t=r.slice(0,gn),n=r.slice(gn,gn+zi),i=r.slice(gn+zi),s=yield crypto.subtle.decrypt(cu(t,n),e,i);return p0().decode(s)})}function cu(r,e){return{additionalData:r,iv:e,name:"AES-GCM",tagLength:128}}let Qs;function p0(){return Qs===void 0&&(Qs=new TextDecoder("utf-8")),Qs}function m0(){return ae(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function ti(){return ae(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function w0(r,e){return ae(this,void 0,void 0,function*(){const t=JSON.stringify(r),n=r.id;return g0(t,n,e)})}function y0(r,e){return ae(this,void 0,void 0,function*(){const t=yield au(r,e),n=JSON.parse(t);if(Object.hasOwnProperty.call(n,"error"))throw new iu(n.id,n.error.code,n.error.message);return n})}function b0(r,e,t){return ae(this,void 0,void 0,function*(){const[n,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",r.slice(0,ou),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:i},t,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function v0(r,e){return ae(this,void 0,void 0,function*(){const t=yield au(r,e),n=JSON.parse(t);let i="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new Ye(Ze.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:i}})}function S0(){return uu(49152+Math.floor(Math.random()*16384))}function uu(r){if(r<49152||r>65535)throw new Ye(Ze.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function E0(r){let e="";const t=new Uint8Array(r),n=t.byteLength;for(let i=0;i<n;i++)e+=String.fromCharCode(t[i]);return window.btoa(e)}function _0(r){return r.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const A0="solana-wallet";function da(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function x0(r,e){let t=null;if(e){try{t=new URL(e)}catch{}if(t?.protocol!=="https:")throw new Ye(Ze.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}t||(t=new URL(`${A0}:/`));const n=r.startsWith("/")?r:[...da(t.pathname),...da(r)].join("/");return new URL(n,t)}function B0(r,e,t,n=["v1"]){return ae(this,void 0,void 0,function*(){const i=uu(e),s=yield crypto.subtle.exportKey("raw",r),o=E0(s),l=x0("v1/associate/local",t);return l.searchParams.set("association",_0(o)),l.searchParams.set("port",`${i}`),n.forEach(c=>{l.searchParams.set("v",c)}),l})}const Wr={Firefox:0,Other:1};function k0(){return navigator.userAgent.indexOf("Firefox/")!==-1?Wr.Firefox:Wr.Other}function I0(){return new Promise((r,e)=>{function t(){clearTimeout(i),window.removeEventListener("blur",n)}function n(){t(),r()}window.addEventListener("blur",n);const i=setTimeout(()=>{t(),e()},2e3)})}let Gn=null;function R0(r){Gn==null&&(Gn=document.createElement("iframe"),Gn.style.display="none",document.body.appendChild(Gn)),Gn.contentWindow.location.href=r.toString()}function M0(r){return ae(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const e=k0();switch(e){case Wr.Firefox:R0(r);break;case Wr.Other:{const t=I0();window.location.assign(r),yield t;break}default:}}catch{throw new Ye(Ze.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function C0(r,e){return ae(this,void 0,void 0,function*(){const t=S0(),n=yield B0(r,t,e);return yield M0(n),t})}const ga={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},T0="com.solana.mobilewalletadapter.v1";function L0(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Ye(Ze.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function N0(r){let e;try{e=new URL(r)}catch{throw new Ye(Ze.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new Ye(Ze.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function pa(r){return new DataView(r).getUint32(0,!1)}function P0(r,e){return ae(this,void 0,void 0,function*(){L0();const t=yield m0(),i=`ws://localhost:${yield C0(t.publicKey,e?.baseUri)}/solana-wallet`;let s;const o=(()=>{const g=[...ga.retryDelayScheduleMs];return()=>g.length>1?g.shift():g[0]})();let l=1,c=0,d={__type:"disconnected"};return new Promise((g,w)=>{let E;const A={},I=()=>ae(this,void 0,void 0,function*(){if(d.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${d.__type}\`.`);return}E.removeEventListener("open",I);const{associationKeypair:H}=d,F=yield ti();E.send(yield Xs(F.publicKey,H.privateKey)),d={__type:"hello_req_sent",associationPublicKey:H.publicKey,ecdhPrivateKey:F.privateKey}}),x=H=>{H.wasClean?d={__type:"disconnected"}:w(new Ye(Ze.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${H.code}: ${H.reason}).`,{closeEvent:H})),N()},v=H=>ae(this,void 0,void 0,function*(){N(),Date.now()-s>=ga.timeoutMs?w(new Ye(Ze.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise(F=>{const $=o();B=window.setTimeout(F,$)}),D())}),T=H=>ae(this,void 0,void 0,function*(){const F=yield H.data.arrayBuffer();switch(d.__type){case"connecting":if(F.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const $=yield ti();E.send(yield Xs($.publicKey,t.privateKey)),d={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:$.privateKey};break;case"connected":try{const K=F.slice(0,gn),C=pa(K);if(C!==c+1)throw new Error("Encrypted message has invalid sequence number");c=C;const P=yield y0(F,d.sharedSecret),O=A[P.id];delete A[P.id],O.resolve(P.result)}catch(K){if(K instanceof iu){const C=A[K.jsonRpcMessageId];delete A[K.jsonRpcMessageId],C.reject(K)}else throw K}break;case"hello_req_sent":{if(F.byteLength===0){const U=yield ti();E.send(yield Xs(U.publicKey,t.privateKey)),d={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:U.privateKey};break}const K=yield b0(F,d.associationPublicKey,d.ecdhPrivateKey),C=F.slice(ou),P=C.byteLength!==0?yield ae(this,void 0,void 0,function*(){const U=C.slice(0,gn),b=pa(U);if(b!==c+1)throw new Error("Encrypted message has invalid sequence number");return c=b,v0(C,K)}):{protocol_version:"legacy"};d={__type:"connected",sharedSecret:K,sessionProperties:P};const O=u0(P.protocol_version,(U,b)=>ae(this,void 0,void 0,function*(){const a=l++;return E.send(yield w0({id:a,jsonrpc:"2.0",method:U,params:b??{}},K)),new Promise((h,p)=>{A[a]={resolve(m){switch(U){case"authorize":case"reauthorize":{const{wallet_uri_base:S}=m;if(S!=null)try{N0(S)}catch(R){p(R);return}break}}h(m)},reject:p}})}));try{g(yield r(O))}catch(U){w(U)}finally{N(),E.close()}break}}});let N,B;const D=()=>{N&&N(),d={__type:"connecting",associationKeypair:t},s===void 0&&(s=Date.now()),E=new WebSocket(i,[T0]),E.addEventListener("open",I),E.addEventListener("close",x),E.addEventListener("error",v),E.addEventListener("message",T),N=()=>{window.clearTimeout(B),E.removeEventListener("open",I),E.removeEventListener("close",x),E.removeEventListener("error",v),E.removeEventListener("message",T)}};D()})})}var ei,ma;function O0(){if(ma)return ei;ma=1;function r(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var l=e.length,c=e.charAt(0),d=Math.log(l)/Math.log(256),g=Math.log(256)/Math.log(l);function w(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var x=0,v=0,T=0,N=I.length;T!==N&&I[T]===0;)T++,x++;for(var B=(N-T)*g+1>>>0,D=new Uint8Array(B);T!==N;){for(var H=I[T],F=0,$=B-1;(H!==0||F<v)&&$!==-1;$--,F++)H+=256*D[$]>>>0,D[$]=H%l>>>0,H=H/l>>>0;if(H!==0)throw new Error("Non-zero carry");v=F,T++}for(var K=B-v;K!==B&&D[K]===0;)K++;for(var C=c.repeat(x);K<B;++K)C+=e.charAt(D[K]);return C}function E(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;for(var x=0,v=0,T=0;I[x]===c;)v++,x++;for(var N=(I.length-x)*d+1>>>0,B=new Uint8Array(N);I[x];){var D=I.charCodeAt(x);if(D>255)return;var H=t[D];if(H===255)return;for(var F=0,$=N-1;(H!==0||F<T)&&$!==-1;$--,F++)H+=l*B[$]>>>0,B[$]=H%256>>>0,H=H/256>>>0;if(H!==0)throw new Error("Non-zero carry");T=F,x++}for(var K=N-T;K!==N&&B[K]===0;)K++;for(var C=new Uint8Array(v+(N-K)),P=v;K!==N;)C[P++]=B[K++];return C}function A(I){var x=E(I);if(x)return x;throw new Error("Non-base"+l+" character")}return{encode:w,decodeUnsafe:E,decode:A}}return ei=r,ei}var ni,wa;function U0(){return wa||(wa=1,ni=O0()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),ni}var q0=U0();const F0=an(q0);function ri(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Ar(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(g){try{d(n.next(g))}catch(w){o(w)}}function c(g){try{d(n.throw(g))}catch(w){o(w)}}function d(g){g.done?s(g.value):i(g.value).then(l,c)}d((n=n.apply(r,[])).next())})}function lu(r){return window.btoa(String.fromCharCode.call(null,...r))}function si(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function ya(r){const e="version"in r?r.serialize():r.serialize({requireAllSignatures:!1,verifySignatures:!1});return lu(e)}function D0(r){const t=r[0]*ir+1;return no.deserializeMessageVersion(r.slice(t,r.length))==="legacy"?Te.from(r):ar.deserialize(r)}function z0(r,e){return Ar(this,void 0,void 0,function*(){return yield P0(n=>{const i=new Proxy({},{get(s,o){if(s[o]==null)switch(o){case"signAndSendTransactions":s[o]=function(l){var{minContextSlot:c,commitment:d,skipPreflight:g,maxRetries:w,waitForCommitmentToSendNextTransaction:E,transactions:A}=l,I=ri(l,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return Ar(this,void 0,void 0,function*(){const x=A.map(ya),v={min_context_slot:c,commitment:d,skip_preflight:g,max_retries:w,wait_for_commitment_to_send_next_transaction:E},{signatures:T}=yield n.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},I),Object.values(v).some(B=>B!=null)?{options:v}:null),{payloads:x}));return T.map(si).map(F0.encode)})};break;case"signMessages":s[o]=function(l){var{payloads:c}=l,d=ri(l,["payloads"]);return Ar(this,void 0,void 0,function*(){const g=c.map(lu),{signed_payloads:w}=yield n.signMessages(Object.assign(Object.assign({},d),{payloads:g}));return w.map(si)})};break;case"signTransactions":s[o]=function(l){var{transactions:c}=l,d=ri(l,["transactions"]);return Ar(this,void 0,void 0,function*(){const g=c.map(ya),{signed_payloads:w}=yield n.signTransactions(Object.assign(Object.assign({},d),{payloads:g}));return w.map(si).map(D0)})};break;default:{s[o]=n[o];break}}return s[o]},defineProperty(){return!1},deleteProperty(){return!1}});return r(i)},e)})}var In={},ii,ba;function W0(){return ba||(ba=1,ii=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),ii}var oi={},nn={},va;function An(){if(va)return nn;va=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return nn.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},nn.getSymbolTotalCodewords=function(n){return e[n]},nn.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n},nn.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},nn.isKanjiModeEnabled=function(){return typeof r<"u"},nn.toSJIS=function(n){return r(n)},nn}var ai={},Sa;function ao(){return Sa||(Sa=1,function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+t)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,i){if(r.isValid(n))return n;try{return e(n)}catch{return i}}}(ai)),ai}var ci,Ea;function K0(){if(Ea)return ci;Ea=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},ci=r,ci}var ui,_a;function H0(){if(_a)return ui;_a=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,t,n,i){const s=e*this.size+t;this.data[s]=n,i&&(this.reservedBit[s]=!0)},r.prototype.get=function(e,t){return this.data[e*this.size+t]},r.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},r.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},ui=r,ui}var li={},Aa;function $0(){return Aa||(Aa=1,function(r){const e=An().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,l=[s-7];for(let c=1;c<i-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},r.getPositions=function(n){const i=[],s=r.getRowColCoords(n),o=s.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||i.push([s[l],s[c]]);return i}}(li)),li}var fi={},xa;function j0(){if(xa)return fi;xa=1;const r=An().getSymbolSize,e=7;return fi.getPositions=function(n){const i=r(n);return[[0,0],[i-e,0],[0,i-e]]},fi}var hi={},Ba;function V0(){return Ba||(Ba=1,function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},r.from=function(i){return r.isValid(i)?parseInt(i,10):void 0},r.getPenaltyN1=function(i){const s=i.size;let o=0,l=0,c=0,d=null,g=null;for(let w=0;w<s;w++){l=c=0,d=g=null;for(let E=0;E<s;E++){let A=i.get(w,E);A===d?l++:(l>=5&&(o+=e.N1+(l-5)),d=A,l=1),A=i.get(E,w),A===g?c++:(c>=5&&(o+=e.N1+(c-5)),g=A,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},r.getPenaltyN2=function(i){const s=i.size;let o=0;for(let l=0;l<s-1;l++)for(let c=0;c<s-1;c++){const d=i.get(l,c)+i.get(l,c+1)+i.get(l+1,c)+i.get(l+1,c+1);(d===4||d===0)&&o++}return o*e.N2},r.getPenaltyN3=function(i){const s=i.size;let o=0,l=0,c=0;for(let d=0;d<s;d++){l=c=0;for(let g=0;g<s;g++)l=l<<1&2047|i.get(d,g),g>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|i.get(g,d),g>=10&&(c===1488||c===93)&&o++}return o*e.N3},r.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let c=0;c<o;c++)s+=i.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function t(n,i,s){switch(n){case r.Patterns.PATTERN000:return(i+s)%2===0;case r.Patterns.PATTERN001:return i%2===0;case r.Patterns.PATTERN010:return s%3===0;case r.Patterns.PATTERN011:return(i+s)%3===0;case r.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case r.Patterns.PATTERN101:return i*s%2+i*s%3===0;case r.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case r.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(i,s){const o=s.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)s.isReserved(c,l)||s.xor(c,l,t(i,c,l))},r.getBestMask=function(i,s){const o=Object.keys(r.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){s(d),r.applyMask(d,i);const g=r.getPenaltyN1(i)+r.getPenaltyN2(i)+r.getPenaltyN3(i)+r.getPenaltyN4(i);r.applyMask(d,i),g<c&&(c=g,l=d)}return l}}(hi)),hi}var xr={},ka;function fu(){if(ka)return xr;ka=1;const r=ao(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return xr.getBlocksCount=function(i,s){switch(s){case r.L:return e[(i-1)*4+0];case r.M:return e[(i-1)*4+1];case r.Q:return e[(i-1)*4+2];case r.H:return e[(i-1)*4+3];default:return}},xr.getTotalCodewordsCount=function(i,s){switch(s){case r.L:return t[(i-1)*4+0];case r.M:return t[(i-1)*4+1];case r.Q:return t[(i-1)*4+2];case r.H:return t[(i-1)*4+3];default:return}},xr}var di={},Zn={},Ia;function G0(){if(Ia)return Zn;Ia=1;const r=new Uint8Array(512),e=new Uint8Array(256);return function(){let n=1;for(let i=0;i<255;i++)r[i]=n,e[n]=i,n<<=1,n&256&&(n^=285);for(let i=255;i<512;i++)r[i]=r[i-255]}(),Zn.log=function(n){if(n<1)throw new Error("log("+n+")");return e[n]},Zn.exp=function(n){return r[n]},Zn.mul=function(n,i){return n===0||i===0?0:r[e[n]+e[i]]},Zn}var Ra;function Z0(){return Ra||(Ra=1,function(r){const e=G0();r.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<i.length;l++)s[o+l]^=e.mul(n[o],i[l]);return s},r.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let c=0;c<i.length;c++)s[c]^=e.mul(i[c],o);let l=0;for(;l<s.length&&s[l]===0;)l++;s=s.slice(l)}return s},r.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=r.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(di)),di}var gi,Ma;function Y0(){if(Ma)return gi;Ma=1;const r=Z0();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(n.length+this.degree);i.set(n);const s=r.mod(i,this.genPoly),o=this.degree-s.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(s,o),l}return s},gi=e,gi}var pi={},mi={},wi={},Ca;function hu(){return Ca||(Ca=1,wi.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),wi}var qe={},Ta;function du(){if(Ta)return qe;Ta=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;qe.KANJI=new RegExp(t,"g"),qe.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),qe.BYTE=new RegExp(n,"g"),qe.NUMERIC=new RegExp(r,"g"),qe.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+t+"$"),s=new RegExp("^"+r+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return qe.testKanji=function(c){return i.test(c)},qe.testNumeric=function(c){return s.test(c)},qe.testAlphanumeric=function(c){return o.test(c)},qe}var La;function xn(){return La||(La=1,function(r){const e=hu(),t=du();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},r.getBestModeForData=function(s){return t.testNumeric(s)?r.NUMERIC:t.testAlphanumeric(s)?r.ALPHANUMERIC:t.testKanji(s)?r.KANJI:r.BYTE},r.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},r.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+i)}}r.from=function(s,o){if(r.isValid(s))return s;try{return n(s)}catch{return o}}}(mi)),mi}var Na;function J0(){return Na||(Na=1,function(r){const e=An(),t=fu(),n=ao(),i=xn(),s=hu(),o=7973,l=e.getBCHDigit(o);function c(E,A,I){for(let x=1;x<=40;x++)if(A<=r.getCapacity(x,I,E))return x}function d(E,A){return i.getCharCountIndicator(E,A)+4}function g(E,A){let I=0;return E.forEach(function(x){const v=d(x.mode,A);I+=v+x.getBitsLength()}),I}function w(E,A){for(let I=1;I<=40;I++)if(g(E,I)<=r.getCapacity(I,A,i.MIXED))return I}r.from=function(A,I){return s.isValid(A)?parseInt(A,10):I},r.getCapacity=function(A,I,x){if(!s.isValid(A))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=i.BYTE);const v=e.getSymbolTotalCodewords(A),T=t.getTotalCodewordsCount(A,I),N=(v-T)*8;if(x===i.MIXED)return N;const B=N-d(x,A);switch(x){case i.NUMERIC:return Math.floor(B/10*3);case i.ALPHANUMERIC:return Math.floor(B/11*2);case i.KANJI:return Math.floor(B/13);case i.BYTE:default:return Math.floor(B/8)}},r.getBestVersionForData=function(A,I){let x;const v=n.from(I,n.M);if(Array.isArray(A)){if(A.length>1)return w(A,v);if(A.length===0)return 1;x=A[0]}else x=A;return c(x.mode,x.getLength(),v)},r.getEncodedBits=function(A){if(!s.isValid(A)||A<7)throw new Error("Invalid QR Code version");let I=A<<12;for(;e.getBCHDigit(I)-l>=0;)I^=o<<e.getBCHDigit(I)-l;return A<<12|I}}(pi)),pi}var yi={},Pa;function X0(){if(Pa)return yi;Pa=1;const r=An(),e=1335,t=21522,n=r.getBCHDigit(e);return yi.getEncodedBits=function(s,o){const l=s.bit<<3|o;let c=l<<10;for(;r.getBCHDigit(c)-n>=0;)c^=e<<r.getBCHDigit(c)-n;return(l<<10|c)^t},yi}var bi={},vi,Oa;function Q0(){if(Oa)return vi;Oa=1;const r=xn();function e(t){this.mode=r.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let i,s,o;for(i=0;i+3<=this.data.length;i+=3)s=this.data.substr(i,3),o=parseInt(s,10),n.put(o,10);const l=this.data.length-i;l>0&&(s=this.data.substr(i),o=parseInt(s,10),n.put(o,l*3+1))},vi=e,vi}var Si,Ua;function tg(){if(Ua)return Si;Ua=1;const r=xn(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(n){this.mode=r.ALPHANUMERIC,this.data=n}return t.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(i){let s;for(s=0;s+2<=this.data.length;s+=2){let o=e.indexOf(this.data[s])*45;o+=e.indexOf(this.data[s+1]),i.put(o,11)}this.data.length%2&&i.put(e.indexOf(this.data[s]),6)},Si=t,Si}var Ei,qa;function eg(){if(qa)return Ei;qa=1;const r=xn();function e(t){this.mode=r.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(n){return n*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let n=0,i=this.data.length;n<i;n++)t.put(this.data[n],8)},Ei=e,Ei}var _i,Fa;function ng(){if(Fa)return _i;Fa=1;const r=xn(),e=An();function t(n){this.mode=r.KANJI,this.data=n}return t.getBitsLength=function(i){return i*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let i;for(i=0;i<this.data.length;i++){let s=e.toSJIS(this.data[i]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),n.put(s,13)}},_i=t,_i}var Ai={exports:{}},Da;function rg(){return Da||(Da=1,function(r){var e={single_source_shortest_paths:function(t,n,i){var s={},o={};o[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var c,d,g,w,E,A,I,x,v;!l.empty();){c=l.pop(),d=c.value,w=c.cost,E=t[d]||{};for(g in E)E.hasOwnProperty(g)&&(A=E[g],I=w+A,x=o[g],v=typeof o[g]>"u",(v||x>I)&&(o[g]=I,l.push(g,I),s[g]=d))}if(typeof i<"u"&&typeof o[i]>"u"){var T=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(T)}return s},extract_shortest_path_from_predecessor_list:function(t,n){for(var i=[],s=n;s;)i.push(s),t[s],s=t[s];return i.reverse(),i},find_path:function(t,n,i){var s=e.single_source_shortest_paths(t,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,i={},s;t=t||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=t.sorter||n.default_sorter,i},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var i={value:t,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e}(Ai)),Ai.exports}var za;function sg(){return za||(za=1,function(r){const e=xn(),t=Q0(),n=tg(),i=eg(),s=ng(),o=du(),l=An(),c=rg();function d(T){return unescape(encodeURIComponent(T)).length}function g(T,N,B){const D=[];let H;for(;(H=T.exec(B))!==null;)D.push({data:H[0],index:H.index,mode:N,length:H[0].length});return D}function w(T){const N=g(o.NUMERIC,e.NUMERIC,T),B=g(o.ALPHANUMERIC,e.ALPHANUMERIC,T);let D,H;return l.isKanjiModeEnabled()?(D=g(o.BYTE,e.BYTE,T),H=g(o.KANJI,e.KANJI,T)):(D=g(o.BYTE_KANJI,e.BYTE,T),H=[]),N.concat(B,D,H).sort(function($,K){return $.index-K.index}).map(function($){return{data:$.data,mode:$.mode,length:$.length}})}function E(T,N){switch(N){case e.NUMERIC:return t.getBitsLength(T);case e.ALPHANUMERIC:return n.getBitsLength(T);case e.KANJI:return s.getBitsLength(T);case e.BYTE:return i.getBitsLength(T)}}function A(T){return T.reduce(function(N,B){const D=N.length-1>=0?N[N.length-1]:null;return D&&D.mode===B.mode?(N[N.length-1].data+=B.data,N):(N.push(B),N)},[])}function I(T){const N=[];for(let B=0;B<T.length;B++){const D=T[B];switch(D.mode){case e.NUMERIC:N.push([D,{data:D.data,mode:e.ALPHANUMERIC,length:D.length},{data:D.data,mode:e.BYTE,length:D.length}]);break;case e.ALPHANUMERIC:N.push([D,{data:D.data,mode:e.BYTE,length:D.length}]);break;case e.KANJI:N.push([D,{data:D.data,mode:e.BYTE,length:d(D.data)}]);break;case e.BYTE:N.push([{data:D.data,mode:e.BYTE,length:d(D.data)}])}}return N}function x(T,N){const B={},D={start:{}};let H=["start"];for(let F=0;F<T.length;F++){const $=T[F],K=[];for(let C=0;C<$.length;C++){const P=$[C],O=""+F+C;K.push(O),B[O]={node:P,lastCount:0},D[O]={};for(let U=0;U<H.length;U++){const b=H[U];B[b]&&B[b].node.mode===P.mode?(D[b][O]=E(B[b].lastCount+P.length,P.mode)-E(B[b].lastCount,P.mode),B[b].lastCount+=P.length):(B[b]&&(B[b].lastCount=P.length),D[b][O]=E(P.length,P.mode)+4+e.getCharCountIndicator(P.mode,N))}}H=K}for(let F=0;F<H.length;F++)D[H[F]].end=0;return{map:D,table:B}}function v(T,N){let B;const D=e.getBestModeForData(T);if(B=e.from(N,D),B!==e.BYTE&&B.bit<D.bit)throw new Error('"'+T+'" cannot be encoded with mode '+e.toString(B)+`.
 Suggested mode is: `+e.toString(D));switch(B===e.KANJI&&!l.isKanjiModeEnabled()&&(B=e.BYTE),B){case e.NUMERIC:return new t(T);case e.ALPHANUMERIC:return new n(T);case e.KANJI:return new s(T);case e.BYTE:return new i(T)}}r.fromArray=function(N){return N.reduce(function(B,D){return typeof D=="string"?B.push(v(D,null)):D.data&&B.push(v(D.data,D.mode)),B},[])},r.fromString=function(N,B){const D=w(N,l.isKanjiModeEnabled()),H=I(D),F=x(H,B),$=c.find_path(F.map,"start","end"),K=[];for(let C=1;C<$.length-1;C++)K.push(F.table[$[C]].node);return r.fromArray(A(K))},r.rawSplit=function(N){return r.fromArray(w(N,l.isKanjiModeEnabled()))}}(bi)),bi}var Wa;function ig(){if(Wa)return oi;Wa=1;const r=An(),e=ao(),t=K0(),n=H0(),i=$0(),s=j0(),o=V0(),l=fu(),c=Y0(),d=J0(),g=X0(),w=xn(),E=sg();function A(F,$){const K=F.size,C=s.getPositions($);for(let P=0;P<C.length;P++){const O=C[P][0],U=C[P][1];for(let b=-1;b<=7;b++)if(!(O+b<=-1||K<=O+b))for(let a=-1;a<=7;a++)U+a<=-1||K<=U+a||(b>=0&&b<=6&&(a===0||a===6)||a>=0&&a<=6&&(b===0||b===6)||b>=2&&b<=4&&a>=2&&a<=4?F.set(O+b,U+a,!0,!0):F.set(O+b,U+a,!1,!0))}}function I(F){const $=F.size;for(let K=8;K<$-8;K++){const C=K%2===0;F.set(K,6,C,!0),F.set(6,K,C,!0)}}function x(F,$){const K=i.getPositions($);for(let C=0;C<K.length;C++){const P=K[C][0],O=K[C][1];for(let U=-2;U<=2;U++)for(let b=-2;b<=2;b++)U===-2||U===2||b===-2||b===2||U===0&&b===0?F.set(P+U,O+b,!0,!0):F.set(P+U,O+b,!1,!0)}}function v(F,$){const K=F.size,C=d.getEncodedBits($);let P,O,U;for(let b=0;b<18;b++)P=Math.floor(b/3),O=b%3+K-8-3,U=(C>>b&1)===1,F.set(P,O,U,!0),F.set(O,P,U,!0)}function T(F,$,K){const C=F.size,P=g.getEncodedBits($,K);let O,U;for(O=0;O<15;O++)U=(P>>O&1)===1,O<6?F.set(O,8,U,!0):O<8?F.set(O+1,8,U,!0):F.set(C-15+O,8,U,!0),O<8?F.set(8,C-O-1,U,!0):O<9?F.set(8,15-O-1+1,U,!0):F.set(8,15-O-1,U,!0);F.set(C-8,8,1,!0)}function N(F,$){const K=F.size;let C=-1,P=K-1,O=7,U=0;for(let b=K-1;b>0;b-=2)for(b===6&&b--;;){for(let a=0;a<2;a++)if(!F.isReserved(P,b-a)){let h=!1;U<$.length&&(h=($[U]>>>O&1)===1),F.set(P,b-a,h),O--,O===-1&&(U++,O=7)}if(P+=C,P<0||K<=P){P-=C,C=-C;break}}}function B(F,$,K){const C=new t;K.forEach(function(a){C.put(a.mode.bit,4),C.put(a.getLength(),w.getCharCountIndicator(a.mode,F)),a.write(C)});const P=r.getSymbolTotalCodewords(F),O=l.getTotalCodewordsCount(F,$),U=(P-O)*8;for(C.getLengthInBits()+4<=U&&C.put(0,4);C.getLengthInBits()%8!==0;)C.putBit(0);const b=(U-C.getLengthInBits())/8;for(let a=0;a<b;a++)C.put(a%2?17:236,8);return D(C,F,$)}function D(F,$,K){const C=r.getSymbolTotalCodewords($),P=l.getTotalCodewordsCount($,K),O=C-P,U=l.getBlocksCount($,K),b=C%U,a=U-b,h=Math.floor(C/U),p=Math.floor(O/U),m=p+1,S=h-p,R=new c(S);let L=0;const _=new Array(U),u=new Array(U);let f=0;const y=new Uint8Array(F.buffer);for(let et=0;et<U;et++){const ht=et<a?p:m;_[et]=y.slice(L,L+ht),u[et]=R.encode(_[et]),L+=ht,f=Math.max(f,ht)}const k=new Uint8Array(C);let q=0,j,Z;for(j=0;j<f;j++)for(Z=0;Z<U;Z++)j<_[Z].length&&(k[q++]=_[Z][j]);for(j=0;j<S;j++)for(Z=0;Z<U;Z++)k[q++]=u[Z][j];return k}function H(F,$,K,C){let P;if(Array.isArray(F))P=E.fromArray(F);else if(typeof F=="string"){let h=$;if(!h){const p=E.rawSplit(F);h=d.getBestVersionForData(p,K)}P=E.fromString(F,h||40)}else throw new Error("Invalid data");const O=d.getBestVersionForData(P,K);if(!O)throw new Error("The amount of data is too big to be stored in a QR Code");if(!$)$=O;else if($<O)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+O+`.
`);const U=B($,K,P),b=r.getSymbolSize($),a=new n(b);return A(a,$),I(a),x(a,$),T(a,K,0),$>=7&&v(a,$),N(a,U),isNaN(C)&&(C=o.getBestMask(a,T.bind(null,a,K))),o.applyMask(C,a),T(a,K,C),{modules:a,version:$,errorCorrectionLevel:K,maskPattern:C,segments:P}}return oi.create=function($,K){if(typeof $>"u"||$==="")throw new Error("No input text");let C=e.M,P,O;return typeof K<"u"&&(C=e.from(K.errorCorrectionLevel,e.M),P=d.from(K.version),O=o.from(K.maskPattern),K.toSJISFunc&&r.setToSJISFunction(K.toSJISFunc)),H($,P,C,O)},oi}var xi={},Bi={},Ka;function gu(){return Ka||(Ka=1,function(r){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},r.getImageWidth=function(n,i){const s=r.getScale(n,i);return Math.floor((n+i.margin*2)*s)},r.qrToImageData=function(n,i,s){const o=i.modules.size,l=i.modules.data,c=r.getScale(o,s),d=Math.floor((o+s.margin*2)*c),g=s.margin*c,w=[s.color.light,s.color.dark];for(let E=0;E<d;E++)for(let A=0;A<d;A++){let I=(E*d+A)*4,x=s.color.light;if(E>=g&&A>=g&&E<d-g&&A<d-g){const v=Math.floor((E-g)/c),T=Math.floor((A-g)/c);x=w[l[v*o+T]?1:0]}n[I++]=x.r,n[I++]=x.g,n[I++]=x.b,n[I]=x.a}}}(Bi)),Bi}var Ha;function og(){return Ha||(Ha=1,function(r){const e=gu();function t(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(s,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=n()),c=e.getOptions(c);const g=e.getImageWidth(s.modules.size,c),w=d.getContext("2d"),E=w.createImageData(g,g);return e.qrToImageData(E.data,s,c),t(w,d,g),w.putImageData(E,0,0),d},r.renderToDataURL=function(s,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=r.render(s,o,c),g=c.type||"image/png",w=c.rendererOpts||{};return d.toDataURL(g,w.quality)}}(xi)),xi}var ki={},$a;function ag(){if($a)return ki;$a=1;const r=gu();function e(i,s){const o=i.a/255,l=s+'="'+i.hex+'"';return o<1?l+" "+s+'-opacity="'+o.toFixed(2).slice(1)+'"':l}function t(i,s,o){let l=i+s;return typeof o<"u"&&(l+=" "+o),l}function n(i,s,o){let l="",c=0,d=!1,g=0;for(let w=0;w<i.length;w++){const E=Math.floor(w%s),A=Math.floor(w/s);!E&&!d&&(d=!0),i[w]?(g++,w>0&&E>0&&i[w-1]||(l+=d?t("M",E+o,.5+A+o):t("m",c,0),c=0,d=!1),E+1<s&&i[w+1]||(l+=t("h",g),g=0)):c++}return l}return ki.render=function(s,o,l){const c=r.getOptions(o),d=s.modules.size,g=s.modules.data,w=d+c.margin*2,E=c.color.light.a?"<path "+e(c.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",A="<path "+e(c.color.dark,"stroke")+' d="'+n(g,d,c.margin)+'"/>',I='viewBox="0 0 '+w+" "+w+'"',v='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+I+' shape-rendering="crispEdges">'+E+A+`</svg>
`;return typeof l=="function"&&l(null,v),v},ki}var ja;function cg(){if(ja)return In;ja=1;const r=W0(),e=ig(),t=og(),n=ag();function i(s,o,l,c,d){const g=[].slice.call(arguments,1),w=g.length,E=typeof g[w-1]=="function";if(!E&&!r())throw new Error("Callback required as last argument");if(E){if(w<2)throw new Error("Too few arguments provided");w===2?(d=l,l=o,o=c=void 0):w===3&&(o.getContext&&typeof d>"u"?(d=c,c=void 0):(d=c,c=l,l=o,o=void 0))}else{if(w<1)throw new Error("Too few arguments provided");return w===1?(l=o,o=c=void 0):w===2&&!o.getContext&&(c=l,l=o,o=void 0),new Promise(function(A,I){try{const x=e.create(l,c);A(s(x,o,c))}catch(x){I(x)}})}try{const A=e.create(l,c);d(null,s(A,o,c))}catch(A){d(A)}}return In.create=e.create,In.toCanvas=i.bind(null,t.render),In.toDataURL=i.bind(null,t.renderToDataURL),In.toString=i.bind(null,function(s,o,l){return n.render(s,l)}),In}cg();function dt(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(g){try{d(n.next(g))}catch(w){o(w)}}function c(g){try{d(n.throw(g))}catch(w){o(w)}}function d(g){g.done?s(g.value):i(g.value).then(l,c)}d((n=n.apply(r,[])).next())})}function Rr(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function ug(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}const tr="Mobile Wallet Adapter",lg=64;function fg(r){const e=Rr(r);return new it(e)}function Va(r){return"version"in r}function hg(r){switch(r){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet"}}class dg extends Cu{constructor(e){var t;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=tr,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=ug()?bt.Loadable:bt.Unsupported,this._authorizationResultCache=e.authorizationResultCache,this._addressSelector=e.addressSelector,this._appIdentity=e.appIdentity,this._chain=(t=e.chain)!==null&&t!==void 0?t:hg(e.cluster),this._hostAuthority=e.remoteHostAuthority,this._onWalletNotFound=e.onWalletNotFound,this._readyState!==bt.Unsupported&&this._authorizationResultCache.get().then(n=>{n&&this.declareWalletAsInstalled()})}get publicKey(){if(this._publicKey==null&&this._selectedAddress!=null)try{this._publicKey=fg(this._selectedAddress)}catch(e){throw new ic(e instanceof Error&&e?.message||"Unknown error",e)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==bt.Installed&&this.emit("readyStateChange",this._readyState=bt.Installed)}runWithGuard(e){return dt(this,void 0,void 0,function*(){try{return yield e()}catch(t){throw this.emit("error",t),t}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return dt(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return dt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>dt(this,void 0,void 0,function*(){if(this._readyState!==bt.Installed&&this._readyState!==bt.Loadable)throw new Nn;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();e&&this.handleAuthorizationResult(e)}catch(e){throw new Jn(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}connect(){return dt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>dt(this,void 0,void 0,function*(){if(this._readyState!==bt.Installed&&this._readyState!==bt.Loadable)throw new Nn;this._connecting=!0;try{yield this.performAuthorization()}catch(e){throw new Jn(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}performAuthorization(e){return dt(this,void 0,void 0,function*(){try{const t=yield this._authorizationResultCache.get();return t?(this.handleAuthorizationResult(t),t):yield this.transact(n=>dt(this,void 0,void 0,function*(){const i=yield n.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:e});return Promise.all([this._authorizationResultCache.set(i),this.handleAuthorizationResult(i)]),i}))}catch(t){throw new Jn(t instanceof Error&&t.message||"Unknown error",t)}})}handleAuthorizationResult(e){var t;return dt(this,void 0,void 0,function*(){const n=this._authorizationResult==null||((t=this._authorizationResult)===null||t===void 0?void 0:t.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some((i,s)=>i.address!==e.accounts[s].address);if(this._authorizationResult=e,this.declareWalletAsInstalled(),n){const i=yield this._addressSelector.select(e.accounts.map(({address:s})=>s));i!==this._selectedAddress&&(this._selectedAddress=i,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(e,t){return dt(this,void 0,void 0,function*(){try{const n=yield e.authorize({auth_token:t,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(n),this.handleAuthorizationResult(n)])}catch(n){throw this.disconnect(),new sc(n instanceof Error&&n?.message||"Unknown error",n)}})}disconnect(){return dt(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(e){var t;return dt(this,void 0,void 0,function*(){const n=(t=this._authorizationResult)===null||t===void 0?void 0:t.wallet_uri_base,i=n?{baseUri:n}:void 0,s=this._hostAuthority?{remoteHostAuthority:this._hostAuthority}:void 0,o=this._connectionGeneration;try{return yield z0(e,Object.assign(Object.assign({},i),s))}catch(l){throw this._connectionGeneration!==o&&(yield new Promise(()=>{})),l instanceof Error&&l.name==="SolanaMobileWalletAdapterError"&&l.code==="ERROR_WALLET_NOT_FOUND"&&(yield this._onWalletNotFound(this)),l}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new Fe;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(e){return dt(this,void 0,void 0,function*(){const{authToken:t}=this.assertIsAuthorized();try{return yield this.transact(n=>dt(this,void 0,void 0,function*(){return yield this.performReauthorization(n,t),yield n.signTransactions({transactions:e})}))}catch(n){throw new hn(n?.message,n)}})}sendTransaction(e,t,n){return dt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>dt(this,void 0,void 0,function*(){const{authToken:i}=this.assertIsAuthorized(),s=n?.minContextSlot;try{return yield this.transact(o=>dt(this,void 0,void 0,function*(){function l(){let w;switch(t.commitment){case"confirmed":case"finalized":case"processed":w=t.commitment;break;default:w="finalized"}let E;switch(n?.preflightCommitment){case"confirmed":case"finalized":case"processed":E=n.preflightCommitment;break;case void 0:E=w;break;default:E="finalized"}return(E==="finalized"?2:E==="confirmed"?1:0)<(w==="finalized"?2:w==="confirmed"?1:0)?E:w}const[c,d,g]=yield Promise.all([o.getCapabilities(),this.performReauthorization(o,i),Va(e)?null:dt(this,void 0,void 0,function*(){var w;if(e.feePayer||(e.feePayer=(w=this.publicKey)!==null&&w!==void 0?w:void 0),e.recentBlockhash==null){const{blockhash:E}=yield t.getLatestBlockhash({commitment:l()});e.recentBlockhash=E}})]);if(c.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions({minContextSlot:s,transactions:[e]}))[0];{const[w]=yield o.signTransactions({transactions:[e]});if(Va(w))return yield t.sendTransaction(w);{const E=w.serialize();return yield t.sendRawTransaction(E,Object.assign(Object.assign({},n),{preflightCommitment:l()}))}}}))}catch(o){throw new fn(o?.message,o)}}))})}signTransaction(e){return dt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>dt(this,void 0,void 0,function*(){const[t]=yield this.performSignTransactions([e]);return t}))})}signAllTransactions(e){return dt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>dt(this,void 0,void 0,function*(){return yield this.performSignTransactions(e)}))})}signMessage(e){return dt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>dt(this,void 0,void 0,function*(){const{authToken:t,selectedAddress:n}=this.assertIsAuthorized();try{return yield this.transact(i=>dt(this,void 0,void 0,function*(){yield this.performReauthorization(i,t);const[s]=yield i.signMessages({addresses:[n],payloads:[e]});return s.slice(-lg)}))}catch(i){throw new oc(i?.message,i)}}))})}signIn(e){return dt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>dt(this,void 0,void 0,function*(){var t,n;if(this._readyState!==bt.Installed&&this._readyState!==bt.Loadable)throw new Nn;this._connecting=!0;try{const i=yield this.performAuthorization(Object.assign(Object.assign({},e),{domain:(t=e?.domain)!==null&&t!==void 0?t:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const s=i.sign_in_result.address;return{account:Object.assign(Object.assign({},(n=i.accounts.find(l=>l.address==s))!==null&&n!==void 0?n:{address:s}),{publicKey:Rr(s)}),signedMessage:Rr(i.sign_in_result.signed_message),signature:Rr(i.sign_in_result.signature)}}catch(i){throw new Jn(i instanceof Error&&i.message||"Unknown error",i)}finally{this._connecting=!1}}))})}}function gg(){return{select(r){return dt(this,void 0,void 0,function*(){return r[0]})}}}const Ii="SolanaMobileWalletAdapterDefaultAuthorizationCache";function pg(){let r;try{r=window.localStorage}catch{}return{clear(){return dt(this,void 0,void 0,function*(){if(r)try{r.removeItem(Ii)}catch{}})},get(){return dt(this,void 0,void 0,function*(){if(r)try{return JSON.parse(r.getItem(Ii))||void 0}catch{}})},set(e){return dt(this,void 0,void 0,function*(){if(r)try{r.setItem(Ii,JSON.stringify(e))}catch{}})}}}function mg(r){return dt(this,void 0,void 0,function*(){typeof window<"u"&&window.location.assign(r.url)})}function wg(){return mg}var yg=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},bg=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Mr;function up(r){const e=({register:t})=>t(r);try{window.dispatchEvent(new vg(e))}catch(t){console.error(`wallet-standard:register-wallet event could not be dispatched
`,t)}try{window.addEventListener("wallet-standard:app-ready",({detail:t})=>e(t))}catch(t){console.error(`wallet-standard:app-ready event listener could not be added
`,t)}}class vg extends Event{get detail(){return yg(this,Mr,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),Mr.set(this,void 0),bg(this,Mr,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Mr=new WeakMap;function Sg(r,e){if(r===e)return!0;const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function Eg(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let d=0;d<e.length;d++)e[d]=255;for(let d=0;d<r.length;d++){const g=r.charAt(d),w=g.charCodeAt(0);if(e[w]!==255)throw new TypeError(g+" is ambiguous");e[w]=d}const t=r.length,n=r.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let g=0,w=0,E=0;const A=d.length;for(;E!==A&&d[E]===0;)E++,g++;const I=(A-E)*s+1>>>0,x=new Uint8Array(I);for(;E!==A;){let N=d[E],B=0;for(let D=I-1;(N!==0||B<w)&&D!==-1;D--,B++)N+=256*x[D]>>>0,x[D]=N%t>>>0,N=N/t>>>0;if(N!==0)throw new Error("Non-zero carry");w=B,E++}let v=I-w;for(;v!==I&&x[v]===0;)v++;let T=n.repeat(g);for(;v<I;++v)T+=r.charAt(x[v]);return T}function l(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let g=0,w=0,E=0;for(;d[g]===n;)w++,g++;const A=(d.length-g)*i+1>>>0,I=new Uint8Array(A);for(;g<d.length;){const N=d.charCodeAt(g);if(N>255)return;let B=e[N];if(B===255)return;let D=0;for(let H=A-1;(B!==0||D<E)&&H!==-1;H--,D++)B+=t*I[H]>>>0,I[H]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");E=D,g++}let x=A-E;for(;x!==A&&I[x]===0;)x++;const v=new Uint8Array(w+(A-x));let T=w;for(;x!==A;)v[T++]=I[x++];return v}function c(d){const g=l(d);if(g)return g;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:l,decode:c}}var _g="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Ag=Eg(_g);var nt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},ie=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},ge,_e,pn,mn,un,Qn,Kr,gt,Hr,Wi,Cr,Ki,er,Hi,Ga,Za,Ya,Ja;class xg extends ac{get name(){return nt(this,gt,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return nt(this,gt,"f").icon}get readyState(){return nt(this,Hr,"f")}get publicKey(){return nt(this,pn,"f")}get connecting(){return nt(this,mn,"f")}get supportedTransactionVersions(){return nt(this,Kr,"f")}get wallet(){return nt(this,gt,"f")}get standard(){return!0}constructor({wallet:e}){super(),ge.add(this),_e.set(this,void 0),pn.set(this,void 0),mn.set(this,void 0),un.set(this,void 0),Qn.set(this,void 0),Kr.set(this,void 0),gt.set(this,void 0),Hr.set(this,typeof window>"u"||typeof document>"u"?bt.Unsupported:bt.Installed),Hi.set(this,t=>{if("accounts"in t){const n=nt(this,gt,"f").accounts[0];nt(this,_e,"f")&&!nt(this,un,"f")&&n!==nt(this,_e,"f")&&(n?nt(this,ge,"m",Cr).call(this,n):(this.emit("error",new sc),nt(this,ge,"m",Ki).call(this)))}"features"in t&&nt(this,ge,"m",er).call(this)}),ie(this,gt,e,"f"),ie(this,_e,null,"f"),ie(this,pn,null,"f"),ie(this,mn,!1,"f"),ie(this,un,!1,"f"),ie(this,Qn,nt(this,gt,"f").features[uc].on("change",nt(this,Hi,"f")),"f"),nt(this,ge,"m",er).call(this)}destroy(){ie(this,_e,null,"f"),ie(this,pn,null,"f"),ie(this,mn,!1,"f"),ie(this,un,!1,"f");const e=nt(this,Qn,"f");e&&(ie(this,Qn,null,"f"),e())}async autoConnect(){return nt(this,ge,"m",Wi).call(this,{silent:!0})}async connect(){return nt(this,ge,"m",Wi).call(this)}async disconnect(){if(So in nt(this,gt,"f").features)try{ie(this,un,!0,"f"),await nt(this,gt,"f").features[So].disconnect()}catch(e){this.emit("error",new Iu(e?.message,e))}finally{ie(this,un,!1,"f")}nt(this,ge,"m",Ki).call(this)}async sendTransaction(e,t,n={}){try{const i=nt(this,_e,"f");if(!i)throw new Fe;let s;if(rn in nt(this,gt,"f").features)if(i.features.includes(rn))s=rn;else if(de in nt(this,gt,"f").features&&i.features.includes(de))s=de;else throw new Mn;else if(de in nt(this,gt,"f").features){if(!i.features.includes(de))throw new Mn;s=de}else throw new Yn;const o=r0(t.rpcEndpoint);if(!i.chains.includes(o))throw new fn;try{const{signers:l,...c}=n;let d;if(dn(e)?(l?.length&&e.sign(l),d=e.serialize()):(e=await this.prepareTransaction(e,t,c),l?.length&&e.partialSign(...l),d=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===rn){const[g]=await nt(this,gt,"f").features[rn].signAndSendTransaction({account:i,chain:o,transaction:d,options:{preflightCommitment:Js(c.preflightCommitment||t.commitment),skipPreflight:c.skipPreflight,maxRetries:c.maxRetries,minContextSlot:c.minContextSlot}});return Ag.encode(g.signature)}else{const[g]=await nt(this,gt,"f").features[de].signTransaction({account:i,chain:o,transaction:d,options:{preflightCommitment:Js(c.preflightCommitment||t.commitment),minContextSlot:c.minContextSlot}});return await t.sendRawTransaction(g.signedTransaction,{...c,preflightCommitment:Js(c.preflightCommitment||t.commitment)})}}catch(l){throw l instanceof ve?l:new fn(l?.message,l)}}catch(i){throw this.emit("error",i),i}}}_e=new WeakMap,pn=new WeakMap,mn=new WeakMap,un=new WeakMap,Qn=new WeakMap,Kr=new WeakMap,gt=new WeakMap,Hr=new WeakMap,Hi=new WeakMap,ge=new WeakSet,Wi=async function(e){try{if(this.connected||this.connecting)return;if(nt(this,Hr,"f")!==bt.Installed)throw new Nn;if(ie(this,mn,!0,"f"),!nt(this,gt,"f").accounts.length)try{await nt(this,gt,"f").features[cc].connect(e)}catch(n){throw new Jn(n?.message,n)}const t=nt(this,gt,"f").accounts[0];if(!t)throw new Mn;nt(this,ge,"m",Cr).call(this,t)}catch(t){throw this.emit("error",t),t}finally{ie(this,mn,!1,"f")}},Cr=function(e){let t;try{t=new it(e.address)}catch(n){throw new ic(n?.message,n)}ie(this,_e,e,"f"),ie(this,pn,t,"f"),nt(this,ge,"m",er).call(this),this.emit("connect",t)},Ki=function(){ie(this,_e,null,"f"),ie(this,pn,null,"f"),nt(this,ge,"m",er).call(this),this.emit("disconnect")},er=function(){const e=rn in nt(this,gt,"f").features?nt(this,gt,"f").features[rn].supportedTransactionVersions:nt(this,gt,"f").features[de].supportedTransactionVersions;ie(this,Kr,Sg(e,["legacy"])?null:new Set(e),"f"),de in nt(this,gt,"f").features&&nt(this,_e,"f")?.features.includes(de)?(this.signTransaction=nt(this,ge,"m",Ga),this.signAllTransactions=nt(this,ge,"m",Za)):(delete this.signTransaction,delete this.signAllTransactions),jn in nt(this,gt,"f").features&&nt(this,_e,"f")?.features.includes(jn)?this.signMessage=nt(this,ge,"m",Ya):delete this.signMessage,Bs in nt(this,gt,"f").features?this.signIn=nt(this,ge,"m",Ja):delete this.signIn},Ga=async function(e){try{const t=nt(this,_e,"f");if(!t)throw new Fe;if(!(de in nt(this,gt,"f").features))throw new Yn;if(!t.features.includes(de))throw new Mn;try{const i=(await nt(this,gt,"f").features[de].signTransaction({account:t,transaction:dn(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return dn(e)?ar.deserialize(i):Te.from(i)}catch(n){throw n instanceof ve?n:new hn(n?.message,n)}}catch(t){throw this.emit("error",t),t}},Za=async function(e){try{const t=nt(this,_e,"f");if(!t)throw new Fe;if(!(de in nt(this,gt,"f").features))throw new Yn;if(!t.features.includes(de))throw new Mn;try{const n=await nt(this,gt,"f").features[de].signTransaction(...e.map(i=>({account:t,transaction:dn(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((i,s)=>{const o=n[s].signedTransaction;return dn(i)?ar.deserialize(o):Te.from(o)})}catch(n){throw new hn(n?.message,n)}}catch(t){throw this.emit("error",t),t}},Ya=async function(e){try{const t=nt(this,_e,"f");if(!t)throw new Fe;if(!(jn in nt(this,gt,"f").features))throw new Yn;if(!t.features.includes(jn))throw new Mn;try{return(await nt(this,gt,"f").features[jn].signMessage({account:t,message:e}))[0].signature}catch(n){throw new oc(n?.message,n)}}catch(t){throw this.emit("error",t),t}},Ja=async function(e={}){try{if(!(Bs in nt(this,gt,"f").features))throw new Yn;let t;try{[t]=await nt(this,gt,"f").features[Bs].signIn(e)}catch(n){throw new vo(n?.message,n)}if(!t)throw new vo;return nt(this,ge,"m",Cr).call(this,t.account),t}catch(t){throw this.emit("error",t),t}};const Bg=Tu;var kg=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Ig=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Tr;let xe;const is=new Set;function Rg(r){nr=void 0,is.add(r)}function Mg(r){nr=void 0,is.delete(r)}const Ln={};function Cg(){if(xe||(xe=Object.freeze({register:Xa,get:Tg,on:Lg}),typeof window>"u"))return xe;const r=Object.freeze({register:Xa});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(r))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new Ng(r))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return xe}function Xa(...r){return r=r.filter(e=>!is.has(e)),r.length?(r.forEach(e=>Rg(e)),Ln.register?.forEach(e=>$i(()=>e(...r))),function(){r.forEach(t=>Mg(t)),Ln.unregister?.forEach(t=>$i(()=>t(...r)))}):()=>{}}let nr;function Tg(){return nr||(nr=[...is]),nr}function Lg(r,e){return Ln[r]?.push(e)||(Ln[r]=[e]),function(){Ln[r]=Ln[r]?.filter(n=>e!==n)}}function $i(r){try{r()}catch(e){console.error(e)}}class Ng extends Event{get detail(){return kg(this,Tr,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),Tr.set(this,void 0),Ig(this,Tr,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Tr=new WeakMap;function Pg(){if(xe||(xe=Cg(),typeof window>"u"))return xe;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),xe;const{register:e}=xe,t=(...n)=>n.forEach(i=>$i(()=>i({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),xe}return t(...r),xe}function Og(r){const e=Qa(()=>new Set),{get:t,on:n}=Qa(()=>Pg()),[i,s]=X.useState(()=>tc(t()));X.useEffect(()=>{const l=[n("register",(...c)=>s(d=>[...d,...tc(c)])),n("unregister",(...c)=>s(d=>d.filter(g=>c.some(w=>w===g.wallet))))];return()=>l.forEach(c=>c())},[n]);const o=Ug(i);return X.useEffect(()=>{if(!o)return;const l=new Set(i);new Set(o.filter(d=>!l.has(d))).forEach(d=>d.destroy())},[o,i]),X.useEffect(()=>()=>i.forEach(l=>l.destroy()),[]),X.useMemo(()=>[...i,...r.filter(({name:l})=>i.some(c=>c.name===l)?(e.has(l)||(e.add(l),console.warn(`${l} was registered as a Standard Wallet. The Wallet Adapter for ${l} can be removed from your app.`)),!1):!0)],[i,r,e])}function Qa(r){const e=X.useRef(void 0);return e.current===void 0&&(e.current={value:r()}),e.current.value}function Ug(r){const e=X.useRef(void 0);return X.useEffect(()=>{e.current=r}),e.current}function tc(r){return r.filter(Bg).map(e=>new xg({wallet:e}))}var Un;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(Un||(Un={}));function qg(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function Fg({adapters:r,userAgentString:e}){return r.some(t=>t.name!==tr&&t.readyState===bt.Installed)?Un.DESKTOP_WEB:e&&/android/i.test(e)&&!qg(e)?Un.MOBILE_WEB:Un.DESKTOP_WEB}function Dg(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function zg({children:r,wallets:e,adapter:t,isUnloadingRef:n,onAutoConnectRequest:i,onConnectError:s,onError:o,onSelectWallet:l}){const c=X.useRef(!1),[d,g]=X.useState(!1),w=X.useRef(!1),[E,A]=X.useState(!1),[I,x]=X.useState(()=>t?.publicKey??null),[v,T]=X.useState(()=>t?.connected??!1),N=X.useRef(o);X.useEffect(()=>(N.current=o,()=>{N.current=void 0}),[o]);const B=X.useRef((h,p)=>(n.current||(N.current?N.current(h,p):(console.error(h,p),h instanceof Nn&&typeof window<"u"&&p&&window.open(p.url,"_blank"))),h)),[D,H]=X.useState(()=>e.map(h=>({adapter:h,readyState:h.readyState})).filter(({readyState:h})=>h!==bt.Unsupported));X.useEffect(()=>{H(p=>e.map((m,S)=>{const R=p[S];return R&&R.adapter===m&&R.readyState===m.readyState?R:{adapter:m,readyState:m.readyState}}).filter(({readyState:m})=>m!==bt.Unsupported));function h(p){H(m=>{const S=m.findIndex(({adapter:L})=>L===this);if(S===-1)return m;const{adapter:R}=m[S];return[...m.slice(0,S),{adapter:R,readyState:p},...m.slice(S+1)].filter(({readyState:L})=>L!==bt.Unsupported)})}return e.forEach(p=>p.on("readyStateChange",h,p)),()=>{e.forEach(p=>p.off("readyStateChange",h,p))}},[t,e]);const F=X.useMemo(()=>D.find(h=>h.adapter===t)??null,[t,D]);X.useEffect(()=>{if(!t)return;const h=S=>{x(S),c.current=!1,g(!1),T(!0),w.current=!1,A(!1)},p=()=>{n.current||(x(null),c.current=!1,g(!1),T(!1),w.current=!1,A(!1))},m=S=>{B.current(S,t)};return t.on("connect",h),t.on("disconnect",p),t.on("error",m),()=>{t.off("connect",h),t.off("disconnect",p),t.off("error",m),p()}},[t,n]);const $=X.useRef(!1);X.useEffect(()=>()=>{$.current=!1},[t]),X.useEffect(()=>{$.current||c.current||v||!i||!(F?.readyState===bt.Installed||F?.readyState===bt.Loadable)||(c.current=!0,g(!0),$.current=!0,async function(){try{await i()}catch{s()}finally{g(!1),c.current=!1}}())},[v,i,s,F]);const K=X.useCallback(async(h,p,m)=>{if(!t)throw B.current(new la);if(!v)throw B.current(new Fe,t);return await t.sendTransaction(h,p,m)},[t,v]),C=X.useMemo(()=>t&&"signTransaction"in t?async h=>{if(!v)throw B.current(new Fe,t);return await t.signTransaction(h)}:void 0,[t,v]),P=X.useMemo(()=>t&&"signAllTransactions"in t?async h=>{if(!v)throw B.current(new Fe,t);return await t.signAllTransactions(h)}:void 0,[t,v]),O=X.useMemo(()=>t&&"signMessage"in t?async h=>{if(!v)throw B.current(new Fe,t);return await t.signMessage(h)}:void 0,[t,v]),U=X.useMemo(()=>t&&"signIn"in t?async h=>await t.signIn(h):void 0,[t]),b=X.useCallback(async()=>{if(c.current||w.current||F?.adapter.connected)return;if(!F)throw B.current(new la);const{adapter:h,readyState:p}=F;if(!(p===bt.Installed||p===bt.Loadable))throw B.current(new Nn,h);c.current=!0,g(!0);try{await h.connect()}catch(m){throw s(),m}finally{g(!1),c.current=!1}},[s,F]),a=X.useCallback(async()=>{if(!w.current&&t){w.current=!0,A(!0);try{await t.disconnect()}finally{A(!1),w.current=!1}}},[t]);return G.createElement(ru.Provider,{value:{autoConnect:!!i,wallets:D,wallet:F,publicKey:I,connected:v,connecting:d,disconnecting:E,select:l,connect:b,disconnect:a,sendTransaction:K,signTransaction:C,signAllTransactions:P,signMessage:O,signIn:U}},r)}let Ri;function Wg(){return Ri===void 0&&(Ri=globalThis.navigator?.userAgent??null),Ri}function ec(r){const e=Wg();return Fg({adapters:r,userAgentString:e})===Un.MOBILE_WEB}function Kg(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function lp({children:r,wallets:e,autoConnect:t,localStorageKey:n="walletName",onError:i}){const{connection:s}=Yd(),o=Og(e),l=X.useMemo(()=>{if(!ec(o))return null;const N=o.find(B=>B.name===tr);return N||new dg({addressSelector:gg(),appIdentity:{uri:Kg()},authorizationResultCache:pg(),cluster:Dg(s?.rpcEndpoint),onWalletNotFound:wg()})},[o,s?.rpcEndpoint]),c=X.useMemo(()=>l==null||o.indexOf(l)!==-1?o:[l,...o],[o,l]),[d,g]=Xd(n,null),w=X.useMemo(()=>c.find(N=>N.name===d)??null,[c,d]),E=X.useCallback(N=>{d!==N&&(w&&w.name!==tr&&w.disconnect(),g(N))},[w,g,d]);X.useEffect(()=>{if(!w)return;function N(){x.current||g(null)}return w.on("disconnect",N),()=>{w.off("disconnect",N)}},[w,o,g,d]);const A=X.useRef(!1),I=X.useMemo(()=>{if(!(!t||!w))return async()=>{(t===!0||await t(w))&&(A.current?await w.connect():await w.autoConnect())}},[t,w]),x=X.useRef(!1);X.useEffect(()=>{if(d===tr&&ec(o)){x.current=!1;return}function N(){x.current=!0}return window.addEventListener("beforeunload",N),()=>{window.removeEventListener("beforeunload",N)}},[o,d]);const v=X.useCallback(()=>{w&&E(null)},[w,E]),T=X.useCallback(N=>{A.current=!0,E(N)},[E]);return G.createElement(zg,{wallets:c,adapter:w,isUnloadingRef:x,onAutoConnectRequest:I,onConnectError:v,onError:i,onSelectWallet:T},r)}const pu={setVisible(r){console.error(mu("call","setVisible"))},visible:!1};Object.defineProperty(pu,"visible",{get(){return console.error(mu("read","visible")),!1}});function mu(r,e){return`You have tried to  ${r} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const wu=X.createContext(pu);function yu(){return X.useContext(wu)}function Hg({onSelectWallet:r}){const{connect:e,connected:t,connecting:n,disconnect:i,disconnecting:s,publicKey:o,select:l,wallet:c,wallets:d}=su();let g;n?g="connecting":t?g="connected":s?g="disconnecting":c?g="has-wallet":g="no-wallet";const w=X.useCallback(()=>{e().catch(()=>{})},[e]),E=X.useCallback(()=>{i().catch(()=>{})},[i]),A=X.useCallback(()=>{r({onSelectWallet:l,wallets:d})},[r,l,d]);return{buttonState:g,onConnect:g==="has-wallet"?w:void 0,onDisconnect:g!=="disconnecting"&&g!=="no-wallet"?E:void 0,onSelectWallet:A,publicKey:o??void 0,walletIcon:c?.adapter.icon,walletName:c?.adapter.name}}const bu=r=>G.createElement("button",{className:`wallet-adapter-button ${r.className||""}`,disabled:r.disabled,style:r.style,onClick:r.onClick,tabIndex:r.tabIndex||0,type:"button"},r.startIcon&&G.createElement("i",{className:"wallet-adapter-button-start-icon"},r.startIcon),r.children,r.endIcon&&G.createElement("i",{className:"wallet-adapter-button-end-icon"},r.endIcon)),vu=({wallet:r,...e})=>r&&G.createElement("img",{src:r.adapter.icon,alt:`${r.adapter.name} icon`,...e});function $g({walletIcon:r,walletName:e,...t}){return G.createElement(bu,{...t,className:"wallet-adapter-button-trigger",startIcon:r&&e?G.createElement(vu,{wallet:{adapter:{icon:r,name:e}}}):void 0})}function jg({children:r,labels:e,...t}){const{setVisible:n}=yu(),{buttonState:i,onConnect:s,onDisconnect:o,publicKey:l,walletIcon:c,walletName:d}=Hg({onSelectWallet(){n(!0)}}),[g,w]=X.useState(!1),[E,A]=X.useState(!1),I=X.useRef(null);X.useEffect(()=>{const v=T=>{const N=I.current;!N||N.contains(T.target)||A(!1)};return document.addEventListener("mousedown",v),document.addEventListener("touchstart",v),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("touchstart",v)}},[]);const x=X.useMemo(()=>{if(r)return r;if(l){const v=l.toBase58();return v.slice(0,4)+".."+v.slice(-4)}else return i==="connecting"||i==="has-wallet"?e[i]:e["no-wallet"]},[i,r,e,l]);return G.createElement("div",{className:"wallet-adapter-dropdown"},G.createElement($g,{...t,"aria-expanded":E,style:{pointerEvents:E?"none":"auto",...t.style},onClick:()=>{switch(i){case"no-wallet":n(!0);break;case"has-wallet":s&&s();break;case"connected":A(!0);break}},walletIcon:c,walletName:d},x),G.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${E&&"wallet-adapter-dropdown-list-active"}`,ref:I,role:"menu"},l?G.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(l.toBase58()),w(!0),setTimeout(()=>w(!1),400)},role:"menuitem"},g?e.copied:e["copy-address"]):null,G.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{n(!0),A(!1)},role:"menuitem"},e["change-wallet"]),o?G.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),A(!1)},role:"menuitem"},e.disconnect):null))}var Vg=Au();const nc=({id:r,children:e,expanded:t=!1})=>{const n=X.useRef(null),i=X.useRef(!0),s="height 250ms ease-out",o=()=>{const c=n.current;c&&requestAnimationFrame(()=>{c.style.height=c.scrollHeight+"px"})},l=()=>{const c=n.current;c&&requestAnimationFrame(()=>{c.style.height=c.offsetHeight+"px",c.style.overflow="hidden",requestAnimationFrame(()=>{c.style.height="0"})})};return X.useLayoutEffect(()=>{t?o():l()},[t]),X.useLayoutEffect(()=>{const c=n.current;if(!c)return;function d(){c&&(c.style.overflow=t?"initial":"hidden",t&&(c.style.height="auto"))}function g(w){c&&w.target===c&&w.propertyName==="height"&&d()}return i.current&&(d(),i.current=!1),c.addEventListener("transitionend",g),()=>c.removeEventListener("transitionend",g)},[t]),G.createElement("div",{className:"wallet-adapter-collapse",id:r,ref:n,role:"region",style:{height:0,transition:i.current?void 0:s}},e)},Mi=({handleClick:r,tabIndex:e,wallet:t})=>G.createElement("li",null,G.createElement(bu,{onClick:r,startIcon:G.createElement(vu,{wallet:t}),tabIndex:e},t.adapter.name,t.readyState===bt.Installed&&G.createElement("span",null,"Detected"))),Gg=()=>G.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},G.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),G.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),G.createElement("g",{clipPath:"url(#clip0_880_5115)"},G.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),G.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),G.createElement("defs",null,G.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},G.createElement("stop",{stopColor:"#9945FF"}),G.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),G.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),G.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),G.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),G.createElement("stop",{offset:"1",stopColor:"#00D18C"})),G.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},G.createElement("stop",{stopColor:"#9945FF"}),G.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),G.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),G.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),G.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),G.createElement("stop",{offset:"1",stopColor:"#00D18C"})),G.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},G.createElement("stop",{stopColor:"#9945FF"}),G.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),G.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),G.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),G.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),G.createElement("stop",{offset:"1",stopColor:"#00D18C"})),G.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},G.createElement("stop",{stopColor:"#9945FF"}),G.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),G.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),G.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),G.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),G.createElement("stop",{offset:"1",stopColor:"#00D18C"})),G.createElement("clipPath",{id:"clip0_880_5115"},G.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),Zg=({className:r="",container:e="body"})=>{const t=X.useRef(null),{wallets:n,select:i}=su(),{setVisible:s}=yu(),[o,l]=X.useState(!1),[c,d]=X.useState(!1),[g,w]=X.useState(null),[E,A]=X.useMemo(()=>{const B=[],D=[];for(const H of n)H.readyState===bt.Installed?B.push(H):D.push(H);return B.length?[B,D]:[D,[]]},[n]),I=X.useCallback(()=>{d(!1),setTimeout(()=>s(!1),150)},[s]),x=X.useCallback(B=>{B.preventDefault(),I()},[I]),v=X.useCallback((B,D)=>{i(D),x(B)},[i,x]),T=X.useCallback(()=>l(!o),[o]),N=X.useCallback(B=>{const D=t.current;if(!D)return;const H=D.querySelectorAll("button"),F=H[0],$=H[H.length-1];B.shiftKey?document.activeElement===F&&($.focus(),B.preventDefault()):document.activeElement===$&&(F.focus(),B.preventDefault())},[t]);return X.useLayoutEffect(()=>{const B=H=>{H.key==="Escape"?I():H.key==="Tab"&&N(H)},{overflow:D}=window.getComputedStyle(document.body);return setTimeout(()=>d(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",B,!1),()=>{document.body.style.overflow=D,window.removeEventListener("keydown",B,!1)}},[I,N]),X.useLayoutEffect(()=>w(document.querySelector(e)),[e]),g&&Vg.createPortal(G.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${c&&"wallet-adapter-modal-fade-in"} ${r}`,ref:t,role:"dialog"},G.createElement("div",{className:"wallet-adapter-modal-container"},G.createElement("div",{className:"wallet-adapter-modal-wrapper"},G.createElement("button",{onClick:x,className:"wallet-adapter-modal-button-close"},G.createElement("svg",{width:"14",height:"14"},G.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),E.length?G.createElement(G.Fragment,null,G.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),G.createElement("ul",{className:"wallet-adapter-modal-list"},E.map(B=>G.createElement(Mi,{key:B.adapter.name,handleClick:D=>v(D,B.adapter.name),wallet:B})),A.length?G.createElement(nc,{expanded:o,id:"wallet-adapter-modal-collapse"},A.map(B=>G.createElement(Mi,{key:B.adapter.name,handleClick:D=>v(D,B.adapter.name),tabIndex:o?0:-1,wallet:B}))):null),A.length?G.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:T,tabIndex:0},G.createElement("span",null,o?"Less ":"More ","options"),G.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},G.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):G.createElement(G.Fragment,null,G.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),G.createElement("div",{className:"wallet-adapter-modal-middle"},G.createElement(Gg,null)),A.length?G.createElement(G.Fragment,null,G.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:T,tabIndex:0},G.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),G.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},G.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),G.createElement(nc,{expanded:o,id:"wallet-adapter-modal-collapse"},G.createElement("ul",{className:"wallet-adapter-modal-list"},A.map(B=>G.createElement(Mi,{key:B.adapter.name,handleClick:D=>v(D,B.adapter.name),tabIndex:o?0:-1,wallet:B}))))):null))),G.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:x})),g)},fp=({children:r,...e})=>{const[t,n]=X.useState(!1);return G.createElement(wu.Provider,{value:{visible:t,setVisible:n}},r,t&&G.createElement(Zg,{...e}))},Yg={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function hp(r){return G.createElement(jg,{...r,labels:Yg})}export{Yn as A,Mu as B,Ru as C,Us as D,Dr as E,Ne as F,X as G,hp as H,Zd as I,su as J,Ir as K,ap as L,op as M,Eo as N,cp as O,it as P,lp as Q,fp as R,fa as S,Te as T,G as U,ar as V,bt as W,tp as a,ot as b,sc as c,ic as d,Nn as e,Jn as f,Mn as g,Iu as h,rp as i,Fe as j,dn as k,ve as l,fn as m,hn as n,oc as o,Qd as p,t0 as q,jn as r,np as s,de as t,rn as u,uc as v,So as w,cc as x,up as y,ep as z};
//# sourceMappingURL=solana-CpPL8tnJ.js.map
