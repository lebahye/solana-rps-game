import{r as Bu,g as An,a as Zs,b as Iu}from"./vendor-D44yUz92.js";var st=Bu();const nt=An(st);var Ii={exports:{}},So;function ku(){return So||(So=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(u,g,m){this.fn=u,this.context=g,this.once=m||!1}function i(u,g,m,b,k){if(typeof m!="function")throw new TypeError("The listener must be a function");var _=new s(m,b||u,k),R=t?t+g:g;return u._events[R]?u._events[R].fn?u._events[R]=[u._events[R],_]:u._events[R].push(_):(u._events[R]=_,u._eventsCount++),u}function o(u,g){--u._eventsCount===0?u._events=new n:delete u._events[g]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var g=[],m,b;if(this._eventsCount===0)return g;for(b in m=this._events)e.call(m,b)&&g.push(t?b.slice(1):b);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(m)):g},a.prototype.listeners=function(g){var m=t?t+g:g,b=this._events[m];if(!b)return[];if(b.fn)return[b.fn];for(var k=0,_=b.length,R=new Array(_);k<_;k++)R[k]=b[k].fn;return R},a.prototype.listenerCount=function(g){var m=t?t+g:g,b=this._events[m];return b?b.fn?1:b.length:0},a.prototype.emit=function(g,m,b,k,_,R){var I=t?t+g:g;if(!this._events[I])return!1;var E=this._events[I],N=arguments.length,P,M;if(E.fn){switch(E.once&&this.removeListener(g,E.fn,void 0,!0),N){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,m),!0;case 3:return E.fn.call(E.context,m,b),!0;case 4:return E.fn.call(E.context,m,b,k),!0;case 5:return E.fn.call(E.context,m,b,k,_),!0;case 6:return E.fn.call(E.context,m,b,k,_,R),!0}for(M=1,P=new Array(N-1);M<N;M++)P[M-1]=arguments[M];E.fn.apply(E.context,P)}else{var H=E.length,j;for(M=0;M<H;M++)switch(E[M].once&&this.removeListener(g,E[M].fn,void 0,!0),N){case 1:E[M].fn.call(E[M].context);break;case 2:E[M].fn.call(E[M].context,m);break;case 3:E[M].fn.call(E[M].context,m,b);break;case 4:E[M].fn.call(E[M].context,m,b,k);break;default:if(!P)for(j=1,P=new Array(N-1);j<N;j++)P[j-1]=arguments[j];E[M].fn.apply(E[M].context,P)}}return!0},a.prototype.on=function(g,m,b){return i(this,g,m,b,!1)},a.prototype.once=function(g,m,b){return i(this,g,m,b,!0)},a.prototype.removeListener=function(g,m,b,k){var _=t?t+g:g;if(!this._events[_])return this;if(!m)return o(this,_),this;var R=this._events[_];if(R.fn)R.fn===m&&(!k||R.once)&&(!b||R.context===b)&&o(this,_);else{for(var I=0,E=[],N=R.length;I<N;I++)(R[I].fn!==m||k&&!R[I].once||b&&R[I].context!==b)&&E.push(R[I]);E.length?this._events[_]=E.length===1?E[0]:E:o(this,_)}return this},a.prototype.removeAllListeners=function(g){var m;return g?(m=t?t+g:g,this._events[m]&&o(this,m)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a}(Ii)),Ii.exports}var Ru=ku();const Mu=An(Ru);class Ae extends Error{constructor(e,t){super(e),this.error=t}}class qn extends Ae{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class og extends Ae{constructor(){super(...arguments),this.name="WalletLoadError"}}class nr extends Ae{constructor(){super(...arguments),this.name="WalletConfigError"}}class rr extends Ae{constructor(){super(...arguments),this.name="WalletConnectionError"}}class uc extends Ae{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class Cu extends Ae{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Un extends Ae{constructor(){super(...arguments),this.name="WalletAccountError"}}class lc extends Ae{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class He extends Ae{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class gn extends Ae{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class mn extends Ae{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class fc extends Ae{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class xo extends Ae{constructor(){super(...arguments),this.name="WalletSignInError"}}var Nt;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(Nt||(Nt={}));class hc extends Mu{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,n={}){const s=this.publicKey;if(!s)throw new He;return e.feePayer=e.feePayer||s,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,e}}function ag(r){if(typeof window>"u"||typeof document>"u")return;const e=[];function t(){if(r())for(const i of e)i()}const n=setInterval(t,1e3);e.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",t,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",t))),document.readyState!=="complete"&&(window.addEventListener("load",t,{once:!0}),e.push(()=>window.removeEventListener("load",t))),t()}function cg(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),e=r.includes("iphone")||r.includes("ipad"),t=r.includes("safari");return e&&t}function yn(r){return"version"in r}class Tu extends hc{async sendTransaction(e,t,n={}){let s=!0;try{if(yn(e)){if(!this.supportedTransactionVersions)throw new gn("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new gn(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const i=e.serialize();return await t.sendRawTransaction(i,n)}catch(i){throw i instanceof mn?(s=!1,i):new gn(i?.message,i)}}else try{const{signers:i,...o}=n;e=await this.prepareTransaction(e,t,o),i?.length&&e.partialSign(...i),e=await this.signTransaction(e);const a=e.serialize();return await t.sendRawTransaction(a,o)}catch(i){throw i instanceof mn?(s=!1,i):new gn(i?.message,i)}}catch(i){throw s&&this.emit("error",i),i}}async signAllTransactions(e){for(const n of e)if(yn(n)){if(!this.supportedTransactionVersions)throw new mn("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new mn(`Signing transaction version ${n.version} isn't supported by this wallet`)}const t=[];for(const n of e)t.push(await this.signTransaction(n));return t}}class Lu extends Tu{}class Nu extends Lu{}const un="solana:signAndSendTransaction",ki="solana:signIn",Jn="solana:signMessage",we="solana:signTransaction",dc="standard:connect",_o="standard:disconnect",pc="standard:events";function Pu(r){return dc in r.features&&pc in r.features&&(un in r.features||we in r.features)}var Ao;(function(r){r.Mainnet="mainnet-beta",r.Testnet="testnet",r.Devnet="devnet"})(Ao||(Ao={}));var Ri={},Xn={},Bo;function Uu(){if(Bo)return Xn;Bo=1,Xn.byteLength=a,Xn.toByteArray=g,Xn.fromByteArray=k;for(var r=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)r[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(_){var R=_.length;if(R%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=_.indexOf("=");I===-1&&(I=R);var E=I===R?0:4-I%4;return[I,E]}function a(_){var R=o(_),I=R[0],E=R[1];return(I+E)*3/4-E}function u(_,R,I){return(R+I)*3/4-I}function g(_){var R,I=o(_),E=I[0],N=I[1],P=new t(u(_,E,N)),M=0,H=N>0?E-4:E,j;for(j=0;j<H;j+=4)R=e[_.charCodeAt(j)]<<18|e[_.charCodeAt(j+1)]<<12|e[_.charCodeAt(j+2)]<<6|e[_.charCodeAt(j+3)],P[M++]=R>>16&255,P[M++]=R>>8&255,P[M++]=R&255;return N===2&&(R=e[_.charCodeAt(j)]<<2|e[_.charCodeAt(j+1)]>>4,P[M++]=R&255),N===1&&(R=e[_.charCodeAt(j)]<<10|e[_.charCodeAt(j+1)]<<4|e[_.charCodeAt(j+2)]>>2,P[M++]=R>>8&255,P[M++]=R&255),P}function m(_){return r[_>>18&63]+r[_>>12&63]+r[_>>6&63]+r[_&63]}function b(_,R,I){for(var E,N=[],P=R;P<I;P+=3)E=(_[P]<<16&16711680)+(_[P+1]<<8&65280)+(_[P+2]&255),N.push(m(E));return N.join("")}function k(_){for(var R,I=_.length,E=I%3,N=[],P=16383,M=0,H=I-E;M<H;M+=P)N.push(b(_,M,M+P>H?H:M+P));return E===1?(R=_[I-1],N.push(r[R>>2]+r[R<<4&63]+"==")):E===2&&(R=(_[I-2]<<8)+_[I-1],N.push(r[R>>10]+r[R>>4&63]+r[R<<2&63]+"=")),N.join("")}return Xn}var vr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Io;function Ou(){return Io||(Io=1,vr.read=function(r,e,t,n,s){var i,o,a=s*8-n-1,u=(1<<a)-1,g=u>>1,m=-7,b=t?s-1:0,k=t?-1:1,_=r[e+b];for(b+=k,i=_&(1<<-m)-1,_>>=-m,m+=a;m>0;i=i*256+r[e+b],b+=k,m-=8);for(o=i&(1<<-m)-1,i>>=-m,m+=n;m>0;o=o*256+r[e+b],b+=k,m-=8);if(i===0)i=1-g;else{if(i===u)return o?NaN:(_?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-g}return(_?-1:1)*o*Math.pow(2,i-n)},vr.write=function(r,e,t,n,s,i){var o,a,u,g=i*8-s-1,m=(1<<g)-1,b=m>>1,k=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:i-1,R=n?1:-1,I=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=m):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+b>=1?e+=k/u:e+=k*Math.pow(2,1-b),e*u>=2&&(o++,u/=2),o+b>=m?(a=0,o=m):o+b>=1?(a=(e*u-1)*Math.pow(2,s),o=o+b):(a=e*Math.pow(2,b-1)*Math.pow(2,s),o=0));s>=8;r[t+_]=a&255,_+=R,a/=256,s-=8);for(o=o<<s|a,g+=s;g>0;r[t+_]=o&255,_+=R,o/=256,g-=8);r[t+_-R]|=I*128}),vr}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ko;function Ys(){return ko||(ko=1,function(r){const e=Uu(),t=Ou(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=P,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const v=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(v,h),v.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(v){if(v>s)throw new RangeError('The value "'+v+'" is invalid for option "size"');const h=new Uint8Array(v);return Object.setPrototypeOf(h,a.prototype),h}function a(v,h,p){if(typeof v=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(v)}return u(v,h,p)}a.poolSize=8192;function u(v,h,p){if(typeof v=="string")return k(v,h);if(ArrayBuffer.isView(v))return R(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(ge(v,ArrayBuffer)||v&&ge(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(v,SharedArrayBuffer)||v&&ge(v.buffer,SharedArrayBuffer)))return I(v,h,p);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const C=v.valueOf&&v.valueOf();if(C!=null&&C!==v)return a.from(C,h,p);const z=E(v);if(z)return z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return a.from(v[Symbol.toPrimitive]("string"),h,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}a.from=function(v,h,p){return u(v,h,p)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function g(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function m(v,h,p){return g(v),v<=0?o(v):h!==void 0?typeof p=="string"?o(v).fill(h,p):o(v).fill(h):o(v)}a.alloc=function(v,h,p){return m(v,h,p)};function b(v){return g(v),o(v<0?0:N(v)|0)}a.allocUnsafe=function(v){return b(v)},a.allocUnsafeSlow=function(v){return b(v)};function k(v,h){if((typeof h!="string"||h==="")&&(h="utf8"),!a.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const p=M(v,h)|0;let C=o(p);const z=C.write(v,h);return z!==p&&(C=C.slice(0,z)),C}function _(v){const h=v.length<0?0:N(v.length)|0,p=o(h);for(let C=0;C<h;C+=1)p[C]=v[C]&255;return p}function R(v){if(ge(v,Uint8Array)){const h=new Uint8Array(v);return I(h.buffer,h.byteOffset,h.byteLength)}return _(v)}function I(v,h,p){if(h<0||v.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<h+(p||0))throw new RangeError('"length" is outside of buffer bounds');let C;return h===void 0&&p===void 0?C=new Uint8Array(v):p===void 0?C=new Uint8Array(v,h):C=new Uint8Array(v,h,p),Object.setPrototypeOf(C,a.prototype),C}function E(v){if(a.isBuffer(v)){const h=N(v.length)|0,p=o(h);return p.length===0||v.copy(p,0,0,h),p}if(v.length!==void 0)return typeof v.length!="number"||Mt(v.length)?o(0):_(v);if(v.type==="Buffer"&&Array.isArray(v.data))return _(v.data)}function N(v){if(v>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return v|0}function P(v){return+v!=v&&(v=0),a.alloc(+v)}a.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==a.prototype},a.compare=function(h,p){if(ge(h,Uint8Array)&&(h=a.from(h,h.offset,h.byteLength)),ge(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),!a.isBuffer(h)||!a.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===p)return 0;let C=h.length,z=p.length;for(let V=0,Q=Math.min(C,z);V<Q;++V)if(h[V]!==p[V]){C=h[V],z=p[V];break}return C<z?-1:z<C?1:0},a.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(h,p){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return a.alloc(0);let C;if(p===void 0)for(p=0,C=0;C<h.length;++C)p+=h[C].length;const z=a.allocUnsafe(p);let V=0;for(C=0;C<h.length;++C){let Q=h[C];if(ge(Q,Uint8Array))V+Q.length>z.length?(a.isBuffer(Q)||(Q=a.from(Q)),Q.copy(z,V)):Uint8Array.prototype.set.call(z,Q,V);else if(a.isBuffer(Q))Q.copy(z,V);else throw new TypeError('"list" argument must be an Array of Buffers');V+=Q.length}return z};function M(v,h){if(a.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||ge(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const p=v.length,C=arguments.length>2&&arguments[2]===!0;if(!C&&p===0)return 0;let z=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return Ct(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Tt(v).length;default:if(z)return C?-1:Ct(v).length;h=(""+h).toLowerCase(),z=!0}}a.byteLength=M;function H(v,h,p){let C=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,h>>>=0,p<=h))return"";for(v||(v="utf8");;)switch(v){case"hex":return L(this,h,p);case"utf8":case"utf-8":return c(this,h,p);case"ascii":return w(this,h,p);case"latin1":case"binary":return A(this,h,p);case"base64":return x(this,h,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,h,p);default:if(C)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),C=!0}}a.prototype._isBuffer=!0;function j(v,h,p){const C=v[h];v[h]=v[p],v[p]=C}a.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<h;p+=2)j(this,p,p+1);return this},a.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<h;p+=4)j(this,p,p+3),j(this,p+1,p+2);return this},a.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<h;p+=8)j(this,p,p+7),j(this,p+1,p+6),j(this,p+2,p+5),j(this,p+3,p+4);return this},a.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?c(this,0,h):H.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(h){if(!a.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:a.compare(this,h)===0},a.prototype.inspect=function(){let h="";const p=r.INSPECT_MAX_BYTES;return h=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(h+=" ... "),"<Buffer "+h+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(h,p,C,z,V){if(ge(h,Uint8Array)&&(h=a.from(h,h.offset,h.byteLength)),!a.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(p===void 0&&(p=0),C===void 0&&(C=h?h.length:0),z===void 0&&(z=0),V===void 0&&(V=this.length),p<0||C>h.length||z<0||V>this.length)throw new RangeError("out of range index");if(z>=V&&p>=C)return 0;if(z>=V)return-1;if(p>=C)return 1;if(p>>>=0,C>>>=0,z>>>=0,V>>>=0,this===h)return 0;let Q=V-z,wt=C-p;const gt=Math.min(Q,wt),pt=this.slice(z,V),Ot=h.slice(p,C);for(let dt=0;dt<gt;++dt)if(pt[dt]!==Ot[dt]){Q=pt[dt],wt=Ot[dt];break}return Q<wt?-1:wt<Q?1:0};function $(v,h,p,C,z){if(v.length===0)return-1;if(typeof p=="string"?(C=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,Mt(p)&&(p=z?0:v.length-1),p<0&&(p=v.length+p),p>=v.length){if(z)return-1;p=v.length-1}else if(p<0)if(z)p=0;else return-1;if(typeof h=="string"&&(h=a.from(h,C)),a.isBuffer(h))return h.length===0?-1:J(v,h,p,C,z);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?z?Uint8Array.prototype.indexOf.call(v,h,p):Uint8Array.prototype.lastIndexOf.call(v,h,p):J(v,[h],p,C,z);throw new TypeError("val must be string, number or Buffer")}function J(v,h,p,C,z){let V=1,Q=v.length,wt=h.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(v.length<2||h.length<2)return-1;V=2,Q/=2,wt/=2,p/=2}function gt(Ot,dt){return V===1?Ot[dt]:Ot.readUInt16BE(dt*V)}let pt;if(z){let Ot=-1;for(pt=p;pt<Q;pt++)if(gt(v,pt)===gt(h,Ot===-1?0:pt-Ot)){if(Ot===-1&&(Ot=pt),pt-Ot+1===wt)return Ot*V}else Ot!==-1&&(pt-=pt-Ot),Ot=-1}else for(p+wt>Q&&(p=Q-wt),pt=p;pt>=0;pt--){let Ot=!0;for(let dt=0;dt<wt;dt++)if(gt(v,pt+dt)!==gt(h,dt)){Ot=!1;break}if(Ot)return pt}return-1}a.prototype.includes=function(h,p,C){return this.indexOf(h,p,C)!==-1},a.prototype.indexOf=function(h,p,C){return $(this,h,p,C,!0)},a.prototype.lastIndexOf=function(h,p,C){return $(this,h,p,C,!1)};function Y(v,h,p,C){p=Number(p)||0;const z=v.length-p;C?(C=Number(C),C>z&&(C=z)):C=z;const V=h.length;C>V/2&&(C=V/2);let Q;for(Q=0;Q<C;++Q){const wt=parseInt(h.substr(Q*2,2),16);if(Mt(wt))return Q;v[p+Q]=wt}return Q}function O(v,h,p,C){return Rt(Ct(h,v.length-p),v,p,C)}function D(v,h,p,C){return Rt(Ft(h),v,p,C)}function q(v,h,p,C){return Rt(Tt(h),v,p,C)}function W(v,h,p,C){return Rt(Tn(h,v.length-p),v,p,C)}a.prototype.write=function(h,p,C,z){if(p===void 0)z="utf8",C=this.length,p=0;else if(C===void 0&&typeof p=="string")z=p,C=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(C)?(C=C>>>0,z===void 0&&(z="utf8")):(z=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const V=this.length-p;if((C===void 0||C>V)&&(C=V),h.length>0&&(C<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");z||(z="utf8");let Q=!1;for(;;)switch(z){case"hex":return Y(this,h,p,C);case"utf8":case"utf-8":return O(this,h,p,C);case"ascii":case"latin1":case"binary":return D(this,h,p,C);case"base64":return q(this,h,p,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,h,p,C);default:if(Q)throw new TypeError("Unknown encoding: "+z);z=(""+z).toLowerCase(),Q=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(v,h,p){return h===0&&p===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(h,p))}function c(v,h,p){p=Math.min(v.length,p);const C=[];let z=h;for(;z<p;){const V=v[z];let Q=null,wt=V>239?4:V>223?3:V>191?2:1;if(z+wt<=p){let gt,pt,Ot,dt;switch(wt){case 1:V<128&&(Q=V);break;case 2:gt=v[z+1],(gt&192)===128&&(dt=(V&31)<<6|gt&63,dt>127&&(Q=dt));break;case 3:gt=v[z+1],pt=v[z+2],(gt&192)===128&&(pt&192)===128&&(dt=(V&15)<<12|(gt&63)<<6|pt&63,dt>2047&&(dt<55296||dt>57343)&&(Q=dt));break;case 4:gt=v[z+1],pt=v[z+2],Ot=v[z+3],(gt&192)===128&&(pt&192)===128&&(Ot&192)===128&&(dt=(V&15)<<18|(gt&63)<<12|(pt&63)<<6|Ot&63,dt>65535&&dt<1114112&&(Q=dt))}}Q===null?(Q=65533,wt=1):Q>65535&&(Q-=65536,C.push(Q>>>10&1023|55296),Q=56320|Q&1023),C.push(Q),z+=wt}return y(C)}const d=4096;function y(v){const h=v.length;if(h<=d)return String.fromCharCode.apply(String,v);let p="",C=0;for(;C<h;)p+=String.fromCharCode.apply(String,v.slice(C,C+=d));return p}function w(v,h,p){let C="";p=Math.min(v.length,p);for(let z=h;z<p;++z)C+=String.fromCharCode(v[z]&127);return C}function A(v,h,p){let C="";p=Math.min(v.length,p);for(let z=h;z<p;++z)C+=String.fromCharCode(v[z]);return C}function L(v,h,p){const C=v.length;(!h||h<0)&&(h=0),(!p||p<0||p>C)&&(p=C);let z="";for(let V=h;V<p;++V)z+=Pt[v[V]];return z}function F(v,h,p){const C=v.slice(h,p);let z="";for(let V=0;V<C.length-1;V+=2)z+=String.fromCharCode(C[V]+C[V+1]*256);return z}a.prototype.slice=function(h,p){const C=this.length;h=~~h,p=p===void 0?C:~~p,h<0?(h+=C,h<0&&(h=0)):h>C&&(h=C),p<0?(p+=C,p<0&&(p=0)):p>C&&(p=C),p<h&&(p=h);const z=this.subarray(h,p);return Object.setPrototypeOf(z,a.prototype),z};function B(v,h,p){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+h>p)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(h,p,C){h=h>>>0,p=p>>>0,C||B(h,p,this.length);let z=this[h],V=1,Q=0;for(;++Q<p&&(V*=256);)z+=this[h+Q]*V;return z},a.prototype.readUintBE=a.prototype.readUIntBE=function(h,p,C){h=h>>>0,p=p>>>0,C||B(h,p,this.length);let z=this[h+--p],V=1;for(;p>0&&(V*=256);)z+=this[h+--p]*V;return z},a.prototype.readUint8=a.prototype.readUInt8=function(h,p){return h=h>>>0,p||B(h,1,this.length),this[h]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(h,p){return h=h>>>0,p||B(h,2,this.length),this[h]|this[h+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(h,p){return h=h>>>0,p||B(h,2,this.length),this[h]<<8|this[h+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(h,p){return h=h>>>0,p||B(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(h,p){return h=h>>>0,p||B(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},a.prototype.readBigUInt64LE=Ie(function(h){h=h>>>0,jt(h,"offset");const p=this[h],C=this[h+7];(p===void 0||C===void 0)&&xt(h,this.length-8);const z=p+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,V=this[++h]+this[++h]*2**8+this[++h]*2**16+C*2**24;return BigInt(z)+(BigInt(V)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ie(function(h){h=h>>>0,jt(h,"offset");const p=this[h],C=this[h+7];(p===void 0||C===void 0)&&xt(h,this.length-8);const z=p*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],V=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+C;return(BigInt(z)<<BigInt(32))+BigInt(V)}),a.prototype.readIntLE=function(h,p,C){h=h>>>0,p=p>>>0,C||B(h,p,this.length);let z=this[h],V=1,Q=0;for(;++Q<p&&(V*=256);)z+=this[h+Q]*V;return V*=128,z>=V&&(z-=Math.pow(2,8*p)),z},a.prototype.readIntBE=function(h,p,C){h=h>>>0,p=p>>>0,C||B(h,p,this.length);let z=p,V=1,Q=this[h+--z];for(;z>0&&(V*=256);)Q+=this[h+--z]*V;return V*=128,Q>=V&&(Q-=Math.pow(2,8*p)),Q},a.prototype.readInt8=function(h,p){return h=h>>>0,p||B(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},a.prototype.readInt16LE=function(h,p){h=h>>>0,p||B(h,2,this.length);const C=this[h]|this[h+1]<<8;return C&32768?C|4294901760:C},a.prototype.readInt16BE=function(h,p){h=h>>>0,p||B(h,2,this.length);const C=this[h+1]|this[h]<<8;return C&32768?C|4294901760:C},a.prototype.readInt32LE=function(h,p){return h=h>>>0,p||B(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},a.prototype.readInt32BE=function(h,p){return h=h>>>0,p||B(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},a.prototype.readBigInt64LE=Ie(function(h){h=h>>>0,jt(h,"offset");const p=this[h],C=this[h+7];(p===void 0||C===void 0)&&xt(h,this.length-8);const z=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(C<<24);return(BigInt(z)<<BigInt(32))+BigInt(p+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),a.prototype.readBigInt64BE=Ie(function(h){h=h>>>0,jt(h,"offset");const p=this[h],C=this[h+7];(p===void 0||C===void 0)&&xt(h,this.length-8);const z=(p<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(z)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+C)}),a.prototype.readFloatLE=function(h,p){return h=h>>>0,p||B(h,4,this.length),t.read(this,h,!0,23,4)},a.prototype.readFloatBE=function(h,p){return h=h>>>0,p||B(h,4,this.length),t.read(this,h,!1,23,4)},a.prototype.readDoubleLE=function(h,p){return h=h>>>0,p||B(h,8,this.length),t.read(this,h,!0,52,8)},a.prototype.readDoubleBE=function(h,p){return h=h>>>0,p||B(h,8,this.length),t.read(this,h,!1,52,8)};function l(v,h,p,C,z,V){if(!a.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>z||h<V)throw new RangeError('"value" argument is out of bounds');if(p+C>v.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(h,p,C,z){if(h=+h,p=p>>>0,C=C>>>0,!z){const wt=Math.pow(2,8*C)-1;l(this,h,p,C,wt,0)}let V=1,Q=0;for(this[p]=h&255;++Q<C&&(V*=256);)this[p+Q]=h/V&255;return p+C},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(h,p,C,z){if(h=+h,p=p>>>0,C=C>>>0,!z){const wt=Math.pow(2,8*C)-1;l(this,h,p,C,wt,0)}let V=C-1,Q=1;for(this[p+V]=h&255;--V>=0&&(Q*=256);)this[p+V]=h/Q&255;return p+C},a.prototype.writeUint8=a.prototype.writeUInt8=function(h,p,C){return h=+h,p=p>>>0,C||l(this,h,p,1,255,0),this[p]=h&255,p+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(h,p,C){return h=+h,p=p>>>0,C||l(this,h,p,2,65535,0),this[p]=h&255,this[p+1]=h>>>8,p+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(h,p,C){return h=+h,p=p>>>0,C||l(this,h,p,2,65535,0),this[p]=h>>>8,this[p+1]=h&255,p+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(h,p,C){return h=+h,p=p>>>0,C||l(this,h,p,4,4294967295,0),this[p+3]=h>>>24,this[p+2]=h>>>16,this[p+1]=h>>>8,this[p]=h&255,p+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(h,p,C){return h=+h,p=p>>>0,C||l(this,h,p,4,4294967295,0),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4};function f(v,h,p,C,z){Et(h,C,z,v,p,7);let V=Number(h&BigInt(4294967295));v[p++]=V,V=V>>8,v[p++]=V,V=V>>8,v[p++]=V,V=V>>8,v[p++]=V;let Q=Number(h>>BigInt(32)&BigInt(4294967295));return v[p++]=Q,Q=Q>>8,v[p++]=Q,Q=Q>>8,v[p++]=Q,Q=Q>>8,v[p++]=Q,p}function S(v,h,p,C,z){Et(h,C,z,v,p,7);let V=Number(h&BigInt(4294967295));v[p+7]=V,V=V>>8,v[p+6]=V,V=V>>8,v[p+5]=V,V=V>>8,v[p+4]=V;let Q=Number(h>>BigInt(32)&BigInt(4294967295));return v[p+3]=Q,Q=Q>>8,v[p+2]=Q,Q=Q>>8,v[p+1]=Q,Q=Q>>8,v[p]=Q,p+8}a.prototype.writeBigUInt64LE=Ie(function(h,p=0){return f(this,h,p,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ie(function(h,p=0){return S(this,h,p,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(h,p,C,z){if(h=+h,p=p>>>0,!z){const gt=Math.pow(2,8*C-1);l(this,h,p,C,gt-1,-gt)}let V=0,Q=1,wt=0;for(this[p]=h&255;++V<C&&(Q*=256);)h<0&&wt===0&&this[p+V-1]!==0&&(wt=1),this[p+V]=(h/Q>>0)-wt&255;return p+C},a.prototype.writeIntBE=function(h,p,C,z){if(h=+h,p=p>>>0,!z){const gt=Math.pow(2,8*C-1);l(this,h,p,C,gt-1,-gt)}let V=C-1,Q=1,wt=0;for(this[p+V]=h&255;--V>=0&&(Q*=256);)h<0&&wt===0&&this[p+V+1]!==0&&(wt=1),this[p+V]=(h/Q>>0)-wt&255;return p+C},a.prototype.writeInt8=function(h,p,C){return h=+h,p=p>>>0,C||l(this,h,p,1,127,-128),h<0&&(h=255+h+1),this[p]=h&255,p+1},a.prototype.writeInt16LE=function(h,p,C){return h=+h,p=p>>>0,C||l(this,h,p,2,32767,-32768),this[p]=h&255,this[p+1]=h>>>8,p+2},a.prototype.writeInt16BE=function(h,p,C){return h=+h,p=p>>>0,C||l(this,h,p,2,32767,-32768),this[p]=h>>>8,this[p+1]=h&255,p+2},a.prototype.writeInt32LE=function(h,p,C){return h=+h,p=p>>>0,C||l(this,h,p,4,2147483647,-2147483648),this[p]=h&255,this[p+1]=h>>>8,this[p+2]=h>>>16,this[p+3]=h>>>24,p+4},a.prototype.writeInt32BE=function(h,p,C){return h=+h,p=p>>>0,C||l(this,h,p,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4},a.prototype.writeBigInt64LE=Ie(function(h,p=0){return f(this,h,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ie(function(h,p=0){return S(this,h,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function T(v,h,p,C,z,V){if(p+C>v.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function K(v,h,p,C,z){return h=+h,p=p>>>0,z||T(v,h,p,4),t.write(v,h,p,C,23,4),p+4}a.prototype.writeFloatLE=function(h,p,C){return K(this,h,p,!0,C)},a.prototype.writeFloatBE=function(h,p,C){return K(this,h,p,!1,C)};function X(v,h,p,C,z){return h=+h,p=p>>>0,z||T(v,h,p,8),t.write(v,h,p,C,52,8),p+8}a.prototype.writeDoubleLE=function(h,p,C){return X(this,h,p,!0,C)},a.prototype.writeDoubleBE=function(h,p,C){return X(this,h,p,!1,C)},a.prototype.copy=function(h,p,C,z){if(!a.isBuffer(h))throw new TypeError("argument should be a Buffer");if(C||(C=0),!z&&z!==0&&(z=this.length),p>=h.length&&(p=h.length),p||(p=0),z>0&&z<C&&(z=C),z===C||h.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("sourceEnd out of bounds");z>this.length&&(z=this.length),h.length-p<z-C&&(z=h.length-p+C);const V=z-C;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,C,z):Uint8Array.prototype.set.call(h,this.subarray(C,z),p),V},a.prototype.fill=function(h,p,C,z){if(typeof h=="string"){if(typeof p=="string"?(z=p,p=0,C=this.length):typeof C=="string"&&(z=C,C=this.length),z!==void 0&&typeof z!="string")throw new TypeError("encoding must be a string");if(typeof z=="string"&&!a.isEncoding(z))throw new TypeError("Unknown encoding: "+z);if(h.length===1){const Q=h.charCodeAt(0);(z==="utf8"&&Q<128||z==="latin1")&&(h=Q)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(p<0||this.length<p||this.length<C)throw new RangeError("Out of range index");if(C<=p)return this;p=p>>>0,C=C===void 0?this.length:C>>>0,h||(h=0);let V;if(typeof h=="number")for(V=p;V<C;++V)this[V]=h;else{const Q=a.isBuffer(h)?h:a.from(h,z),wt=Q.length;if(wt===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(V=0;V<C-p;++V)this[V+p]=Q[V%wt]}return this};const et={};function ct(v,h,p){et[v]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(z){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:z,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}ct("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ct("ERR_INVALID_ARG_TYPE",function(v,h){return`The "${v}" argument must be of type number. Received type ${typeof h}`},TypeError),ct("ERR_OUT_OF_RANGE",function(v,h,p){let C=`The value of "${v}" is out of range.`,z=p;return Number.isInteger(p)&&Math.abs(p)>2**32?z=_t(String(p)):typeof p=="bigint"&&(z=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(z=_t(z)),z+="n"),C+=` It must be ${h}. Received ${z}`,C},RangeError);function _t(v){let h="",p=v.length;const C=v[0]==="-"?1:0;for(;p>=C+4;p-=3)h=`_${v.slice(p-3,p)}${h}`;return`${v.slice(0,p)}${h}`}function yt(v,h,p){jt(h,"offset"),(v[h]===void 0||v[h+p]===void 0)&&xt(h,v.length-(p+1))}function Et(v,h,p,C,z,V){if(v>p||v<h){const Q=typeof h=="bigint"?"n":"";let wt;throw h===0||h===BigInt(0)?wt=`>= 0${Q} and < 2${Q} ** ${(V+1)*8}${Q}`:wt=`>= -(2${Q} ** ${(V+1)*8-1}${Q}) and < 2 ** ${(V+1)*8-1}${Q}`,new et.ERR_OUT_OF_RANGE("value",wt,v)}yt(C,z,V)}function jt(v,h){if(typeof v!="number")throw new et.ERR_INVALID_ARG_TYPE(h,"number",v)}function xt(v,h,p){throw Math.floor(v)!==v?(jt(v,p),new et.ERR_OUT_OF_RANGE("offset","an integer",v)):h<0?new et.ERR_BUFFER_OUT_OF_BOUNDS:new et.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,v)}const kt=/[^+/0-9A-Za-z-_]/g;function Cn(v){if(v=v.split("=")[0],v=v.trim().replace(kt,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function Ct(v,h){h=h||1/0;let p;const C=v.length;let z=null;const V=[];for(let Q=0;Q<C;++Q){if(p=v.charCodeAt(Q),p>55295&&p<57344){if(!z){if(p>56319){(h-=3)>-1&&V.push(239,191,189);continue}else if(Q+1===C){(h-=3)>-1&&V.push(239,191,189);continue}z=p;continue}if(p<56320){(h-=3)>-1&&V.push(239,191,189),z=p;continue}p=(z-55296<<10|p-56320)+65536}else z&&(h-=3)>-1&&V.push(239,191,189);if(z=null,p<128){if((h-=1)<0)break;V.push(p)}else if(p<2048){if((h-=2)<0)break;V.push(p>>6|192,p&63|128)}else if(p<65536){if((h-=3)<0)break;V.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((h-=4)<0)break;V.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return V}function Ft(v){const h=[];for(let p=0;p<v.length;++p)h.push(v.charCodeAt(p)&255);return h}function Tn(v,h){let p,C,z;const V=[];for(let Q=0;Q<v.length&&!((h-=2)<0);++Q)p=v.charCodeAt(Q),C=p>>8,z=p%256,V.push(z),V.push(C);return V}function Tt(v){return e.toByteArray(Cn(v))}function Rt(v,h,p,C){let z;for(z=0;z<C&&!(z+p>=h.length||z>=v.length);++z)h[z+p]=v[z];return z}function ge(v,h){return v instanceof h||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===h.name}function Mt(v){return v!==v}const Pt=function(){const v="0123456789abcdef",h=new Array(256);for(let p=0;p<16;++p){const C=p*16;for(let z=0;z<16;++z)h[C+z]=v[p]+v[z]}return h}();function Ie(v){return typeof BigInt>"u"?Ut:v}function Ut(){throw new Error("BigInt not supported")}}(Ri)),Ri}var mt=Ys();function Ro(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Fu(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Gr(r,...e){if(!Fu(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Du(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ro(r.outputLen),Ro(r.blockLen)}function Ur(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function qu(r,e){Gr(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const Ln=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Mi(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function We(r,e){return r<<32-e|r>>>e}function zu(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function Js(r){return typeof r=="string"&&(r=zu(r)),Gr(r),r}function Wu(...r){let e=0;for(let n=0;n<r.length;n++){const s=r[n];Gr(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){const i=r[n];t.set(i,s),s+=i.length}return t}class gc{clone(){return this._cloneInto()}}function mc(r){const e=n=>r().update(Js(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function yc(r=32){if(Ln&&typeof Ln.getRandomValues=="function")return Ln.getRandomValues(new Uint8Array(r));if(Ln&&typeof Ln.randomBytes=="function")return Ln.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}function Ku(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),a=Number(t&i),u=n?4:0,g=n?0:4;r.setUint32(e+u,o,n),r.setUint32(e+g,a,n)}function Hu(r,e,t){return r&e^~r&t}function $u(r,e,t){return r&e^r&t^e&t}class wc extends gc{constructor(e,t,n,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Mi(this.buffer)}update(e){Ur(this);const{view:t,buffer:n,blockLen:s}=this;e=Js(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const u=Mi(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ur(this),qu(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let b=o;b<s;b++)t[b]=0;Ku(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=Mi(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=u/4,m=this.get();if(g>m.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<g;b++)a.setUint32(4*b,m[b],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(n),e}}const Er=BigInt(2**32-1),Ns=BigInt(32);function bc(r,e=!1){return e?{h:Number(r&Er),l:Number(r>>Ns&Er)}:{h:Number(r>>Ns&Er)|0,l:Number(r&Er)|0}}function ju(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=bc(r[s],e);[t[s],n[s]]=[i,o]}return[t,n]}const Vu=(r,e)=>BigInt(r>>>0)<<Ns|BigInt(e>>>0),Gu=(r,e,t)=>r>>>t,Zu=(r,e,t)=>r<<32-t|e>>>t,Yu=(r,e,t)=>r>>>t|e<<32-t,Ju=(r,e,t)=>r<<32-t|e>>>t,Xu=(r,e,t)=>r<<64-t|e>>>t-32,Qu=(r,e,t)=>r>>>t-32|e<<64-t,tl=(r,e)=>e,el=(r,e)=>r,nl=(r,e,t)=>r<<t|e>>>32-t,rl=(r,e,t)=>e<<t|r>>>32-t,il=(r,e,t)=>e<<t-32|r>>>64-t,sl=(r,e,t)=>r<<t-32|e>>>64-t;function ol(r,e,t,n){const s=(e>>>0)+(n>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}const al=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),cl=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,ul=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),ll=(r,e,t,n,s)=>e+t+n+s+(r/2**32|0)|0,fl=(r,e,t,n,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),hl=(r,e,t,n,s,i)=>e+t+n+s+i+(r/2**32|0)|0,bt={fromBig:bc,split:ju,toBig:Vu,shrSH:Gu,shrSL:Zu,rotrSH:Yu,rotrSL:Ju,rotrBH:Xu,rotrBL:Qu,rotr32H:tl,rotr32L:el,rotlSH:nl,rotlSL:rl,rotlBH:il,rotlBL:sl,add:ol,add3L:al,add3H:cl,add4L:ul,add4H:ll,add5H:hl,add5L:fl},[dl,pl]=bt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),nn=new Uint32Array(80),rn=new Uint32Array(80);class gl extends wc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:u,Eh:g,El:m,Fh:b,Fl:k,Gh:_,Gl:R,Hh:I,Hl:E}=this;return[e,t,n,s,i,o,a,u,g,m,b,k,_,R,I,E]}set(e,t,n,s,i,o,a,u,g,m,b,k,_,R,I,E){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=g|0,this.El=m|0,this.Fh=b|0,this.Fl=k|0,this.Gh=_|0,this.Gl=R|0,this.Hh=I|0,this.Hl=E|0}process(e,t){for(let M=0;M<16;M++,t+=4)nn[M]=e.getUint32(t),rn[M]=e.getUint32(t+=4);for(let M=16;M<80;M++){const H=nn[M-15]|0,j=rn[M-15]|0,$=bt.rotrSH(H,j,1)^bt.rotrSH(H,j,8)^bt.shrSH(H,j,7),J=bt.rotrSL(H,j,1)^bt.rotrSL(H,j,8)^bt.shrSL(H,j,7),Y=nn[M-2]|0,O=rn[M-2]|0,D=bt.rotrSH(Y,O,19)^bt.rotrBH(Y,O,61)^bt.shrSH(Y,O,6),q=bt.rotrSL(Y,O,19)^bt.rotrBL(Y,O,61)^bt.shrSL(Y,O,6),W=bt.add4L(J,q,rn[M-7],rn[M-16]),x=bt.add4H(W,$,D,nn[M-7],nn[M-16]);nn[M]=x|0,rn[M]=W|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:u,Dh:g,Dl:m,Eh:b,El:k,Fh:_,Fl:R,Gh:I,Gl:E,Hh:N,Hl:P}=this;for(let M=0;M<80;M++){const H=bt.rotrSH(b,k,14)^bt.rotrSH(b,k,18)^bt.rotrBH(b,k,41),j=bt.rotrSL(b,k,14)^bt.rotrSL(b,k,18)^bt.rotrBL(b,k,41),$=b&_^~b&I,J=k&R^~k&E,Y=bt.add5L(P,j,J,pl[M],rn[M]),O=bt.add5H(Y,N,H,$,dl[M],nn[M]),D=Y|0,q=bt.rotrSH(n,s,28)^bt.rotrBH(n,s,34)^bt.rotrBH(n,s,39),W=bt.rotrSL(n,s,28)^bt.rotrBL(n,s,34)^bt.rotrBL(n,s,39),x=n&i^n&a^i&a,c=s&o^s&u^o&u;N=I|0,P=E|0,I=_|0,E=R|0,_=b|0,R=k|0,{h:b,l:k}=bt.add(g|0,m|0,O|0,D|0),g=a|0,m=u|0,a=i|0,u=o|0,i=n|0,o=s|0;const d=bt.add3L(D,W,c);n=bt.add3H(d,O,q,x),s=d|0}({h:n,l:s}=bt.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=bt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:u}=bt.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:g,l:m}=bt.add(this.Dh|0,this.Dl|0,g|0,m|0),{h:b,l:k}=bt.add(this.Eh|0,this.El|0,b|0,k|0),{h:_,l:R}=bt.add(this.Fh|0,this.Fl|0,_|0,R|0),{h:I,l:E}=bt.add(this.Gh|0,this.Gl|0,I|0,E|0),{h:N,l:P}=bt.add(this.Hh|0,this.Hl|0,N|0,P|0),this.set(n,s,i,o,a,u,g,m,b,k,_,R,I,E,N,P)}roundClean(){nn.fill(0),rn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ml=mc(()=>new gl);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zr=BigInt(0),Yr=BigInt(1),yl=BigInt(2);function Sn(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function gr(r){if(!Sn(r))throw new Error("Uint8Array expected")}function Xe(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}const wl=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function xn(r){gr(r);let e="";for(let t=0;t<r.length;t++)e+=wl[r[t]];return e}function On(r){const e=r.toString(16);return e.length&1?"0"+e:e}function Xs(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Zr:BigInt("0x"+r)}const Ve={_0:48,_9:57,A:65,F:70,a:97,f:102};function Mo(r){if(r>=Ve._0&&r<=Ve._9)return r-Ve._0;if(r>=Ve.A&&r<=Ve.F)return r-(Ve.A-10);if(r>=Ve.a&&r<=Ve.f)return r-(Ve.a-10)}function Hn(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=Mo(r.charCodeAt(i)),a=Mo(r.charCodeAt(i+1));if(o===void 0||a===void 0){const u=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[s]=o*16+a}return n}function En(r){return Xs(xn(r))}function zn(r){return gr(r),Xs(xn(Uint8Array.from(r).reverse()))}function $n(r,e){return Hn(r.toString(16).padStart(e*2,"0"))}function ur(r,e){return $n(r,e).reverse()}function bl(r){return Hn(On(r))}function fe(r,e,t){let n;if(typeof e=="string")try{n=Hn(e)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(Sn(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return n}function _n(...r){let e=0;for(let n=0;n<r.length;n++){const s=r[n];gr(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){const i=r[n];t.set(i,s),s+=i.length}return t}function vl(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function El(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}const Ci=r=>typeof r=="bigint"&&Zr<=r;function Jr(r,e,t){return Ci(r)&&Ci(e)&&Ci(t)&&e<=r&&r<t}function Ue(r,e,t,n){if(!Jr(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function vc(r){let e;for(e=0;r>Zr;r>>=Yr,e+=1);return e}function Sl(r,e){return r>>BigInt(e)&Yr}function xl(r,e,t){return r|(t?Yr:Zr)<<BigInt(e)}const Qs=r=>(yl<<BigInt(r-1))-Yr,Ti=r=>new Uint8Array(r),Co=r=>Uint8Array.from(r);function Ec(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=Ti(r),s=Ti(r),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...b)=>t(s,n,...b),u=(b=Ti())=>{s=a(Co([0]),b),n=a(),b.length!==0&&(s=a(Co([1]),b),n=a())},g=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const k=[];for(;b<e;){n=a();const _=n.slice();k.push(_),b+=n.length}return _n(...k)};return(b,k)=>{o(),u(b);let _;for(;!(_=k(g()));)u();return o(),_}}const _l={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||Sn(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Gn(r,e,t={}){const n=(s,i,o)=>{const a=_l[i];if(typeof a!="function")throw new Error("invalid validator function");const u=r[s];if(!(o&&u===void 0)&&!a(u,r))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+u)};for(const[s,i]of Object.entries(e))n(s,i,!1);for(const[s,i]of Object.entries(t))n(s,i,!0);return r}const Al=()=>{throw new Error("not implemented")};function lr(r){const e=new WeakMap;return(t,...n)=>{const s=e.get(t);if(s!==void 0)return s;const i=r(t,...n);return e.set(t,i),i}}const Bl=Object.freeze(Object.defineProperty({__proto__:null,aInRange:Ue,abool:Xe,abytes:gr,bitGet:Sl,bitLen:vc,bitMask:Qs,bitSet:xl,bytesToHex:xn,bytesToNumberBE:En,bytesToNumberLE:zn,concatBytes:_n,createHmacDrbg:Ec,ensureBytes:fe,equalBytes:vl,hexToBytes:Hn,hexToNumber:Xs,inRange:Jr,isBytes:Sn,memoized:lr,notImplemented:Al,numberToBytesBE:$n,numberToBytesLE:ur,numberToHexUnpadded:On,numberToVarBytesBE:bl,utf8ToBytes:El,validateObject:Gn},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pe=BigInt(0),Wt=BigInt(1),pn=BigInt(2),Il=BigInt(3),Ps=BigInt(4),To=BigInt(5),Lo=BigInt(8);function qt(r,e){const t=r%e;return t>=pe?t:e+t}function kl(r,e,t){if(e<pe)throw new Error("invalid exponent, negatives unsupported");if(t<=pe)throw new Error("invalid modulus");if(t===Wt)return pe;let n=Wt;for(;e>pe;)e&Wt&&(n=n*r%t),r=r*r%t,e>>=Wt;return n}function Ht(r,e,t){let n=r;for(;e-- >pe;)n*=n,n%=t;return n}function Us(r,e){if(r===pe)throw new Error("invert: expected non-zero number");if(e<=pe)throw new Error("invert: expected positive modulus, got "+e);let t=qt(r,e),n=e,s=pe,i=Wt;for(;t!==pe;){const a=n/t,u=n%t,g=s-i*a;n=t,t=u,s=i,i=g}if(n!==Wt)throw new Error("invert: does not exist");return qt(s,e)}function Rl(r){const e=(r-Wt)/pn;let t,n,s;for(t=r-Wt,n=0;t%pn===pe;t/=pn,n++);for(s=pn;s<r&&kl(s,e,r)!==r-Wt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(r+Wt)/Ps;return function(u,g){const m=u.pow(g,o);if(!u.eql(u.sqr(m),g))throw new Error("Cannot find square root");return m}}const i=(t+Wt)/pn;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let g=n,m=a.pow(a.mul(a.ONE,s),t),b=a.pow(u,i),k=a.pow(u,t);for(;!a.eql(k,a.ONE);){if(a.eql(k,a.ZERO))return a.ZERO;let _=1;for(let I=a.sqr(k);_<g&&!a.eql(I,a.ONE);_++)I=a.sqr(I);const R=a.pow(m,Wt<<BigInt(g-_-1));m=a.sqr(R),b=a.mul(b,R),k=a.mul(k,m),g=_}return b}}function Ml(r){if(r%Ps===Il){const e=(r+Wt)/Ps;return function(n,s){const i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(r%Lo===To){const e=(r-To)/Lo;return function(n,s){const i=n.mul(s,pn),o=n.pow(i,e),a=n.mul(s,o),u=n.mul(n.mul(a,pn),o),g=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(g),s))throw new Error("Cannot find square root");return g}}return Rl(r)}const Cl=(r,e)=>(qt(r,e)&Wt)===Wt,Tl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ll(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=Tl.reduce((n,s)=>(n[s]="function",n),e);return Gn(r,t)}function Nl(r,e,t){if(t<pe)throw new Error("invalid exponent, negatives unsupported");if(t===pe)return r.ONE;if(t===Wt)return e;let n=r.ONE,s=e;for(;t>pe;)t&Wt&&(n=r.mul(n,s)),s=r.sqr(s),t>>=Wt;return n}function Pl(r,e){const t=new Array(e.length),n=e.reduce((i,o,a)=>r.is0(o)?i:(t[a]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return e.reduceRight((i,o,a)=>r.is0(o)?i:(t[a]=r.mul(i,t[a]),r.mul(i,o)),s),t}function Sc(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Xr(r,e,t=!1,n={}){if(r<=pe)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:s,nByteLength:i}=Sc(r,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:r,isLE:t,BITS:s,BYTES:i,MASK:Qs(s),ZERO:pe,ONE:Wt,create:u=>qt(u,r),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return pe<=u&&u<r},is0:u=>u===pe,isOdd:u=>(u&Wt)===Wt,neg:u=>qt(-u,r),eql:(u,g)=>u===g,sqr:u=>qt(u*u,r),add:(u,g)=>qt(u+g,r),sub:(u,g)=>qt(u-g,r),mul:(u,g)=>qt(u*g,r),pow:(u,g)=>Nl(a,u,g),div:(u,g)=>qt(u*Us(g,r),r),sqrN:u=>u*u,addN:(u,g)=>u+g,subN:(u,g)=>u-g,mulN:(u,g)=>u*g,inv:u=>Us(u,r),sqrt:n.sqrt||(u=>(o||(o=Ml(r)),o(a,u))),invertBatch:u=>Pl(a,u),cmov:(u,g,m)=>m?g:u,toBytes:u=>t?ur(u,i):$n(u,i),fromBytes:u=>{if(u.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+u.length);return t?zn(u):En(u)}});return Object.freeze(a)}function xc(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function _c(r){const e=xc(r);return e+Math.ceil(e/2)}function Ul(r,e,t=!1){const n=r.length,s=xc(e),i=_c(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=t?zn(r):En(r),a=qt(o,e-Wt)+Wt;return t?ur(a,s):$n(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const No=BigInt(0),Sr=BigInt(1);function Li(r,e){const t=e.negate();return r?t:e}function Ac(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function Ni(r,e){Ac(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1);return{windows:t,windowSize:n}}function Ol(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function Fl(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const Pi=new WeakMap,Bc=new WeakMap;function Ui(r){return Bc.get(r)||1}function Ic(r,e){return{constTimeNegate:Li,hasPrecomputes(t){return Ui(t)!==1},unsafeLadder(t,n,s=r.ZERO){let i=t;for(;n>No;)n&Sr&&(s=s.add(i)),i=i.double(),n>>=Sr;return s},precomputeWindow(t,n){const{windows:s,windowSize:i}=Ni(n,e),o=[];let a=t,u=a;for(let g=0;g<s;g++){u=a,o.push(u);for(let m=1;m<i;m++)u=u.add(a),o.push(u);a=u.double()}return o},wNAF(t,n,s){const{windows:i,windowSize:o}=Ni(t,e);let a=r.ZERO,u=r.BASE;const g=BigInt(2**t-1),m=2**t,b=BigInt(t);for(let k=0;k<i;k++){const _=k*o;let R=Number(s&g);s>>=b,R>o&&(R-=m,s+=Sr);const I=_,E=_+Math.abs(R)-1,N=k%2!==0,P=R<0;R===0?u=u.add(Li(N,n[I])):a=a.add(Li(P,n[E]))}return{p:a,f:u}},wNAFUnsafe(t,n,s,i=r.ZERO){const{windows:o,windowSize:a}=Ni(t,e),u=BigInt(2**t-1),g=2**t,m=BigInt(t);for(let b=0;b<o;b++){const k=b*a;if(s===No)break;let _=Number(s&u);if(s>>=m,_>a&&(_-=g,s+=Sr),_===0)continue;let R=n[k+Math.abs(_)-1];_<0&&(R=R.negate()),i=i.add(R)}return i},getPrecomputes(t,n,s){let i=Pi.get(n);return i||(i=this.precomputeWindow(n,t),t!==1&&Pi.set(n,s(i))),i},wNAFCached(t,n,s){const i=Ui(t);return this.wNAF(i,this.getPrecomputes(i,t,s),n)},wNAFCachedUnsafe(t,n,s,i){const o=Ui(t);return o===1?this.unsafeLadder(t,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),n,i)},setWindowSize(t,n){Ac(n,e),Bc.set(t,n),Pi.delete(t)}}}function kc(r,e,t,n){if(Ol(t,r),Fl(n,e),t.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=r.ZERO,i=vc(BigInt(t.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,u=new Array(a+1).fill(s),g=Math.floor((e.BITS-1)/o)*o;let m=s;for(let b=g;b>=0;b-=o){u.fill(s);for(let _=0;_<n.length;_++){const R=n[_],I=Number(R>>BigInt(b)&BigInt(a));u[I]=u[I].add(t[_])}let k=s;for(let _=u.length-1,R=s;_>0;_--)R=R.add(u[_]),k=k.add(R);if(m=m.add(k),b!==0)for(let _=0;_<o;_++)m=m.double()}return m}function to(r){return Ll(r.Fp),Gn(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Sc(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fe=BigInt(0),ke=BigInt(1),xr=BigInt(2),Dl=BigInt(8),ql={zip215:!0};function zl(r){const e=to(r);return Gn(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Wl(r){const e=zl(r),{Fp:t,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:u}=e,g=xr<<BigInt(a*8)-ke,m=t.create,b=Xr(e.n,e.nBitLength),k=e.uvRatio||((y,w)=>{try{return{isValid:!0,value:t.sqrt(y*t.inv(w))}}catch{return{isValid:!1,value:Fe}}}),_=e.adjustScalarBytes||(y=>y),R=e.domain||((y,w,A)=>{if(Xe("phflag",A),w.length||A)throw new Error("Contexts/pre-hash are not supported");return y});function I(y,w){Ue("coordinate "+y,w,Fe,g)}function E(y){if(!(y instanceof M))throw new Error("ExtendedPoint expected")}const N=lr((y,w)=>{const{ex:A,ey:L,ez:F}=y,B=y.is0();w==null&&(w=B?Dl:t.inv(F));const l=m(A*w),f=m(L*w),S=m(F*w);if(B)return{x:Fe,y:ke};if(S!==ke)throw new Error("invZ was invalid");return{x:l,y:f}}),P=lr(y=>{const{a:w,d:A}=e;if(y.is0())throw new Error("bad point: ZERO");const{ex:L,ey:F,ez:B,et:l}=y,f=m(L*L),S=m(F*F),T=m(B*B),K=m(T*T),X=m(f*w),et=m(T*m(X+S)),ct=m(K+m(A*m(f*S)));if(et!==ct)throw new Error("bad point: equation left != right (1)");const _t=m(L*F),yt=m(B*l);if(_t!==yt)throw new Error("bad point: equation left != right (2)");return!0});class M{constructor(w,A,L,F){this.ex=w,this.ey=A,this.ez=L,this.et=F,I("x",w),I("y",A),I("z",L),I("t",F),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof M)throw new Error("extended point not allowed");const{x:A,y:L}=w||{};return I("x",A),I("y",L),new M(A,L,ke,m(A*L))}static normalizeZ(w){const A=t.invertBatch(w.map(L=>L.ez));return w.map((L,F)=>L.toAffine(A[F])).map(M.fromAffine)}static msm(w,A){return kc(M,b,w,A)}_setWindowSize(w){$.setWindowSize(this,w)}assertValidity(){P(this)}equals(w){E(w);const{ex:A,ey:L,ez:F}=this,{ex:B,ey:l,ez:f}=w,S=m(A*f),T=m(B*F),K=m(L*f),X=m(l*F);return S===T&&K===X}is0(){return this.equals(M.ZERO)}negate(){return new M(m(-this.ex),this.ey,this.ez,m(-this.et))}double(){const{a:w}=e,{ex:A,ey:L,ez:F}=this,B=m(A*A),l=m(L*L),f=m(xr*m(F*F)),S=m(w*B),T=A+L,K=m(m(T*T)-B-l),X=S+l,et=X-f,ct=S-l,_t=m(K*et),yt=m(X*ct),Et=m(K*ct),jt=m(et*X);return new M(_t,yt,jt,Et)}add(w){E(w);const{a:A,d:L}=e,{ex:F,ey:B,ez:l,et:f}=this,{ex:S,ey:T,ez:K,et:X}=w;if(A===BigInt(-1)){const Tt=m((B-F)*(T+S)),Rt=m((B+F)*(T-S)),ge=m(Rt-Tt);if(ge===Fe)return this.double();const Mt=m(l*xr*X),Pt=m(f*xr*K),Ie=Pt+Mt,Ut=Rt+Tt,v=Pt-Mt,h=m(Ie*ge),p=m(Ut*v),C=m(Ie*v),z=m(ge*Ut);return new M(h,p,z,C)}const et=m(F*S),ct=m(B*T),_t=m(f*L*X),yt=m(l*K),Et=m((F+B)*(S+T)-et-ct),jt=yt-_t,xt=yt+_t,kt=m(ct-A*et),Cn=m(Et*jt),Ct=m(xt*kt),Ft=m(Et*kt),Tn=m(jt*xt);return new M(Cn,Ct,Tn,Ft)}subtract(w){return this.add(w.negate())}wNAF(w){return $.wNAFCached(this,w,M.normalizeZ)}multiply(w){const A=w;Ue("scalar",A,ke,n);const{p:L,f:F}=this.wNAF(A);return M.normalizeZ([L,F])[0]}multiplyUnsafe(w,A=M.ZERO){const L=w;return Ue("scalar",L,Fe,n),L===Fe?j:this.is0()||L===ke?this:$.wNAFCachedUnsafe(this,L,M.normalizeZ,A)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return $.unsafeLadder(this,n).is0()}toAffine(w){return N(this,w)}clearCofactor(){const{h:w}=e;return w===ke?this:this.multiplyUnsafe(w)}static fromHex(w,A=!1){const{d:L,a:F}=e,B=t.BYTES;w=fe("pointHex",w,B),Xe("zip215",A);const l=w.slice(),f=w[B-1];l[B-1]=f&-129;const S=zn(l),T=A?g:t.ORDER;Ue("pointHex.y",S,Fe,T);const K=m(S*S),X=m(K-ke),et=m(L*K-F);let{isValid:ct,value:_t}=k(X,et);if(!ct)throw new Error("Point.fromHex: invalid y coordinate");const yt=(_t&ke)===ke,Et=(f&128)!==0;if(!A&&_t===Fe&&Et)throw new Error("Point.fromHex: x=0 and x_0=1");return Et!==yt&&(_t=m(-_t)),M.fromAffine({x:_t,y:S})}static fromPrivateKey(w){return O(w).point}toRawBytes(){const{x:w,y:A}=this.toAffine(),L=ur(A,t.BYTES);return L[L.length-1]|=w&ke?128:0,L}toHex(){return xn(this.toRawBytes())}}M.BASE=new M(e.Gx,e.Gy,ke,m(e.Gx*e.Gy)),M.ZERO=new M(Fe,ke,ke,Fe);const{BASE:H,ZERO:j}=M,$=Ic(M,a*8);function J(y){return qt(y,n)}function Y(y){return J(zn(y))}function O(y){const w=t.BYTES;y=fe("private key",y,w);const A=fe("hashed private key",i(y),2*w),L=_(A.slice(0,w)),F=A.slice(w,2*w),B=Y(L),l=H.multiply(B),f=l.toRawBytes();return{head:L,prefix:F,scalar:B,point:l,pointBytes:f}}function D(y){return O(y).pointBytes}function q(y=new Uint8Array,...w){const A=_n(...w);return Y(i(R(A,fe("context",y),!!s)))}function W(y,w,A={}){y=fe("message",y),s&&(y=s(y));const{prefix:L,scalar:F,pointBytes:B}=O(w),l=q(A.context,L,y),f=H.multiply(l).toRawBytes(),S=q(A.context,f,B,y),T=J(l+S*F);Ue("signature.s",T,Fe,n);const K=_n(f,ur(T,t.BYTES));return fe("result",K,t.BYTES*2)}const x=ql;function c(y,w,A,L=x){const{context:F,zip215:B}=L,l=t.BYTES;y=fe("signature",y,2*l),w=fe("message",w),A=fe("publicKey",A,l),B!==void 0&&Xe("zip215",B),s&&(w=s(w));const f=zn(y.slice(l,2*l));let S,T,K;try{S=M.fromHex(A,B),T=M.fromHex(y.slice(0,l),B),K=H.multiplyUnsafe(f)}catch{return!1}if(!B&&S.isSmallOrder())return!1;const X=q(F,T.toRawBytes(),S.toRawBytes(),w);return T.add(S.multiplyUnsafe(X)).subtract(K).clearCofactor().equals(M.ZERO)}return H._setWindowSize(8),{CURVE:e,getPublicKey:D,sign:W,verify:c,ExtendedPoint:M,utils:{getExtendedPublicKey:O,randomPrivateKey:()=>o(t.BYTES),precompute(y=8,w=M.BASE){return w._setWindowSize(y),w.multiply(BigInt(3)),w}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const eo=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Po=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Kl=BigInt(1),Uo=BigInt(2);BigInt(3);const Hl=BigInt(5),$l=BigInt(8);function jl(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),s=BigInt(80),i=eo,a=r*r%i*r%i,u=Ht(a,Uo,i)*a%i,g=Ht(u,Kl,i)*r%i,m=Ht(g,Hl,i)*g%i,b=Ht(m,e,i)*m%i,k=Ht(b,t,i)*b%i,_=Ht(k,n,i)*k%i,R=Ht(_,s,i)*_%i,I=Ht(R,s,i)*_%i,E=Ht(I,e,i)*m%i;return{pow_p_5_8:Ht(E,Uo,i)*r%i,b2:a}}function Vl(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function Gl(r,e){const t=eo,n=qt(e*e*e,t),s=qt(n*n*e,t),i=jl(r*s).pow_p_5_8;let o=qt(r*n*i,t);const a=qt(e*o*o,t),u=o,g=qt(o*Po,t),m=a===r,b=a===qt(-r,t),k=a===qt(-r*Po,t);return m&&(o=u),(b||k)&&(o=g),Cl(o,t)&&(o=qt(-o,t)),{isValid:m||b,value:o}}const Zl=Xr(eo,void 0,!0),Yl={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Zl,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:$l,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ml,randomBytes:yc,adjustScalarBytes:Vl,uvRatio:Gl},mr=Wl(Yl);var Rr={exports:{}};const Jl={},Xl=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"})),Ql=Zs(Xl);var tf=Rr.exports,Oo;function Rc(){return Oo||(Oo=1,function(r){(function(e,t){function n(x,c){if(!x)throw new Error(c||"Assertion failed")}function s(x,c){x.super_=c;var d=function(){};d.prototype=c.prototype,x.prototype=new d,x.prototype.constructor=x}function i(x,c,d){if(i.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((c==="le"||c==="be")&&(d=c,c=10),this._init(x||0,c||10,d||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ql.Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,d){return c.cmp(d)>0?c:d},i.min=function(c,d){return c.cmp(d)<0?c:d},i.prototype._init=function(c,d,y){if(typeof c=="number")return this._initNumber(c,d,y);if(typeof c=="object")return this._initArray(c,d,y);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),c=c.toString().replace(/\s+/g,"");var w=0;c[0]==="-"&&(w++,this.negative=1),w<c.length&&(d===16?this._parseHex(c,w,y):(this._parseBase(c,d,w),y==="le"&&this._initArray(this.toArray(),d,y)))},i.prototype._initNumber=function(c,d,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),d,y)},i.prototype._initArray=function(c,d,y){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var A,L,F=0;if(y==="be")for(w=c.length-1,A=0;w>=0;w-=3)L=c[w]|c[w-1]<<8|c[w-2]<<16,this.words[A]|=L<<F&67108863,this.words[A+1]=L>>>26-F&67108863,F+=24,F>=26&&(F-=26,A++);else if(y==="le")for(w=0,A=0;w<c.length;w+=3)L=c[w]|c[w+1]<<8|c[w+2]<<16,this.words[A]|=L<<F&67108863,this.words[A+1]=L>>>26-F&67108863,F+=24,F>=26&&(F-=26,A++);return this._strip()};function a(x,c){var d=x.charCodeAt(c);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+x)}function u(x,c,d){var y=a(x,d);return d-1>=c&&(y|=a(x,d-1)<<4),y}i.prototype._parseHex=function(c,d,y){this.length=Math.ceil((c.length-d)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var A=0,L=0,F;if(y==="be")for(w=c.length-1;w>=d;w-=2)F=u(c,d,w)<<A,this.words[L]|=F&67108863,A>=18?(A-=18,L+=1,this.words[L]|=F>>>26):A+=8;else{var B=c.length-d;for(w=B%2===0?d+1:d;w<c.length;w+=2)F=u(c,d,w)<<A,this.words[L]|=F&67108863,A>=18?(A-=18,L+=1,this.words[L]|=F>>>26):A+=8}this._strip()};function g(x,c,d,y){for(var w=0,A=0,L=Math.min(x.length,d),F=c;F<L;F++){var B=x.charCodeAt(F)-48;w*=y,B>=49?A=B-49+10:B>=17?A=B-17+10:A=B,n(B>=0&&A<y,"Invalid character"),w+=A}return w}i.prototype._parseBase=function(c,d,y){this.words=[0],this.length=1;for(var w=0,A=1;A<=67108863;A*=d)w++;w--,A=A/d|0;for(var L=c.length-y,F=L%w,B=Math.min(L,L-F)+y,l=0,f=y;f<B;f+=w)l=g(c,f,f+w,d),this.imuln(A),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(F!==0){var S=1;for(l=g(c,f,c.length,d),f=0;f<F;f++)S*=d;this.imuln(S),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var d=0;d<this.length;d++)c.words[d]=this.words[d];c.length=this.length,c.negative=this.negative,c.red=this.red};function m(x,c){x.words=c.words,x.length=c.length,x.negative=c.negative,x.red=c.red}if(i.prototype._move=function(c){m(c,this)},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=b}catch{i.prototype.inspect=b}else i.prototype.inspect=b;function b(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],R=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,d){c=c||10,d=d|0||1;var y;if(c===16||c==="hex"){y="";for(var w=0,A=0,L=0;L<this.length;L++){var F=this.words[L],B=((F<<w|A)&16777215).toString(16);A=F>>>24-w&16777215,w+=2,w>=26&&(w-=26,L--),A!==0||L!==this.length-1?y=k[6-B.length]+B+y:y=B+y}for(A!==0&&(y=A.toString(16)+y);y.length%d!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var l=_[c],f=R[c];y="";var S=this.clone();for(S.negative=0;!S.isZero();){var T=S.modrn(f).toString(c);S=S.idivn(f),S.isZero()?y=T+y:y=k[l-T.length]+T+y}for(this.isZero()&&(y="0"+y);y.length%d!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(c,d){return this.toArrayLike(o,c,d)}),i.prototype.toArray=function(c,d){return this.toArrayLike(Array,c,d)};var I=function(c,d){return c.allocUnsafe?c.allocUnsafe(d):new c(d)};i.prototype.toArrayLike=function(c,d,y){this._strip();var w=this.byteLength(),A=y||Math.max(1,w);n(w<=A,"byte array longer than desired length"),n(A>0,"Requested array length <= 0");var L=I(c,A),F=d==="le"?"LE":"BE";return this["_toArrayLike"+F](L,w),L},i.prototype._toArrayLikeLE=function(c,d){for(var y=0,w=0,A=0,L=0;A<this.length;A++){var F=this.words[A]<<L|w;c[y++]=F&255,y<c.length&&(c[y++]=F>>8&255),y<c.length&&(c[y++]=F>>16&255),L===6?(y<c.length&&(c[y++]=F>>24&255),w=0,L=0):(w=F>>>24,L+=2)}if(y<c.length)for(c[y++]=w;y<c.length;)c[y++]=0},i.prototype._toArrayLikeBE=function(c,d){for(var y=c.length-1,w=0,A=0,L=0;A<this.length;A++){var F=this.words[A]<<L|w;c[y--]=F&255,y>=0&&(c[y--]=F>>8&255),y>=0&&(c[y--]=F>>16&255),L===6?(y>=0&&(c[y--]=F>>24&255),w=0,L=0):(w=F>>>24,L+=2)}if(y>=0)for(c[y--]=w;y>=0;)c[y--]=0},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var d=c,y=0;return d>=4096&&(y+=13,d>>>=13),d>=64&&(y+=7,d>>>=7),d>=8&&(y+=4,d>>>=4),d>=2&&(y+=2,d>>>=2),y+d},i.prototype._zeroBits=function(c){if(c===0)return 26;var d=c,y=0;return(d&8191)===0&&(y+=13,d>>>=13),(d&127)===0&&(y+=7,d>>>=7),(d&15)===0&&(y+=4,d>>>=4),(d&3)===0&&(y+=2,d>>>=2),(d&1)===0&&y++,y},i.prototype.bitLength=function(){var c=this.words[this.length-1],d=this._countBits(c);return(this.length-1)*26+d};function E(x){for(var c=new Array(x.bitLength()),d=0;d<c.length;d++){var y=d/26|0,w=d%26;c[d]=x.words[y]>>>w&1}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,d=0;d<this.length;d++){var y=this._zeroBits(this.words[d]);if(c+=y,y!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var d=0;d<c.length;d++)this.words[d]=this.words[d]|c.words[d];return this._strip()},i.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var d;this.length>c.length?d=c:d=this;for(var y=0;y<d.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=d.length,this._strip()},i.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var d,y;this.length>c.length?(d=this,y=c):(d=c,y=this);for(var w=0;w<y.length;w++)this.words[w]=d.words[w]^y.words[w];if(this!==d)for(;w<d.length;w++)this.words[w]=d.words[w];return this.length=d.length,this._strip()},i.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var d=Math.ceil(c/26)|0,y=c%26;this._expand(d),y>0&&d--;for(var w=0;w<d;w++)this.words[w]=~this.words[w]&67108863;return y>0&&(this.words[w]=~this.words[w]&67108863>>26-y),this._strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,d){n(typeof c=="number"&&c>=0);var y=c/26|0,w=c%26;return this._expand(y+1),d?this.words[y]=this.words[y]|1<<w:this.words[y]=this.words[y]&~(1<<w),this._strip()},i.prototype.iadd=function(c){var d;if(this.negative!==0&&c.negative===0)return this.negative=0,d=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,d=this.isub(c),c.negative=1,d._normSign();var y,w;this.length>c.length?(y=this,w=c):(y=c,w=this);for(var A=0,L=0;L<w.length;L++)d=(y.words[L]|0)+(w.words[L]|0)+A,this.words[L]=d&67108863,A=d>>>26;for(;A!==0&&L<y.length;L++)d=(y.words[L]|0)+A,this.words[L]=d&67108863,A=d>>>26;if(this.length=y.length,A!==0)this.words[this.length]=A,this.length++;else if(y!==this)for(;L<y.length;L++)this.words[L]=y.words[L];return this},i.prototype.add=function(c){var d;return c.negative!==0&&this.negative===0?(c.negative=0,d=this.sub(c),c.negative^=1,d):c.negative===0&&this.negative!==0?(this.negative=0,d=c.sub(this),this.negative=1,d):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var d=this.iadd(c);return c.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,A;y>0?(w=this,A=c):(w=c,A=this);for(var L=0,F=0;F<A.length;F++)d=(w.words[F]|0)-(A.words[F]|0)+L,L=d>>26,this.words[F]=d&67108863;for(;L!==0&&F<w.length;F++)d=(w.words[F]|0)+L,L=d>>26,this.words[F]=d&67108863;if(L===0&&F<w.length&&w!==this)for(;F<w.length;F++)this.words[F]=w.words[F];return this.length=Math.max(this.length,F),w!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function N(x,c,d){d.negative=c.negative^x.negative;var y=x.length+c.length|0;d.length=y,y=y-1|0;var w=x.words[0]|0,A=c.words[0]|0,L=w*A,F=L&67108863,B=L/67108864|0;d.words[0]=F;for(var l=1;l<y;l++){for(var f=B>>>26,S=B&67108863,T=Math.min(l,c.length-1),K=Math.max(0,l-x.length+1);K<=T;K++){var X=l-K|0;w=x.words[X]|0,A=c.words[K]|0,L=w*A+S,f+=L/67108864|0,S=L&67108863}d.words[l]=S|0,B=f|0}return B!==0?d.words[l]=B|0:d.length--,d._strip()}var P=function(c,d,y){var w=c.words,A=d.words,L=y.words,F=0,B,l,f,S=w[0]|0,T=S&8191,K=S>>>13,X=w[1]|0,et=X&8191,ct=X>>>13,_t=w[2]|0,yt=_t&8191,Et=_t>>>13,jt=w[3]|0,xt=jt&8191,kt=jt>>>13,Cn=w[4]|0,Ct=Cn&8191,Ft=Cn>>>13,Tn=w[5]|0,Tt=Tn&8191,Rt=Tn>>>13,ge=w[6]|0,Mt=ge&8191,Pt=ge>>>13,Ie=w[7]|0,Ut=Ie&8191,v=Ie>>>13,h=w[8]|0,p=h&8191,C=h>>>13,z=w[9]|0,V=z&8191,Q=z>>>13,wt=A[0]|0,gt=wt&8191,pt=wt>>>13,Ot=A[1]|0,dt=Ot&8191,Vt=Ot>>>13,po=A[2]|0,Gt=po&8191,Zt=po>>>13,go=A[3]|0,Yt=go&8191,Jt=go>>>13,mo=A[4]|0,Xt=mo&8191,Qt=mo>>>13,yo=A[5]|0,te=yo&8191,ee=yo>>>13,wo=A[6]|0,ne=wo&8191,re=wo>>>13,bo=A[7]|0,ie=bo&8191,se=bo>>>13,vo=A[8]|0,oe=vo&8191,ae=vo>>>13,Eo=A[9]|0,ce=Eo&8191,ue=Eo>>>13;y.negative=c.negative^d.negative,y.length=19,B=Math.imul(T,gt),l=Math.imul(T,pt),l=l+Math.imul(K,gt)|0,f=Math.imul(K,pt);var ci=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(ci>>>26)|0,ci&=67108863,B=Math.imul(et,gt),l=Math.imul(et,pt),l=l+Math.imul(ct,gt)|0,f=Math.imul(ct,pt),B=B+Math.imul(T,dt)|0,l=l+Math.imul(T,Vt)|0,l=l+Math.imul(K,dt)|0,f=f+Math.imul(K,Vt)|0;var ui=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(ui>>>26)|0,ui&=67108863,B=Math.imul(yt,gt),l=Math.imul(yt,pt),l=l+Math.imul(Et,gt)|0,f=Math.imul(Et,pt),B=B+Math.imul(et,dt)|0,l=l+Math.imul(et,Vt)|0,l=l+Math.imul(ct,dt)|0,f=f+Math.imul(ct,Vt)|0,B=B+Math.imul(T,Gt)|0,l=l+Math.imul(T,Zt)|0,l=l+Math.imul(K,Gt)|0,f=f+Math.imul(K,Zt)|0;var li=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(li>>>26)|0,li&=67108863,B=Math.imul(xt,gt),l=Math.imul(xt,pt),l=l+Math.imul(kt,gt)|0,f=Math.imul(kt,pt),B=B+Math.imul(yt,dt)|0,l=l+Math.imul(yt,Vt)|0,l=l+Math.imul(Et,dt)|0,f=f+Math.imul(Et,Vt)|0,B=B+Math.imul(et,Gt)|0,l=l+Math.imul(et,Zt)|0,l=l+Math.imul(ct,Gt)|0,f=f+Math.imul(ct,Zt)|0,B=B+Math.imul(T,Yt)|0,l=l+Math.imul(T,Jt)|0,l=l+Math.imul(K,Yt)|0,f=f+Math.imul(K,Jt)|0;var fi=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(fi>>>26)|0,fi&=67108863,B=Math.imul(Ct,gt),l=Math.imul(Ct,pt),l=l+Math.imul(Ft,gt)|0,f=Math.imul(Ft,pt),B=B+Math.imul(xt,dt)|0,l=l+Math.imul(xt,Vt)|0,l=l+Math.imul(kt,dt)|0,f=f+Math.imul(kt,Vt)|0,B=B+Math.imul(yt,Gt)|0,l=l+Math.imul(yt,Zt)|0,l=l+Math.imul(Et,Gt)|0,f=f+Math.imul(Et,Zt)|0,B=B+Math.imul(et,Yt)|0,l=l+Math.imul(et,Jt)|0,l=l+Math.imul(ct,Yt)|0,f=f+Math.imul(ct,Jt)|0,B=B+Math.imul(T,Xt)|0,l=l+Math.imul(T,Qt)|0,l=l+Math.imul(K,Xt)|0,f=f+Math.imul(K,Qt)|0;var hi=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(hi>>>26)|0,hi&=67108863,B=Math.imul(Tt,gt),l=Math.imul(Tt,pt),l=l+Math.imul(Rt,gt)|0,f=Math.imul(Rt,pt),B=B+Math.imul(Ct,dt)|0,l=l+Math.imul(Ct,Vt)|0,l=l+Math.imul(Ft,dt)|0,f=f+Math.imul(Ft,Vt)|0,B=B+Math.imul(xt,Gt)|0,l=l+Math.imul(xt,Zt)|0,l=l+Math.imul(kt,Gt)|0,f=f+Math.imul(kt,Zt)|0,B=B+Math.imul(yt,Yt)|0,l=l+Math.imul(yt,Jt)|0,l=l+Math.imul(Et,Yt)|0,f=f+Math.imul(Et,Jt)|0,B=B+Math.imul(et,Xt)|0,l=l+Math.imul(et,Qt)|0,l=l+Math.imul(ct,Xt)|0,f=f+Math.imul(ct,Qt)|0,B=B+Math.imul(T,te)|0,l=l+Math.imul(T,ee)|0,l=l+Math.imul(K,te)|0,f=f+Math.imul(K,ee)|0;var di=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(di>>>26)|0,di&=67108863,B=Math.imul(Mt,gt),l=Math.imul(Mt,pt),l=l+Math.imul(Pt,gt)|0,f=Math.imul(Pt,pt),B=B+Math.imul(Tt,dt)|0,l=l+Math.imul(Tt,Vt)|0,l=l+Math.imul(Rt,dt)|0,f=f+Math.imul(Rt,Vt)|0,B=B+Math.imul(Ct,Gt)|0,l=l+Math.imul(Ct,Zt)|0,l=l+Math.imul(Ft,Gt)|0,f=f+Math.imul(Ft,Zt)|0,B=B+Math.imul(xt,Yt)|0,l=l+Math.imul(xt,Jt)|0,l=l+Math.imul(kt,Yt)|0,f=f+Math.imul(kt,Jt)|0,B=B+Math.imul(yt,Xt)|0,l=l+Math.imul(yt,Qt)|0,l=l+Math.imul(Et,Xt)|0,f=f+Math.imul(Et,Qt)|0,B=B+Math.imul(et,te)|0,l=l+Math.imul(et,ee)|0,l=l+Math.imul(ct,te)|0,f=f+Math.imul(ct,ee)|0,B=B+Math.imul(T,ne)|0,l=l+Math.imul(T,re)|0,l=l+Math.imul(K,ne)|0,f=f+Math.imul(K,re)|0;var pi=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(pi>>>26)|0,pi&=67108863,B=Math.imul(Ut,gt),l=Math.imul(Ut,pt),l=l+Math.imul(v,gt)|0,f=Math.imul(v,pt),B=B+Math.imul(Mt,dt)|0,l=l+Math.imul(Mt,Vt)|0,l=l+Math.imul(Pt,dt)|0,f=f+Math.imul(Pt,Vt)|0,B=B+Math.imul(Tt,Gt)|0,l=l+Math.imul(Tt,Zt)|0,l=l+Math.imul(Rt,Gt)|0,f=f+Math.imul(Rt,Zt)|0,B=B+Math.imul(Ct,Yt)|0,l=l+Math.imul(Ct,Jt)|0,l=l+Math.imul(Ft,Yt)|0,f=f+Math.imul(Ft,Jt)|0,B=B+Math.imul(xt,Xt)|0,l=l+Math.imul(xt,Qt)|0,l=l+Math.imul(kt,Xt)|0,f=f+Math.imul(kt,Qt)|0,B=B+Math.imul(yt,te)|0,l=l+Math.imul(yt,ee)|0,l=l+Math.imul(Et,te)|0,f=f+Math.imul(Et,ee)|0,B=B+Math.imul(et,ne)|0,l=l+Math.imul(et,re)|0,l=l+Math.imul(ct,ne)|0,f=f+Math.imul(ct,re)|0,B=B+Math.imul(T,ie)|0,l=l+Math.imul(T,se)|0,l=l+Math.imul(K,ie)|0,f=f+Math.imul(K,se)|0;var gi=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(gi>>>26)|0,gi&=67108863,B=Math.imul(p,gt),l=Math.imul(p,pt),l=l+Math.imul(C,gt)|0,f=Math.imul(C,pt),B=B+Math.imul(Ut,dt)|0,l=l+Math.imul(Ut,Vt)|0,l=l+Math.imul(v,dt)|0,f=f+Math.imul(v,Vt)|0,B=B+Math.imul(Mt,Gt)|0,l=l+Math.imul(Mt,Zt)|0,l=l+Math.imul(Pt,Gt)|0,f=f+Math.imul(Pt,Zt)|0,B=B+Math.imul(Tt,Yt)|0,l=l+Math.imul(Tt,Jt)|0,l=l+Math.imul(Rt,Yt)|0,f=f+Math.imul(Rt,Jt)|0,B=B+Math.imul(Ct,Xt)|0,l=l+Math.imul(Ct,Qt)|0,l=l+Math.imul(Ft,Xt)|0,f=f+Math.imul(Ft,Qt)|0,B=B+Math.imul(xt,te)|0,l=l+Math.imul(xt,ee)|0,l=l+Math.imul(kt,te)|0,f=f+Math.imul(kt,ee)|0,B=B+Math.imul(yt,ne)|0,l=l+Math.imul(yt,re)|0,l=l+Math.imul(Et,ne)|0,f=f+Math.imul(Et,re)|0,B=B+Math.imul(et,ie)|0,l=l+Math.imul(et,se)|0,l=l+Math.imul(ct,ie)|0,f=f+Math.imul(ct,se)|0,B=B+Math.imul(T,oe)|0,l=l+Math.imul(T,ae)|0,l=l+Math.imul(K,oe)|0,f=f+Math.imul(K,ae)|0;var mi=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(mi>>>26)|0,mi&=67108863,B=Math.imul(V,gt),l=Math.imul(V,pt),l=l+Math.imul(Q,gt)|0,f=Math.imul(Q,pt),B=B+Math.imul(p,dt)|0,l=l+Math.imul(p,Vt)|0,l=l+Math.imul(C,dt)|0,f=f+Math.imul(C,Vt)|0,B=B+Math.imul(Ut,Gt)|0,l=l+Math.imul(Ut,Zt)|0,l=l+Math.imul(v,Gt)|0,f=f+Math.imul(v,Zt)|0,B=B+Math.imul(Mt,Yt)|0,l=l+Math.imul(Mt,Jt)|0,l=l+Math.imul(Pt,Yt)|0,f=f+Math.imul(Pt,Jt)|0,B=B+Math.imul(Tt,Xt)|0,l=l+Math.imul(Tt,Qt)|0,l=l+Math.imul(Rt,Xt)|0,f=f+Math.imul(Rt,Qt)|0,B=B+Math.imul(Ct,te)|0,l=l+Math.imul(Ct,ee)|0,l=l+Math.imul(Ft,te)|0,f=f+Math.imul(Ft,ee)|0,B=B+Math.imul(xt,ne)|0,l=l+Math.imul(xt,re)|0,l=l+Math.imul(kt,ne)|0,f=f+Math.imul(kt,re)|0,B=B+Math.imul(yt,ie)|0,l=l+Math.imul(yt,se)|0,l=l+Math.imul(Et,ie)|0,f=f+Math.imul(Et,se)|0,B=B+Math.imul(et,oe)|0,l=l+Math.imul(et,ae)|0,l=l+Math.imul(ct,oe)|0,f=f+Math.imul(ct,ae)|0,B=B+Math.imul(T,ce)|0,l=l+Math.imul(T,ue)|0,l=l+Math.imul(K,ce)|0,f=f+Math.imul(K,ue)|0;var yi=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(yi>>>26)|0,yi&=67108863,B=Math.imul(V,dt),l=Math.imul(V,Vt),l=l+Math.imul(Q,dt)|0,f=Math.imul(Q,Vt),B=B+Math.imul(p,Gt)|0,l=l+Math.imul(p,Zt)|0,l=l+Math.imul(C,Gt)|0,f=f+Math.imul(C,Zt)|0,B=B+Math.imul(Ut,Yt)|0,l=l+Math.imul(Ut,Jt)|0,l=l+Math.imul(v,Yt)|0,f=f+Math.imul(v,Jt)|0,B=B+Math.imul(Mt,Xt)|0,l=l+Math.imul(Mt,Qt)|0,l=l+Math.imul(Pt,Xt)|0,f=f+Math.imul(Pt,Qt)|0,B=B+Math.imul(Tt,te)|0,l=l+Math.imul(Tt,ee)|0,l=l+Math.imul(Rt,te)|0,f=f+Math.imul(Rt,ee)|0,B=B+Math.imul(Ct,ne)|0,l=l+Math.imul(Ct,re)|0,l=l+Math.imul(Ft,ne)|0,f=f+Math.imul(Ft,re)|0,B=B+Math.imul(xt,ie)|0,l=l+Math.imul(xt,se)|0,l=l+Math.imul(kt,ie)|0,f=f+Math.imul(kt,se)|0,B=B+Math.imul(yt,oe)|0,l=l+Math.imul(yt,ae)|0,l=l+Math.imul(Et,oe)|0,f=f+Math.imul(Et,ae)|0,B=B+Math.imul(et,ce)|0,l=l+Math.imul(et,ue)|0,l=l+Math.imul(ct,ce)|0,f=f+Math.imul(ct,ue)|0;var wi=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(wi>>>26)|0,wi&=67108863,B=Math.imul(V,Gt),l=Math.imul(V,Zt),l=l+Math.imul(Q,Gt)|0,f=Math.imul(Q,Zt),B=B+Math.imul(p,Yt)|0,l=l+Math.imul(p,Jt)|0,l=l+Math.imul(C,Yt)|0,f=f+Math.imul(C,Jt)|0,B=B+Math.imul(Ut,Xt)|0,l=l+Math.imul(Ut,Qt)|0,l=l+Math.imul(v,Xt)|0,f=f+Math.imul(v,Qt)|0,B=B+Math.imul(Mt,te)|0,l=l+Math.imul(Mt,ee)|0,l=l+Math.imul(Pt,te)|0,f=f+Math.imul(Pt,ee)|0,B=B+Math.imul(Tt,ne)|0,l=l+Math.imul(Tt,re)|0,l=l+Math.imul(Rt,ne)|0,f=f+Math.imul(Rt,re)|0,B=B+Math.imul(Ct,ie)|0,l=l+Math.imul(Ct,se)|0,l=l+Math.imul(Ft,ie)|0,f=f+Math.imul(Ft,se)|0,B=B+Math.imul(xt,oe)|0,l=l+Math.imul(xt,ae)|0,l=l+Math.imul(kt,oe)|0,f=f+Math.imul(kt,ae)|0,B=B+Math.imul(yt,ce)|0,l=l+Math.imul(yt,ue)|0,l=l+Math.imul(Et,ce)|0,f=f+Math.imul(Et,ue)|0;var bi=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(bi>>>26)|0,bi&=67108863,B=Math.imul(V,Yt),l=Math.imul(V,Jt),l=l+Math.imul(Q,Yt)|0,f=Math.imul(Q,Jt),B=B+Math.imul(p,Xt)|0,l=l+Math.imul(p,Qt)|0,l=l+Math.imul(C,Xt)|0,f=f+Math.imul(C,Qt)|0,B=B+Math.imul(Ut,te)|0,l=l+Math.imul(Ut,ee)|0,l=l+Math.imul(v,te)|0,f=f+Math.imul(v,ee)|0,B=B+Math.imul(Mt,ne)|0,l=l+Math.imul(Mt,re)|0,l=l+Math.imul(Pt,ne)|0,f=f+Math.imul(Pt,re)|0,B=B+Math.imul(Tt,ie)|0,l=l+Math.imul(Tt,se)|0,l=l+Math.imul(Rt,ie)|0,f=f+Math.imul(Rt,se)|0,B=B+Math.imul(Ct,oe)|0,l=l+Math.imul(Ct,ae)|0,l=l+Math.imul(Ft,oe)|0,f=f+Math.imul(Ft,ae)|0,B=B+Math.imul(xt,ce)|0,l=l+Math.imul(xt,ue)|0,l=l+Math.imul(kt,ce)|0,f=f+Math.imul(kt,ue)|0;var vi=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(vi>>>26)|0,vi&=67108863,B=Math.imul(V,Xt),l=Math.imul(V,Qt),l=l+Math.imul(Q,Xt)|0,f=Math.imul(Q,Qt),B=B+Math.imul(p,te)|0,l=l+Math.imul(p,ee)|0,l=l+Math.imul(C,te)|0,f=f+Math.imul(C,ee)|0,B=B+Math.imul(Ut,ne)|0,l=l+Math.imul(Ut,re)|0,l=l+Math.imul(v,ne)|0,f=f+Math.imul(v,re)|0,B=B+Math.imul(Mt,ie)|0,l=l+Math.imul(Mt,se)|0,l=l+Math.imul(Pt,ie)|0,f=f+Math.imul(Pt,se)|0,B=B+Math.imul(Tt,oe)|0,l=l+Math.imul(Tt,ae)|0,l=l+Math.imul(Rt,oe)|0,f=f+Math.imul(Rt,ae)|0,B=B+Math.imul(Ct,ce)|0,l=l+Math.imul(Ct,ue)|0,l=l+Math.imul(Ft,ce)|0,f=f+Math.imul(Ft,ue)|0;var Ei=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(Ei>>>26)|0,Ei&=67108863,B=Math.imul(V,te),l=Math.imul(V,ee),l=l+Math.imul(Q,te)|0,f=Math.imul(Q,ee),B=B+Math.imul(p,ne)|0,l=l+Math.imul(p,re)|0,l=l+Math.imul(C,ne)|0,f=f+Math.imul(C,re)|0,B=B+Math.imul(Ut,ie)|0,l=l+Math.imul(Ut,se)|0,l=l+Math.imul(v,ie)|0,f=f+Math.imul(v,se)|0,B=B+Math.imul(Mt,oe)|0,l=l+Math.imul(Mt,ae)|0,l=l+Math.imul(Pt,oe)|0,f=f+Math.imul(Pt,ae)|0,B=B+Math.imul(Tt,ce)|0,l=l+Math.imul(Tt,ue)|0,l=l+Math.imul(Rt,ce)|0,f=f+Math.imul(Rt,ue)|0;var Si=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(Si>>>26)|0,Si&=67108863,B=Math.imul(V,ne),l=Math.imul(V,re),l=l+Math.imul(Q,ne)|0,f=Math.imul(Q,re),B=B+Math.imul(p,ie)|0,l=l+Math.imul(p,se)|0,l=l+Math.imul(C,ie)|0,f=f+Math.imul(C,se)|0,B=B+Math.imul(Ut,oe)|0,l=l+Math.imul(Ut,ae)|0,l=l+Math.imul(v,oe)|0,f=f+Math.imul(v,ae)|0,B=B+Math.imul(Mt,ce)|0,l=l+Math.imul(Mt,ue)|0,l=l+Math.imul(Pt,ce)|0,f=f+Math.imul(Pt,ue)|0;var xi=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(xi>>>26)|0,xi&=67108863,B=Math.imul(V,ie),l=Math.imul(V,se),l=l+Math.imul(Q,ie)|0,f=Math.imul(Q,se),B=B+Math.imul(p,oe)|0,l=l+Math.imul(p,ae)|0,l=l+Math.imul(C,oe)|0,f=f+Math.imul(C,ae)|0,B=B+Math.imul(Ut,ce)|0,l=l+Math.imul(Ut,ue)|0,l=l+Math.imul(v,ce)|0,f=f+Math.imul(v,ue)|0;var _i=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(_i>>>26)|0,_i&=67108863,B=Math.imul(V,oe),l=Math.imul(V,ae),l=l+Math.imul(Q,oe)|0,f=Math.imul(Q,ae),B=B+Math.imul(p,ce)|0,l=l+Math.imul(p,ue)|0,l=l+Math.imul(C,ce)|0,f=f+Math.imul(C,ue)|0;var Ai=(F+B|0)+((l&8191)<<13)|0;F=(f+(l>>>13)|0)+(Ai>>>26)|0,Ai&=67108863,B=Math.imul(V,ce),l=Math.imul(V,ue),l=l+Math.imul(Q,ce)|0,f=Math.imul(Q,ue);var Bi=(F+B|0)+((l&8191)<<13)|0;return F=(f+(l>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,L[0]=ci,L[1]=ui,L[2]=li,L[3]=fi,L[4]=hi,L[5]=di,L[6]=pi,L[7]=gi,L[8]=mi,L[9]=yi,L[10]=wi,L[11]=bi,L[12]=vi,L[13]=Ei,L[14]=Si,L[15]=xi,L[16]=_i,L[17]=Ai,L[18]=Bi,F!==0&&(L[19]=F,y.length++),y};Math.imul||(P=N);function M(x,c,d){d.negative=c.negative^x.negative,d.length=x.length+c.length;for(var y=0,w=0,A=0;A<d.length-1;A++){var L=w;w=0;for(var F=y&67108863,B=Math.min(A,c.length-1),l=Math.max(0,A-x.length+1);l<=B;l++){var f=A-l,S=x.words[f]|0,T=c.words[l]|0,K=S*T,X=K&67108863;L=L+(K/67108864|0)|0,X=X+F|0,F=X&67108863,L=L+(X>>>26)|0,w+=L>>>26,L&=67108863}d.words[A]=F,y=L,L=w}return y!==0?d.words[A]=y:d.length--,d._strip()}function H(x,c,d){return M(x,c,d)}i.prototype.mulTo=function(c,d){var y,w=this.length+c.length;return this.length===10&&c.length===10?y=P(this,c,d):w<63?y=N(this,c,d):w<1024?y=M(this,c,d):y=H(this,c,d),y},i.prototype.mul=function(c){var d=new i(null);return d.words=new Array(this.length+c.length),this.mulTo(c,d)},i.prototype.mulf=function(c){var d=new i(null);return d.words=new Array(this.length+c.length),H(this,c,d)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){var d=c<0;d&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var y=0,w=0;w<this.length;w++){var A=(this.words[w]|0)*c,L=(A&67108863)+(y&67108863);y>>=26,y+=A/67108864|0,y+=L>>>26,this.words[w]=L&67108863}return y!==0&&(this.words[w]=y,this.length++),d?this.ineg():this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var d=E(c);if(d.length===0)return new i(1);for(var y=this,w=0;w<d.length&&d[w]===0;w++,y=y.sqr());if(++w<d.length)for(var A=y.sqr();w<d.length;w++,A=A.sqr())d[w]!==0&&(y=y.mul(A));return y},i.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var d=c%26,y=(c-d)/26,w=67108863>>>26-d<<26-d,A;if(d!==0){var L=0;for(A=0;A<this.length;A++){var F=this.words[A]&w,B=(this.words[A]|0)-F<<d;this.words[A]=B|L,L=F>>>26-d}L&&(this.words[A]=L,this.length++)}if(y!==0){for(A=this.length-1;A>=0;A--)this.words[A+y]=this.words[A];for(A=0;A<y;A++)this.words[A]=0;this.length+=y}return this._strip()},i.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,d,y){n(typeof c=="number"&&c>=0);var w;d?w=(d-d%26)/26:w=0;var A=c%26,L=Math.min((c-A)/26,this.length),F=67108863^67108863>>>A<<A,B=y;if(w-=L,w=Math.max(0,w),B){for(var l=0;l<L;l++)B.words[l]=this.words[l];B.length=L}if(L!==0)if(this.length>L)for(this.length-=L,l=0;l<this.length;l++)this.words[l]=this.words[l+L];else this.words[0]=0,this.length=1;var f=0;for(l=this.length-1;l>=0&&(f!==0||l>=w);l--){var S=this.words[l]|0;this.words[l]=f<<26-A|S>>>A,f=S&F}return B&&f!==0&&(B.words[B.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(c,d,y){return n(this.negative===0),this.iushrn(c,d,y)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,y=(c-d)/26,w=1<<d;if(this.length<=y)return!1;var A=this.words[y];return!!(A&w)},i.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,y=(c-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(d!==0&&y++,this.length=Math.min(y,this.length),d!==0){var w=67108863^67108863>>>d<<d;this.words[this.length-1]&=w}return this._strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},i.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,d,y){var w=c.length+y,A;this._expand(w);var L,F=0;for(A=0;A<c.length;A++){L=(this.words[A+y]|0)+F;var B=(c.words[A]|0)*d;L-=B&67108863,F=(L>>26)-(B/67108864|0),this.words[A+y]=L&67108863}for(;A<this.length-y;A++)L=(this.words[A+y]|0)+F,F=L>>26,this.words[A+y]=L&67108863;if(F===0)return this._strip();for(n(F===-1),F=0,A=0;A<this.length;A++)L=-(this.words[A]|0)+F,F=L>>26,this.words[A]=L&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(c,d){var y=this.length-c.length,w=this.clone(),A=c,L=A.words[A.length-1]|0,F=this._countBits(L);y=26-F,y!==0&&(A=A.ushln(y),w.iushln(y),L=A.words[A.length-1]|0);var B=w.length-A.length,l;if(d!=="mod"){l=new i(null),l.length=B+1,l.words=new Array(l.length);for(var f=0;f<l.length;f++)l.words[f]=0}var S=w.clone()._ishlnsubmul(A,1,B);S.negative===0&&(w=S,l&&(l.words[B]=1));for(var T=B-1;T>=0;T--){var K=(w.words[A.length+T]|0)*67108864+(w.words[A.length+T-1]|0);for(K=Math.min(K/L|0,67108863),w._ishlnsubmul(A,K,T);w.negative!==0;)K--,w.negative=0,w._ishlnsubmul(A,1,T),w.isZero()||(w.negative^=1);l&&(l.words[T]=K)}return l&&l._strip(),w._strip(),d!=="div"&&y!==0&&w.iushrn(y),{div:l||null,mod:w}},i.prototype.divmod=function(c,d,y){if(n(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var w,A,L;return this.negative!==0&&c.negative===0?(L=this.neg().divmod(c,d),d!=="mod"&&(w=L.div.neg()),d!=="div"&&(A=L.mod.neg(),y&&A.negative!==0&&A.iadd(c)),{div:w,mod:A}):this.negative===0&&c.negative!==0?(L=this.divmod(c.neg(),d),d!=="mod"&&(w=L.div.neg()),{div:w,mod:L.mod}):(this.negative&c.negative)!==0?(L=this.neg().divmod(c.neg(),d),d!=="div"&&(A=L.mod.neg(),y&&A.negative!==0&&A.isub(c)),{div:L.div,mod:A}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?d==="div"?{div:this.divn(c.words[0]),mod:null}:d==="mod"?{div:null,mod:new i(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modrn(c.words[0]))}:this._wordDiv(c,d)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var d=this.divmod(c);if(d.mod.isZero())return d.div;var y=d.div.negative!==0?d.mod.isub(c):d.mod,w=c.ushrn(1),A=c.andln(1),L=y.cmp(w);return L<0||A===1&&L===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},i.prototype.modrn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var y=(1<<26)%c,w=0,A=this.length-1;A>=0;A--)w=(y*w+(this.words[A]|0))%c;return d?-w:w},i.prototype.modn=function(c){return this.modrn(c)},i.prototype.idivn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var y=0,w=this.length-1;w>=0;w--){var A=(this.words[w]|0)+y*67108864;this.words[w]=A/c|0,y=A%c}return this._strip(),d?this.ineg():this},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var d=this,y=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var w=new i(1),A=new i(0),L=new i(0),F=new i(1),B=0;d.isEven()&&y.isEven();)d.iushrn(1),y.iushrn(1),++B;for(var l=y.clone(),f=d.clone();!d.isZero();){for(var S=0,T=1;(d.words[0]&T)===0&&S<26;++S,T<<=1);if(S>0)for(d.iushrn(S);S-- >0;)(w.isOdd()||A.isOdd())&&(w.iadd(l),A.isub(f)),w.iushrn(1),A.iushrn(1);for(var K=0,X=1;(y.words[0]&X)===0&&K<26;++K,X<<=1);if(K>0)for(y.iushrn(K);K-- >0;)(L.isOdd()||F.isOdd())&&(L.iadd(l),F.isub(f)),L.iushrn(1),F.iushrn(1);d.cmp(y)>=0?(d.isub(y),w.isub(L),A.isub(F)):(y.isub(d),L.isub(w),F.isub(A))}return{a:L,b:F,gcd:y.iushln(B)}},i.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var d=this,y=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var w=new i(1),A=new i(0),L=y.clone();d.cmpn(1)>0&&y.cmpn(1)>0;){for(var F=0,B=1;(d.words[0]&B)===0&&F<26;++F,B<<=1);if(F>0)for(d.iushrn(F);F-- >0;)w.isOdd()&&w.iadd(L),w.iushrn(1);for(var l=0,f=1;(y.words[0]&f)===0&&l<26;++l,f<<=1);if(l>0)for(y.iushrn(l);l-- >0;)A.isOdd()&&A.iadd(L),A.iushrn(1);d.cmp(y)>=0?(d.isub(y),w.isub(A)):(y.isub(d),A.isub(w))}var S;return d.cmpn(1)===0?S=w:S=A,S.cmpn(0)<0&&S.iadd(c),S},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var d=this.clone(),y=c.clone();d.negative=0,y.negative=0;for(var w=0;d.isEven()&&y.isEven();w++)d.iushrn(1),y.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;y.isEven();)y.iushrn(1);var A=d.cmp(y);if(A<0){var L=d;d=y,y=L}else if(A===0||y.cmpn(1)===0)break;d.isub(y)}while(!0);return y.iushln(w)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){n(typeof c=="number");var d=c%26,y=(c-d)/26,w=1<<d;if(this.length<=y)return this._expand(y+1),this.words[y]|=w,this;for(var A=w,L=y;A!==0&&L<this.length;L++){var F=this.words[L]|0;F+=A,A=F>>>26,F&=67108863,this.words[L]=F}return A!==0&&(this.words[L]=A,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var d=c<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var y;if(this.length>1)y=1;else{d&&(c=-c),n(c<=67108863,"Number is too big");var w=this.words[0]|0;y=w===c?0:w<c?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var d=this.ucmp(c);return this.negative!==0?-d|0:d},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var d=0,y=this.length-1;y>=0;y--){var w=this.words[y]|0,A=c.words[y]|0;if(w!==A){w<A?d=-1:w>A&&(d=1);break}}return d},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new q(c)},i.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var j={k256:null,p224:null,p192:null,p25519:null};function $(x,c){this.name=x,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}$.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},$.prototype.ireduce=function(c){var d=c,y;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),y=d.bitLength();while(y>this.n);var w=y<this.n?-1:d.ucmp(this.p);return w===0?(d.words[0]=0,d.length=1):w>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},$.prototype.split=function(c,d){c.iushrn(this.n,0,d)},$.prototype.imulK=function(c){return c.imul(this.k)};function J(){$.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(J,$),J.prototype.split=function(c,d){for(var y=4194303,w=Math.min(c.length,9),A=0;A<w;A++)d.words[A]=c.words[A];if(d.length=w,c.length<=9){c.words[0]=0,c.length=1;return}var L=c.words[9];for(d.words[d.length++]=L&y,A=10;A<c.length;A++){var F=c.words[A]|0;c.words[A-10]=(F&y)<<4|L>>>22,L=F}L>>>=22,c.words[A-10]=L,L===0&&c.length>10?c.length-=10:c.length-=9},J.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var d=0,y=0;y<c.length;y++){var w=c.words[y]|0;d+=w*977,c.words[y]=d&67108863,d=w*64+(d/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function Y(){$.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(Y,$);function O(){$.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(O,$);function D(){$.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(D,$),D.prototype.imulK=function(c){for(var d=0,y=0;y<c.length;y++){var w=(c.words[y]|0)*19+d,A=w&67108863;w>>>=26,c.words[y]=A,d=w}return d!==0&&(c.words[c.length++]=d),c},i._prime=function(c){if(j[c])return j[c];var d;if(c==="k256")d=new J;else if(c==="p224")d=new Y;else if(c==="p192")d=new O;else if(c==="p25519")d=new D;else throw new Error("Unknown prime "+c);return j[c]=d,d};function q(x){if(typeof x=="string"){var c=i._prime(x);this.m=c.p,this.prime=c}else n(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}q.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},q.prototype._verify2=function(c,d){n((c.negative|d.negative)===0,"red works only with positives"),n(c.red&&c.red===d.red,"red works only with red numbers")},q.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(m(c,c.umod(this.m)._forceRed(this)),c)},q.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},q.prototype.add=function(c,d){this._verify2(c,d);var y=c.add(d);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},q.prototype.iadd=function(c,d){this._verify2(c,d);var y=c.iadd(d);return y.cmp(this.m)>=0&&y.isub(this.m),y},q.prototype.sub=function(c,d){this._verify2(c,d);var y=c.sub(d);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},q.prototype.isub=function(c,d){this._verify2(c,d);var y=c.isub(d);return y.cmpn(0)<0&&y.iadd(this.m),y},q.prototype.shl=function(c,d){return this._verify1(c),this.imod(c.ushln(d))},q.prototype.imul=function(c,d){return this._verify2(c,d),this.imod(c.imul(d))},q.prototype.mul=function(c,d){return this._verify2(c,d),this.imod(c.mul(d))},q.prototype.isqr=function(c){return this.imul(c,c.clone())},q.prototype.sqr=function(c){return this.mul(c,c)},q.prototype.sqrt=function(c){if(c.isZero())return c.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(c,y)}for(var w=this.m.subn(1),A=0;!w.isZero()&&w.andln(1)===0;)A++,w.iushrn(1);n(!w.isZero());var L=new i(1).toRed(this),F=L.redNeg(),B=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);this.pow(l,B).cmp(F)!==0;)l.redIAdd(F);for(var f=this.pow(l,w),S=this.pow(c,w.addn(1).iushrn(1)),T=this.pow(c,w),K=A;T.cmp(L)!==0;){for(var X=T,et=0;X.cmp(L)!==0;et++)X=X.redSqr();n(et<K);var ct=this.pow(f,new i(1).iushln(K-et-1));S=S.redMul(ct),f=ct.redSqr(),T=T.redMul(f),K=et}return S},q.prototype.invm=function(c){var d=c._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},q.prototype.pow=function(c,d){if(d.isZero())return new i(1).toRed(this);if(d.cmpn(1)===0)return c.clone();var y=4,w=new Array(1<<y);w[0]=new i(1).toRed(this),w[1]=c;for(var A=2;A<w.length;A++)w[A]=this.mul(w[A-1],c);var L=w[0],F=0,B=0,l=d.bitLength()%26;for(l===0&&(l=26),A=d.length-1;A>=0;A--){for(var f=d.words[A],S=l-1;S>=0;S--){var T=f>>S&1;if(L!==w[0]&&(L=this.sqr(L)),T===0&&F===0){B=0;continue}F<<=1,F|=T,B++,!(B!==y&&(A!==0||S!==0))&&(L=this.mul(L,w[F]),B=0,F=0)}l=26}return L},q.prototype.convertTo=function(c){var d=c.umod(this.m);return d===c?d.clone():d},q.prototype.convertFrom=function(c){var d=c.clone();return d.red=null,d},i.mont=function(c){return new W(c)};function W(x){q.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(W,q),W.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},W.prototype.convertFrom=function(c){var d=this.imod(c.mul(this.rinv));return d.red=null,d},W.prototype.imul=function(c,d){if(c.isZero()||d.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(d),w=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),A=y.isub(w).iushrn(this.shift),L=A;return A.cmp(this.m)>=0?L=A.isub(this.m):A.cmpn(0)<0&&(L=A.iadd(this.m)),L._forceRed(this)},W.prototype.mul=function(c,d){if(c.isZero()||d.isZero())return new i(0)._forceRed(this);var y=c.mul(d),w=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),A=y.isub(w).iushrn(this.shift),L=A;return A.cmp(this.m)>=0?L=A.isub(this.m):A.cmpn(0)<0&&(L=A.iadd(this.m)),L._forceRed(this)},W.prototype.invm=function(c){var d=this.imod(c._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(r,tf)}(Rr)),Rr.exports}var ef=Rc();const Fo=An(ef);var _r={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Do;function nf(){return Do||(Do=1,function(r,e){var t=Ys(),n=t.Buffer;function s(o,a){for(var u in o)a[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(s(t,e),e.Buffer=i);function i(o,a,u){return n(o,a,u)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,u)},i.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var g=n(o);return a!==void 0?typeof u=="string"?g.fill(a,u):g.fill(a):g.fill(0),g},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}}(_r,_r.exports)),_r.exports}var Oi,qo;function rf(){if(qo)return Oi;qo=1;var r=nf().Buffer;function e(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),a=o.charCodeAt(0);if(n[a]!==255)throw new TypeError(o+" is ambiguous");n[a]=i}var u=t.length,g=t.charAt(0),m=Math.log(u)/Math.log(256),b=Math.log(256)/Math.log(u);function k(I){if((Array.isArray(I)||I instanceof Uint8Array)&&(I=r.from(I)),!r.isBuffer(I))throw new TypeError("Expected Buffer");if(I.length===0)return"";for(var E=0,N=0,P=0,M=I.length;P!==M&&I[P]===0;)P++,E++;for(var H=(M-P)*b+1>>>0,j=new Uint8Array(H);P!==M;){for(var $=I[P],J=0,Y=H-1;($!==0||J<N)&&Y!==-1;Y--,J++)$+=256*j[Y]>>>0,j[Y]=$%u>>>0,$=$/u>>>0;if($!==0)throw new Error("Non-zero carry");N=J,P++}for(var O=H-N;O!==H&&j[O]===0;)O++;for(var D=g.repeat(E);O<H;++O)D+=t.charAt(j[O]);return D}function _(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return r.alloc(0);for(var E=0,N=0,P=0;I[E]===g;)N++,E++;for(var M=(I.length-E)*m+1>>>0,H=new Uint8Array(M);E<I.length;){var j=I.charCodeAt(E);if(j>255)return;var $=n[j];if($===255)return;for(var J=0,Y=M-1;($!==0||J<P)&&Y!==-1;Y--,J++)$+=u*H[Y]>>>0,H[Y]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");P=J,E++}for(var O=M-P;O!==M&&H[O]===0;)O++;var D=r.allocUnsafe(N+(M-O));D.fill(0,0,N);for(var q=N;O!==M;)D[q++]=H[O++];return D}function R(I){var E=_(I);if(E)return E;throw new Error("Non-base"+u+" character")}return{encode:k,decodeUnsafe:_,decode:R}}return Oi=e,Oi}var Fi,zo;function Mc(){if(zo)return Fi;zo=1;var r=rf(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Fi=r(e),Fi}var sf=Mc();const ve=An(sf),of=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),sn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),on=new Uint32Array(64);class af extends wc{constructor(){super(64,32,8,!1),this.A=sn[0]|0,this.B=sn[1]|0,this.C=sn[2]|0,this.D=sn[3]|0,this.E=sn[4]|0,this.F=sn[5]|0,this.G=sn[6]|0,this.H=sn[7]|0}get(){const{A:e,B:t,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,t,n,s,i,o,a,u]}set(e,t,n,s,i,o,a,u){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,t){for(let b=0;b<16;b++,t+=4)on[b]=e.getUint32(t,!1);for(let b=16;b<64;b++){const k=on[b-15],_=on[b-2],R=We(k,7)^We(k,18)^k>>>3,I=We(_,17)^We(_,19)^_>>>10;on[b]=I+on[b-7]+R+on[b-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:g,H:m}=this;for(let b=0;b<64;b++){const k=We(a,6)^We(a,11)^We(a,25),_=m+k+Hu(a,u,g)+of[b]+on[b]|0,I=(We(n,2)^We(n,13)^We(n,22))+$u(n,s,i)|0;m=g,g=u,u=a,a=o+_|0,o=i,i=s,s=n,n=_+I|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,g=g+this.G|0,m=m+this.H|0,this.set(n,s,i,o,a,u,g,m)}roundClean(){on.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Os=mc(()=>new af);var It={};function Ze(r,e,t){return e<=r&&r<=t}function Qr(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function cf(r){for(var e=String(r),t=e.length,n=0,s=[];n<t;){var i=e.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===t-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=i&1023,u=o&1023;s.push(65536+(a<<10)+u),n+=1}else s.push(65533)}n+=1}return s}function uf(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var Or=-1;function no(r){this.tokens=[].slice.call(r)}no.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Or},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var jn=-1;function Di(r,e){if(r)throw TypeError("Decoder error");return e||65533}var Fr="utf-8";function Dr(r,e){if(!(this instanceof Dr))return new Dr(r,e);if(r=r!==void 0?String(r).toLowerCase():Fr,r!==Fr)throw new Error("Encoding not supported. Only utf-8 is supported");e=Qr(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Dr.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=Qr(t),this._streaming||(this._decoder=new lf({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new no(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==jn);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===jn)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),uf(i)}};function qr(r,e){if(!(this instanceof qr))return new qr(r,e);if(r=r!==void 0?String(r).toLowerCase():Fr,r!==Fr)throw new Error("Encoding not supported. Only utf-8 is supported");e=Qr(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}qr.prototype={encode:function(e,t){e=e?String(e):"",t=Qr(t),this._streaming||(this._encoder=new ff(this._options)),this._streaming=!!t.stream;for(var n=[],s=new no(cf(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==jn);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==jn;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function lf(r){var e=r.fatal,t=0,n=0,s=0,i=128,o=191;this.handler=function(a,u){if(u===Or&&s!==0)return s=0,Di(e);if(u===Or)return jn;if(s===0){if(Ze(u,0,127))return u;if(Ze(u,194,223))s=1,t=u-192;else if(Ze(u,224,239))u===224&&(i=160),u===237&&(o=159),s=2,t=u-224;else if(Ze(u,240,244))u===240&&(i=144),u===244&&(o=143),s=3,t=u-240;else return Di(e);return t=t<<6*s,null}if(!Ze(u,i,o))return t=s=n=0,i=128,o=191,a.prepend(u),Di(e);if(i=128,o=191,n+=1,t+=u-128<<6*(s-n),n!==s)return null;var g=t;return t=s=n=0,g}}function ff(r){r.fatal,this.handler=function(e,t){if(t===Or)return jn;if(Ze(t,0,127))return t;var n,s;Ze(t,128,2047)?(n=1,s=192):Ze(t,2048,65535)?(n=2,s=224):Ze(t,65536,1114111)&&(n=3,s=240);for(var i=[(t>>6*n)+s];n>0;){var o=t>>6*(n-1);i.push(128|o&63),n-=1}return i}}const hf=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Dr,TextEncoder:qr},Symbol.toStringTag,{value:"Module"})),df=Zs(hf);var Wo;function pf(){if(Wo)return It;Wo=1;var r=It&&It.__createBinding||(Object.create?function(O,D,q,W){W===void 0&&(W=q),Object.defineProperty(O,W,{enumerable:!0,get:function(){return D[q]}})}:function(O,D,q,W){W===void 0&&(W=q),O[W]=D[q]}),e=It&&It.__setModuleDefault||(Object.create?function(O,D){Object.defineProperty(O,"default",{enumerable:!0,value:D})}:function(O,D){O.default=D}),t=It&&It.__decorate||function(O,D,q,W){var x=arguments.length,c=x<3?D:W===null?W=Object.getOwnPropertyDescriptor(D,q):W,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(O,D,q,W);else for(var y=O.length-1;y>=0;y--)(d=O[y])&&(c=(x<3?d(c):x>3?d(D,q,c):d(D,q))||c);return x>3&&c&&Object.defineProperty(D,q,c),c},n=It&&It.__importStar||function(O){if(O&&O.__esModule)return O;var D={};if(O!=null)for(var q in O)q!=="default"&&Object.hasOwnProperty.call(O,q)&&r(D,O,q);return e(D,O),D},s=It&&It.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(It,"__esModule",{value:!0}),It.deserializeUnchecked=It.deserialize=It.serialize=It.BinaryReader=It.BinaryWriter=It.BorshError=It.baseDecode=It.baseEncode=void 0;const i=s(Rc()),o=s(Mc()),a=n(df),u=typeof TextDecoder!="function"?a.TextDecoder:TextDecoder,g=new u("utf-8",{fatal:!0});function m(O){return typeof O=="string"&&(O=Buffer.from(O,"utf8")),o.default.encode(Buffer.from(O))}It.baseEncode=m;function b(O){return Buffer.from(o.default.decode(O))}It.baseDecode=b;const k=1024;class _ extends Error{constructor(D){super(D),this.fieldPath=[],this.originalMessage=D}addToFieldPath(D){this.fieldPath.splice(0,0,D),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}It.BorshError=_;class R{constructor(){this.buf=Buffer.alloc(k),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(k)]))}writeU8(D){this.maybeResize(),this.buf.writeUInt8(D,this.length),this.length+=1}writeU16(D){this.maybeResize(),this.buf.writeUInt16LE(D,this.length),this.length+=2}writeU32(D){this.maybeResize(),this.buf.writeUInt32LE(D,this.length),this.length+=4}writeU64(D){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(D).toArray("le",8)))}writeU128(D){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(D).toArray("le",16)))}writeU256(D){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(D).toArray("le",32)))}writeU512(D){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(D).toArray("le",64)))}writeBuffer(D){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),D,Buffer.alloc(k)]),this.length+=D.length}writeString(D){this.maybeResize();const q=Buffer.from(D,"utf8");this.writeU32(q.length),this.writeBuffer(q)}writeFixedArray(D){this.writeBuffer(Buffer.from(D))}writeArray(D,q){this.maybeResize(),this.writeU32(D.length);for(const W of D)this.maybeResize(),q(W)}toArray(){return this.buf.subarray(0,this.length)}}It.BinaryWriter=R;function I(O,D,q){const W=q.value;q.value=function(...x){try{return W.apply(this,x)}catch(c){if(c instanceof RangeError){const d=c.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(d)>=0)throw new _("Reached the end of buffer when deserializing")}throw c}}}class E{constructor(D){this.buf=D,this.offset=0}readU8(){const D=this.buf.readUInt8(this.offset);return this.offset+=1,D}readU16(){const D=this.buf.readUInt16LE(this.offset);return this.offset+=2,D}readU32(){const D=this.buf.readUInt32LE(this.offset);return this.offset+=4,D}readU64(){const D=this.readBuffer(8);return new i.default(D,"le")}readU128(){const D=this.readBuffer(16);return new i.default(D,"le")}readU256(){const D=this.readBuffer(32);return new i.default(D,"le")}readU512(){const D=this.readBuffer(64);return new i.default(D,"le")}readBuffer(D){if(this.offset+D>this.buf.length)throw new _(`Expected buffer length ${D} isn't within bounds`);const q=this.buf.slice(this.offset,this.offset+D);return this.offset+=D,q}readString(){const D=this.readU32(),q=this.readBuffer(D);try{return g.decode(q)}catch(W){throw new _(`Error decoding UTF-8 string: ${W}`)}}readFixedArray(D){return new Uint8Array(this.readBuffer(D))}readArray(D){const q=this.readU32(),W=Array();for(let x=0;x<q;++x)W.push(D());return W}}t([I],E.prototype,"readU8",null),t([I],E.prototype,"readU16",null),t([I],E.prototype,"readU32",null),t([I],E.prototype,"readU64",null),t([I],E.prototype,"readU128",null),t([I],E.prototype,"readU256",null),t([I],E.prototype,"readU512",null),t([I],E.prototype,"readString",null),t([I],E.prototype,"readFixedArray",null),t([I],E.prototype,"readArray",null),It.BinaryReader=E;function N(O){return O.charAt(0).toUpperCase()+O.slice(1)}function P(O,D,q,W,x){try{if(typeof W=="string")x[`write${N(W)}`](q);else if(W instanceof Array)if(typeof W[0]=="number"){if(q.length!==W[0])throw new _(`Expecting byte array of length ${W[0]}, but got ${q.length} bytes`);x.writeFixedArray(q)}else if(W.length===2&&typeof W[1]=="number"){if(q.length!==W[1])throw new _(`Expecting byte array of length ${W[1]}, but got ${q.length} bytes`);for(let c=0;c<W[1];c++)P(O,null,q[c],W[0],x)}else x.writeArray(q,c=>{P(O,D,c,W[0],x)});else if(W.kind!==void 0)switch(W.kind){case"option":{q==null?x.writeU8(0):(x.writeU8(1),P(O,D,q,W.type,x));break}case"map":{x.writeU32(q.size),q.forEach((c,d)=>{P(O,D,d,W.key,x),P(O,D,c,W.value,x)});break}default:throw new _(`FieldType ${W} unrecognized`)}else M(O,q,x)}catch(c){throw c instanceof _&&c.addToFieldPath(D),c}}function M(O,D,q){if(typeof D.borshSerialize=="function"){D.borshSerialize(q);return}const W=O.get(D.constructor);if(!W)throw new _(`Class ${D.constructor.name} is missing in schema`);if(W.kind==="struct")W.fields.map(([x,c])=>{P(O,x,D[x],c,q)});else if(W.kind==="enum"){const x=D[W.field];for(let c=0;c<W.values.length;++c){const[d,y]=W.values[c];if(d===x){q.writeU8(c),P(O,d,D[d],y,q);break}}}else throw new _(`Unexpected schema kind: ${W.kind} for ${D.constructor.name}`)}function H(O,D,q=R){const W=new q;return M(O,D,W),W.toArray()}It.serialize=H;function j(O,D,q,W){try{if(typeof q=="string")return W[`read${N(q)}`]();if(q instanceof Array){if(typeof q[0]=="number")return W.readFixedArray(q[0]);if(typeof q[1]=="number"){const x=[];for(let c=0;c<q[1];c++)x.push(j(O,null,q[0],W));return x}else return W.readArray(()=>j(O,D,q[0],W))}if(q.kind==="option")return W.readU8()?j(O,D,q.type,W):void 0;if(q.kind==="map"){let x=new Map;const c=W.readU32();for(let d=0;d<c;d++){const y=j(O,D,q.key,W),w=j(O,D,q.value,W);x.set(y,w)}return x}return $(O,q,W)}catch(x){throw x instanceof _&&x.addToFieldPath(D),x}}function $(O,D,q){if(typeof D.borshDeserialize=="function")return D.borshDeserialize(q);const W=O.get(D);if(!W)throw new _(`Class ${D.name} is missing in schema`);if(W.kind==="struct"){const x={};for(const[c,d]of O.get(D).fields)x[c]=j(O,c,d,q);return new D(x)}if(W.kind==="enum"){const x=q.readU8();if(x>=W.values.length)throw new _(`Enum index: ${x} is out of range`);const[c,d]=W.values[x],y=j(O,c,d,q);return new D({[c]:y})}throw new _(`Unexpected schema kind: ${W.kind} for ${D.constructor.name}`)}function J(O,D,q,W=E){const x=new W(q),c=$(O,D,x);if(x.offset<q.length)throw new _(`Unexpected ${q.length-x.offset} bytes after deserialized data`);return c}It.deserialize=J;function Y(O,D,q,W=E){const x=new W(q);return $(O,D,x)}return It.deserializeUnchecked=Y,It}var qi=pf(),Z={},Ko;function gf(){if(Ko)return Z;Ko=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.s16=Z.s8=Z.nu64be=Z.u48be=Z.u40be=Z.u32be=Z.u24be=Z.u16be=Z.nu64=Z.u48=Z.u40=Z.u32=Z.u24=Z.u16=Z.u8=Z.offset=Z.greedy=Z.Constant=Z.UTF8=Z.CString=Z.Blob=Z.Boolean=Z.BitField=Z.BitStructure=Z.VariantLayout=Z.Union=Z.UnionLayoutDiscriminator=Z.UnionDiscriminator=Z.Structure=Z.Sequence=Z.DoubleBE=Z.Double=Z.FloatBE=Z.Float=Z.NearInt64BE=Z.NearInt64=Z.NearUInt64BE=Z.NearUInt64=Z.IntBE=Z.Int=Z.UIntBE=Z.UInt=Z.OffsetLayout=Z.GreedyCount=Z.ExternalLayout=Z.bindConstructorLayout=Z.nameWithProperty=Z.Layout=Z.uint8ArrayToBuffer=Z.checkUint8Array=void 0,Z.constant=Z.utf8=Z.cstr=Z.blob=Z.unionLayoutDiscriminator=Z.union=Z.seq=Z.bits=Z.struct=Z.f64be=Z.f64=Z.f32be=Z.f32=Z.ns64be=Z.s48be=Z.s40be=Z.s32be=Z.s24be=Z.s16be=Z.ns64=Z.s48=Z.s40=Z.s32=Z.s24=void 0;const r=Ys();function e(l){if(!(l instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Z.checkUint8Array=e;function t(l){return e(l),r.Buffer.from(l.buffer,l.byteOffset,l.length)}Z.uint8ArrayToBuffer=t;let n=class{constructor(f,S){if(!Number.isInteger(f))throw new TypeError("span must be an integer");this.span=f,this.property=S}makeDestinationObject(){return{}}getSpan(f,S){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(f){const S=Object.create(this.constructor.prototype);return Object.assign(S,this),S.property=f,S}fromArray(f){}};Z.Layout=n;function s(l,f){return f.property?l+"["+f.property+"]":l}Z.nameWithProperty=s;function i(l,f){if(typeof l!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(l,"layout_"))throw new Error("Class is already bound to a layout");if(!(f&&f instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(f,"boundConstructor_"))throw new Error("layout is already bound to a constructor");l.layout_=f,f.boundConstructor_=l,f.makeDestinationObject=()=>new l,Object.defineProperty(l.prototype,"encode",{value(S,T){return f.encode(this,S,T)},writable:!0}),Object.defineProperty(l,"decode",{value(S,T){return f.decode(S,T)},writable:!0})}Z.bindConstructorLayout=i;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}Z.ExternalLayout=o;class a extends o{constructor(f=1,S){if(!Number.isInteger(f)||0>=f)throw new TypeError("elementSpan must be a (positive) integer");super(-1,S),this.elementSpan=f}isCount(){return!0}decode(f,S=0){e(f);const T=f.length-S;return Math.floor(T/this.elementSpan)}encode(f,S,T){return 0}}Z.GreedyCount=a;class u extends o{constructor(f,S=0,T){if(!(f instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(S))throw new TypeError("offset must be integer or undefined");super(f.span,T||f.property),this.layout=f,this.offset=S}isCount(){return this.layout instanceof g||this.layout instanceof m}decode(f,S=0){return this.layout.decode(f,S+this.offset)}encode(f,S,T=0){return this.layout.encode(f,S,T+this.offset)}}Z.OffsetLayout=u;class g extends n{constructor(f,S){if(super(f,S),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,S=0){return t(f).readUIntLE(S,this.span)}encode(f,S,T=0){return t(S).writeUIntLE(f,T,this.span),this.span}}Z.UInt=g;class m extends n{constructor(f,S){if(super(f,S),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,S=0){return t(f).readUIntBE(S,this.span)}encode(f,S,T=0){return t(S).writeUIntBE(f,T,this.span),this.span}}Z.UIntBE=m;class b extends n{constructor(f,S){if(super(f,S),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,S=0){return t(f).readIntLE(S,this.span)}encode(f,S,T=0){return t(S).writeIntLE(f,T,this.span),this.span}}Z.Int=b;class k extends n{constructor(f,S){if(super(f,S),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(f,S=0){return t(f).readIntBE(S,this.span)}encode(f,S,T=0){return t(S).writeIntBE(f,T,this.span),this.span}}Z.IntBE=k;const _=Math.pow(2,32);function R(l){const f=Math.floor(l/_),S=l-f*_;return{hi32:f,lo32:S}}function I(l,f){return l*_+f}class E extends n{constructor(f){super(8,f)}decode(f,S=0){const T=t(f),K=T.readUInt32LE(S),X=T.readUInt32LE(S+4);return I(X,K)}encode(f,S,T=0){const K=R(f),X=t(S);return X.writeUInt32LE(K.lo32,T),X.writeUInt32LE(K.hi32,T+4),8}}Z.NearUInt64=E;class N extends n{constructor(f){super(8,f)}decode(f,S=0){const T=t(f),K=T.readUInt32BE(S),X=T.readUInt32BE(S+4);return I(K,X)}encode(f,S,T=0){const K=R(f),X=t(S);return X.writeUInt32BE(K.hi32,T),X.writeUInt32BE(K.lo32,T+4),8}}Z.NearUInt64BE=N;class P extends n{constructor(f){super(8,f)}decode(f,S=0){const T=t(f),K=T.readUInt32LE(S),X=T.readInt32LE(S+4);return I(X,K)}encode(f,S,T=0){const K=R(f),X=t(S);return X.writeUInt32LE(K.lo32,T),X.writeInt32LE(K.hi32,T+4),8}}Z.NearInt64=P;class M extends n{constructor(f){super(8,f)}decode(f,S=0){const T=t(f),K=T.readInt32BE(S),X=T.readUInt32BE(S+4);return I(K,X)}encode(f,S,T=0){const K=R(f),X=t(S);return X.writeInt32BE(K.hi32,T),X.writeUInt32BE(K.lo32,T+4),8}}Z.NearInt64BE=M;class H extends n{constructor(f){super(4,f)}decode(f,S=0){return t(f).readFloatLE(S)}encode(f,S,T=0){return t(S).writeFloatLE(f,T),4}}Z.Float=H;class j extends n{constructor(f){super(4,f)}decode(f,S=0){return t(f).readFloatBE(S)}encode(f,S,T=0){return t(S).writeFloatBE(f,T),4}}Z.FloatBE=j;class $ extends n{constructor(f){super(8,f)}decode(f,S=0){return t(f).readDoubleLE(S)}encode(f,S,T=0){return t(S).writeDoubleLE(f,T),8}}Z.Double=$;class J extends n{constructor(f){super(8,f)}decode(f,S=0){return t(f).readDoubleBE(S)}encode(f,S,T=0){return t(S).writeDoubleBE(f,T),8}}Z.DoubleBE=J;class Y extends n{constructor(f,S,T){if(!(f instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(S instanceof o&&S.isCount()||Number.isInteger(S)&&0<=S))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let K=-1;!(S instanceof o)&&0<f.span&&(K=S*f.span),super(K,T),this.elementLayout=f,this.count=S}getSpan(f,S=0){if(0<=this.span)return this.span;let T=0,K=this.count;if(K instanceof o&&(K=K.decode(f,S)),0<this.elementLayout.span)T=K*this.elementLayout.span;else{let X=0;for(;X<K;)T+=this.elementLayout.getSpan(f,S+T),++X}return T}decode(f,S=0){const T=[];let K=0,X=this.count;for(X instanceof o&&(X=X.decode(f,S));K<X;)T.push(this.elementLayout.decode(f,S)),S+=this.elementLayout.getSpan(f,S),K+=1;return T}encode(f,S,T=0){const K=this.elementLayout,X=f.reduce((et,ct)=>et+K.encode(ct,S,T+et),0);return this.count instanceof o&&this.count.encode(f.length,S,T),X}}Z.Sequence=Y;class O extends n{constructor(f,S,T){if(!(Array.isArray(f)&&f.reduce((X,et)=>X&&et instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof S=="boolean"&&T===void 0&&(T=S,S=void 0);for(const X of f)if(0>X.span&&X.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let K=-1;try{K=f.reduce((X,et)=>X+et.getSpan(),0)}catch{}super(K,S),this.fields=f,this.decodePrefixes=!!T}getSpan(f,S=0){if(0<=this.span)return this.span;let T=0;try{T=this.fields.reduce((K,X)=>{const et=X.getSpan(f,S);return S+=et,K+et},0)}catch{throw new RangeError("indeterminate span")}return T}decode(f,S=0){e(f);const T=this.makeDestinationObject();for(const K of this.fields)if(K.property!==void 0&&(T[K.property]=K.decode(f,S)),S+=K.getSpan(f,S),this.decodePrefixes&&f.length===S)break;return T}encode(f,S,T=0){const K=T;let X=0,et=0;for(const ct of this.fields){let _t=ct.span;if(et=0<_t?_t:0,ct.property!==void 0){const yt=f[ct.property];yt!==void 0&&(et=ct.encode(yt,S,T),0>_t&&(_t=ct.getSpan(S,T)))}X=T,T+=_t}return X+et-K}fromArray(f){const S=this.makeDestinationObject();for(const T of this.fields)T.property!==void 0&&0<f.length&&(S[T.property]=f.shift());return S}layoutFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const S of this.fields)if(S.property===f)return S}offsetOf(f){if(typeof f!="string")throw new TypeError("property must be string");let S=0;for(const T of this.fields){if(T.property===f)return S;0>T.span?S=-1:0<=S&&(S+=T.span)}}}Z.Structure=O;class D{constructor(f){this.property=f}decode(f,S){throw new Error("UnionDiscriminator is abstract")}encode(f,S,T){throw new Error("UnionDiscriminator is abstract")}}Z.UnionDiscriminator=D;class q extends D{constructor(f,S){if(!(f instanceof o&&f.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(S||f.property||"variant"),this.layout=f}decode(f,S){return this.layout.decode(f,S)}encode(f,S,T){return this.layout.encode(f,S,T)}}Z.UnionLayoutDiscriminator=q;class W extends n{constructor(f,S,T){let K;if(f instanceof g||f instanceof m)K=new q(new u(f));else if(f instanceof o&&f.isCount())K=new q(f);else if(f instanceof D)K=f;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(S===void 0&&(S=null),!(S===null||S instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(S!==null){if(0>S.span)throw new Error("defaultLayout must have constant span");S.property===void 0&&(S=S.replicate("content"))}let X=-1;S&&(X=S.span,0<=X&&(f instanceof g||f instanceof m)&&(X+=K.layout.span)),super(X,T),this.discriminator=K,this.usesPrefixDiscriminator=f instanceof g||f instanceof m,this.defaultLayout=S,this.registry={};let et=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ct){return et(ct)},this.configGetSourceVariant=function(ct){et=ct.bind(this)}}getSpan(f,S=0){if(0<=this.span)return this.span;const T=this.getVariant(f,S);if(!T)throw new Error("unable to determine span for unrecognized variant");return T.getSpan(f,S)}defaultGetSourceVariant(f){if(Object.prototype.hasOwnProperty.call(f,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(f,this.defaultLayout.property))return;const S=this.registry[f[this.discriminator.property]];if(S&&(!S.layout||S.property&&Object.prototype.hasOwnProperty.call(f,S.property)))return S}else for(const S in this.registry){const T=this.registry[S];if(T.property&&Object.prototype.hasOwnProperty.call(f,T.property))return T}throw new Error("unable to infer src variant")}decode(f,S=0){let T;const K=this.discriminator,X=K.decode(f,S),et=this.registry[X];if(et===void 0){const ct=this.defaultLayout;let _t=0;this.usesPrefixDiscriminator&&(_t=K.layout.span),T=this.makeDestinationObject(),T[K.property]=X,T[ct.property]=ct.decode(f,S+_t)}else T=et.decode(f,S);return T}encode(f,S,T=0){const K=this.getSourceVariant(f);if(K===void 0){const X=this.discriminator,et=this.defaultLayout;let ct=0;return this.usesPrefixDiscriminator&&(ct=X.layout.span),X.encode(f[X.property],S,T),ct+et.encode(f[et.property],S,T+ct)}return K.encode(f,S,T)}addVariant(f,S,T){const K=new x(this,f,S,T);return this.registry[f]=K,K}getVariant(f,S=0){let T;return f instanceof Uint8Array?T=this.discriminator.decode(f,S):T=f,this.registry[T]}}Z.Union=W;class x extends n{constructor(f,S,T,K){if(!(f instanceof W))throw new TypeError("union must be a Union");if(!Number.isInteger(S)||0>S)throw new TypeError("variant must be a (non-negative) integer");if(typeof T=="string"&&K===void 0&&(K=T,T=null),T){if(!(T instanceof n))throw new TypeError("layout must be a Layout");if(f.defaultLayout!==null&&0<=T.span&&T.span>f.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof K!="string")throw new TypeError("variant must have a String property")}let X=f.span;0>f.span&&(X=T?T.span:0,0<=X&&f.usesPrefixDiscriminator&&(X+=f.discriminator.layout.span)),super(X,K),this.union=f,this.variant=S,this.layout=T||null}getSpan(f,S=0){if(0<=this.span)return this.span;let T=0;this.union.usesPrefixDiscriminator&&(T=this.union.discriminator.layout.span);let K=0;return this.layout&&(K=this.layout.getSpan(f,S+T)),T+K}decode(f,S=0){const T=this.makeDestinationObject();if(this!==this.union.getVariant(f,S))throw new Error("variant mismatch");let K=0;return this.union.usesPrefixDiscriminator&&(K=this.union.discriminator.layout.span),this.layout?T[this.property]=this.layout.decode(f,S+K):this.property?T[this.property]=!0:this.union.usesPrefixDiscriminator&&(T[this.union.discriminator.property]=this.variant),T}encode(f,S,T=0){let K=0;if(this.union.usesPrefixDiscriminator&&(K=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(f,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,S,T);let X=K;if(this.layout&&(this.layout.encode(f[this.property],S,T+K),X+=this.layout.getSpan(S,T+K),0<=this.union.span&&X>this.union.span))throw new Error("encoded variant overruns containing union");return X}fromArray(f){if(this.layout)return this.layout.fromArray(f)}}Z.VariantLayout=x;function c(l){return 0>l&&(l+=4294967296),l}class d extends n{constructor(f,S,T){if(!(f instanceof g||f instanceof m))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof S=="string"&&T===void 0&&(T=S,S=!1),4<f.span)throw new RangeError("word cannot exceed 32 bits");super(f.span,T),this.word=f,this.msb=!!S,this.fields=[];let K=0;this._packedSetValue=function(X){return K=c(X),this},this._packedGetValue=function(){return K}}decode(f,S=0){const T=this.makeDestinationObject(),K=this.word.decode(f,S);this._packedSetValue(K);for(const X of this.fields)X.property!==void 0&&(T[X.property]=X.decode(f));return T}encode(f,S,T=0){const K=this.word.decode(S,T);this._packedSetValue(K);for(const X of this.fields)if(X.property!==void 0){const et=f[X.property];et!==void 0&&X.encode(et)}return this.word.encode(this._packedGetValue(),S,T)}addField(f,S){const T=new y(this,f,S);return this.fields.push(T),T}addBoolean(f){const S=new w(this,f);return this.fields.push(S),S}fieldFor(f){if(typeof f!="string")throw new TypeError("property must be string");for(const S of this.fields)if(S.property===f)return S}}Z.BitStructure=d;class y{constructor(f,S,T){if(!(f instanceof d))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(S)||0>=S)throw new TypeError("bits must be positive integer");const K=8*f.span,X=f.fields.reduce((et,ct)=>et+ct.bits,0);if(S+X>K)throw new Error("bits too long for span remainder ("+(K-X)+" of "+K+" remain)");this.container=f,this.bits=S,this.valueMask=(1<<S)-1,S===32&&(this.valueMask=4294967295),this.start=X,this.container.msb&&(this.start=K-X-S),this.wordMask=c(this.valueMask<<this.start),this.property=T}decode(f,S){const T=this.container._packedGetValue();return c(T&this.wordMask)>>>this.start}encode(f){if(typeof f!="number"||!Number.isInteger(f)||f!==c(f&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const S=this.container._packedGetValue(),T=c(f<<this.start);this.container._packedSetValue(c(S&~this.wordMask)|T)}}Z.BitField=y;class w extends y{constructor(f,S){super(f,1,S)}decode(f,S){return!!super.decode(f,S)}encode(f){typeof f=="boolean"&&(f=+f),super.encode(f)}}Z.Boolean=w;class A extends n{constructor(f,S){if(!(f instanceof o&&f.isCount()||Number.isInteger(f)&&0<=f))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let T=-1;f instanceof o||(T=f),super(T,S),this.length=f}getSpan(f,S){let T=this.span;return 0>T&&(T=this.length.decode(f,S)),T}decode(f,S=0){let T=this.span;return 0>T&&(T=this.length.decode(f,S)),t(f).slice(S,S+T)}encode(f,S,T){let K=this.length;if(this.length instanceof o&&(K=f.length),!(f instanceof Uint8Array&&K===f.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+K+") Uint8Array as src");if(T+K>S.length)throw new RangeError("encoding overruns Uint8Array");const X=t(f);return t(S).write(X.toString("hex"),T,K,"hex"),this.length instanceof o&&this.length.encode(K,S,T),K}}Z.Blob=A;class L extends n{constructor(f){super(-1,f)}getSpan(f,S=0){e(f);let T=S;for(;T<f.length&&f[T]!==0;)T+=1;return 1+T-S}decode(f,S=0){const T=this.getSpan(f,S);return t(f).slice(S,S+T-1).toString("utf-8")}encode(f,S,T=0){typeof f!="string"&&(f=String(f));const K=r.Buffer.from(f,"utf8"),X=K.length;if(T+X>S.length)throw new RangeError("encoding overruns Buffer");const et=t(S);return K.copy(et,T),et[T+X]=0,X+1}}Z.CString=L;class F extends n{constructor(f,S){if(typeof f=="string"&&S===void 0&&(S=f,f=void 0),f===void 0)f=-1;else if(!Number.isInteger(f))throw new TypeError("maxSpan must be an integer");super(-1,S),this.maxSpan=f}getSpan(f,S=0){return e(f),f.length-S}decode(f,S=0){const T=this.getSpan(f,S);if(0<=this.maxSpan&&this.maxSpan<T)throw new RangeError("text length exceeds maxSpan");return t(f).slice(S,S+T).toString("utf-8")}encode(f,S,T=0){typeof f!="string"&&(f=String(f));const K=r.Buffer.from(f,"utf8"),X=K.length;if(0<=this.maxSpan&&this.maxSpan<X)throw new RangeError("text length exceeds maxSpan");if(T+X>S.length)throw new RangeError("encoding overruns Buffer");return K.copy(t(S),T),X}}Z.UTF8=F;class B extends n{constructor(f,S){super(0,S),this.value=f}decode(f,S){return this.value}encode(f,S,T){return 0}}return Z.Constant=B,Z.greedy=(l,f)=>new a(l,f),Z.offset=(l,f,S)=>new u(l,f,S),Z.u8=l=>new g(1,l),Z.u16=l=>new g(2,l),Z.u24=l=>new g(3,l),Z.u32=l=>new g(4,l),Z.u40=l=>new g(5,l),Z.u48=l=>new g(6,l),Z.nu64=l=>new E(l),Z.u16be=l=>new m(2,l),Z.u24be=l=>new m(3,l),Z.u32be=l=>new m(4,l),Z.u40be=l=>new m(5,l),Z.u48be=l=>new m(6,l),Z.nu64be=l=>new N(l),Z.s8=l=>new b(1,l),Z.s16=l=>new b(2,l),Z.s24=l=>new b(3,l),Z.s32=l=>new b(4,l),Z.s40=l=>new b(5,l),Z.s48=l=>new b(6,l),Z.ns64=l=>new P(l),Z.s16be=l=>new k(2,l),Z.s24be=l=>new k(3,l),Z.s32be=l=>new k(4,l),Z.s40be=l=>new k(5,l),Z.s48be=l=>new k(6,l),Z.ns64be=l=>new M(l),Z.f32=l=>new H(l),Z.f32be=l=>new j(l),Z.f64=l=>new $(l),Z.f64be=l=>new J(l),Z.struct=(l,f,S)=>new O(l,f,S),Z.bits=(l,f,S)=>new d(l,f,S),Z.seq=(l,f,S)=>new Y(l,f,S),Z.union=(l,f,S)=>new W(l,f,S),Z.unionLayoutDiscriminator=(l,f)=>new q(l,f),Z.blob=(l,f)=>new A(l,f),Z.cstr=l=>new L(l),Z.utf8=(l,f)=>new F(l,f),Z.constant=(l,f)=>new B(l,f),Z}var U=gf(),hn={},Ho;function mf(){if(Ho)return hn;Ho=1,Object.defineProperty(hn,"__esModule",{value:!0});function r(s){{const i=Buffer.from(s);i.reverse();const o=i.toString("hex");return o.length===0?BigInt(0):BigInt(`0x${o}`)}}hn.toBigIntLE=r;function e(s){{const i=s.toString("hex");return i.length===0?BigInt(0):BigInt(`0x${i}`)}}hn.toBigIntBE=e;function t(s,i){{const o=s.toString(16),a=Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex");return a.reverse(),a}}hn.toBufferLE=t;function n(s,i){{const o=s.toString(16);return Buffer.from(o.padStart(i*2,"0").slice(0,i*2),"hex")}}return hn.toBufferBE=n,hn}var $o=mf();class yf extends TypeError{constructor(e,t){let n;const{message:s,explanation:i,...o}=e,{path:a}=e,u=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??u),i!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function wf(r){return yr(r)&&typeof r[Symbol.iterator]=="function"}function yr(r){return typeof r=="object"&&r!=null}function zr(r){return yr(r)&&!Array.isArray(r)}function ze(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function bf(r){const{done:e,value:t}=r.next();return e?void 0:t}function vf(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=e,{type:o}=t,{refinement:a,message:u=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${ze(n)}\``}=r;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...r,message:u}}function*jo(r,e,t,n){wf(r)||(r=[r]);for(const s of r){const i=vf(s,e,t,n);i&&(yield i)}}function*ro(r,e,t={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=t,a={path:n,branch:s,mask:o};i&&(r=e.coercer(r,a));let u="valid";for(const g of e.validator(r,a))g.explanation=t.message,u="not_valid",yield[g,void 0];for(let[g,m,b]of e.entries(r,a)){const k=ro(m,b,{path:g===void 0?n:[...n,g],branch:g===void 0?s:[...s,m],coerce:i,mask:o,message:t.message});for(const _ of k)_[0]?(u=_[0].refinement!=null?"not_refined":"not_valid",yield[_[0],void 0]):i&&(m=_[1],g===void 0?r=m:r instanceof Map?r.set(g,m):r instanceof Set?r.add(m):yr(r)&&(m!==void 0||g in r)&&(r[g]=m))}if(u!=="not_valid")for(const g of e.refiner(r,a))g.explanation=t.message,u="not_refined",yield[g,void 0];u==="valid"&&(yield[void 0,r])}let je=class{constructor(e){const{type:t,schema:n,validator:s,refiner:i,coercer:o=u=>u,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(u,g)=>{const m=s(u,g);return jo(m,g,this,u)}:this.validator=()=>[],i?this.refiner=(u,g)=>{const m=i(u,g);return jo(m,g,this,u)}:this.refiner=()=>[]}assert(e,t){return Ef(e,this,t)}create(e,t){return it(e,this,t)}is(e){return Cc(e,this)}mask(e,t){return Sf(e,this,t)}validate(e,t={}){return wr(e,this,t)}};function Ef(r,e,t){const n=wr(r,e,{message:t});if(n[0])throw n[0]}function it(r,e,t){const n=wr(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function Sf(r,e,t){const n=wr(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function Cc(r,e){return!wr(r,e)[0]}function wr(r,e,t={}){const n=ro(r,e,t),s=bf(n);return s[0]?[new yf(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Bn(r,e){return new je({type:r,schema:null,validator:e})}function xf(){return Bn("any",()=>!0)}function ot(r){return new je({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${ze(e)}`}})}function $e(){return Bn("boolean",r=>typeof r=="boolean")}function io(r){return Bn("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${ze(e)}`)}function zt(r){const e=ze(r),t=typeof r;return new je({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${ze(n)}`}})}function _f(){return Bn("never",()=>!1)}function at(r){return new je({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function G(){return Bn("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${ze(r)}`)}function ft(r){return new je({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function Tc(r,e){return new je({type:"record",schema:null,*entries(t){if(yr(t))for(const n in t){const s=t[n];yield[n,n,r],yield[n,s,e]}},validator(t){return zr(t)||`Expected an object, but received: ${ze(t)}`},coercer(t){return zr(t)?{...t}:t}})}function rt(){return Bn("string",r=>typeof r=="string"||`Expected a string, but received: ${ze(r)}`)}function so(r){const e=_f();return new je({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(r.length,t.length);for(let s=0;s<n;s++)yield[s,t[s],r[s]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${ze(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function tt(r){const e=Object.keys(r);return new je({type:"type",schema:r,*entries(t){if(yr(t))for(const n of e)yield[n,t[n],r[n]]},validator(t){return zr(t)||`Expected an object, but received: ${ze(t)}`},coercer(t){return zr(t)?{...t}:t}})}function Be(r){const e=r.map(t=>t.type).join(" | ");return new je({type:"union",schema:null,coercer(t,n){for(const s of r){const[i,o]=s.validate(t,{coerce:!0,mask:n.mask});if(!i)return o}return t},validator(t,n){const s=[];for(const i of r){const[...o]=ro(t,i,n),[a]=o;if(a[0])for(const[u]of o)u&&s.push(u);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${ze(t)}`,...s]}})}function Zn(){return Bn("unknown",()=>!0)}function br(r,e,t){return new je({...r,coercer:(n,s)=>Cc(n,e)?r.coercer(t(n,s),s):r.coercer(n,s)})}var Ar,Af=new Uint8Array(16);function Lc(){if(!Ar&&(Ar=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ar))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ar(Af)}const Bf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ti(r){return typeof r=="string"&&Bf.test(r)}var me=[];for(var zi=0;zi<256;++zi)me.push((zi+256).toString(16).substr(1));function ei(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(me[r[e+0]]+me[r[e+1]]+me[r[e+2]]+me[r[e+3]]+"-"+me[r[e+4]]+me[r[e+5]]+"-"+me[r[e+6]]+me[r[e+7]]+"-"+me[r[e+8]]+me[r[e+9]]+"-"+me[r[e+10]]+me[r[e+11]]+me[r[e+12]]+me[r[e+13]]+me[r[e+14]]+me[r[e+15]]).toLowerCase();if(!ti(t))throw TypeError("Stringified UUID is invalid");return t}var Vo,Wi,Ki=0,Hi=0;function If(r,e,t){var n=e&&t||0,s=e||new Array(16);r=r||{};var i=r.node||Vo,o=r.clockseq!==void 0?r.clockseq:Wi;if(i==null||o==null){var a=r.random||(r.rng||Lc)();i==null&&(i=Vo=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Wi=(a[6]<<8|a[7])&16383)}var u=r.msecs!==void 0?r.msecs:Date.now(),g=r.nsecs!==void 0?r.nsecs:Hi+1,m=u-Ki+(g-Hi)/1e4;if(m<0&&r.clockseq===void 0&&(o=o+1&16383),(m<0||u>Ki)&&r.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ki=u,Hi=g,Wi=o,u+=122192928e5;var b=((u&268435455)*1e4+g)%4294967296;s[n++]=b>>>24&255,s[n++]=b>>>16&255,s[n++]=b>>>8&255,s[n++]=b&255;var k=u/4294967296*1e4&268435455;s[n++]=k>>>8&255,s[n++]=k&255,s[n++]=k>>>24&15|16,s[n++]=k>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var _=0;_<6;++_)s[n+_]=i[_];return e||ei(s)}function Nc(r){if(!ti(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function kf(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var Rf="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Mf="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Pc(r,e,t){function n(s,i,o,a){if(typeof s=="string"&&(s=kf(s)),typeof i=="string"&&(i=Nc(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=t(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(var g=0;g<16;++g)o[a+g]=u[g];return o}return ei(u)}try{n.name=r}catch{}return n.DNS=Rf,n.URL=Mf,n}function Cf(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return Tf(Lf(Nf(r),r.length*8))}function Tf(r){for(var e=[],t=r.length*32,n="0123456789abcdef",s=0;s<t;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);e.push(o)}return e}function Uc(r){return(r+64>>>9<<4)+14+1}function Lf(r,e){r[e>>5]|=128<<e%32,r[Uc(e)-1]=e;for(var t=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var a=t,u=n,g=s,m=i;t=Ee(t,n,s,i,r[o],7,-680876936),i=Ee(i,t,n,s,r[o+1],12,-389564586),s=Ee(s,i,t,n,r[o+2],17,606105819),n=Ee(n,s,i,t,r[o+3],22,-1044525330),t=Ee(t,n,s,i,r[o+4],7,-176418897),i=Ee(i,t,n,s,r[o+5],12,1200080426),s=Ee(s,i,t,n,r[o+6],17,-1473231341),n=Ee(n,s,i,t,r[o+7],22,-45705983),t=Ee(t,n,s,i,r[o+8],7,1770035416),i=Ee(i,t,n,s,r[o+9],12,-1958414417),s=Ee(s,i,t,n,r[o+10],17,-42063),n=Ee(n,s,i,t,r[o+11],22,-1990404162),t=Ee(t,n,s,i,r[o+12],7,1804603682),i=Ee(i,t,n,s,r[o+13],12,-40341101),s=Ee(s,i,t,n,r[o+14],17,-1502002290),n=Ee(n,s,i,t,r[o+15],22,1236535329),t=Se(t,n,s,i,r[o+1],5,-165796510),i=Se(i,t,n,s,r[o+6],9,-1069501632),s=Se(s,i,t,n,r[o+11],14,643717713),n=Se(n,s,i,t,r[o],20,-373897302),t=Se(t,n,s,i,r[o+5],5,-701558691),i=Se(i,t,n,s,r[o+10],9,38016083),s=Se(s,i,t,n,r[o+15],14,-660478335),n=Se(n,s,i,t,r[o+4],20,-405537848),t=Se(t,n,s,i,r[o+9],5,568446438),i=Se(i,t,n,s,r[o+14],9,-1019803690),s=Se(s,i,t,n,r[o+3],14,-187363961),n=Se(n,s,i,t,r[o+8],20,1163531501),t=Se(t,n,s,i,r[o+13],5,-1444681467),i=Se(i,t,n,s,r[o+2],9,-51403784),s=Se(s,i,t,n,r[o+7],14,1735328473),n=Se(n,s,i,t,r[o+12],20,-1926607734),t=xe(t,n,s,i,r[o+5],4,-378558),i=xe(i,t,n,s,r[o+8],11,-2022574463),s=xe(s,i,t,n,r[o+11],16,1839030562),n=xe(n,s,i,t,r[o+14],23,-35309556),t=xe(t,n,s,i,r[o+1],4,-1530992060),i=xe(i,t,n,s,r[o+4],11,1272893353),s=xe(s,i,t,n,r[o+7],16,-155497632),n=xe(n,s,i,t,r[o+10],23,-1094730640),t=xe(t,n,s,i,r[o+13],4,681279174),i=xe(i,t,n,s,r[o],11,-358537222),s=xe(s,i,t,n,r[o+3],16,-722521979),n=xe(n,s,i,t,r[o+6],23,76029189),t=xe(t,n,s,i,r[o+9],4,-640364487),i=xe(i,t,n,s,r[o+12],11,-421815835),s=xe(s,i,t,n,r[o+15],16,530742520),n=xe(n,s,i,t,r[o+2],23,-995338651),t=_e(t,n,s,i,r[o],6,-198630844),i=_e(i,t,n,s,r[o+7],10,1126891415),s=_e(s,i,t,n,r[o+14],15,-1416354905),n=_e(n,s,i,t,r[o+5],21,-57434055),t=_e(t,n,s,i,r[o+12],6,1700485571),i=_e(i,t,n,s,r[o+3],10,-1894986606),s=_e(s,i,t,n,r[o+10],15,-1051523),n=_e(n,s,i,t,r[o+1],21,-2054922799),t=_e(t,n,s,i,r[o+8],6,1873313359),i=_e(i,t,n,s,r[o+15],10,-30611744),s=_e(s,i,t,n,r[o+6],15,-1560198380),n=_e(n,s,i,t,r[o+13],21,1309151649),t=_e(t,n,s,i,r[o+4],6,-145523070),i=_e(i,t,n,s,r[o+11],10,-1120210379),s=_e(s,i,t,n,r[o+2],15,718787259),n=_e(n,s,i,t,r[o+9],21,-343485551),t=ln(t,a),n=ln(n,u),s=ln(s,g),i=ln(i,m)}return[t,n,s,i]}function Nf(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(Uc(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function ln(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function Pf(r,e){return r<<e|r>>>32-e}function ni(r,e,t,n,s,i){return ln(Pf(ln(ln(e,r),ln(n,i)),s),t)}function Ee(r,e,t,n,s,i,o){return ni(e&t|~e&n,r,e,s,i,o)}function Se(r,e,t,n,s,i,o){return ni(e&n|t&~n,r,e,s,i,o)}function xe(r,e,t,n,s,i,o){return ni(e^t^n,r,e,s,i,o)}function _e(r,e,t,n,s,i,o){return ni(t^(e|~n),r,e,s,i,o)}var Uf=Pc("v3",48,Cf);function Of(r,e,t){r=r||{};var n=r.random||(r.rng||Lc)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=n[s];return e}return ei(n)}function Ff(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function $i(r,e){return r<<e|r>>>32-e}function Df(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),a=new Array(o),u=0;u<o;++u){for(var g=new Uint32Array(16),m=0;m<16;++m)g[m]=r[u*64+m*4]<<24|r[u*64+m*4+1]<<16|r[u*64+m*4+2]<<8|r[u*64+m*4+3];a[u]=g}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var b=0;b<o;++b){for(var k=new Uint32Array(80),_=0;_<16;++_)k[_]=a[b][_];for(var R=16;R<80;++R)k[R]=$i(k[R-3]^k[R-8]^k[R-14]^k[R-16],1);for(var I=t[0],E=t[1],N=t[2],P=t[3],M=t[4],H=0;H<80;++H){var j=Math.floor(H/20),$=$i(I,5)+Ff(j,E,N,P)+M+e[j]+k[H]>>>0;M=P,P=N,N=$i(E,30)>>>0,E=I,I=$}t[0]=t[0]+I>>>0,t[1]=t[1]+E>>>0,t[2]=t[2]+N>>>0,t[3]=t[3]+P>>>0,t[4]=t[4]+M>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var qf=Pc("v5",80,Df);const zf="00000000-0000-0000-0000-000000000000";function Wf(r){if(!ti(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const Kf=Object.freeze(Object.defineProperty({__proto__:null,NIL:zf,parse:Nc,stringify:ei,v1:If,v3:Uf,v4:Of,v5:qf,validate:ti,version:Wf},Symbol.toStringTag,{value:"Module"})),Oc=Zs(Kf);var ji,Go;function Hf(){if(Go)return ji;Go=1;const r=Oc.v4;return ji=function(t,n,s,i){if(typeof t!="string")throw new TypeError(t+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const a={method:t};if(o===2&&(a.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");a.params=n}if(typeof s>"u"){const u=typeof i.generator=="function"?i.generator:function(){return r()};a.id=u(a,i)}else o===2&&s===null?i.notificationIdNull&&(a.id=null):a.id=s;return a},ji}var Vi,Zo;function $f(){if(Zo)return Vi;Zo=1;const r=Oc.v4,e=Hf(),t=function(n,s){if(!(this instanceof t))return new t(n,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return r()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=n};return Vi=t,t.prototype.request=function(n,s,i,o){const a=this;let u=null;const g=Array.isArray(n)&&typeof s=="function";if(this.options.version===1&&g)throw new TypeError("JSON-RPC 1.0 does not support batching");if(g||!g&&n&&typeof n=="object"&&typeof s=="function")o=s,u=n;else{typeof i=="function"&&(o=i,i=void 0);const k=typeof o=="function";try{u=e(n,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(_){if(k)return o(_);throw _}if(!k)return u}let b;try{b=JSON.stringify(u,this.options.replacer)}catch(k){return o(k)}return this.callServer(b,function(k,_){a._parseResponse(k,_,o)}),u},t.prototype._parseResponse=function(n,s,i){if(n){i(n);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(a){return i(a)}if(i.length===3)if(Array.isArray(o)){const a=function(g){return typeof g.error<"u"},u=function(g){return!a(g)};return i(null,o.filter(a),o.filter(u))}else return i(null,o.error,o.result);i(null,o)},Vi}var jf=$f();const Vf=An(jf);var Gi={exports:{}},Yo;function Gf(){return Yo||(Yo=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(u,g,m){this.fn=u,this.context=g,this.once=m||!1}function i(u,g,m,b,k){if(typeof m!="function")throw new TypeError("The listener must be a function");var _=new s(m,b||u,k),R=t?t+g:g;return u._events[R]?u._events[R].fn?u._events[R]=[u._events[R],_]:u._events[R].push(_):(u._events[R]=_,u._eventsCount++),u}function o(u,g){--u._eventsCount===0?u._events=new n:delete u._events[g]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var g=[],m,b;if(this._eventsCount===0)return g;for(b in m=this._events)e.call(m,b)&&g.push(t?b.slice(1):b);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(m)):g},a.prototype.listeners=function(g){var m=t?t+g:g,b=this._events[m];if(!b)return[];if(b.fn)return[b.fn];for(var k=0,_=b.length,R=new Array(_);k<_;k++)R[k]=b[k].fn;return R},a.prototype.listenerCount=function(g){var m=t?t+g:g,b=this._events[m];return b?b.fn?1:b.length:0},a.prototype.emit=function(g,m,b,k,_,R){var I=t?t+g:g;if(!this._events[I])return!1;var E=this._events[I],N=arguments.length,P,M;if(E.fn){switch(E.once&&this.removeListener(g,E.fn,void 0,!0),N){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,m),!0;case 3:return E.fn.call(E.context,m,b),!0;case 4:return E.fn.call(E.context,m,b,k),!0;case 5:return E.fn.call(E.context,m,b,k,_),!0;case 6:return E.fn.call(E.context,m,b,k,_,R),!0}for(M=1,P=new Array(N-1);M<N;M++)P[M-1]=arguments[M];E.fn.apply(E.context,P)}else{var H=E.length,j;for(M=0;M<H;M++)switch(E[M].once&&this.removeListener(g,E[M].fn,void 0,!0),N){case 1:E[M].fn.call(E[M].context);break;case 2:E[M].fn.call(E[M].context,m);break;case 3:E[M].fn.call(E[M].context,m,b);break;case 4:E[M].fn.call(E[M].context,m,b,k);break;default:if(!P)for(j=1,P=new Array(N-1);j<N;j++)P[j-1]=arguments[j];E[M].fn.apply(E[M].context,P)}}return!0},a.prototype.on=function(g,m,b){return i(this,g,m,b,!1)},a.prototype.once=function(g,m,b){return i(this,g,m,b,!0)},a.prototype.removeListener=function(g,m,b,k){var _=t?t+g:g;if(!this._events[_])return this;if(!m)return o(this,_),this;var R=this._events[_];if(R.fn)R.fn===m&&(!k||R.once)&&(!b||R.context===b)&&o(this,_);else{for(var I=0,E=[],N=R.length;I<N;I++)(R[I].fn!==m||k&&!R[I].once||b&&R[I].context!==b)&&E.push(R[I]);E.length?this._events[_]=E.length===1?E[0]:E:o(this,_)}return this},a.prototype.removeAllListeners=function(g){var m;return g?(m=t?t+g:g,this._events[m]&&o(this,m)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a}(Gi)),Gi.exports}var Zf=Gf();const Fc=An(Zf);var Yf=class extends Fc{socket;constructor(r,e,t){super(),this.socket=new window.WebSocket(r,t),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(r,e,t){const n=t||e;try{this.socket.send(r),n()}catch(s){n(s)}}close(r,e){this.socket.close(r,e)}addEventListener(r,e,t){this.socket.addEventListener(r,e,t)}};function Jf(r,e){return new Yf(r,e)}var Xf=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},Qf=class extends Fc{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(r,e="ws://localhost:8080",{autoconnect:t=!0,reconnect:n=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},a,u){super(),this.webSocketFactory=r,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),u?this.dataPack=u:this.dataPack=new Xf,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(r,e,t,n){return!n&&typeof t=="object"&&(n=t,t=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(r,e),a={jsonrpc:"2.0",method:r,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(a),n,u=>{if(u)return i(u);this.queue[o]={promise:[s,i]},t&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},t))})})}async login(r){const e=await this.call("rpc.login",r);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(r,e){return new Promise((t,n)=>{if(!this.ready)return n(new Error("socket not ready"));const s={jsonrpc:"2.0",method:r,params:e};this.socket.send(this.dataPack.encode(s),i=>{if(i)return n(i);t()})})}async subscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.on",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed subscribing to an event '"+r+"' with: "+e[r]);return e}async unsubscribe(r){typeof r=="string"&&(r=[r]);const e=await this.call("rpc.off",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(r,e){this.socket.close(r||1e3,e)}setAutoReconnect(r){this.reconnect=r}setReconnectInterval(r){this.reconnect_interval=r}setMaxReconnects(r){this.max_reconnects=r}_connect(r,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(r,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=mt.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const n=[t.notification];if(t.params.constructor===Object)n.push(t.params);else for(let s=0;s<t.params.length;s++)n.push(t.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",t,n),0),this.ready=!1,this.socket=void 0,t!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(r,e),this.reconnect_interval)))})}};class Dc extends gc{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Du(e);const n=Js(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Ur(this),this.iHash.update(e),this}digestInto(e){Ur(this),Gr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const qc=(r,e,t)=>new Dc(r,e).update(t).digest();qc.create=(r,e)=>new Dc(r,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Jo(r){r.lowS!==void 0&&Xe("lowS",r.lowS),r.prehash!==void 0&&Xe("prehash",r.prehash)}function th(r){const e=to(r);Gn(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:s}=e;if(t){if(!n.eql(s,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:eh,hexToBytes:nh}=Bl;class rh extends Error{constructor(e=""){super(e)}}const Ge={Err:rh,_tlv:{encode:(r,e)=>{const{Err:t}=Ge;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,s=On(n);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const i=n>127?On(s.length/2|128):"";return On(r)+i+s+e},decode(r,e){const{Err:t}=Ge;let n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const u=s&127;if(!u)throw new t("tlv.decode(long): indefinite length not supported");if(u>4)throw new t("tlv.decode(long): byte length is too big");const g=e.subarray(n,n+u);if(g.length!==u)throw new t("tlv.decode: length bytes not complete");if(g[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const m of g)o=o<<8|m;if(n+=u,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(r){const{Err:e}=Ge;if(r<Ye)throw new e("integer: negative integers are not allowed");let t=On(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){const{Err:e}=Ge;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return eh(r)}},toSig(r){const{Err:e,_int:t,_tlv:n}=Ge,s=typeof r=="string"?nh(r):r;gr(s);const{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:u}=n.decode(2,i),{v:g,l:m}=n.decode(2,u);if(m.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(g)}},hexFromSig(r){const{_tlv:e,_int:t}=Ge,n=e.encode(2,t.encode(r.r)),s=e.encode(2,t.encode(r.s)),i=n+s;return e.encode(48,i)}},Ye=BigInt(0),de=BigInt(1);BigInt(2);const Xo=BigInt(3);BigInt(4);function ih(r){const e=th(r),{Fp:t}=e,n=Xr(e.n,e.nBitLength),s=e.toBytes||((I,E,N)=>{const P=E.toAffine();return _n(Uint8Array.from([4]),t.toBytes(P.x),t.toBytes(P.y))}),i=e.fromBytes||(I=>{const E=I.subarray(1),N=t.fromBytes(E.subarray(0,t.BYTES)),P=t.fromBytes(E.subarray(t.BYTES,2*t.BYTES));return{x:N,y:P}});function o(I){const{a:E,b:N}=e,P=t.sqr(I),M=t.mul(P,I);return t.add(t.add(M,t.mul(I,E)),N)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(I){return Jr(I,de,e.n)}function u(I){const{allowedPrivateKeyLengths:E,nByteLength:N,wrapPrivateKey:P,n:M}=e;if(E&&typeof I!="bigint"){if(Sn(I)&&(I=xn(I)),typeof I!="string"||!E.includes(I.length))throw new Error("invalid private key");I=I.padStart(N*2,"0")}let H;try{H=typeof I=="bigint"?I:En(fe("private key",I,N))}catch{throw new Error("invalid private key, expected hex or "+N+" bytes, got "+typeof I)}return P&&(H=qt(H,M)),Ue("private key",H,de,M),H}function g(I){if(!(I instanceof k))throw new Error("ProjectivePoint expected")}const m=lr((I,E)=>{const{px:N,py:P,pz:M}=I;if(t.eql(M,t.ONE))return{x:N,y:P};const H=I.is0();E==null&&(E=H?t.ONE:t.inv(M));const j=t.mul(N,E),$=t.mul(P,E),J=t.mul(M,E);if(H)return{x:t.ZERO,y:t.ZERO};if(!t.eql(J,t.ONE))throw new Error("invZ was invalid");return{x:j,y:$}}),b=lr(I=>{if(I.is0()){if(e.allowInfinityPoint&&!t.is0(I.py))return;throw new Error("bad point: ZERO")}const{x:E,y:N}=I.toAffine();if(!t.isValid(E)||!t.isValid(N))throw new Error("bad point: x or y not FE");const P=t.sqr(N),M=o(E);if(!t.eql(P,M))throw new Error("bad point: equation left != right");if(!I.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class k{constructor(E,N,P){if(this.px=E,this.py=N,this.pz=P,E==null||!t.isValid(E))throw new Error("x required");if(N==null||!t.isValid(N))throw new Error("y required");if(P==null||!t.isValid(P))throw new Error("z required");Object.freeze(this)}static fromAffine(E){const{x:N,y:P}=E||{};if(!E||!t.isValid(N)||!t.isValid(P))throw new Error("invalid affine point");if(E instanceof k)throw new Error("projective point not allowed");const M=H=>t.eql(H,t.ZERO);return M(N)&&M(P)?k.ZERO:new k(N,P,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){const N=t.invertBatch(E.map(P=>P.pz));return E.map((P,M)=>P.toAffine(N[M])).map(k.fromAffine)}static fromHex(E){const N=k.fromAffine(i(fe("pointHex",E)));return N.assertValidity(),N}static fromPrivateKey(E){return k.BASE.multiply(u(E))}static msm(E,N){return kc(k,n,E,N)}_setWindowSize(E){R.setWindowSize(this,E)}assertValidity(){b(this)}hasEvenY(){const{y:E}=this.toAffine();if(t.isOdd)return!t.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){g(E);const{px:N,py:P,pz:M}=this,{px:H,py:j,pz:$}=E,J=t.eql(t.mul(N,$),t.mul(H,M)),Y=t.eql(t.mul(P,$),t.mul(j,M));return J&&Y}negate(){return new k(this.px,t.neg(this.py),this.pz)}double(){const{a:E,b:N}=e,P=t.mul(N,Xo),{px:M,py:H,pz:j}=this;let $=t.ZERO,J=t.ZERO,Y=t.ZERO,O=t.mul(M,M),D=t.mul(H,H),q=t.mul(j,j),W=t.mul(M,H);return W=t.add(W,W),Y=t.mul(M,j),Y=t.add(Y,Y),$=t.mul(E,Y),J=t.mul(P,q),J=t.add($,J),$=t.sub(D,J),J=t.add(D,J),J=t.mul($,J),$=t.mul(W,$),Y=t.mul(P,Y),q=t.mul(E,q),W=t.sub(O,q),W=t.mul(E,W),W=t.add(W,Y),Y=t.add(O,O),O=t.add(Y,O),O=t.add(O,q),O=t.mul(O,W),J=t.add(J,O),q=t.mul(H,j),q=t.add(q,q),O=t.mul(q,W),$=t.sub($,O),Y=t.mul(q,D),Y=t.add(Y,Y),Y=t.add(Y,Y),new k($,J,Y)}add(E){g(E);const{px:N,py:P,pz:M}=this,{px:H,py:j,pz:$}=E;let J=t.ZERO,Y=t.ZERO,O=t.ZERO;const D=e.a,q=t.mul(e.b,Xo);let W=t.mul(N,H),x=t.mul(P,j),c=t.mul(M,$),d=t.add(N,P),y=t.add(H,j);d=t.mul(d,y),y=t.add(W,x),d=t.sub(d,y),y=t.add(N,M);let w=t.add(H,$);return y=t.mul(y,w),w=t.add(W,c),y=t.sub(y,w),w=t.add(P,M),J=t.add(j,$),w=t.mul(w,J),J=t.add(x,c),w=t.sub(w,J),O=t.mul(D,y),J=t.mul(q,c),O=t.add(J,O),J=t.sub(x,O),O=t.add(x,O),Y=t.mul(J,O),x=t.add(W,W),x=t.add(x,W),c=t.mul(D,c),y=t.mul(q,y),x=t.add(x,c),c=t.sub(W,c),c=t.mul(D,c),y=t.add(y,c),W=t.mul(x,y),Y=t.add(Y,W),W=t.mul(w,y),J=t.mul(d,J),J=t.sub(J,W),W=t.mul(d,x),O=t.mul(w,O),O=t.add(O,W),new k(J,Y,O)}subtract(E){return this.add(E.negate())}is0(){return this.equals(k.ZERO)}wNAF(E){return R.wNAFCached(this,E,k.normalizeZ)}multiplyUnsafe(E){const{endo:N,n:P}=e;Ue("scalar",E,Ye,P);const M=k.ZERO;if(E===Ye)return M;if(this.is0()||E===de)return this;if(!N||R.hasPrecomputes(this))return R.wNAFCachedUnsafe(this,E,k.normalizeZ);let{k1neg:H,k1:j,k2neg:$,k2:J}=N.splitScalar(E),Y=M,O=M,D=this;for(;j>Ye||J>Ye;)j&de&&(Y=Y.add(D)),J&de&&(O=O.add(D)),D=D.double(),j>>=de,J>>=de;return H&&(Y=Y.negate()),$&&(O=O.negate()),O=new k(t.mul(O.px,N.beta),O.py,O.pz),Y.add(O)}multiply(E){const{endo:N,n:P}=e;Ue("scalar",E,de,P);let M,H;if(N){const{k1neg:j,k1:$,k2neg:J,k2:Y}=N.splitScalar(E);let{p:O,f:D}=this.wNAF($),{p:q,f:W}=this.wNAF(Y);O=R.constTimeNegate(j,O),q=R.constTimeNegate(J,q),q=new k(t.mul(q.px,N.beta),q.py,q.pz),M=O.add(q),H=D.add(W)}else{const{p:j,f:$}=this.wNAF(E);M=j,H=$}return k.normalizeZ([M,H])[0]}multiplyAndAddUnsafe(E,N,P){const M=k.BASE,H=($,J)=>J===Ye||J===de||!$.equals(M)?$.multiplyUnsafe(J):$.multiply(J),j=H(this,N).add(H(E,P));return j.is0()?void 0:j}toAffine(E){return m(this,E)}isTorsionFree(){const{h:E,isTorsionFree:N}=e;if(E===de)return!0;if(N)return N(k,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:E,clearCofactor:N}=e;return E===de?this:N?N(k,this):this.multiplyUnsafe(e.h)}toRawBytes(E=!0){return Xe("isCompressed",E),this.assertValidity(),s(k,this,E)}toHex(E=!0){return Xe("isCompressed",E),xn(this.toRawBytes(E))}}k.BASE=new k(e.Gx,e.Gy,t.ONE),k.ZERO=new k(t.ZERO,t.ONE,t.ZERO);const _=e.nBitLength,R=Ic(k,e.endo?Math.ceil(_/2):_);return{CURVE:e,ProjectivePoint:k,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:a}}function sh(r){const e=to(r);return Gn(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function oh(r){const e=sh(r),{Fp:t,n}=e,s=t.BYTES+1,i=2*t.BYTES+1;function o(c){return qt(c,n)}function a(c){return Us(c,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:g,weierstrassEquation:m,isWithinCurveOrder:b}=ih({...e,toBytes(c,d,y){const w=d.toAffine(),A=t.toBytes(w.x),L=_n;return Xe("isCompressed",y),y?L(Uint8Array.from([d.hasEvenY()?2:3]),A):L(Uint8Array.from([4]),A,t.toBytes(w.y))},fromBytes(c){const d=c.length,y=c[0],w=c.subarray(1);if(d===s&&(y===2||y===3)){const A=En(w);if(!Jr(A,de,t.ORDER))throw new Error("Point is not on curve");const L=m(A);let F;try{F=t.sqrt(L)}catch(f){const S=f instanceof Error?": "+f.message:"";throw new Error("Point is not on curve"+S)}const B=(F&de)===de;return(y&1)===1!==B&&(F=t.neg(F)),{x:A,y:F}}else if(d===i&&y===4){const A=t.fromBytes(w.subarray(0,t.BYTES)),L=t.fromBytes(w.subarray(t.BYTES,2*t.BYTES));return{x:A,y:L}}else{const A=s,L=i;throw new Error("invalid Point, expected length of "+A+", or uncompressed "+L+", got "+d)}}}),k=c=>xn($n(c,e.nByteLength));function _(c){const d=n>>de;return c>d}function R(c){return _(c)?o(-c):c}const I=(c,d,y)=>En(c.slice(d,y));class E{constructor(d,y,w){this.r=d,this.s=y,this.recovery=w,this.assertValidity()}static fromCompact(d){const y=e.nByteLength;return d=fe("compactSignature",d,y*2),new E(I(d,0,y),I(d,y,2*y))}static fromDER(d){const{r:y,s:w}=Ge.toSig(fe("DER",d));return new E(y,w)}assertValidity(){Ue("r",this.r,de,n),Ue("s",this.s,de,n)}addRecoveryBit(d){return new E(this.r,this.s,d)}recoverPublicKey(d){const{r:y,s:w,recovery:A}=this,L=$(fe("msgHash",d));if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");const F=A===2||A===3?y+e.n:y;if(F>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const B=(A&1)===0?"02":"03",l=u.fromHex(B+k(F)),f=a(F),S=o(-L*f),T=o(w*f),K=u.BASE.multiplyAndAddUnsafe(l,S,T);if(!K)throw new Error("point at infinify");return K.assertValidity(),K}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Hn(this.toDERHex())}toDERHex(){return Ge.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Hn(this.toCompactHex())}toCompactHex(){return k(this.r)+k(this.s)}}const N={isValidPrivateKey(c){try{return g(c),!0}catch{return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{const c=_c(e.n);return Ul(e.randomBytes(c),e.n)},precompute(c=8,d=u.BASE){return d._setWindowSize(c),d.multiply(BigInt(3)),d}};function P(c,d=!0){return u.fromPrivateKey(c).toRawBytes(d)}function M(c){const d=Sn(c),y=typeof c=="string",w=(d||y)&&c.length;return d?w===s||w===i:y?w===2*s||w===2*i:c instanceof u}function H(c,d,y=!0){if(M(c))throw new Error("first arg must be private key");if(!M(d))throw new Error("second arg must be public key");return u.fromHex(d).multiply(g(c)).toRawBytes(y)}const j=e.bits2int||function(c){if(c.length>8192)throw new Error("input is too large");const d=En(c),y=c.length*8-e.nBitLength;return y>0?d>>BigInt(y):d},$=e.bits2int_modN||function(c){return o(j(c))},J=Qs(e.nBitLength);function Y(c){return Ue("num < 2^"+e.nBitLength,c,Ye,J),$n(c,e.nByteLength)}function O(c,d,y=D){if(["recovered","canonical"].some(et=>et in y))throw new Error("sign() legacy options not supported");const{hash:w,randomBytes:A}=e;let{lowS:L,prehash:F,extraEntropy:B}=y;L==null&&(L=!0),c=fe("msgHash",c),Jo(y),F&&(c=fe("prehashed msgHash",w(c)));const l=$(c),f=g(d),S=[Y(f),Y(l)];if(B!=null&&B!==!1){const et=B===!0?A(t.BYTES):B;S.push(fe("extraEntropy",et))}const T=_n(...S),K=l;function X(et){const ct=j(et);if(!b(ct))return;const _t=a(ct),yt=u.BASE.multiply(ct).toAffine(),Et=o(yt.x);if(Et===Ye)return;const jt=o(_t*o(K+Et*f));if(jt===Ye)return;let xt=(yt.x===Et?0:2)|Number(yt.y&de),kt=jt;return L&&_(jt)&&(kt=R(jt),xt^=1),new E(Et,kt,xt)}return{seed:T,k2sig:X}}const D={lowS:e.lowS,prehash:!1},q={lowS:e.lowS,prehash:!1};function W(c,d,y=D){const{seed:w,k2sig:A}=O(c,d,y),L=e;return Ec(L.hash.outputLen,L.nByteLength,L.hmac)(w,A)}u.BASE._setWindowSize(8);function x(c,d,y,w=q){const A=c;d=fe("msgHash",d),y=fe("publicKey",y);const{lowS:L,prehash:F,format:B}=w;if(Jo(w),"strict"in w)throw new Error("options.strict was renamed to lowS");if(B!==void 0&&B!=="compact"&&B!=="der")throw new Error("format must be compact or der");const l=typeof A=="string"||Sn(A),f=!l&&!B&&typeof A=="object"&&A!==null&&typeof A.r=="bigint"&&typeof A.s=="bigint";if(!l&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let S,T;try{if(f&&(S=new E(A.r,A.s)),l){try{B!=="compact"&&(S=E.fromDER(A))}catch(xt){if(!(xt instanceof Ge.Err))throw xt}!S&&B!=="der"&&(S=E.fromCompact(A))}T=u.fromHex(y)}catch{return!1}if(!S||L&&S.hasHighS())return!1;F&&(d=e.hash(d));const{r:K,s:X}=S,et=$(d),ct=a(X),_t=o(et*ct),yt=o(K*ct),Et=u.BASE.multiplyAndAddUnsafe(T,_t,yt)?.toAffine();return Et?o(Et.x)===K:!1}return{CURVE:e,getPublicKey:P,getSharedSecret:H,sign:W,verify:x,ProjectivePoint:u,Signature:E,utils:N}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ah(r){return{hash:r,hmac:(e,...t)=>qc(r,e,Wu(...t)),randomBytes:yc}}function ch(r,e){const t=n=>oh({...r,...ah(n)});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Qo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),uh=BigInt(1),Fs=BigInt(2),ta=(r,e)=>(r+e/Fs)/e;function lh(r){const e=zc,t=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),g=r*r*r%e,m=g*g*r%e,b=Ht(m,t,e)*m%e,k=Ht(b,t,e)*m%e,_=Ht(k,Fs,e)*g%e,R=Ht(_,s,e)*_%e,I=Ht(R,i,e)*R%e,E=Ht(I,a,e)*I%e,N=Ht(E,u,e)*E%e,P=Ht(N,a,e)*I%e,M=Ht(P,t,e)*m%e,H=Ht(M,o,e)*R%e,j=Ht(H,n,e)*g%e,$=Ht(j,Fs,e);if(!Ds.eql(Ds.sqr($),r))throw new Error("Cannot find square root");return $}const Ds=Xr(zc,void 0,void 0,{sqrt:lh}),fh=ch({a:BigInt(0),b:BigInt(7),Fp:Ds,n:Qo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=Qo,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-uh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=ta(i*r,e),u=ta(-n*r,e);let g=qt(r-a*t-u*s,e),m=qt(-a*n-u*i,e);const b=g>o,k=m>o;if(b&&(g=e-g),k&&(m=e-m),g>o||m>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:b,k1:g,k2neg:k,k2:m}}}},Os);BigInt(0);const ea=()=>{const r=mr.utils.randomPrivateKey(),e=qs(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},qs=mr.getPublicKey;function na(r){try{return mr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Wc=(r,e)=>mr.sign(r,e.slice(0,32)),hh=mr.verify,ye=r=>mt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?mt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):mt.Buffer.from(r);class dh{constructor(e){Object.assign(this,e)}encode(){return mt.Buffer.from(qi.serialize(Mr,this))}static decode(e){return qi.deserialize(Mr,this,e)}static decodeUnchecked(e){return qi.deserializeUnchecked(Mr,this,e)}}const Mr=new Map;var Kc;const ph=32,fn=32;function gh(r){return r._bn!==void 0}let ra=1;class ht extends dh{constructor(e){if(super({}),this._bn=void 0,gh(e))this._bn=e._bn;else{if(typeof e=="string"){const t=ve.decode(e);if(t.length!=fn)throw new Error("Invalid public key input");this._bn=new Fo(t)}else this._bn=new Fo(e);if(this._bn.byteLength()>fn)throw new Error("Invalid public key input")}}static unique(){const e=new ht(ra);return ra+=1,new ht(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return ve.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(mt.Buffer);if(e.length===fn)return e;const t=mt.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const s=mt.Buffer.concat([e.toBuffer(),mt.Buffer.from(t),n.toBuffer()]),i=Os(s);return new ht(i)}static createProgramAddressSync(e,t){let n=mt.Buffer.alloc(0);e.forEach(function(i){if(i.length>ph)throw new TypeError("Max seed length exceeded");n=mt.Buffer.concat([n,ye(i)])}),n=mt.Buffer.concat([n,t.toBuffer(),mt.Buffer.from("ProgramDerivedAddress")]);const s=Os(n);if(na(s))throw new Error("Invalid seeds, address must fall off the curve");return new ht(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,s;for(;n!=0;){try{const i=e.concat(mt.Buffer.from([n]));s=this.createProgramAddressSync(i,t)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new ht(e);return na(t.toBytes())}}Kc=ht;ht.default=new Kc("11111111111111111111111111111111");Mr.set(ht,{kind:"struct",fields:[["_bn","u256"]]});new ht("BPFLoader1111111111111111111111111111111111");const Wn=1232,oo=127,fr=64;class Hc extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Hc.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class $c extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty($c.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ir extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ir.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Wr{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const St=(r="publicKey")=>U.blob(32,r),mh=(r="signature")=>U.blob(64,r),Fn=(r="string")=>{const e=U.struct([U.u32("length"),U.u32("lengthPadding"),U.blob(U.offset(U.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(i,o)=>t(i,o).chars.toString(),s.encode=(i,o,a)=>{const u={chars:mt.Buffer.from(i,"utf8")};return n(u,o,a)},s.alloc=i=>U.u32().span+U.u32().span+mt.Buffer.from(i,"utf8").length,s},yh=(r="authorized")=>U.struct([St("staker"),St("withdrawer")],r),wh=(r="lockup")=>U.struct([U.ns64("unixTimestamp"),U.ns64("epoch"),St("custodian")],r),bh=(r="voteInit")=>U.struct([St("nodePubkey"),St("authorizedVoter"),St("authorizedWithdrawer"),U.u8("commission")],r),vh=(r="voteAuthorizeWithSeedArgs")=>U.struct([U.u32("voteAuthorizationType"),St("currentAuthorityDerivedKeyOwnerPubkey"),Fn("currentAuthorityDerivedKeySeed"),St("newAuthorized")],r);function jc(r,e){const t=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const i=e[s.property];if(Array.isArray(i))return i.length*t(s.elementLayout)}else if("fields"in s)return jc({layout:s},e[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=t(s)}),n}function Ce(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Te(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function Dt(r,e){if(!r)throw new Error(e||"Assertion failed")}class ri{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,s=o=>{const a=o.toBase58();let u=n.get(a);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,u)),u},i=s(t);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const u=s(a.pubkey);u.isSigner||=a.isSigner,u.isWritable||=a.isWritable}}return new ri(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Dt(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,u])=>u.isSigner&&u.isWritable),n=e.filter(([,u])=>u.isSigner&&!u.isWritable),s=e.filter(([,u])=>!u.isSigner&&u.isWritable),i=e.filter(([,u])=>!u.isSigner&&!u.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Dt(t.length>0,"Expected at least one writable signer key");const[u]=t[0];Dt(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([u])=>new ht(u)),...n.map(([u])=>new ht(u)),...s.map(([u])=>new ht(u)),...i.map(([u])=>new ht(u))];return[o,a]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,t){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(t(o)){const a=new ht(i),u=e.findIndex(g=>g.equals(a));u>=0&&(Dt(u<256,"Max lookup table index exceeded"),n.push(u),s.push(a),this.keyMetaMap.delete(i))}return[n,s]}}const Vc="Reached end of buffer unexpectedly";function Je(r){if(r.length===0)throw new Error(Vc);return r.shift()}function Le(r,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(Vc);return r.splice(...e)}class Qe{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ht(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ve.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Wr(this.staticAccountKeys)}static compile(e){const t=ri.compile(e.instructions,e.payerKey),[n,s]=t.getMessageComponents(),o=new Wr(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:ve.encode(a.data)}));return new Qe({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,i=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Te(t,e);const n=this.instructions.map(b=>{const{accounts:k,programIdIndex:_}=b,R=Array.from(ve.decode(b.data));let I=[];Te(I,k.length);let E=[];return Te(E,R.length),{programIdIndex:_,keyIndicesCount:mt.Buffer.from(I),keyIndices:k,dataLength:mt.Buffer.from(E),data:R}});let s=[];Te(s,n.length);let i=mt.Buffer.alloc(Wn);mt.Buffer.from(s).copy(i);let o=s.length;n.forEach(b=>{const _=U.struct([U.u8("programIdIndex"),U.blob(b.keyIndicesCount.length,"keyIndicesCount"),U.seq(U.u8("keyIndex"),b.keyIndices.length,"keyIndices"),U.blob(b.dataLength.length,"dataLength"),U.seq(U.u8("userdatum"),b.data.length,"data")]).encode(b,i,o);o+=_}),i=i.slice(0,o);const a=U.struct([U.blob(1,"numRequiredSignatures"),U.blob(1,"numReadonlySignedAccounts"),U.blob(1,"numReadonlyUnsignedAccounts"),U.blob(t.length,"keyCount"),U.seq(St("key"),e,"keys"),St("recentBlockhash")]),u={numRequiredSignatures:mt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:mt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:mt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:mt.Buffer.from(t),keys:this.accountKeys.map(b=>ye(b.toBytes())),recentBlockhash:ve.decode(this.recentBlockhash)};let g=mt.Buffer.alloc(2048);const m=a.encode(u,g);return i.copy(g,m),g.slice(0,m+i.length)}static from(e){let t=[...e];const n=Je(t);if(n!==(n&oo))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Je(t),i=Je(t),o=Ce(t);let a=[];for(let k=0;k<o;k++){const _=Le(t,0,fn);a.push(new ht(mt.Buffer.from(_)))}const u=Le(t,0,fn),g=Ce(t);let m=[];for(let k=0;k<g;k++){const _=Je(t),R=Ce(t),I=Le(t,0,R),E=Ce(t),N=Le(t,0,E),P=ve.encode(mt.Buffer.from(N));m.push({programIdIndex:_,accounts:I,data:P})}const b={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:ve.encode(mt.Buffer.from(u)),accountKeys:a,instructions:m};return new Qe(b)}}class hr{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Wr(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const s=e-n,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=e.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)t.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)t.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=ri.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const m of i){const b=t.extractTableLookup(m);if(b!==void 0){const[k,{writable:_,readonly:R}]=b;n.push(k),s.writable.push(..._),s.readonly.push(...R)}}const[o,a]=t.getMessageComponents(),g=new Wr(a,s).compileInstructions(e.instructions);return new hr({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:g,addressTableLookups:n})}serialize(){const e=Array();Te(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();Te(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Te(i,this.addressTableLookups.length);const o=U.struct([U.u8("prefix"),U.struct([U.u8("numRequiredSignatures"),U.u8("numReadonlySignedAccounts"),U.u8("numReadonlyUnsignedAccounts")],"header"),U.blob(e.length,"staticAccountKeysLength"),U.seq(St(),this.staticAccountKeys.length,"staticAccountKeys"),St("recentBlockhash"),U.blob(n.length,"instructionsLength"),U.blob(t.length,"serializedInstructions"),U.blob(i.length,"addressTableLookupsLength"),U.blob(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(Wn),g=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(m=>m.toBytes()),recentBlockhash:ve.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,g)}serializeInstructions(){let e=0;const t=new Uint8Array(Wn);for(const n of this.compiledInstructions){const s=Array();Te(s,n.accountKeyIndexes.length);const i=Array();Te(i,n.data.length);const o=U.struct([U.u8("programIdIndex"),U.blob(s.length,"encodedAccountKeyIndexesLength"),U.seq(U.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),U.blob(i.length,"encodedDataLength"),U.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Wn);for(const n of this.addressTableLookups){const s=Array();Te(s,n.writableIndexes.length);const i=Array();Te(i,n.readonlyIndexes.length);const o=U.struct([St("accountKey"),U.blob(s.length,"encodedWritableIndexesLength"),U.seq(U.u8(),n.writableIndexes.length,"writableIndexes"),U.blob(i.length,"encodedReadonlyIndexesLength"),U.seq(U.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=Je(t),s=n&oo;Dt(n!==s,"Expected versioned message but received legacy message");const i=s;Dt(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:Je(t),numReadonlySignedAccounts:Je(t),numReadonlyUnsignedAccounts:Je(t)},a=[],u=Ce(t);for(let R=0;R<u;R++)a.push(new ht(Le(t,0,fn)));const g=ve.encode(Le(t,0,fn)),m=Ce(t),b=[];for(let R=0;R<m;R++){const I=Je(t),E=Ce(t),N=Le(t,0,E),P=Ce(t),M=new Uint8Array(Le(t,0,P));b.push({programIdIndex:I,accountKeyIndexes:N,data:M})}const k=Ce(t),_=[];for(let R=0;R<k;R++){const I=new ht(Le(t,0,fn)),E=Ce(t),N=Le(t,0,E),P=Ce(t),M=Le(t,0,P);_.push({accountKey:I,writableIndexes:N,readonlyIndexes:M})}return new hr({header:o,staticAccountKeys:a,recentBlockhash:g,compiledInstructions:b,addressTableLookups:_})}}const ao={deserializeMessageVersion(r){const e=r[0],t=e&oo;return t===e?"legacy":t},deserialize:r=>{const e=ao.deserializeMessageVersion(r);if(e==="legacy")return Qe.from(r);if(e===0)return hr.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let an=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const Eh=mt.Buffer.alloc(fr).fill(0);class De{constructor(e){this.keys=void 0,this.programId=void 0,this.data=mt.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Oe{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new De(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let I=0;I<t.length;I++)if(t[I].programId===void 0)throw new Error(`Transaction instruction index ${I} has undefined program id`);const s=[],i=[];t.forEach(I=>{I.keys.forEach(N=>{i.push({...N})});const E=I.programId.toString();s.includes(E)||s.push(E)}),s.forEach(I=>{i.push({pubkey:new ht(I),isSigner:!1,isWritable:!1})});const o=[];i.forEach(I=>{const E=I.pubkey.toString(),N=o.findIndex(P=>P.pubkey.toString()===E);N>-1?(o[N].isWritable=o[N].isWritable||I.isWritable,o[N].isSigner=o[N].isSigner||I.isSigner):o.push(I)}),o.sort(function(I,E){if(I.isSigner!==E.isSigner)return I.isSigner?-1:1;if(I.isWritable!==E.isWritable)return I.isWritable?-1:1;const N={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return I.pubkey.toBase58().localeCompare(E.pubkey.toBase58(),"en",N)});const a=o.findIndex(I=>I.pubkey.equals(n));if(a>-1){const[I]=o.splice(a,1);I.isSigner=!0,I.isWritable=!0,o.unshift(I)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const I of this.signatures){const E=o.findIndex(N=>N.pubkey.equals(I.publicKey));if(E>-1)o[E].isSigner||(o[E].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${I.publicKey.toString()}`)}let u=0,g=0,m=0;const b=[],k=[];o.forEach(({pubkey:I,isSigner:E,isWritable:N})=>{E?(b.push(I.toString()),u+=1,N||(g+=1)):(k.push(I.toString()),N||(m+=1))});const _=b.concat(k),R=t.map(I=>{const{data:E,programId:N}=I;return{programIdIndex:_.indexOf(N.toString()),accounts:I.keys.map(P=>_.indexOf(P.pubkey.toString())),data:ve.encode(E)}});return R.forEach(I=>{Dt(I.programIdIndex>=0),I.accounts.forEach(E=>Dt(E>=0))}),new Qe({header:{numRequiredSignatures:u,numReadonlySignedAccounts:g,numReadonlyUnsignedAccounts:m},accountKeys:_,recentBlockhash:e,instructions:R})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,i)=>t[i].equals(s.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const s=n.toString();return t.has(s)?!1:(t.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const i of e){const o=i.publicKey.toString();t.has(o)||(t.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(s=>{const i=Wc(n,s.secretKey);this._addSignature(s.publicKey,ye(i))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Dt(t.length===64);const n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=mt.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?t&&(n.missing||=[]).push(i):hh(s,e,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,t);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:t}=this,n=[];Te(n,t.length);const s=n.length+t.length*64+e.length,i=mt.Buffer.alloc(s);return Dt(t.length<256),mt.Buffer.from(n).copy(i,0),t.forEach(({signature:o},a)=>{o!==null&&(Dt(o.length===64,"signature has invalid length"),mt.Buffer.from(o).copy(i,n.length+a*64))}),e.copy(i,n.length+t.length*64),Dt(i.length<=Wn,`Transaction too large: ${i.length} > ${Wn}`),i}get keys(){return Dt(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Dt(this.instructions.length===1),this.instructions[0].programId}get data(){return Dt(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=Ce(t);let s=[];for(let i=0;i<n;i++){const o=Le(t,0,fr);s.push(ve.encode(mt.Buffer.from(o)))}return Oe.populate(Qe.from(t),s)}static populate(e,t=[]){const n=new Oe;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((s,i)=>{const o={signature:s==ve.encode(Eh)?null:ve.decode(s),publicKey:e.accountKeys[i]};n.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(u=>u.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new De({keys:i,programId:e.accountKeys[s.programIdIndex],data:ve.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}}class dr{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Dt(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(fr));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Te(t,this.signatures.length);const n=U.struct([U.blob(t.length,"encodedSignaturesLength"),U.seq(mh(),this.signatures.length,"signatures"),U.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let t=[...e];const n=[],s=Ce(t);for(let o=0;o<s;o++)n.push(new Uint8Array(Le(t,0,fr)));const i=ao.deserialize(new Uint8Array(t));return new dr(i,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=n.findIndex(o=>o.equals(s.publicKey));Dt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Wc(t,s.secretKey)}}addSignature(e,t){Dt(t.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Dt(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=t}}const Sh=160,xh=64,_h=Sh/xh,Ah=1e3/_h;new ht("SysvarC1ock11111111111111111111111111111111");new ht("SysvarEpochSchedu1e111111111111111111111111");new ht("Sysvar1nstructions1111111111111111111111111");const Zi=new ht("SysvarRecentB1ockHashes11111111111111111111"),ia=new ht("SysvarRent111111111111111111111111111111111");new ht("SysvarRewards111111111111111111111111111111");new ht("SysvarS1otHashes111111111111111111111111111");new ht("SysvarS1otHistory11111111111111111111111111");new ht("SysvarStakeHistory1111111111111111111111111");class sa extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${n}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:a=`Unknown action '${(u=>u)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,t(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class lt extends Error{constructor({code:e,message:t,data:n},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}function Pn(r){return new Promise(e=>setTimeout(e,r))}function Ne(r,e){const t=r.layout.span>=0?r.layout.span:jc(r,e),n=mt.Buffer.alloc(t),s=Object.assign({instruction:r.index},e);return r.layout.encode(s,n),n}const Bh=U.nu64("lamportsPerSignature"),Gc=U.struct([U.u32("version"),U.u32("state"),St("authorizedPubkey"),St("nonce"),U.struct([Bh],"feeCalculator")]),oa=Gc.span;class co{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Gc.decode(ye(e),0);return new co({authorizedPubkey:new ht(t.authorizedPubkey),nonce:new ht(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const Ih=r=>{const e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}},kh=r=>e=>{const t=U.blob(r,e),{encode:n,decode:s}=Ih(t),i=t;return i.decode=(o,a)=>{const u=s(o,a);return $o.toBigIntLE(mt.Buffer.from(u))},i.encode=(o,a,u)=>{const g=$o.toBufferLE(o,r);return n(g,a,u)},i},Vn=kh(8),Pe=Object.freeze({Create:{index:0,layout:U.struct([U.u32("instruction"),U.ns64("lamports"),U.ns64("space"),St("programId")])},Assign:{index:1,layout:U.struct([U.u32("instruction"),St("programId")])},Transfer:{index:2,layout:U.struct([U.u32("instruction"),Vn("lamports")])},CreateWithSeed:{index:3,layout:U.struct([U.u32("instruction"),St("base"),Fn("seed"),U.ns64("lamports"),U.ns64("space"),St("programId")])},AdvanceNonceAccount:{index:4,layout:U.struct([U.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:U.struct([U.u32("instruction"),St("authorized")])},AuthorizeNonceAccount:{index:7,layout:U.struct([U.u32("instruction"),St("authorized")])},Allocate:{index:8,layout:U.struct([U.u32("instruction"),U.ns64("space")])},AllocateWithSeed:{index:9,layout:U.struct([U.u32("instruction"),St("base"),Fn("seed"),U.ns64("space"),St("programId")])},AssignWithSeed:{index:10,layout:U.struct([U.u32("instruction"),St("base"),Fn("seed"),St("programId")])},TransferWithSeed:{index:11,layout:U.struct([U.u32("instruction"),Vn("lamports"),Fn("seed"),St("programId")])},UpgradeNonceAccount:{index:12,layout:U.struct([U.u32("instruction")])}});class Kr{constructor(){}static createAccount(e){const t=Pe.Create,n=Ne(t,{lamports:e.lamports,space:e.space,programId:ye(e.programId.toBuffer())});return new De({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const s=Pe.TransferWithSeed;t=Ne(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:ye(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Pe.Transfer;t=Ne(s,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new De({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const s=Pe.AssignWithSeed;t=Ne(s,{base:ye(e.basePubkey.toBuffer()),seed:e.seed,programId:ye(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Pe.Assign;t=Ne(s,{programId:ye(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new De({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Pe.CreateWithSeed,n=Ne(t,{base:ye(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:ye(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new De({keys:s,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Oe;"basePubkey"in e&&"seed"in e?t.add(Kr.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:oa,programId:this.programId})):t.add(Kr.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:oa,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=Pe.InitializeNonceAccount,n=Ne(t,{authorized:ye(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Zi,isSigner:!1,isWritable:!1},{pubkey:ia,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new De(s)}static nonceAdvance(e){const t=Pe.AdvanceNonceAccount,n=Ne(t),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Zi,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new De(s)}static nonceWithdraw(e){const t=Pe.WithdrawNonceAccount,n=Ne(t,{lamports:e.lamports});return new De({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Zi,isSigner:!1,isWritable:!1},{pubkey:ia,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=Pe.AuthorizeNonceAccount,n=Ne(t,{authorized:ye(e.newAuthorizedPubkey.toBuffer())});return new De({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const s=Pe.AllocateWithSeed;t=Ne(s,{base:ye(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:ye(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Pe.Allocate;t=Ne(s,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new De({keys:n,programId:this.programId,data:t})}}Kr.programId=new ht("11111111111111111111111111111111");new ht("BPFLoader2111111111111111111111111111111111");function Rh(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Yi,aa;function Mh(){if(aa)return Yi;aa=1;var r=Object.prototype.toString,e=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function t(n,s){var i,o,a,u,g,m,b;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),s);if(b=r.call(n),b==="[object Array]"){for(a="[",o=n.length-1,i=0;i<o;i++)a+=t(n[i],!0)+",";return o>-1&&(a+=t(n[i],!0)),a+"]"}else if(b==="[object Object]"){for(u=e(n).sort(),o=u.length,a="",i=0;i<o;)g=u[i],m=t(n[g],!1),m!==void 0&&(a&&(a+=","),a+=JSON.stringify(g)+":"+m),i++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Yi=function(n){var s=t(n,!1);if(s!==void 0)return""+s},Yi}var Ch=Mh(),ca=Rh(Ch);const Qn=32;function Ji(r){let e=0;for(;r>1;)r/=2,e++;return e}function Th(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class Lh{constructor(e,t,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Ji(Th(e+Qn+1))-Ji(Qn)-1,n=this.getSlotsInEpoch(t),s=e-(n-Qn);return[t,s]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=t%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Qn:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Ji(Qn)):this.slotsPerEpoch}}var Nh=globalThis.fetch;class Ph extends Qf{constructor(e,t,n){const s=i=>{const o=Jf(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,t,n),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function Uh(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}const ua=56;class la{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=Uh(Oh,e),n=e.length-ua;Dt(n>=0,"lookup table is invalid"),Dt(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=U.struct([U.seq(St(),s,"addresses")]).decode(e.slice(ua));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new ht(t.authority[0]):void 0,addresses:i.map(o=>new ht(o))}}}const Oh={index:1,layout:U.struct([U.u32("typeIndex"),Vn("deactivationSlot"),U.nu64("lastExtendedSlot"),U.u8("lastExtendedStartIndex"),U.u8(),U.seq(St(),U.offset(U.u8(),-1),"authority")])},Fh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Dh(r){const e=r.match(Fh);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[t,n,s,i]=e,o=r.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),u=a==null?"":`:${a+1}`;return`${o}//${n}${u}${i}`}const Kt=br(io(ht),rt(),r=>new ht(r)),Zc=so([rt(),zt("base64")]),uo=br(io(mt.Buffer),Zc,r=>mt.Buffer.from(r[0],"base64")),qh=30*1e3;function zh(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Lt(r){let e,t;if(typeof r=="string")e=r;else if(r){const{commitment:n,...s}=r;e=n,t=s}return{commitment:e,config:t}}function fa(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Yc(r){return Be([tt({jsonrpc:zt("2.0"),id:rt(),result:r}),tt({jsonrpc:zt("2.0"),id:rt(),error:tt({code:Zn(),message:rt(),data:ft(xf())})})])}const Wh=Yc(Zn());function vt(r){return br(Yc(r),Wh,e=>"error"in e?e:{...e,result:it(e.result,r)})}function $t(r){return vt(tt({context:tt({slot:G()}),value:r}))}function ii(r){return tt({context:tt({slot:G()}),value:r})}function Xi(r,e){return r===0?new hr({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new ht(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ve.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Qe(e)}const Kh=tt({foundation:G(),foundationTerm:G(),initial:G(),taper:G(),terminal:G()}),Hh=vt(ot(at(tt({epoch:G(),effectiveSlot:G(),amount:G(),postBalance:G(),commission:ft(at(G()))})))),$h=ot(tt({slot:G(),prioritizationFee:G()})),jh=tt({total:G(),validator:G(),foundation:G(),epoch:G()}),Vh=tt({epoch:G(),slotIndex:G(),slotsInEpoch:G(),absoluteSlot:G(),blockHeight:ft(G()),transactionCount:ft(G())}),Gh=tt({slotsPerEpoch:G(),leaderScheduleSlotOffset:G(),warmup:$e(),firstNormalEpoch:G(),firstNormalSlot:G()}),Zh=Tc(rt(),ot(G())),In=at(Be([tt({}),rt()])),Yh=tt({err:In}),Jh=zt("receivedSignature"),Xh=tt({"solana-core":rt(),"feature-set":ft(G())}),Qh=tt({program:rt(),programId:Kt,parsed:Zn()}),td=tt({programId:Kt,accounts:ot(Kt),data:rt()}),ha=$t(tt({err:at(Be([tt({}),rt()])),logs:at(ot(rt())),accounts:ft(at(ot(at(tt({executable:$e(),owner:rt(),lamports:G(),data:ot(rt()),rentEpoch:ft(G())}))))),unitsConsumed:ft(G()),returnData:ft(at(tt({programId:rt(),data:so([rt(),zt("base64")])}))),innerInstructions:ft(at(ot(tt({index:G(),instructions:ot(Be([Qh,td]))}))))})),ed=$t(tt({byIdentity:Tc(rt(),ot(G())),range:tt({firstSlot:G(),lastSlot:G()})}));function nd(r,e,t,n,s,i){const o=t||Nh;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return n&&(u=async(m,b)=>{const k=await new Promise((_,R)=>{try{n(m,b,(I,E)=>_([I,E]))}catch(I){R(I)}});return await o(...k)}),new Vf(async(m,b)=>{const k={method:"POST",body:m,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},n0)};try{let _=5,R,I=500;for(;u?R=await u(r,k):R=await o(r,k),!(R.status!==429||s===!0||(_-=1,_===0));)console.error(`Server responded with ${R.status} ${R.statusText}.  Retrying after ${I}ms delay...`),await Pn(I),I*=2;const E=await R.text();R.ok?b(null,E):b(new Error(`${R.status} ${R.statusText}: ${E}`))}catch(_){_ instanceof Error&&b(_)}},{})}function rd(r){return(e,t)=>new Promise((n,s)=>{r.request(e,t,(i,o)=>{if(i){s(i);return}n(o)})})}function id(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);const s=e.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}t(o)})})}const sd=vt(Kh),od=vt(jh),ad=vt($h),cd=vt(Vh),ud=vt(Gh),ld=vt(Zh),fd=vt(G()),hd=$t(tt({total:G(),circulating:G(),nonCirculating:G(),nonCirculatingAccounts:ot(Kt)})),zs=tt({amount:rt(),uiAmount:at(G()),decimals:G(),uiAmountString:ft(rt())}),dd=$t(ot(tt({address:Kt,amount:rt(),uiAmount:at(G()),decimals:G(),uiAmountString:ft(rt())}))),pd=$t(ot(tt({pubkey:Kt,account:tt({executable:$e(),owner:Kt,lamports:G(),data:uo,rentEpoch:G()})}))),Ws=tt({program:rt(),parsed:Zn(),space:G()}),gd=$t(ot(tt({pubkey:Kt,account:tt({executable:$e(),owner:Kt,lamports:G(),data:Ws,rentEpoch:G()})}))),md=$t(ot(tt({lamports:G(),address:Kt}))),pr=tt({executable:$e(),owner:Kt,lamports:G(),data:uo,rentEpoch:G()}),yd=tt({pubkey:Kt,account:pr}),wd=br(Be([io(mt.Buffer),Ws]),Be([Zc,Ws]),r=>Array.isArray(r)?it(r,uo):r),Ks=tt({executable:$e(),owner:Kt,lamports:G(),data:wd,rentEpoch:G()}),bd=tt({pubkey:Kt,account:Ks}),vd=tt({state:Be([zt("active"),zt("inactive"),zt("activating"),zt("deactivating")]),active:G(),inactive:G()}),Ed=vt(ot(tt({signature:rt(),slot:G(),err:In,memo:at(rt()),blockTime:ft(at(G()))}))),Sd=vt(ot(tt({signature:rt(),slot:G(),err:In,memo:at(rt()),blockTime:ft(at(G()))}))),xd=tt({subscription:G(),result:ii(pr)}),_d=tt({pubkey:Kt,account:pr}),Ad=tt({subscription:G(),result:ii(_d)}),Bd=tt({parent:G(),slot:G(),root:G()}),Id=tt({subscription:G(),result:Bd}),kd=Be([tt({type:Be([zt("firstShredReceived"),zt("completed"),zt("optimisticConfirmation"),zt("root")]),slot:G(),timestamp:G()}),tt({type:zt("createdBank"),parent:G(),slot:G(),timestamp:G()}),tt({type:zt("frozen"),slot:G(),timestamp:G(),stats:tt({numTransactionEntries:G(),numSuccessfulTransactions:G(),numFailedTransactions:G(),maxTransactionsPerEntry:G()})}),tt({type:zt("dead"),slot:G(),timestamp:G(),err:rt()})]),Rd=tt({subscription:G(),result:kd}),Md=tt({subscription:G(),result:ii(Be([Yh,Jh]))}),Cd=tt({subscription:G(),result:G()}),Td=tt({pubkey:rt(),gossip:at(rt()),tpu:at(rt()),rpc:at(rt()),version:at(rt())}),da=tt({votePubkey:rt(),nodePubkey:rt(),activatedStake:G(),epochVoteAccount:$e(),epochCredits:ot(so([G(),G(),G()])),commission:G(),lastVote:G(),rootSlot:at(G())}),Ld=vt(tt({current:ot(da),delinquent:ot(da)})),Nd=Be([zt("processed"),zt("confirmed"),zt("finalized")]),Pd=tt({slot:G(),confirmations:at(G()),err:In,confirmationStatus:ft(Nd)}),Ud=$t(ot(at(Pd))),Od=vt(G()),Jc=tt({accountKey:Kt,writableIndexes:ot(G()),readonlyIndexes:ot(G())}),lo=tt({signatures:ot(rt()),message:tt({accountKeys:ot(rt()),header:tt({numRequiredSignatures:G(),numReadonlySignedAccounts:G(),numReadonlyUnsignedAccounts:G()}),instructions:ot(tt({accounts:ot(G()),data:rt(),programIdIndex:G()})),recentBlockhash:rt(),addressTableLookups:ft(ot(Jc))})}),Xc=tt({pubkey:Kt,signer:$e(),writable:$e(),source:ft(Be([zt("transaction"),zt("lookupTable")]))}),Qc=tt({accountKeys:ot(Xc),signatures:ot(rt())}),tu=tt({parsed:Zn(),program:rt(),programId:Kt}),eu=tt({accounts:ot(Kt),data:rt(),programId:Kt}),Fd=Be([eu,tu]),Dd=Be([tt({parsed:Zn(),program:rt(),programId:rt()}),tt({accounts:ot(rt()),data:rt(),programId:rt()})]),nu=br(Fd,Dd,r=>"accounts"in r?it(r,eu):it(r,tu)),ru=tt({signatures:ot(rt()),message:tt({accountKeys:ot(Xc),instructions:ot(nu),recentBlockhash:rt(),addressTableLookups:ft(at(ot(Jc)))})}),Hr=tt({accountIndex:G(),mint:rt(),owner:ft(rt()),programId:ft(rt()),uiTokenAmount:zs}),iu=tt({writable:ot(Kt),readonly:ot(Kt)}),si=tt({err:In,fee:G(),innerInstructions:ft(at(ot(tt({index:G(),instructions:ot(tt({accounts:ot(G()),data:rt(),programIdIndex:G()}))})))),preBalances:ot(G()),postBalances:ot(G()),logMessages:ft(at(ot(rt()))),preTokenBalances:ft(at(ot(Hr))),postTokenBalances:ft(at(ot(Hr))),loadedAddresses:ft(iu),computeUnitsConsumed:ft(G())}),fo=tt({err:In,fee:G(),innerInstructions:ft(at(ot(tt({index:G(),instructions:ot(nu)})))),preBalances:ot(G()),postBalances:ot(G()),logMessages:ft(at(ot(rt()))),preTokenBalances:ft(at(ot(Hr))),postTokenBalances:ft(at(ot(Hr))),loadedAddresses:ft(iu),computeUnitsConsumed:ft(G())}),Yn=Be([zt(0),zt("legacy")]),kn=tt({pubkey:rt(),lamports:G(),postBalance:at(G()),rewardType:at(rt()),commission:ft(at(G()))}),qd=vt(at(tt({blockhash:rt(),previousBlockhash:rt(),parentSlot:G(),transactions:ot(tt({transaction:lo,meta:at(si),version:ft(Yn)})),rewards:ft(ot(kn)),blockTime:at(G()),blockHeight:at(G())}))),zd=vt(at(tt({blockhash:rt(),previousBlockhash:rt(),parentSlot:G(),rewards:ft(ot(kn)),blockTime:at(G()),blockHeight:at(G())}))),Wd=vt(at(tt({blockhash:rt(),previousBlockhash:rt(),parentSlot:G(),transactions:ot(tt({transaction:Qc,meta:at(si),version:ft(Yn)})),rewards:ft(ot(kn)),blockTime:at(G()),blockHeight:at(G())}))),Kd=vt(at(tt({blockhash:rt(),previousBlockhash:rt(),parentSlot:G(),transactions:ot(tt({transaction:ru,meta:at(fo),version:ft(Yn)})),rewards:ft(ot(kn)),blockTime:at(G()),blockHeight:at(G())}))),Hd=vt(at(tt({blockhash:rt(),previousBlockhash:rt(),parentSlot:G(),transactions:ot(tt({transaction:Qc,meta:at(fo),version:ft(Yn)})),rewards:ft(ot(kn)),blockTime:at(G()),blockHeight:at(G())}))),$d=vt(at(tt({blockhash:rt(),previousBlockhash:rt(),parentSlot:G(),rewards:ft(ot(kn)),blockTime:at(G()),blockHeight:at(G())}))),jd=vt(at(tt({blockhash:rt(),previousBlockhash:rt(),parentSlot:G(),transactions:ot(tt({transaction:lo,meta:at(si)})),rewards:ft(ot(kn)),blockTime:at(G())}))),pa=vt(at(tt({blockhash:rt(),previousBlockhash:rt(),parentSlot:G(),signatures:ot(rt()),blockTime:at(G())}))),Qi=vt(at(tt({slot:G(),meta:at(si),blockTime:ft(at(G())),transaction:lo,version:ft(Yn)}))),Br=vt(at(tt({slot:G(),transaction:ru,meta:at(fo),blockTime:ft(at(G())),version:ft(Yn)}))),Vd=$t(tt({blockhash:rt(),lastValidBlockHeight:G()})),Gd=$t($e()),Zd=tt({slot:G(),numTransactions:G(),numSlots:G(),samplePeriodSecs:G()}),Yd=vt(ot(Zd)),Jd=$t(at(tt({feeCalculator:tt({lamportsPerSignature:G()})}))),Xd=vt(rt()),Qd=vt(rt()),t0=tt({err:In,logs:ot(rt()),signature:rt()}),e0=tt({result:ii(t0),subscription:G()}),n0={"solana-client":"js/1.0.0-maintenance"};class r0{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const g={};return async m=>{const{commitment:b,config:k}=Lt(m),_=this._buildArgs([],b,void 0,k),R=ca(_);return g[R]=g[R]??(async()=>{try{const I=await this._rpcRequest("getBlockHeight",_),E=it(I,vt(G()));if("error"in E)throw new lt(E.error,"failed to get block height information");return E.result}finally{delete g[R]}})(),await g[R]}})();let n,s,i,o,a,u;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,s=t.httpHeaders,i=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,u=t.httpAgent),this._rpcEndpoint=zh(e),this._rpcWsEndpoint=n||Dh(e),this._rpcClient=nd(e,s,i,o,a,u),this._rpcRequest=rd(this._rpcClient),this._rpcBatchRequest=id(this._rpcClient),this._rpcWebSocket=new Ph(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:s}=Lt(t),i=this._buildArgs([e.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),a=it(o,$t(G()));if("error"in a)throw new lt(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=it(t,vt(at(G())));if("error"in n)throw new lt(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=it(e,vt(G()));if("error"in t)throw new lt(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=it(e,fd);if("error"in t)throw new lt(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),s=it(n,hd);if("error"in s)throw new lt(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",n),i=it(s,$t(zs));if("error"in i)throw new lt(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",n),i=it(s,$t(zs));if("error"in i)throw new lt(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(e,t,n){const{commitment:s,config:i}=Lt(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),u=await this._rpcRequest("getTokenAccountsByOwner",a),g=it(u,pd);if("error"in g)throw new lt(g.error,`failed to get token accounts owned by account ${e.toBase58()}`);return g.result}async getParsedTokenAccountsByOwner(e,t,n){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=it(o,gd);if("error"in a)throw new lt(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",n),i=it(s,md);if("error"in i)throw new lt(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",n),i=it(s,dd);if("error"in i)throw new lt(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:s}=Lt(t),i=this._buildArgs([e.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=it(o,$t(at(pr)));if("error"in a)throw new lt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:n,config:s}=Lt(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=it(o,$t(at(Ks)));if("error"in a)throw new lt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:s}=Lt(t),i=e.map(g=>g.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),u=it(a,$t(ot(at(Ks))));if("error"in u)throw new lt(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:s}=Lt(t),i=e.map(g=>g.toBase58()),o=this._buildArgs([i],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),u=it(a,$t(ot(at(pr))));if("error"in u)throw new lt(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:s,config:i}=Lt(t),o=this._buildArgs([e.toBase58()],s,void 0,{...i,epoch:n??i?.epoch}),a=await this._rpcRequest("getStakeActivation",o),u=it(a,vt(vd));if("error"in u)throw new lt(u.error,`failed to get Stake Activation ${e.toBase58()}`);return u.result}async getProgramAccounts(e,t){const{commitment:n,config:s}=Lt(t),{encoding:i,...o}=s||{},a=this._buildArgs([e.toBase58()],n,i||"base64",{...o,...o.filters?{filters:fa(o.filters)}:null}),u=await this._rpcRequest("getProgramAccounts",a),g=ot(yd),m=o.withContext===!0?it(u,$t(g)):it(u,vt(g));if("error"in m)throw new lt(m.error,`failed to get accounts owned by program ${e.toBase58()}`);return m.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:s}=Lt(t),i=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=it(o,vt(ot(bd)));if("error"in a)throw new lt(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){let n;if(typeof e=="string")n=e;else{const i=e;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);n=i.signature}let s;try{s=ve.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Dt(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,s,i=!1;const o=new Promise((u,g)=>{try{n=this.onSignature(t,(b,k)=>{n=void 0;const _={context:k,value:b};u({__type:an.PROCESSED,response:_})},e);const m=new Promise(b=>{n==null?b():s=this._onSubscriptionStateChange(n,k=>{k==="subscribed"&&b()})});(async()=>{if(await m,i)return;const b=await this.getSignatureStatus(t);if(i||b==null)return;const{context:k,value:_}=b;if(_!=null)if(_?.err)g(_.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(_.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(_.confirmationStatus==="processed"||_.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,u({__type:an.PROCESSED,response:{context:k,value:_}})}})()}catch(m){g(m)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(b=>{const k=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let _=await k();if(!i){for(;_<=n;)if(await Pn(1e3),i||(_=await k(),i))return;b({__type:an.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),g=this.getCancellationPromise(t);let m;try{const b=await Promise.race([g,u,o]);if(b.__type===an.PROCESSED)m=b.response;else throw new Hc(s)}finally{i=!0,a()}return m}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const u=new Promise(_=>{let R=i,I=null;const E=async()=>{try{const{context:N,value:P}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:n});return I=N.slot,P?.nonce}catch{return R}};(async()=>{if(R=await E(),!a)for(;;){if(i!==R){_({__type:an.NONCE_INVALID,slotInWhichNonceDidAdvance:I});return}if(await Pn(2e3),a||(R=await E(),a))return}})()}),{abortConfirmation:g,confirmationPromise:m}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),b=this.getCancellationPromise(t);let k;try{const _=await Promise.race([b,m,u]);if(_.__type===an.PROCESSED)k=_.response;else{let R;for(;;){const I=await this.getSignatureStatus(o);if(I==null)break;if(I.context.slot<(_.slotInWhichNonceDidAdvance??n)){await Pn(400);continue}R=I;break}if(R?.value){const I=e||"finalized",{confirmationStatus:E}=R.value;switch(I){case"processed":case"recent":if(E!=="processed"&&E!=="confirmed"&&E!=="finalized")throw new ir(o);break;case"confirmed":case"single":case"singleGossip":if(E!=="confirmed"&&E!=="finalized")throw new ir(o);break;case"finalized":case"max":case"root":if(E!=="finalized")throw new ir(o);break;default:}k={context:R.context,value:{err:R.value.err}}}else throw new ir(o)}}finally{a=!0,g()}return k}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const s=new Promise(u=>{let g=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{g=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>u({__type:an.TIMED_OUT,timeoutMs:g}),g)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const u=await Promise.race([o,s]);if(u.__type===an.PROCESSED)a=u.response;else throw new $c(t,u.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=it(e,vt(ot(Td)));if("error"in t)throw new lt(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),s=it(n,Ld);if("error"in s)throw new lt(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:t,config:n}=Lt(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlot",s),o=it(i,vt(G()));if("error"in o)throw new lt(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=Lt(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=it(i,vt(rt()));if("error"in o)throw new lt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],s=await this._rpcRequest("getSlotLeaders",n),i=it(s,vt(ot(Kt)));if("error"in i)throw new lt(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(e,t){const{context:n,value:s}=await this.getSignatureStatuses([e],t);Dt(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const s=await this._rpcRequest("getSignatureStatuses",n),i=it(s,Ud);if("error"in i)throw new lt(i.error,"failed to get signature status");return i.result}async getTransactionCount(e){const{commitment:t,config:n}=Lt(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=it(i,vt(G()));if("error"in o)throw new lt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),s=it(n,sd);if("error"in s)throw new lt(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,n){const{commitment:s,config:i}=Lt(n),o=this._buildArgs([e.map(g=>g.toBase58())],s,void 0,{...i,epoch:t??i?.epoch}),a=await this._rpcRequest("getInflationReward",o),u=it(a,Hh);if("error"in u)throw new lt(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=it(e,od);if("error"in t)throw new lt(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Lt(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=it(i,cd);if("error"in o)throw new lt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=it(e,ud);if("error"in t)throw new lt(t.error,"failed to get epoch schedule");const n=t.result;return new Lh(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=it(e,ld);if("error"in t)throw new lt(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=it(s,Od);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=it(t,Yd);if("error"in n)throw new lt(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=it(s,Jd);if("error"in i)throw new lt(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const n=ye(e.serialize()).toString("base64"),s=this._buildArgs([n],t),i=await this._rpcRequest("getFeeForMessage",s),o=it(i,$t(at(G())));if("error"in o)throw new lt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map(o=>o.toBase58()),n=t?.length?[t]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=it(s,ad);if("error"in i)throw new lt(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Lt(e),s=this._buildArgs([],t,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=it(i,Vd);if("error"in o)throw new lt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:s}=Lt(t),i=this._buildArgs([e],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=it(o,Gd);if("error"in a)throw new lt(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=it(e,vt(Xh));if("error"in t)throw new lt(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=it(e,vt(rt()));if("error"in t)throw new lt(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:s}=Lt(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=it(o,Wd);if("error"in a)throw a.error;return a.result}case"none":{const a=it(o,zd);if("error"in a)throw a.error;return a.result}default:{const a=it(o,qd);if("error"in a)throw a.error;const{result:u}=a;return u?{...u,transactions:u.transactions.map(({transaction:g,meta:m,version:b})=>({meta:m,transaction:{...g,message:Xi(b,g.message)},version:b}))}:null}}}catch(a){throw new lt(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:s}=Lt(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const a=it(o,Hd);if("error"in a)throw a.error;return a.result}case"none":{const a=it(o,$d);if("error"in a)throw a.error;return a.result}default:{const a=it(o,Kd);if("error"in a)throw a.error;return a.result}}}catch(a){throw new lt(a,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:a,...u}=e;n=a,t=u}const s=this._buildArgs([],n,"base64",t),i=await this._rpcRequest("getBlockProduction",s),o=it(i,ed);if("error"in o)throw new lt(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:s}=Lt(t),i=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getTransaction",i),a=it(o,Qi);if("error"in a)throw new lt(a.error,"failed to get transaction");const u=a.result;return u&&{...u,transaction:{...u.transaction,message:Xi(u.version,u.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:s}=Lt(t),i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=it(o,Br);if("error"in a)throw new lt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:n,config:s}=Lt(t),i=e.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(u=>{const g=it(u,Br);if("error"in g)throw new lt(g.error,"failed to get transactions");return g.result})}async getTransactions(e,t){const{commitment:n,config:s}=Lt(t),i=e.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(u=>{const g=it(u,Qi);if("error"in g)throw new lt(g.error,"failed to get transactions");const m=g.result;return m&&{...m,transaction:{...m.transaction,message:Xi(m.version,m.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getBlock",n),i=it(s,jd);if("error"in i)throw new lt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:u,meta:g})=>{const m=new Qe(u.message);return{meta:g,transaction:{...u,message:m}}})};return{...a,transactions:a.transactions.map(({transaction:u,meta:g})=>({meta:g,transaction:Oe.populate(u.message,u.signatures)}))}}async getBlocks(e,t,n){const s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),i=await this._rpcRequest("getBlocks",s),o=it(i,vt(ot(G())));if("error"in o)throw new lt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=it(s,pa);if("error"in i)throw new lt(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=it(s,pa);if("error"in i)throw new lt(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getTransaction",n),i=it(s,Qi);if("error"in i)throw new lt(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new Qe(o.transaction.message),u=o.transaction.signatures;return{...o,transaction:Oe.populate(a,u)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=it(s,Br);if("error"in i)throw new lt(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=it(o,Br);if("error"in a)throw new lt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<i));)try{const u=await this.getConfirmedBlockSignatures(t,"finalized");u.signatures.length>0&&(s.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const u=await this.getConfirmedBlockSignatures(n);u.signatures.length>0&&(s.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=it(i,Ed);if("error"in o)throw new lt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",s),o=it(i,Sd);if("error"in o)throw new lt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=new la({key:e,state:la.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let i=null;return s!==null&&(i=co.fromAccountData(s.data)),{context:n,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=it(n,Xd);if("error"in s)throw new lt(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Pn(100);const n=Date.now()-this._blockhashInfo.lastFetch>=qh;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Pn(Ah/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Lt(e),s=this._buildArgs([],t,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=it(i,$t(G()));if("error"in o)throw new lt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const I=e.serialize(),E=mt.Buffer.from(I).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const N=t||{};N.encoding="base64","commitment"in N||(N.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(N.innerInstructions=t.innerInstructions);const P=[E,N],M=await this._rpcRequest("simulateTransaction",P),H=it(M,ha);if("error"in H)throw new Error("failed to simulate transaction: "+H.error.message);return H.result}let s;if(e instanceof Oe){let R=e;s=new Oe,s.feePayer=R.feePayer,s.instructions=e.instructions,s.nonceInfo=R.nonceInfo,s.signatures=R.signatures}else s=Oe.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(s.nonceInfo&&i)s.sign(...i);else{let R=this._disableBlockhashCaching;for(;;){const I=await this._blockhashWithExpiryBlockHeight(R);if(s.lastValidBlockHeight=I.lastValidBlockHeight,s.recentBlockhash=I.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const E=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(E)&&!this._blockhashInfo.transactionSignatures.includes(E)){this._blockhashInfo.simulatedSignatures.push(E);break}else R=!0}}const o=s._compile(),a=o.serialize(),g=s._serialize(a).toString("base64"),m={encoding:"base64",commitment:this.commitment};if(n){const R=(Array.isArray(n)?n:o.nonProgramIds()).map(I=>I.toBase58());m.accounts={encoding:"base64",addresses:R}}i&&(m.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(m.innerInstructions=t.innerInstructions);const b=[g,m],k=await this._rpcRequest("simulateTransaction",b),_=it(k,ha);if("error"in _){let R;if("data"in _.error&&(R=_.error.data.logs,R&&Array.isArray(R))){const I=`
    `,E=I+R.join(I);console.error(_.error.message,E)}throw new sa({action:"simulate",signature:"",transactionMessage:_.error.message,logs:R})}return _.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const u=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))o=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}const i=e.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(e,t){const n=ye(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},s=t&&t.skipPreflight,i=s===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[e,n],a=await this._rpcRequest("sendTransaction",o),u=it(a,Qd);if("error"in u){let g;throw"data"in u.error&&(g=u.error.data.logs),new sa({action:s?"send":"simulate",signature:"",transactionMessage:u.error.message,logs:g})}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){const n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(i=>{try{i(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return s.add(t),()=>{s.delete(t),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!t())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(s=>{try{s(...t)}catch(i){console.error(i)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=it(e,xd);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,s=ca([e.method,t]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Dt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:s,config:i}=Lt(n),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=it(e,Ad);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,s){const{commitment:i,config:o}=Lt(n),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:fa(s)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=it(e,e0);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=it(e,Id);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=it(e,Rd);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,s){const i=t||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,s){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,s)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=it(e,Md);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const s=this._buildArgs([e],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(e,t,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,i),a=this._makeSubscription({callback:(u,g)=>{t(u,g);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=it(e,Cd);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Cr{constructor(e){this._keypair=void 0,this._keypair=e??ea()}static generate(){return new Cr(ea())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const s=e.slice(0,32),i=qs(s);for(let o=0;o<32;o++)if(n[o]!==i[o])throw new Error("provided secretKey is invalid")}return new Cr({publicKey:n,secretKey:e})}static fromSeed(e){const t=qs(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new Cr({publicKey:t,secretKey:n})}get publicKey(){return new ht(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:U.struct([U.u32("instruction"),Vn("recentSlot"),U.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:U.struct([U.u32("instruction")])},ExtendLookupTable:{index:2,layout:U.struct([U.u32("instruction"),Vn(),U.seq(St(),U.offset(U.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:U.struct([U.u32("instruction")])},CloseLookupTable:{index:4,layout:U.struct([U.u32("instruction")])}});new ht("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:U.struct([U.u8("instruction"),U.u32("units"),U.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:U.struct([U.u8("instruction"),U.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:U.struct([U.u8("instruction"),U.u32("units")])},SetComputeUnitPrice:{index:3,layout:U.struct([U.u8("instruction"),Vn("microLamports")])}});new ht("ComputeBudget111111111111111111111111111111");U.struct([U.u8("numSignatures"),U.u8("padding"),U.u16("signatureOffset"),U.u16("signatureInstructionIndex"),U.u16("publicKeyOffset"),U.u16("publicKeyInstructionIndex"),U.u16("messageDataOffset"),U.u16("messageDataSize"),U.u16("messageInstructionIndex")]);new ht("Ed25519SigVerify111111111111111111111111111");fh.utils.isValidPrivateKey;U.struct([U.u8("numSignatures"),U.u16("signatureOffset"),U.u8("signatureInstructionIndex"),U.u16("ethAddressOffset"),U.u8("ethAddressInstructionIndex"),U.u16("messageDataOffset"),U.u16("messageDataSize"),U.u8("messageInstructionIndex"),U.blob(20,"ethAddress"),U.blob(64,"signature"),U.u8("recoveryId")]);new ht("KeccakSecp256k11111111111111111111111111111");var su;new ht("StakeConfig11111111111111111111111111111111");class ou{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}su=ou;ou.default=new su(0,0,ht.default);Object.freeze({Initialize:{index:0,layout:U.struct([U.u32("instruction"),yh(),wh()])},Authorize:{index:1,layout:U.struct([U.u32("instruction"),St("newAuthorized"),U.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:U.struct([U.u32("instruction")])},Split:{index:3,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},Withdraw:{index:4,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},Deactivate:{index:5,layout:U.struct([U.u32("instruction")])},Merge:{index:7,layout:U.struct([U.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:U.struct([U.u32("instruction"),St("newAuthorized"),U.u32("stakeAuthorizationType"),Fn("authoritySeed"),St("authorityOwner")])}});new ht("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:U.struct([U.u32("instruction"),bh()])},Authorize:{index:1,layout:U.struct([U.u32("instruction"),St("newAuthorized"),U.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:U.struct([U.u32("instruction"),U.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:U.struct([U.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:U.struct([U.u32("instruction"),vh()])}});new ht("Vote111111111111111111111111111111111111111");new ht("Va1idator1nfo111111111111111111111111111111");tt({name:rt(),website:ft(rt()),details:ft(rt()),iconUrl:ft(rt()),keybaseUsername:ft(rt())});new ht("Vote111111111111111111111111111111111111111");U.struct([St("nodePubkey"),St("authorizedWithdrawer"),U.u8("commission"),U.nu64(),U.seq(U.struct([U.nu64("slot"),U.u32("confirmationCount")]),U.offset(U.u32(),-8),"votes"),U.u8("rootSlotValid"),U.nu64("rootSlot"),U.nu64(),U.seq(U.struct([U.nu64("epoch"),St("authorizedVoter")]),U.offset(U.u32(),-8),"authorizedVoters"),U.struct([U.seq(U.struct([St("authorizedPubkey"),U.nu64("epochOfLastAuthorizedSwitch"),U.nu64("targetEpoch")]),32,"buf"),U.nu64("idx"),U.u8("isEmpty")],"priorVoters"),U.nu64(),U.seq(U.struct([U.nu64("epoch"),U.nu64("credits"),U.nu64("prevCredits")]),U.offset(U.u32(),-8),"epochCredits"),U.struct([U.nu64("slot"),U.nu64("timestamp")],"lastTimestamp")]);const ga={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function hg(r,e){const t="https";if(!r)return ga[t].devnet;const n=ga[t][r];if(!n)throw new Error(`Unknown ${t} cluster: ${r}`);return n}const dg=1e9,au=st.createContext({});function i0(){return st.useContext(au)}const pg=({children:r,endpoint:e,config:t={commitment:"confirmed"}})=>{const n=st.useMemo(()=>new r0(e,t),[e,t]);return nt.createElement(au.Provider,{value:{connection:n}},r)};class ma extends Ae{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const s0=[],oi={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){qe("call","select")},connect(){return Promise.reject(qe("call","connect"))},disconnect(){return Promise.reject(qe("call","disconnect"))},sendTransaction(){return Promise.reject(qe("call","sendTransaction"))},signTransaction(){return Promise.reject(qe("call","signTransaction"))},signAllTransactions(){return Promise.reject(qe("call","signAllTransactions"))},signMessage(){return Promise.reject(qe("call","signMessage"))},signIn(){return Promise.reject(qe("call","signIn"))}};Object.defineProperty(oi,"wallets",{get(){return qe("read","wallets"),s0}});Object.defineProperty(oi,"wallet",{get(){return qe("read","wallet"),null}});Object.defineProperty(oi,"publicKey",{get(){return qe("read","publicKey"),null}});function qe(r,e){const t=new Error(`You have tried to ${r} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(t),t}const cu=st.createContext(oi);function uu(){return st.useContext(cu)}function o0(r,e){const t=st.useState(()=>{try{const i=localStorage.getItem(r);if(i)return JSON.parse(i)}catch(i){typeof window<"u"&&console.error(i)}return e}),n=t[0],s=st.useRef(!0);return st.useEffect(()=>{if(s.current){s.current=!1;return}try{n===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(n))}catch(i){typeof window<"u"&&console.error(i)}},[n,r]),t}function ts(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const ya="solana:mainnet",a0="solana:devnet",c0="solana:testnet",u0="solana:localnet",l0="https://api.mainnet-beta.solana.com";function f0(r){return r.includes(l0)?ya:/\bdevnet\b/i.test(r)?a0:/\btestnet\b/i.test(r)?c0:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?u0:ya}function h0(r){let e=`${r.domain} wants you to sign in with your Solana account:
`;e+=`${r.address}`,r.statement&&(e+=`

${r.statement}`);const t=[];if(r.uri&&t.push(`URI: ${r.uri}`),r.version&&t.push(`Version: ${r.version}`),r.chainId&&t.push(`Chain ID: ${r.chainId}`),r.nonce&&t.push(`Nonce: ${r.nonce}`),r.issuedAt&&t.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&t.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&t.push(`Not Before: ${r.notBefore}`),r.requestId&&t.push(`Request ID: ${r.requestId}`),r.resources){t.push("Resources:");for(const n of r.resources)t.push(`- ${n}`)}return t.length&&(e+=`

${t.join(`
`)}`),e}const tn={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class en extends Error{constructor(...e){const[t,n,s]=e;super(n),this.code=t,this.data=s,this.name="SolanaMobileWalletAdapterError"}}class lu extends Error{constructor(...e){const[t,n,s,i]=e;super(s),this.code=n,this.data=i,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function he(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(m){try{g(n.next(m))}catch(b){o(b)}}function u(m){try{g(n.throw(m))}catch(b){o(b)}}function g(m){m.done?i(m.value):s(m.value).then(a,u)}g((n=n.apply(r,[])).next())})}function es(r,e){return he(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("raw",r),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,t),s=new Uint8Array(t.byteLength+n.byteLength);return s.set(new Uint8Array(t),0),s.set(new Uint8Array(n),t.byteLength),s})}function d0(r){return window.btoa(r)}function p0(r){return h0(r)}function g0(r){return d0(p0(r))}const m0="solana:signTransactions",wa="solana:cloneAuthorization";function y0(r,e){return new Proxy({},{get(t,n){return t[n]==null&&(t[n]=function(s){return he(this,void 0,void 0,function*(){const{method:i,params:o}=w0(n,s,r),a=yield e(i,o);return i==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield v0(o.sign_in_payload,a,e)),b0(n,a,r)})}),t[n]},defineProperty(){return!1},deleteProperty(){return!1}})}function w0(r,e,t){let n=e,s=r.toString().replace(/[A-Z]/g,i=>`_${i.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:i}=n;if(t==="legacy"){switch(i){case"solana:testnet":{i="testnet";break}case"solana:devnet":{i="devnet";break}case"solana:mainnet":{i="mainnet-beta";break}default:i=n.cluster}n.cluster=i}else{switch(i){case"testnet":case"devnet":{i=`solana:${i}`;break}case"mainnet-beta":{i="solana:mainnet";break}}n.chain=i}}case"reauthorize":{const{auth_token:i,identity:o}=n;if(i)switch(t){case"legacy":{s="reauthorize",n={auth_token:i,identity:o};break}default:{s="authorize";break}}break}}return{method:s,params:n}}function b0(r,e,t){switch(r){case"getCapabilities":{const n=e;switch(t){case"legacy":{const s=[m0];return n.supports_clone_authorization===!0&&s.push(wa),Object.assign(Object.assign({},n),{features:s})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes(wa)})}}}return e}function v0(r,e,t){var n;return he(this,void 0,void 0,function*(){const s=(n=r.domain)!==null&&n!==void 0?n:window.location.host,i=e.accounts[0].address,o=g0(Object.assign(Object.assign({},r),{domain:s,address:i})),a=yield t("sign_messages",{addresses:[i],payloads:[o]});return{address:i,signed_message:o,signature:a.signed_payloads[0].slice(o.length)}})}const wn=4;function E0(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(wn);return new DataView(e).setUint32(0,r,!1),new Uint8Array(e)}const Hs=12,fu=65;function S0(r,e,t){return he(this,void 0,void 0,function*(){const n=E0(e),s=new Uint8Array(Hs);crypto.getRandomValues(s);const i=yield crypto.subtle.encrypt(du(n,s),t,new TextEncoder().encode(r)),o=new Uint8Array(n.byteLength+s.byteLength+i.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(s),n.byteLength),o.set(new Uint8Array(i),n.byteLength+s.byteLength),o})}function hu(r,e){return he(this,void 0,void 0,function*(){const t=r.slice(0,wn),n=r.slice(wn,wn+Hs),s=r.slice(wn+Hs),i=yield crypto.subtle.decrypt(du(t,n),e,s);return x0().decode(i)})}function du(r,e){return{additionalData:r,iv:e,name:"AES-GCM",tagLength:128}}let ns;function x0(){return ns===void 0&&(ns=new TextDecoder("utf-8")),ns}function _0(){return he(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function rs(){return he(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function A0(r,e){return he(this,void 0,void 0,function*(){const t=JSON.stringify(r),n=r.id;return S0(t,n,e)})}function B0(r,e){return he(this,void 0,void 0,function*(){const t=yield hu(r,e),n=JSON.parse(t);if(Object.hasOwnProperty.call(n,"error"))throw new lu(n.id,n.error.code,n.error.message);return n})}function I0(r,e,t){return he(this,void 0,void 0,function*(){const[n,s]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",r.slice(0,fu),{name:"ECDH",namedCurve:"P-256"},!1,[])]),i=yield crypto.subtle.deriveBits({name:"ECDH",public:s},t,256),o=yield crypto.subtle.importKey("raw",i,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function k0(r,e){return he(this,void 0,void 0,function*(){const t=yield hu(r,e),n=JSON.parse(t);let s="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":s="v1";break;case"legacy":s="legacy";break;default:throw new en(tn.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:s}})}function R0(){return pu(49152+Math.floor(Math.random()*16384))}function pu(r){if(r<49152||r>65535)throw new en(tn.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function M0(r){let e="";const t=new Uint8Array(r),n=t.byteLength;for(let s=0;s<n;s++)e+=String.fromCharCode(t[s]);return window.btoa(e)}function C0(r){return r.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const T0="solana-wallet";function ba(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function L0(r,e){let t=null;if(e){try{t=new URL(e)}catch{}if(t?.protocol!=="https:")throw new en(tn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}t||(t=new URL(`${T0}:/`));const n=r.startsWith("/")?r:[...ba(t.pathname),...ba(r)].join("/");return new URL(n,t)}function N0(r,e,t,n=["v1"]){return he(this,void 0,void 0,function*(){const s=pu(e),i=yield crypto.subtle.exportKey("raw",r),o=M0(i),a=L0("v1/associate/local",t);return a.searchParams.set("association",C0(o)),a.searchParams.set("port",`${s}`),n.forEach(u=>{a.searchParams.set("v",u)}),a})}const $r={Firefox:0,Other:1};function P0(){return navigator.userAgent.indexOf("Firefox/")!==-1?$r.Firefox:$r.Other}function U0(){return new Promise((r,e)=>{function t(){clearTimeout(s),window.removeEventListener("blur",n)}function n(){t(),r()}window.addEventListener("blur",n);const s=setTimeout(()=>{t(),e()},2e3)})}let tr=null;function O0(r){tr==null&&(tr=document.createElement("iframe"),tr.style.display="none",document.body.appendChild(tr)),tr.contentWindow.location.href=r.toString()}function F0(r){return he(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const e=P0();switch(e){case $r.Firefox:O0(r);break;case $r.Other:{const t=U0();window.location.assign(r),yield t;break}default:}}catch{throw new en(tn.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function D0(r,e){return he(this,void 0,void 0,function*(){const t=R0(),n=yield N0(r,t,e);return yield F0(n),t})}const va={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},q0="com.solana.mobilewalletadapter.v1";function z0(){if(typeof window>"u"||window.isSecureContext!==!0)throw new en(tn.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function W0(r){let e;try{e=new URL(r)}catch{throw new en(tn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new en(tn.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function Ea(r){return new DataView(r).getUint32(0,!1)}function K0(r,e){return he(this,void 0,void 0,function*(){z0();const t=yield _0(),s=`ws://localhost:${yield D0(t.publicKey,e?.baseUri)}/solana-wallet`;let i;const o=(()=>{const m=[...va.retryDelayScheduleMs];return()=>m.length>1?m.shift():m[0]})();let a=1,u=0,g={__type:"disconnected"};return new Promise((m,b)=>{let k;const _={},R=()=>he(this,void 0,void 0,function*(){if(g.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${g.__type}\`.`);return}k.removeEventListener("open",R);const{associationKeypair:j}=g,$=yield rs();k.send(yield es($.publicKey,j.privateKey)),g={__type:"hello_req_sent",associationPublicKey:j.publicKey,ecdhPrivateKey:$.privateKey}}),I=j=>{j.wasClean?g={__type:"disconnected"}:b(new en(tn.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${j.code}: ${j.reason}).`,{closeEvent:j})),P()},E=j=>he(this,void 0,void 0,function*(){P(),Date.now()-i>=va.timeoutMs?b(new en(tn.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${s}.`)):(yield new Promise($=>{const J=o();M=window.setTimeout($,J)}),H())}),N=j=>he(this,void 0,void 0,function*(){const $=yield j.data.arrayBuffer();switch(g.__type){case"connecting":if($.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const J=yield rs();k.send(yield es(J.publicKey,t.privateKey)),g={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:J.privateKey};break;case"connected":try{const Y=$.slice(0,wn),O=Ea(Y);if(O!==u+1)throw new Error("Encrypted message has invalid sequence number");u=O;const D=yield B0($,g.sharedSecret),q=_[D.id];delete _[D.id],q.resolve(D.result)}catch(Y){if(Y instanceof lu){const O=_[Y.jsonRpcMessageId];delete _[Y.jsonRpcMessageId],O.reject(Y)}else throw Y}break;case"hello_req_sent":{if($.byteLength===0){const W=yield rs();k.send(yield es(W.publicKey,t.privateKey)),g={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:W.privateKey};break}const Y=yield I0($,g.associationPublicKey,g.ecdhPrivateKey),O=$.slice(fu),D=O.byteLength!==0?yield he(this,void 0,void 0,function*(){const W=O.slice(0,wn),x=Ea(W);if(x!==u+1)throw new Error("Encrypted message has invalid sequence number");return u=x,k0(O,Y)}):{protocol_version:"legacy"};g={__type:"connected",sharedSecret:Y,sessionProperties:D};const q=y0(D.protocol_version,(W,x)=>he(this,void 0,void 0,function*(){const c=a++;return k.send(yield A0({id:c,jsonrpc:"2.0",method:W,params:x??{}},Y)),new Promise((d,y)=>{_[c]={resolve(w){switch(W){case"authorize":case"reauthorize":{const{wallet_uri_base:A}=w;if(A!=null)try{W0(A)}catch(L){y(L);return}break}}d(w)},reject:y}})}));try{m(yield r(q))}catch(W){b(W)}finally{P(),k.close()}break}}});let P,M;const H=()=>{P&&P(),g={__type:"connecting",associationKeypair:t},i===void 0&&(i=Date.now()),k=new WebSocket(s,[q0]),k.addEventListener("open",R),k.addEventListener("close",I),k.addEventListener("error",E),k.addEventListener("message",N),P=()=>{window.clearTimeout(M),k.removeEventListener("open",R),k.removeEventListener("close",I),k.removeEventListener("error",E),k.removeEventListener("message",N)}};H()})})}var is,Sa;function H0(){if(Sa)return is;Sa=1;function r(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var s=0;s<e.length;s++){var i=e.charAt(s),o=i.charCodeAt(0);if(t[o]!==255)throw new TypeError(i+" is ambiguous");t[o]=s}var a=e.length,u=e.charAt(0),g=Math.log(a)/Math.log(256),m=Math.log(256)/Math.log(a);function b(R){if(R instanceof Uint8Array||(ArrayBuffer.isView(R)?R=new Uint8Array(R.buffer,R.byteOffset,R.byteLength):Array.isArray(R)&&(R=Uint8Array.from(R))),!(R instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(R.length===0)return"";for(var I=0,E=0,N=0,P=R.length;N!==P&&R[N]===0;)N++,I++;for(var M=(P-N)*m+1>>>0,H=new Uint8Array(M);N!==P;){for(var j=R[N],$=0,J=M-1;(j!==0||$<E)&&J!==-1;J--,$++)j+=256*H[J]>>>0,H[J]=j%a>>>0,j=j/a>>>0;if(j!==0)throw new Error("Non-zero carry");E=$,N++}for(var Y=M-E;Y!==M&&H[Y]===0;)Y++;for(var O=u.repeat(I);Y<M;++Y)O+=e.charAt(H[Y]);return O}function k(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return new Uint8Array;for(var I=0,E=0,N=0;R[I]===u;)E++,I++;for(var P=(R.length-I)*g+1>>>0,M=new Uint8Array(P);R[I];){var H=R.charCodeAt(I);if(H>255)return;var j=t[H];if(j===255)return;for(var $=0,J=P-1;(j!==0||$<N)&&J!==-1;J--,$++)j+=a*M[J]>>>0,M[J]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");N=$,I++}for(var Y=P-N;Y!==P&&M[Y]===0;)Y++;for(var O=new Uint8Array(E+(P-Y)),D=E;Y!==P;)O[D++]=M[Y++];return O}function _(R){var I=k(R);if(I)return I;throw new Error("Non-base"+a+" character")}return{encode:b,decodeUnsafe:k,decode:_}}return is=r,is}var ss,xa;function $0(){return xa||(xa=1,ss=H0()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),ss}var j0=$0();const V0=An(j0);function os(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function Ir(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(m){try{g(n.next(m))}catch(b){o(b)}}function u(m){try{g(n.throw(m))}catch(b){o(b)}}function g(m){m.done?i(m.value):s(m.value).then(a,u)}g((n=n.apply(r,[])).next())})}function gu(r){return window.btoa(String.fromCharCode.call(null,...r))}function as(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function _a(r){const e="version"in r?r.serialize():r.serialize({requireAllSignatures:!1,verifySignatures:!1});return gu(e)}function G0(r){const t=r[0]*fr+1;return ao.deserializeMessageVersion(r.slice(t,r.length))==="legacy"?Oe.from(r):dr.deserialize(r)}function Z0(r,e){return Ir(this,void 0,void 0,function*(){return yield K0(n=>{const s=new Proxy({},{get(i,o){if(i[o]==null)switch(o){case"signAndSendTransactions":i[o]=function(a){var{minContextSlot:u,commitment:g,skipPreflight:m,maxRetries:b,waitForCommitmentToSendNextTransaction:k,transactions:_}=a,R=os(a,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return Ir(this,void 0,void 0,function*(){const I=_.map(_a),E={min_context_slot:u,commitment:g,skip_preflight:m,max_retries:b,wait_for_commitment_to_send_next_transaction:k},{signatures:N}=yield n.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},R),Object.values(E).some(M=>M!=null)?{options:E}:null),{payloads:I}));return N.map(as).map(V0.encode)})};break;case"signMessages":i[o]=function(a){var{payloads:u}=a,g=os(a,["payloads"]);return Ir(this,void 0,void 0,function*(){const m=u.map(gu),{signed_payloads:b}=yield n.signMessages(Object.assign(Object.assign({},g),{payloads:m}));return b.map(as)})};break;case"signTransactions":i[o]=function(a){var{transactions:u}=a,g=os(a,["transactions"]);return Ir(this,void 0,void 0,function*(){const m=u.map(_a),{signed_payloads:b}=yield n.signTransactions(Object.assign(Object.assign({},g),{payloads:m}));return b.map(as).map(G0)})};break;default:{i[o]=n[o];break}}return i[o]},defineProperty(){return!1},deleteProperty(){return!1}});return r(s)},e)})}var Nn={},cs,Aa;function Y0(){return Aa||(Aa=1,cs=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),cs}var us={},cn={},Ba;function Rn(){if(Ba)return cn;Ba=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return cn.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},cn.getSymbolTotalCodewords=function(n){return e[n]},cn.getBCHDigit=function(t){let n=0;for(;t!==0;)n++,t>>>=1;return n},cn.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},cn.isKanjiModeEnabled=function(){return typeof r<"u"},cn.toSJIS=function(n){return r(n)},cn}var ls={},Ia;function ho(){return Ia||(Ia=1,function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+t)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,s){if(r.isValid(n))return n;try{return e(n)}catch{return s}}}(ls)),ls}var fs,ka;function J0(){if(ka)return fs;ka=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},fs=r,fs}var hs,Ra;function X0(){if(Ra)return hs;Ra=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,t,n,s){const i=e*this.size+t;this.data[i]=n,s&&(this.reservedBit[i]=!0)},r.prototype.get=function(e,t){return this.data[e*this.size+t]},r.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},r.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},hs=r,hs}var ds={},Ma;function Q0(){return Ma||(Ma=1,function(r){const e=Rn().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=e(n),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let u=1;u<s-1;u++)a[u]=a[u-1]-o;return a.push(6),a.reverse()},r.getPositions=function(n){const s=[],i=r.getRowColCoords(n),o=i.length;for(let a=0;a<o;a++)for(let u=0;u<o;u++)a===0&&u===0||a===0&&u===o-1||a===o-1&&u===0||s.push([i[a],i[u]]);return s}}(ds)),ds}var ps={},Ca;function tp(){if(Ca)return ps;Ca=1;const r=Rn().getSymbolSize,e=7;return ps.getPositions=function(n){const s=r(n);return[[0,0],[s-e,0],[0,s-e]]},ps}var gs={},Ta;function ep(){return Ta||(Ta=1,function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},r.from=function(s){return r.isValid(s)?parseInt(s,10):void 0},r.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,u=0,g=null,m=null;for(let b=0;b<i;b++){a=u=0,g=m=null;for(let k=0;k<i;k++){let _=s.get(b,k);_===g?a++:(a>=5&&(o+=e.N1+(a-5)),g=_,a=1),_=s.get(k,b),_===m?u++:(u>=5&&(o+=e.N1+(u-5)),m=_,u=1)}a>=5&&(o+=e.N1+(a-5)),u>=5&&(o+=e.N1+(u-5))}return o},r.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let u=0;u<i-1;u++){const g=s.get(a,u)+s.get(a,u+1)+s.get(a+1,u)+s.get(a+1,u+1);(g===4||g===0)&&o++}return o*e.N2},r.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,u=0;for(let g=0;g<i;g++){a=u=0;for(let m=0;m<i;m++)a=a<<1&2047|s.get(g,m),m>=10&&(a===1488||a===93)&&o++,u=u<<1&2047|s.get(m,g),m>=10&&(u===1488||u===93)&&o++}return o*e.N3},r.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let u=0;u<o;u++)i+=s.data[u];return Math.abs(Math.ceil(i*100/o/5)-10)*e.N4};function t(n,s,i){switch(n){case r.Patterns.PATTERN000:return(s+i)%2===0;case r.Patterns.PATTERN001:return s%2===0;case r.Patterns.PATTERN010:return i%3===0;case r.Patterns.PATTERN011:return(s+i)%3===0;case r.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case r.Patterns.PATTERN101:return s*i%2+s*i%3===0;case r.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case r.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let u=0;u<o;u++)i.isReserved(u,a)||i.xor(u,a,t(s,u,a))},r.getBestMask=function(s,i){const o=Object.keys(r.Patterns).length;let a=0,u=1/0;for(let g=0;g<o;g++){i(g),r.applyMask(g,s);const m=r.getPenaltyN1(s)+r.getPenaltyN2(s)+r.getPenaltyN3(s)+r.getPenaltyN4(s);r.applyMask(g,s),m<u&&(u=m,a=g)}return a}}(gs)),gs}var kr={},La;function mu(){if(La)return kr;La=1;const r=ho(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return kr.getBlocksCount=function(s,i){switch(i){case r.L:return e[(s-1)*4+0];case r.M:return e[(s-1)*4+1];case r.Q:return e[(s-1)*4+2];case r.H:return e[(s-1)*4+3];default:return}},kr.getTotalCodewordsCount=function(s,i){switch(i){case r.L:return t[(s-1)*4+0];case r.M:return t[(s-1)*4+1];case r.Q:return t[(s-1)*4+2];case r.H:return t[(s-1)*4+3];default:return}},kr}var ms={},er={},Na;function np(){if(Na)return er;Na=1;const r=new Uint8Array(512),e=new Uint8Array(256);return function(){let n=1;for(let s=0;s<255;s++)r[s]=n,e[n]=s,n<<=1,n&256&&(n^=285);for(let s=255;s<512;s++)r[s]=r[s-255]}(),er.log=function(n){if(n<1)throw new Error("log("+n+")");return e[n]},er.exp=function(n){return r[n]},er.mul=function(n,s){return n===0||s===0?0:r[e[n]+e[s]]},er}var Pa;function rp(){return Pa||(Pa=1,function(r){const e=np();r.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=e.mul(n[o],s[a]);return i},r.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const o=i[0];for(let u=0;u<s.length;u++)i[u]^=e.mul(s[u],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},r.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=r.mul(s,new Uint8Array([1,e.exp(i)]));return s}}(ms)),ms}var ys,Ua;function ip(){if(Ua)return ys;Ua=1;const r=rp();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(n.length+this.degree);s.set(n);const i=r.mod(s,this.genPoly),o=this.degree-i.length;if(o>0){const a=new Uint8Array(this.degree);return a.set(i,o),a}return i},ys=e,ys}var ws={},bs={},vs={},Oa;function yu(){return Oa||(Oa=1,vs.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),vs}var Ke={},Fa;function wu(){if(Fa)return Ke;Fa=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;Ke.KANJI=new RegExp(t,"g"),Ke.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ke.BYTE=new RegExp(n,"g"),Ke.NUMERIC=new RegExp(r,"g"),Ke.ALPHANUMERIC=new RegExp(e,"g");const s=new RegExp("^"+t+"$"),i=new RegExp("^"+r+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ke.testKanji=function(u){return s.test(u)},Ke.testNumeric=function(u){return i.test(u)},Ke.testAlphanumeric=function(u){return o.test(u)},Ke}var Da;function Mn(){return Da||(Da=1,function(r){const e=yu(),t=wu();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},r.getBestModeForData=function(i){return t.testNumeric(i)?r.NUMERIC:t.testAlphanumeric(i)?r.ALPHANUMERIC:t.testKanji(i)?r.KANJI:r.BYTE},r.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},r.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+s)}}r.from=function(i,o){if(r.isValid(i))return i;try{return n(i)}catch{return o}}}(bs)),bs}var qa;function sp(){return qa||(qa=1,function(r){const e=Rn(),t=mu(),n=ho(),s=Mn(),i=yu(),o=7973,a=e.getBCHDigit(o);function u(k,_,R){for(let I=1;I<=40;I++)if(_<=r.getCapacity(I,R,k))return I}function g(k,_){return s.getCharCountIndicator(k,_)+4}function m(k,_){let R=0;return k.forEach(function(I){const E=g(I.mode,_);R+=E+I.getBitsLength()}),R}function b(k,_){for(let R=1;R<=40;R++)if(m(k,R)<=r.getCapacity(R,_,s.MIXED))return R}r.from=function(_,R){return i.isValid(_)?parseInt(_,10):R},r.getCapacity=function(_,R,I){if(!i.isValid(_))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=s.BYTE);const E=e.getSymbolTotalCodewords(_),N=t.getTotalCodewordsCount(_,R),P=(E-N)*8;if(I===s.MIXED)return P;const M=P-g(I,_);switch(I){case s.NUMERIC:return Math.floor(M/10*3);case s.ALPHANUMERIC:return Math.floor(M/11*2);case s.KANJI:return Math.floor(M/13);case s.BYTE:default:return Math.floor(M/8)}},r.getBestVersionForData=function(_,R){let I;const E=n.from(R,n.M);if(Array.isArray(_)){if(_.length>1)return b(_,E);if(_.length===0)return 1;I=_[0]}else I=_;return u(I.mode,I.getLength(),E)},r.getEncodedBits=function(_){if(!i.isValid(_)||_<7)throw new Error("Invalid QR Code version");let R=_<<12;for(;e.getBCHDigit(R)-a>=0;)R^=o<<e.getBCHDigit(R)-a;return _<<12|R}}(ws)),ws}var Es={},za;function op(){if(za)return Es;za=1;const r=Rn(),e=1335,t=21522,n=r.getBCHDigit(e);return Es.getEncodedBits=function(i,o){const a=i.bit<<3|o;let u=a<<10;for(;r.getBCHDigit(u)-n>=0;)u^=e<<r.getBCHDigit(u)-n;return(a<<10|u)^t},Es}var Ss={},xs,Wa;function ap(){if(Wa)return xs;Wa=1;const r=Mn();function e(t){this.mode=r.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let s,i,o;for(s=0;s+3<=this.data.length;s+=3)i=this.data.substr(s,3),o=parseInt(i,10),n.put(o,10);const a=this.data.length-s;a>0&&(i=this.data.substr(s),o=parseInt(i,10),n.put(o,a*3+1))},xs=e,xs}var _s,Ka;function cp(){if(Ka)return _s;Ka=1;const r=Mn(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(n){this.mode=r.ALPHANUMERIC,this.data=n}return t.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(s){let i;for(i=0;i+2<=this.data.length;i+=2){let o=e.indexOf(this.data[i])*45;o+=e.indexOf(this.data[i+1]),s.put(o,11)}this.data.length%2&&s.put(e.indexOf(this.data[i]),6)},_s=t,_s}var As,Ha;function up(){if(Ha)return As;Ha=1;const r=Mn();function e(t){this.mode=r.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(n){return n*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let n=0,s=this.data.length;n<s;n++)t.put(this.data[n],8)},As=e,As}var Bs,$a;function lp(){if($a)return Bs;$a=1;const r=Mn(),e=Rn();function t(n){this.mode=r.KANJI,this.data=n}return t.getBitsLength=function(s){return s*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let s;for(s=0;s<this.data.length;s++){let i=e.toSJIS(this.data[s]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),n.put(i,13)}},Bs=t,Bs}var Is={exports:{}},ja;function fp(){return ja||(ja=1,function(r){var e={single_source_shortest_paths:function(t,n,s){var i={},o={};o[n]=0;var a=e.PriorityQueue.make();a.push(n,0);for(var u,g,m,b,k,_,R,I,E;!a.empty();){u=a.pop(),g=u.value,b=u.cost,k=t[g]||{};for(m in k)k.hasOwnProperty(m)&&(_=k[m],R=b+_,I=o[m],E=typeof o[m]>"u",(E||I>R)&&(o[m]=R,a.push(m,R),i[m]=g))}if(typeof s<"u"&&typeof o[s]>"u"){var N=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(N)}return i},extract_shortest_path_from_predecessor_list:function(t,n){for(var s=[],i=n;i;)s.push(i),t[i],i=t[i];return s.reverse(),s},find_path:function(t,n,s){var i=e.single_source_shortest_paths(t,n,s);return e.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,s={},i;t=t||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=t.sorter||n.default_sorter,s},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var s={value:t,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e}(Is)),Is.exports}var Va;function hp(){return Va||(Va=1,function(r){const e=Mn(),t=ap(),n=cp(),s=up(),i=lp(),o=wu(),a=Rn(),u=fp();function g(N){return unescape(encodeURIComponent(N)).length}function m(N,P,M){const H=[];let j;for(;(j=N.exec(M))!==null;)H.push({data:j[0],index:j.index,mode:P,length:j[0].length});return H}function b(N){const P=m(o.NUMERIC,e.NUMERIC,N),M=m(o.ALPHANUMERIC,e.ALPHANUMERIC,N);let H,j;return a.isKanjiModeEnabled()?(H=m(o.BYTE,e.BYTE,N),j=m(o.KANJI,e.KANJI,N)):(H=m(o.BYTE_KANJI,e.BYTE,N),j=[]),P.concat(M,H,j).sort(function(J,Y){return J.index-Y.index}).map(function(J){return{data:J.data,mode:J.mode,length:J.length}})}function k(N,P){switch(P){case e.NUMERIC:return t.getBitsLength(N);case e.ALPHANUMERIC:return n.getBitsLength(N);case e.KANJI:return i.getBitsLength(N);case e.BYTE:return s.getBitsLength(N)}}function _(N){return N.reduce(function(P,M){const H=P.length-1>=0?P[P.length-1]:null;return H&&H.mode===M.mode?(P[P.length-1].data+=M.data,P):(P.push(M),P)},[])}function R(N){const P=[];for(let M=0;M<N.length;M++){const H=N[M];switch(H.mode){case e.NUMERIC:P.push([H,{data:H.data,mode:e.ALPHANUMERIC,length:H.length},{data:H.data,mode:e.BYTE,length:H.length}]);break;case e.ALPHANUMERIC:P.push([H,{data:H.data,mode:e.BYTE,length:H.length}]);break;case e.KANJI:P.push([H,{data:H.data,mode:e.BYTE,length:g(H.data)}]);break;case e.BYTE:P.push([{data:H.data,mode:e.BYTE,length:g(H.data)}])}}return P}function I(N,P){const M={},H={start:{}};let j=["start"];for(let $=0;$<N.length;$++){const J=N[$],Y=[];for(let O=0;O<J.length;O++){const D=J[O],q=""+$+O;Y.push(q),M[q]={node:D,lastCount:0},H[q]={};for(let W=0;W<j.length;W++){const x=j[W];M[x]&&M[x].node.mode===D.mode?(H[x][q]=k(M[x].lastCount+D.length,D.mode)-k(M[x].lastCount,D.mode),M[x].lastCount+=D.length):(M[x]&&(M[x].lastCount=D.length),H[x][q]=k(D.length,D.mode)+4+e.getCharCountIndicator(D.mode,P))}}j=Y}for(let $=0;$<j.length;$++)H[j[$]].end=0;return{map:H,table:M}}function E(N,P){let M;const H=e.getBestModeForData(N);if(M=e.from(P,H),M!==e.BYTE&&M.bit<H.bit)throw new Error('"'+N+'" cannot be encoded with mode '+e.toString(M)+`.
 Suggested mode is: `+e.toString(H));switch(M===e.KANJI&&!a.isKanjiModeEnabled()&&(M=e.BYTE),M){case e.NUMERIC:return new t(N);case e.ALPHANUMERIC:return new n(N);case e.KANJI:return new i(N);case e.BYTE:return new s(N)}}r.fromArray=function(P){return P.reduce(function(M,H){return typeof H=="string"?M.push(E(H,null)):H.data&&M.push(E(H.data,H.mode)),M},[])},r.fromString=function(P,M){const H=b(P,a.isKanjiModeEnabled()),j=R(H),$=I(j,M),J=u.find_path($.map,"start","end"),Y=[];for(let O=1;O<J.length-1;O++)Y.push($.table[J[O]].node);return r.fromArray(_(Y))},r.rawSplit=function(P){return r.fromArray(b(P,a.isKanjiModeEnabled()))}}(Ss)),Ss}var Ga;function dp(){if(Ga)return us;Ga=1;const r=Rn(),e=ho(),t=J0(),n=X0(),s=Q0(),i=tp(),o=ep(),a=mu(),u=ip(),g=sp(),m=op(),b=Mn(),k=hp();function _($,J){const Y=$.size,O=i.getPositions(J);for(let D=0;D<O.length;D++){const q=O[D][0],W=O[D][1];for(let x=-1;x<=7;x++)if(!(q+x<=-1||Y<=q+x))for(let c=-1;c<=7;c++)W+c<=-1||Y<=W+c||(x>=0&&x<=6&&(c===0||c===6)||c>=0&&c<=6&&(x===0||x===6)||x>=2&&x<=4&&c>=2&&c<=4?$.set(q+x,W+c,!0,!0):$.set(q+x,W+c,!1,!0))}}function R($){const J=$.size;for(let Y=8;Y<J-8;Y++){const O=Y%2===0;$.set(Y,6,O,!0),$.set(6,Y,O,!0)}}function I($,J){const Y=s.getPositions(J);for(let O=0;O<Y.length;O++){const D=Y[O][0],q=Y[O][1];for(let W=-2;W<=2;W++)for(let x=-2;x<=2;x++)W===-2||W===2||x===-2||x===2||W===0&&x===0?$.set(D+W,q+x,!0,!0):$.set(D+W,q+x,!1,!0)}}function E($,J){const Y=$.size,O=g.getEncodedBits(J);let D,q,W;for(let x=0;x<18;x++)D=Math.floor(x/3),q=x%3+Y-8-3,W=(O>>x&1)===1,$.set(D,q,W,!0),$.set(q,D,W,!0)}function N($,J,Y){const O=$.size,D=m.getEncodedBits(J,Y);let q,W;for(q=0;q<15;q++)W=(D>>q&1)===1,q<6?$.set(q,8,W,!0):q<8?$.set(q+1,8,W,!0):$.set(O-15+q,8,W,!0),q<8?$.set(8,O-q-1,W,!0):q<9?$.set(8,15-q-1+1,W,!0):$.set(8,15-q-1,W,!0);$.set(O-8,8,1,!0)}function P($,J){const Y=$.size;let O=-1,D=Y-1,q=7,W=0;for(let x=Y-1;x>0;x-=2)for(x===6&&x--;;){for(let c=0;c<2;c++)if(!$.isReserved(D,x-c)){let d=!1;W<J.length&&(d=(J[W]>>>q&1)===1),$.set(D,x-c,d),q--,q===-1&&(W++,q=7)}if(D+=O,D<0||Y<=D){D-=O,O=-O;break}}}function M($,J,Y){const O=new t;Y.forEach(function(c){O.put(c.mode.bit,4),O.put(c.getLength(),b.getCharCountIndicator(c.mode,$)),c.write(O)});const D=r.getSymbolTotalCodewords($),q=a.getTotalCodewordsCount($,J),W=(D-q)*8;for(O.getLengthInBits()+4<=W&&O.put(0,4);O.getLengthInBits()%8!==0;)O.putBit(0);const x=(W-O.getLengthInBits())/8;for(let c=0;c<x;c++)O.put(c%2?17:236,8);return H(O,$,J)}function H($,J,Y){const O=r.getSymbolTotalCodewords(J),D=a.getTotalCodewordsCount(J,Y),q=O-D,W=a.getBlocksCount(J,Y),x=O%W,c=W-x,d=Math.floor(O/W),y=Math.floor(q/W),w=y+1,A=d-y,L=new u(A);let F=0;const B=new Array(W),l=new Array(W);let f=0;const S=new Uint8Array($.buffer);for(let ct=0;ct<W;ct++){const _t=ct<c?y:w;B[ct]=S.slice(F,F+_t),l[ct]=L.encode(B[ct]),F+=_t,f=Math.max(f,_t)}const T=new Uint8Array(O);let K=0,X,et;for(X=0;X<f;X++)for(et=0;et<W;et++)X<B[et].length&&(T[K++]=B[et][X]);for(X=0;X<A;X++)for(et=0;et<W;et++)T[K++]=l[et][X];return T}function j($,J,Y,O){let D;if(Array.isArray($))D=k.fromArray($);else if(typeof $=="string"){let d=J;if(!d){const y=k.rawSplit($);d=g.getBestVersionForData(y,Y)}D=k.fromString($,d||40)}else throw new Error("Invalid data");const q=g.getBestVersionForData(D,Y);if(!q)throw new Error("The amount of data is too big to be stored in a QR Code");if(!J)J=q;else if(J<q)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+q+`.
`);const W=M(J,Y,D),x=r.getSymbolSize(J),c=new n(x);return _(c,J),R(c),I(c,J),N(c,Y,0),J>=7&&E(c,J),P(c,W),isNaN(O)&&(O=o.getBestMask(c,N.bind(null,c,Y))),o.applyMask(O,c),N(c,Y,O),{modules:c,version:J,errorCorrectionLevel:Y,maskPattern:O,segments:D}}return us.create=function(J,Y){if(typeof J>"u"||J==="")throw new Error("No input text");let O=e.M,D,q;return typeof Y<"u"&&(O=e.from(Y.errorCorrectionLevel,e.M),D=g.from(Y.version),q=o.from(Y.maskPattern),Y.toSJISFunc&&r.setToSJISFunction(Y.toSJISFunc)),j(J,D,O,q)},us}var ks={},Rs={},Za;function bu(){return Za||(Za=1,function(r){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},r.getImageWidth=function(n,s){const i=r.getScale(n,s);return Math.floor((n+s.margin*2)*i)},r.qrToImageData=function(n,s,i){const o=s.modules.size,a=s.modules.data,u=r.getScale(o,i),g=Math.floor((o+i.margin*2)*u),m=i.margin*u,b=[i.color.light,i.color.dark];for(let k=0;k<g;k++)for(let _=0;_<g;_++){let R=(k*g+_)*4,I=i.color.light;if(k>=m&&_>=m&&k<g-m&&_<g-m){const E=Math.floor((k-m)/u),N=Math.floor((_-m)/u);I=b[a[E*o+N]?1:0]}n[R++]=I.r,n[R++]=I.g,n[R++]=I.b,n[R]=I.a}}}(Rs)),Rs}var Ya;function pp(){return Ya||(Ya=1,function(r){const e=bu();function t(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(i,o,a){let u=a,g=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(g=n()),u=e.getOptions(u);const m=e.getImageWidth(i.modules.size,u),b=g.getContext("2d"),k=b.createImageData(m,m);return e.qrToImageData(k.data,i,u),t(b,g,m),b.putImageData(k,0,0),g},r.renderToDataURL=function(i,o,a){let u=a;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const g=r.render(i,o,u),m=u.type||"image/png",b=u.rendererOpts||{};return g.toDataURL(m,b.quality)}}(ks)),ks}var Ms={},Ja;function gp(){if(Ja)return Ms;Ja=1;const r=bu();function e(s,i){const o=s.a/255,a=i+'="'+s.hex+'"';return o<1?a+" "+i+'-opacity="'+o.toFixed(2).slice(1)+'"':a}function t(s,i,o){let a=s+i;return typeof o<"u"&&(a+=" "+o),a}function n(s,i,o){let a="",u=0,g=!1,m=0;for(let b=0;b<s.length;b++){const k=Math.floor(b%i),_=Math.floor(b/i);!k&&!g&&(g=!0),s[b]?(m++,b>0&&k>0&&s[b-1]||(a+=g?t("M",k+o,.5+_+o):t("m",u,0),u=0,g=!1),k+1<i&&s[b+1]||(a+=t("h",m),m=0)):u++}return a}return Ms.render=function(i,o,a){const u=r.getOptions(o),g=i.modules.size,m=i.modules.data,b=g+u.margin*2,k=u.color.light.a?"<path "+e(u.color.light,"fill")+' d="M0 0h'+b+"v"+b+'H0z"/>':"",_="<path "+e(u.color.dark,"stroke")+' d="'+n(m,g,u.margin)+'"/>',R='viewBox="0 0 '+b+" "+b+'"',E='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+R+' shape-rendering="crispEdges">'+k+_+`</svg>
`;return typeof a=="function"&&a(null,E),E},Ms}var Xa;function mp(){if(Xa)return Nn;Xa=1;const r=Y0(),e=dp(),t=pp(),n=gp();function s(i,o,a,u,g){const m=[].slice.call(arguments,1),b=m.length,k=typeof m[b-1]=="function";if(!k&&!r())throw new Error("Callback required as last argument");if(k){if(b<2)throw new Error("Too few arguments provided");b===2?(g=a,a=o,o=u=void 0):b===3&&(o.getContext&&typeof g>"u"?(g=u,u=void 0):(g=u,u=a,a=o,o=void 0))}else{if(b<1)throw new Error("Too few arguments provided");return b===1?(a=o,o=u=void 0):b===2&&!o.getContext&&(u=a,a=o,o=void 0),new Promise(function(_,R){try{const I=e.create(a,u);_(i(I,o,u))}catch(I){R(I)}})}try{const _=e.create(a,u);g(null,i(_,o,u))}catch(_){g(_)}}return Nn.create=e.create,Nn.toCanvas=s.bind(null,t.render),Nn.toDataURL=s.bind(null,t.renderToDataURL),Nn.toString=s.bind(null,function(i,o,a){return n.render(i,a)}),Nn}mp();function At(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(m){try{g(n.next(m))}catch(b){o(b)}}function u(m){try{g(n.throw(m))}catch(b){o(b)}}function g(m){m.done?i(m.value):s(m.value).then(a,u)}g((n=n.apply(r,[])).next())})}function Tr(r){return new Uint8Array(window.atob(r).split("").map(e=>e.charCodeAt(0)))}function yp(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}const or="Mobile Wallet Adapter",wp=64;function bp(r){const e=Tr(r);return new ht(e)}function Qa(r){return"version"in r}function vp(r){switch(r){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet"}}class Ep extends Nu{constructor(e){var t;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=or,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=yp()?Nt.Loadable:Nt.Unsupported,this._authorizationResultCache=e.authorizationResultCache,this._addressSelector=e.addressSelector,this._appIdentity=e.appIdentity,this._chain=(t=e.chain)!==null&&t!==void 0?t:vp(e.cluster),this._hostAuthority=e.remoteHostAuthority,this._onWalletNotFound=e.onWalletNotFound,this._readyState!==Nt.Unsupported&&this._authorizationResultCache.get().then(n=>{n&&this.declareWalletAsInstalled()})}get publicKey(){if(this._publicKey==null&&this._selectedAddress!=null)try{this._publicKey=bp(this._selectedAddress)}catch(e){throw new lc(e instanceof Error&&e?.message||"Unknown error",e)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==Nt.Installed&&this.emit("readyStateChange",this._readyState=Nt.Installed)}runWithGuard(e){return At(this,void 0,void 0,function*(){try{return yield e()}catch(t){throw this.emit("error",t),t}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return At(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return At(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){if(this._readyState!==Nt.Installed&&this._readyState!==Nt.Loadable)throw new qn;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();e&&this.handleAuthorizationResult(e)}catch(e){throw new rr(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}connect(){return At(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){if(this._readyState!==Nt.Installed&&this._readyState!==Nt.Loadable)throw new qn;this._connecting=!0;try{yield this.performAuthorization()}catch(e){throw new rr(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}performAuthorization(e){return At(this,void 0,void 0,function*(){try{const t=yield this._authorizationResultCache.get();return t?(this.handleAuthorizationResult(t),t):yield this.transact(n=>At(this,void 0,void 0,function*(){const s=yield n.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:e});return Promise.all([this._authorizationResultCache.set(s),this.handleAuthorizationResult(s)]),s}))}catch(t){throw new rr(t instanceof Error&&t.message||"Unknown error",t)}})}handleAuthorizationResult(e){var t;return At(this,void 0,void 0,function*(){const n=this._authorizationResult==null||((t=this._authorizationResult)===null||t===void 0?void 0:t.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some((s,i)=>s.address!==e.accounts[i].address);if(this._authorizationResult=e,this.declareWalletAsInstalled(),n){const s=yield this._addressSelector.select(e.accounts.map(({address:i})=>i));s!==this._selectedAddress&&(this._selectedAddress=s,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(e,t){return At(this,void 0,void 0,function*(){try{const n=yield e.authorize({auth_token:t,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(n),this.handleAuthorizationResult(n)])}catch(n){throw this.disconnect(),new uc(n instanceof Error&&n?.message||"Unknown error",n)}})}disconnect(){return At(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(e){var t;return At(this,void 0,void 0,function*(){const n=(t=this._authorizationResult)===null||t===void 0?void 0:t.wallet_uri_base,s=n?{baseUri:n}:void 0,i=this._hostAuthority?{remoteHostAuthority:this._hostAuthority}:void 0,o=this._connectionGeneration;try{return yield Z0(e,Object.assign(Object.assign({},s),i))}catch(a){throw this._connectionGeneration!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield this._onWalletNotFound(this)),a}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new He;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(e){return At(this,void 0,void 0,function*(){const{authToken:t}=this.assertIsAuthorized();try{return yield this.transact(n=>At(this,void 0,void 0,function*(){return yield this.performReauthorization(n,t),yield n.signTransactions({transactions:e})}))}catch(n){throw new mn(n?.message,n)}})}sendTransaction(e,t,n){return At(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){const{authToken:s}=this.assertIsAuthorized(),i=n?.minContextSlot;try{return yield this.transact(o=>At(this,void 0,void 0,function*(){function a(){let b;switch(t.commitment){case"confirmed":case"finalized":case"processed":b=t.commitment;break;default:b="finalized"}let k;switch(n?.preflightCommitment){case"confirmed":case"finalized":case"processed":k=n.preflightCommitment;break;case void 0:k=b;break;default:k="finalized"}return(k==="finalized"?2:k==="confirmed"?1:0)<(b==="finalized"?2:b==="confirmed"?1:0)?k:b}const[u,g,m]=yield Promise.all([o.getCapabilities(),this.performReauthorization(o,s),Qa(e)?null:At(this,void 0,void 0,function*(){var b;if(e.feePayer||(e.feePayer=(b=this.publicKey)!==null&&b!==void 0?b:void 0),e.recentBlockhash==null){const{blockhash:k}=yield t.getLatestBlockhash({commitment:a()});e.recentBlockhash=k}})]);if(u.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions({minContextSlot:i,transactions:[e]}))[0];{const[b]=yield o.signTransactions({transactions:[e]});if(Qa(b))return yield t.sendTransaction(b);{const k=b.serialize();return yield t.sendRawTransaction(k,Object.assign(Object.assign({},n),{preflightCommitment:a()}))}}}))}catch(o){throw new gn(o?.message,o)}}))})}signTransaction(e){return At(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){const[t]=yield this.performSignTransactions([e]);return t}))})}signAllTransactions(e){return At(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){return yield this.performSignTransactions(e)}))})}signMessage(e){return At(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){const{authToken:t,selectedAddress:n}=this.assertIsAuthorized();try{return yield this.transact(s=>At(this,void 0,void 0,function*(){yield this.performReauthorization(s,t);const[i]=yield s.signMessages({addresses:[n],payloads:[e]});return i.slice(-wp)}))}catch(s){throw new fc(s?.message,s)}}))})}signIn(e){return At(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>At(this,void 0,void 0,function*(){var t,n;if(this._readyState!==Nt.Installed&&this._readyState!==Nt.Loadable)throw new qn;this._connecting=!0;try{const s=yield this.performAuthorization(Object.assign(Object.assign({},e),{domain:(t=e?.domain)!==null&&t!==void 0?t:window.location.host}));if(!s.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const i=s.sign_in_result.address;return{account:Object.assign(Object.assign({},(n=s.accounts.find(a=>a.address==i))!==null&&n!==void 0?n:{address:i}),{publicKey:Tr(i)}),signedMessage:Tr(s.sign_in_result.signed_message),signature:Tr(s.sign_in_result.signature)}}catch(s){throw new rr(s instanceof Error&&s.message||"Unknown error",s)}finally{this._connecting=!1}}))})}}function Sp(){return{select(r){return At(this,void 0,void 0,function*(){return r[0]})}}}const Cs="SolanaMobileWalletAdapterDefaultAuthorizationCache";function xp(){let r;try{r=window.localStorage}catch{}return{clear(){return At(this,void 0,void 0,function*(){if(r)try{r.removeItem(Cs)}catch{}})},get(){return At(this,void 0,void 0,function*(){if(r)try{return JSON.parse(r.getItem(Cs))||void 0}catch{}})},set(e){return At(this,void 0,void 0,function*(){if(r)try{r.setItem(Cs,JSON.stringify(e))}catch{}})}}}function _p(r){return At(this,void 0,void 0,function*(){typeof window<"u"&&window.location.assign(r.url)})}function Ap(){return _p}var Bp=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Ip=function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},Lr;function gg(r){const e=({register:t})=>t(r);try{window.dispatchEvent(new kp(e))}catch(t){console.error(`wallet-standard:register-wallet event could not be dispatched
`,t)}try{window.addEventListener("wallet-standard:app-ready",({detail:t})=>e(t))}catch(t){console.error(`wallet-standard:app-ready event listener could not be added
`,t)}}class kp extends Event{get detail(){return Bp(this,Lr,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),Lr.set(this,void 0),Ip(this,Lr,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Lr=new WeakMap;function Rp(r,e){if(r===e)return!0;const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function Mp(r){if(r.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let g=0;g<e.length;g++)e[g]=255;for(let g=0;g<r.length;g++){const m=r.charAt(g),b=m.charCodeAt(0);if(e[b]!==255)throw new TypeError(m+" is ambiguous");e[b]=g}const t=r.length,n=r.charAt(0),s=Math.log(t)/Math.log(256),i=Math.log(256)/Math.log(t);function o(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";let m=0,b=0,k=0;const _=g.length;for(;k!==_&&g[k]===0;)k++,m++;const R=(_-k)*i+1>>>0,I=new Uint8Array(R);for(;k!==_;){let P=g[k],M=0;for(let H=R-1;(P!==0||M<b)&&H!==-1;H--,M++)P+=256*I[H]>>>0,I[H]=P%t>>>0,P=P/t>>>0;if(P!==0)throw new Error("Non-zero carry");b=M,k++}let E=R-b;for(;E!==R&&I[E]===0;)E++;let N=n.repeat(m);for(;E<R;++E)N+=r.charAt(I[E]);return N}function a(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;let m=0,b=0,k=0;for(;g[m]===n;)b++,m++;const _=(g.length-m)*s+1>>>0,R=new Uint8Array(_);for(;m<g.length;){const P=g.charCodeAt(m);if(P>255)return;let M=e[P];if(M===255)return;let H=0;for(let j=_-1;(M!==0||H<k)&&j!==-1;j--,H++)M+=t*R[j]>>>0,R[j]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");k=H,m++}let I=_-k;for(;I!==_&&R[I]===0;)I++;const E=new Uint8Array(b+(_-I));let N=b;for(;I!==_;)E[N++]=R[I++];return E}function u(g){const m=a(g);if(m)return m;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:a,decode:u}}var Cp="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Tp=Mp(Cp);var ut=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},le=function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},be,Re,bn,vn,dn,sr,jr,Bt,Vr,$s,Nr,js,ar,Vs,tc,ec,nc,rc;class Lp extends hc{get name(){return ut(this,Bt,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return ut(this,Bt,"f").icon}get readyState(){return ut(this,Vr,"f")}get publicKey(){return ut(this,bn,"f")}get connecting(){return ut(this,vn,"f")}get supportedTransactionVersions(){return ut(this,jr,"f")}get wallet(){return ut(this,Bt,"f")}get standard(){return!0}constructor({wallet:e}){super(),be.add(this),Re.set(this,void 0),bn.set(this,void 0),vn.set(this,void 0),dn.set(this,void 0),sr.set(this,void 0),jr.set(this,void 0),Bt.set(this,void 0),Vr.set(this,typeof window>"u"||typeof document>"u"?Nt.Unsupported:Nt.Installed),Vs.set(this,t=>{if("accounts"in t){const n=ut(this,Bt,"f").accounts[0];ut(this,Re,"f")&&!ut(this,dn,"f")&&n!==ut(this,Re,"f")&&(n?ut(this,be,"m",Nr).call(this,n):(this.emit("error",new uc),ut(this,be,"m",js).call(this)))}"features"in t&&ut(this,be,"m",ar).call(this)}),le(this,Bt,e,"f"),le(this,Re,null,"f"),le(this,bn,null,"f"),le(this,vn,!1,"f"),le(this,dn,!1,"f"),le(this,sr,ut(this,Bt,"f").features[pc].on("change",ut(this,Vs,"f")),"f"),ut(this,be,"m",ar).call(this)}destroy(){le(this,Re,null,"f"),le(this,bn,null,"f"),le(this,vn,!1,"f"),le(this,dn,!1,"f");const e=ut(this,sr,"f");e&&(le(this,sr,null,"f"),e())}async autoConnect(){return ut(this,be,"m",$s).call(this,{silent:!0})}async connect(){return ut(this,be,"m",$s).call(this)}async disconnect(){if(_o in ut(this,Bt,"f").features)try{le(this,dn,!0,"f"),await ut(this,Bt,"f").features[_o].disconnect()}catch(e){this.emit("error",new Cu(e?.message,e))}finally{le(this,dn,!1,"f")}ut(this,be,"m",js).call(this)}async sendTransaction(e,t,n={}){try{const s=ut(this,Re,"f");if(!s)throw new He;let i;if(un in ut(this,Bt,"f").features)if(s.features.includes(un))i=un;else if(we in ut(this,Bt,"f").features&&s.features.includes(we))i=we;else throw new Un;else if(we in ut(this,Bt,"f").features){if(!s.features.includes(we))throw new Un;i=we}else throw new nr;const o=f0(t.rpcEndpoint);if(!s.chains.includes(o))throw new gn;try{const{signers:a,...u}=n;let g;if(yn(e)?(a?.length&&e.sign(a),g=e.serialize()):(e=await this.prepareTransaction(e,t,u),a?.length&&e.partialSign(...a),g=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),i===un){const[m]=await ut(this,Bt,"f").features[un].signAndSendTransaction({account:s,chain:o,transaction:g,options:{preflightCommitment:ts(u.preflightCommitment||t.commitment),skipPreflight:u.skipPreflight,maxRetries:u.maxRetries,minContextSlot:u.minContextSlot}});return Tp.encode(m.signature)}else{const[m]=await ut(this,Bt,"f").features[we].signTransaction({account:s,chain:o,transaction:g,options:{preflightCommitment:ts(u.preflightCommitment||t.commitment),minContextSlot:u.minContextSlot}});return await t.sendRawTransaction(m.signedTransaction,{...u,preflightCommitment:ts(u.preflightCommitment||t.commitment)})}}catch(a){throw a instanceof Ae?a:new gn(a?.message,a)}}catch(s){throw this.emit("error",s),s}}}Re=new WeakMap,bn=new WeakMap,vn=new WeakMap,dn=new WeakMap,sr=new WeakMap,jr=new WeakMap,Bt=new WeakMap,Vr=new WeakMap,Vs=new WeakMap,be=new WeakSet,$s=async function(e){try{if(this.connected||this.connecting)return;if(ut(this,Vr,"f")!==Nt.Installed)throw new qn;if(le(this,vn,!0,"f"),!ut(this,Bt,"f").accounts.length)try{await ut(this,Bt,"f").features[dc].connect(e)}catch(n){throw new rr(n?.message,n)}const t=ut(this,Bt,"f").accounts[0];if(!t)throw new Un;ut(this,be,"m",Nr).call(this,t)}catch(t){throw this.emit("error",t),t}finally{le(this,vn,!1,"f")}},Nr=function(e){let t;try{t=new ht(e.address)}catch(n){throw new lc(n?.message,n)}le(this,Re,e,"f"),le(this,bn,t,"f"),ut(this,be,"m",ar).call(this),this.emit("connect",t)},js=function(){le(this,Re,null,"f"),le(this,bn,null,"f"),ut(this,be,"m",ar).call(this),this.emit("disconnect")},ar=function(){const e=un in ut(this,Bt,"f").features?ut(this,Bt,"f").features[un].supportedTransactionVersions:ut(this,Bt,"f").features[we].supportedTransactionVersions;le(this,jr,Rp(e,["legacy"])?null:new Set(e),"f"),we in ut(this,Bt,"f").features&&ut(this,Re,"f")?.features.includes(we)?(this.signTransaction=ut(this,be,"m",tc),this.signAllTransactions=ut(this,be,"m",ec)):(delete this.signTransaction,delete this.signAllTransactions),Jn in ut(this,Bt,"f").features&&ut(this,Re,"f")?.features.includes(Jn)?this.signMessage=ut(this,be,"m",nc):delete this.signMessage,ki in ut(this,Bt,"f").features?this.signIn=ut(this,be,"m",rc):delete this.signIn},tc=async function(e){try{const t=ut(this,Re,"f");if(!t)throw new He;if(!(we in ut(this,Bt,"f").features))throw new nr;if(!t.features.includes(we))throw new Un;try{const s=(await ut(this,Bt,"f").features[we].signTransaction({account:t,transaction:yn(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return yn(e)?dr.deserialize(s):Oe.from(s)}catch(n){throw n instanceof Ae?n:new mn(n?.message,n)}}catch(t){throw this.emit("error",t),t}},ec=async function(e){try{const t=ut(this,Re,"f");if(!t)throw new He;if(!(we in ut(this,Bt,"f").features))throw new nr;if(!t.features.includes(we))throw new Un;try{const n=await ut(this,Bt,"f").features[we].signTransaction(...e.map(s=>({account:t,transaction:yn(s)?s.serialize():new Uint8Array(s.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((s,i)=>{const o=n[i].signedTransaction;return yn(s)?dr.deserialize(o):Oe.from(o)})}catch(n){throw new mn(n?.message,n)}}catch(t){throw this.emit("error",t),t}},nc=async function(e){try{const t=ut(this,Re,"f");if(!t)throw new He;if(!(Jn in ut(this,Bt,"f").features))throw new nr;if(!t.features.includes(Jn))throw new Un;try{return(await ut(this,Bt,"f").features[Jn].signMessage({account:t,message:e}))[0].signature}catch(n){throw new fc(n?.message,n)}}catch(t){throw this.emit("error",t),t}},rc=async function(e={}){try{if(!(ki in ut(this,Bt,"f").features))throw new nr;let t;try{[t]=await ut(this,Bt,"f").features[ki].signIn(e)}catch(n){throw new xo(n?.message,n)}if(!t)throw new xo;return ut(this,be,"m",Nr).call(this,t.account),t}catch(t){throw this.emit("error",t),t}};const Np=Pu;var Pp=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Up=function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},Pr;let Me;const ai=new Set;function Op(r){cr=void 0,ai.add(r)}function Fp(r){cr=void 0,ai.delete(r)}const Dn={};function Dp(){if(Me||(Me=Object.freeze({register:ic,get:qp,on:zp}),typeof window>"u"))return Me;const r=Object.freeze({register:ic});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(r))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new Wp(r))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return Me}function ic(...r){return r=r.filter(e=>!ai.has(e)),r.length?(r.forEach(e=>Op(e)),Dn.register?.forEach(e=>Gs(()=>e(...r))),function(){r.forEach(t=>Fp(t)),Dn.unregister?.forEach(t=>Gs(()=>t(...r)))}):()=>{}}let cr;function qp(){return cr||(cr=[...ai]),cr}function zp(r,e){return Dn[r]?.push(e)||(Dn[r]=[e]),function(){Dn[r]=Dn[r]?.filter(n=>e!==n)}}function Gs(r){try{r()}catch(e){console.error(e)}}class Wp extends Event{get detail(){return Pp(this,Pr,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),Pr.set(this,void 0),Up(this,Pr,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Pr=new WeakMap;function Kp(){if(Me||(Me=Dp(),typeof window>"u"))return Me;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),Me;const{register:e}=Me,t=(...n)=>n.forEach(s=>Gs(()=>s({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),Me}return t(...r),Me}function Hp(r){const e=sc(()=>new Set),{get:t,on:n}=sc(()=>Kp()),[s,i]=st.useState(()=>oc(t()));st.useEffect(()=>{const a=[n("register",(...u)=>i(g=>[...g,...oc(u)])),n("unregister",(...u)=>i(g=>g.filter(m=>u.some(b=>b===m.wallet))))];return()=>a.forEach(u=>u())},[n]);const o=$p(s);return st.useEffect(()=>{if(!o)return;const a=new Set(s);new Set(o.filter(g=>!a.has(g))).forEach(g=>g.destroy())},[o,s]),st.useEffect(()=>()=>s.forEach(a=>a.destroy()),[]),st.useMemo(()=>[...s,...r.filter(({name:a})=>s.some(u=>u.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[s,r,e])}function sc(r){const e=st.useRef(void 0);return e.current===void 0&&(e.current={value:r()}),e.current.value}function $p(r){const e=st.useRef(void 0);return st.useEffect(()=>{e.current=r}),e.current}function oc(r){return r.filter(Np).map(e=>new Lp({wallet:e}))}var Kn;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(Kn||(Kn={}));function jp(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function Vp({adapters:r,userAgentString:e}){return r.some(t=>t.name!==or&&t.readyState===Nt.Installed)?Kn.DESKTOP_WEB:e&&/android/i.test(e)&&!jp(e)?Kn.MOBILE_WEB:Kn.DESKTOP_WEB}function Gp(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function Zp({children:r,wallets:e,adapter:t,isUnloadingRef:n,onAutoConnectRequest:s,onConnectError:i,onError:o,onSelectWallet:a}){const u=st.useRef(!1),[g,m]=st.useState(!1),b=st.useRef(!1),[k,_]=st.useState(!1),[R,I]=st.useState(()=>t?.publicKey??null),[E,N]=st.useState(()=>t?.connected??!1),P=st.useRef(o);st.useEffect(()=>(P.current=o,()=>{P.current=void 0}),[o]);const M=st.useRef((d,y)=>(n.current||(P.current?P.current(d,y):(console.error(d,y),d instanceof qn&&typeof window<"u"&&y&&window.open(y.url,"_blank"))),d)),[H,j]=st.useState(()=>e.map(d=>({adapter:d,readyState:d.readyState})).filter(({readyState:d})=>d!==Nt.Unsupported));st.useEffect(()=>{j(y=>e.map((w,A)=>{const L=y[A];return L&&L.adapter===w&&L.readyState===w.readyState?L:{adapter:w,readyState:w.readyState}}).filter(({readyState:w})=>w!==Nt.Unsupported));function d(y){j(w=>{const A=w.findIndex(({adapter:F})=>F===this);if(A===-1)return w;const{adapter:L}=w[A];return[...w.slice(0,A),{adapter:L,readyState:y},...w.slice(A+1)].filter(({readyState:F})=>F!==Nt.Unsupported)})}return e.forEach(y=>y.on("readyStateChange",d,y)),()=>{e.forEach(y=>y.off("readyStateChange",d,y))}},[t,e]);const $=st.useMemo(()=>H.find(d=>d.adapter===t)??null,[t,H]);st.useEffect(()=>{if(!t)return;const d=A=>{I(A),u.current=!1,m(!1),N(!0),b.current=!1,_(!1)},y=()=>{n.current||(I(null),u.current=!1,m(!1),N(!1),b.current=!1,_(!1))},w=A=>{M.current(A,t)};return t.on("connect",d),t.on("disconnect",y),t.on("error",w),()=>{t.off("connect",d),t.off("disconnect",y),t.off("error",w),y()}},[t,n]);const J=st.useRef(!1);st.useEffect(()=>()=>{J.current=!1},[t]),st.useEffect(()=>{J.current||u.current||E||!s||!($?.readyState===Nt.Installed||$?.readyState===Nt.Loadable)||(u.current=!0,m(!0),J.current=!0,async function(){try{await s()}catch{i()}finally{m(!1),u.current=!1}}())},[E,s,i,$]);const Y=st.useCallback(async(d,y,w)=>{if(!t)throw M.current(new ma);if(!E)throw M.current(new He,t);return await t.sendTransaction(d,y,w)},[t,E]),O=st.useMemo(()=>t&&"signTransaction"in t?async d=>{if(!E)throw M.current(new He,t);return await t.signTransaction(d)}:void 0,[t,E]),D=st.useMemo(()=>t&&"signAllTransactions"in t?async d=>{if(!E)throw M.current(new He,t);return await t.signAllTransactions(d)}:void 0,[t,E]),q=st.useMemo(()=>t&&"signMessage"in t?async d=>{if(!E)throw M.current(new He,t);return await t.signMessage(d)}:void 0,[t,E]),W=st.useMemo(()=>t&&"signIn"in t?async d=>await t.signIn(d):void 0,[t]),x=st.useCallback(async()=>{if(u.current||b.current||$?.adapter.connected)return;if(!$)throw M.current(new ma);const{adapter:d,readyState:y}=$;if(!(y===Nt.Installed||y===Nt.Loadable))throw M.current(new qn,d);u.current=!0,m(!0);try{await d.connect()}catch(w){throw i(),w}finally{m(!1),u.current=!1}},[i,$]),c=st.useCallback(async()=>{if(!b.current&&t){b.current=!0,_(!0);try{await t.disconnect()}finally{_(!1),b.current=!1}}},[t]);return nt.createElement(cu.Provider,{value:{autoConnect:!!s,wallets:H,wallet:$,publicKey:R,connected:E,connecting:g,disconnecting:k,select:a,connect:x,disconnect:c,sendTransaction:Y,signTransaction:O,signAllTransactions:D,signMessage:q,signIn:W}},r)}let Ts;function Yp(){return Ts===void 0&&(Ts=globalThis.navigator?.userAgent??null),Ts}function ac(r){const e=Yp();return Vp({adapters:r,userAgentString:e})===Kn.MOBILE_WEB}function Jp(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function mg({children:r,wallets:e,autoConnect:t,localStorageKey:n="walletName",onError:s}){const{connection:i}=i0(),o=Hp(e),a=st.useMemo(()=>{if(!ac(o))return null;const P=o.find(M=>M.name===or);return P||new Ep({addressSelector:Sp(),appIdentity:{uri:Jp()},authorizationResultCache:xp(),cluster:Gp(i?.rpcEndpoint),onWalletNotFound:Ap()})},[o,i?.rpcEndpoint]),u=st.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[g,m]=o0(n,null),b=st.useMemo(()=>u.find(P=>P.name===g)??null,[u,g]),k=st.useCallback(P=>{g!==P&&(b&&b.name!==or&&b.disconnect(),m(P))},[b,m,g]);st.useEffect(()=>{if(!b)return;function P(){I.current||m(null)}return b.on("disconnect",P),()=>{b.off("disconnect",P)}},[b,o,m,g]);const _=st.useRef(!1),R=st.useMemo(()=>{if(!(!t||!b))return async()=>{(t===!0||await t(b))&&(_.current?await b.connect():await b.autoConnect())}},[t,b]),I=st.useRef(!1);st.useEffect(()=>{if(g===or&&ac(o)){I.current=!1;return}function P(){I.current=!0}return window.addEventListener("beforeunload",P),()=>{window.removeEventListener("beforeunload",P)}},[o,g]);const E=st.useCallback(()=>{b&&k(null)},[b,k]),N=st.useCallback(P=>{_.current=!0,k(P)},[k]);return nt.createElement(Zp,{wallets:u,adapter:b,isUnloadingRef:I,onAutoConnectRequest:R,onConnectError:E,onError:s,onSelectWallet:N},r)}const vu={setVisible(r){console.error(Eu("call","setVisible"))},visible:!1};Object.defineProperty(vu,"visible",{get(){return console.error(Eu("read","visible")),!1}});function Eu(r,e){return`You have tried to  ${r} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const Su=st.createContext(vu);function xu(){return st.useContext(Su)}function Xp({onSelectWallet:r}){const{connect:e,connected:t,connecting:n,disconnect:s,disconnecting:i,publicKey:o,select:a,wallet:u,wallets:g}=uu();let m;n?m="connecting":t?m="connected":i?m="disconnecting":u?m="has-wallet":m="no-wallet";const b=st.useCallback(()=>{e().catch(()=>{})},[e]),k=st.useCallback(()=>{s().catch(()=>{})},[s]),_=st.useCallback(()=>{r({onSelectWallet:a,wallets:g})},[r,a,g]);return{buttonState:m,onConnect:m==="has-wallet"?b:void 0,onDisconnect:m!=="disconnecting"&&m!=="no-wallet"?k:void 0,onSelectWallet:_,publicKey:o??void 0,walletIcon:u?.adapter.icon,walletName:u?.adapter.name}}const _u=r=>nt.createElement("button",{className:`wallet-adapter-button ${r.className||""}`,disabled:r.disabled,style:r.style,onClick:r.onClick,tabIndex:r.tabIndex||0,type:"button"},r.startIcon&&nt.createElement("i",{className:"wallet-adapter-button-start-icon"},r.startIcon),r.children,r.endIcon&&nt.createElement("i",{className:"wallet-adapter-button-end-icon"},r.endIcon)),Au=({wallet:r,...e})=>r&&nt.createElement("img",{src:r.adapter.icon,alt:`${r.adapter.name} icon`,...e});function Qp({walletIcon:r,walletName:e,...t}){return nt.createElement(_u,{...t,className:"wallet-adapter-button-trigger",startIcon:r&&e?nt.createElement(Au,{wallet:{adapter:{icon:r,name:e}}}):void 0})}function tg({children:r,labels:e,...t}){const{setVisible:n}=xu(),{buttonState:s,onConnect:i,onDisconnect:o,publicKey:a,walletIcon:u,walletName:g}=Xp({onSelectWallet(){n(!0)}}),[m,b]=st.useState(!1),[k,_]=st.useState(!1),R=st.useRef(null);st.useEffect(()=>{const E=N=>{const P=R.current;!P||P.contains(N.target)||_(!1)};return document.addEventListener("mousedown",E),document.addEventListener("touchstart",E),()=>{document.removeEventListener("mousedown",E),document.removeEventListener("touchstart",E)}},[]);const I=st.useMemo(()=>{if(r)return r;if(a){const E=a.toBase58();return E.slice(0,4)+".."+E.slice(-4)}else return s==="connecting"||s==="has-wallet"?e[s]:e["no-wallet"]},[s,r,e,a]);return nt.createElement("div",{className:"wallet-adapter-dropdown"},nt.createElement(Qp,{...t,"aria-expanded":k,style:{pointerEvents:k?"none":"auto",...t.style},onClick:()=>{switch(s){case"no-wallet":n(!0);break;case"has-wallet":i&&i();break;case"connected":_(!0);break}},walletIcon:u,walletName:g},I),nt.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${k&&"wallet-adapter-dropdown-list-active"}`,ref:R,role:"menu"},a?nt.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(a.toBase58()),b(!0),setTimeout(()=>b(!1),400)},role:"menuitem"},m?e.copied:e["copy-address"]):null,nt.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{n(!0),_(!1)},role:"menuitem"},e["change-wallet"]),o?nt.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),_(!1)},role:"menuitem"},e.disconnect):null))}var eg=Iu();const cc=({id:r,children:e,expanded:t=!1})=>{const n=st.useRef(null),s=st.useRef(!0),i="height 250ms ease-out",o=()=>{const u=n.current;u&&requestAnimationFrame(()=>{u.style.height=u.scrollHeight+"px"})},a=()=>{const u=n.current;u&&requestAnimationFrame(()=>{u.style.height=u.offsetHeight+"px",u.style.overflow="hidden",requestAnimationFrame(()=>{u.style.height="0"})})};return st.useLayoutEffect(()=>{t?o():a()},[t]),st.useLayoutEffect(()=>{const u=n.current;if(!u)return;function g(){u&&(u.style.overflow=t?"initial":"hidden",t&&(u.style.height="auto"))}function m(b){u&&b.target===u&&b.propertyName==="height"&&g()}return s.current&&(g(),s.current=!1),u.addEventListener("transitionend",m),()=>u.removeEventListener("transitionend",m)},[t]),nt.createElement("div",{className:"wallet-adapter-collapse",id:r,ref:n,role:"region",style:{height:0,transition:s.current?void 0:i}},e)},Ls=({handleClick:r,tabIndex:e,wallet:t})=>nt.createElement("li",null,nt.createElement(_u,{onClick:r,startIcon:nt.createElement(Au,{wallet:t}),tabIndex:e},t.adapter.name,t.readyState===Nt.Installed&&nt.createElement("span",null,"Detected"))),ng=()=>nt.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nt.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),nt.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),nt.createElement("g",{clipPath:"url(#clip0_880_5115)"},nt.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),nt.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),nt.createElement("defs",null,nt.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},nt.createElement("stop",{stopColor:"#9945FF"}),nt.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),nt.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),nt.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),nt.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),nt.createElement("stop",{offset:"1",stopColor:"#00D18C"})),nt.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},nt.createElement("stop",{stopColor:"#9945FF"}),nt.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),nt.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),nt.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),nt.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),nt.createElement("stop",{offset:"1",stopColor:"#00D18C"})),nt.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},nt.createElement("stop",{stopColor:"#9945FF"}),nt.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),nt.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),nt.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),nt.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),nt.createElement("stop",{offset:"1",stopColor:"#00D18C"})),nt.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},nt.createElement("stop",{stopColor:"#9945FF"}),nt.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),nt.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),nt.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),nt.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),nt.createElement("stop",{offset:"1",stopColor:"#00D18C"})),nt.createElement("clipPath",{id:"clip0_880_5115"},nt.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),rg=({className:r="",container:e="body"})=>{const t=st.useRef(null),{wallets:n,select:s}=uu(),{setVisible:i}=xu(),[o,a]=st.useState(!1),[u,g]=st.useState(!1),[m,b]=st.useState(null),[k,_]=st.useMemo(()=>{const M=[],H=[];for(const j of n)j.readyState===Nt.Installed?M.push(j):H.push(j);return M.length?[M,H]:[H,[]]},[n]),R=st.useCallback(()=>{g(!1),setTimeout(()=>i(!1),150)},[i]),I=st.useCallback(M=>{M.preventDefault(),R()},[R]),E=st.useCallback((M,H)=>{s(H),I(M)},[s,I]),N=st.useCallback(()=>a(!o),[o]),P=st.useCallback(M=>{const H=t.current;if(!H)return;const j=H.querySelectorAll("button"),$=j[0],J=j[j.length-1];M.shiftKey?document.activeElement===$&&(J.focus(),M.preventDefault()):document.activeElement===J&&($.focus(),M.preventDefault())},[t]);return st.useLayoutEffect(()=>{const M=j=>{j.key==="Escape"?R():j.key==="Tab"&&P(j)},{overflow:H}=window.getComputedStyle(document.body);return setTimeout(()=>g(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",M,!1),()=>{document.body.style.overflow=H,window.removeEventListener("keydown",M,!1)}},[R,P]),st.useLayoutEffect(()=>b(document.querySelector(e)),[e]),m&&eg.createPortal(nt.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${u&&"wallet-adapter-modal-fade-in"} ${r}`,ref:t,role:"dialog"},nt.createElement("div",{className:"wallet-adapter-modal-container"},nt.createElement("div",{className:"wallet-adapter-modal-wrapper"},nt.createElement("button",{onClick:I,className:"wallet-adapter-modal-button-close"},nt.createElement("svg",{width:"14",height:"14"},nt.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),k.length?nt.createElement(nt.Fragment,null,nt.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),nt.createElement("ul",{className:"wallet-adapter-modal-list"},k.map(M=>nt.createElement(Ls,{key:M.adapter.name,handleClick:H=>E(H,M.adapter.name),wallet:M})),_.length?nt.createElement(cc,{expanded:o,id:"wallet-adapter-modal-collapse"},_.map(M=>nt.createElement(Ls,{key:M.adapter.name,handleClick:H=>E(H,M.adapter.name),tabIndex:o?0:-1,wallet:M}))):null),_.length?nt.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:N,tabIndex:0},nt.createElement("span",null,o?"Less ":"More ","options"),nt.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},nt.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):nt.createElement(nt.Fragment,null,nt.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),nt.createElement("div",{className:"wallet-adapter-modal-middle"},nt.createElement(ng,null)),_.length?nt.createElement(nt.Fragment,null,nt.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:N,tabIndex:0},nt.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),nt.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},nt.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),nt.createElement(cc,{expanded:o,id:"wallet-adapter-modal-collapse"},nt.createElement("ul",{className:"wallet-adapter-modal-list"},_.map(M=>nt.createElement(Ls,{key:M.adapter.name,handleClick:H=>E(H,M.adapter.name),tabIndex:o?0:-1,wallet:M}))))):null))),nt.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:I})),m)},yg=({children:r,...e})=>{const[t,n]=st.useState(!1);return nt.createElement(Su.Provider,{value:{visible:t,setVisible:n}},r,t&&nt.createElement(rg,{...e}))},ig={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function wg(r){return nt.createElement(tg,{...r,labels:ig})}export{Ql as A,Lu as B,qi as C,mt as D,Kr as E,De as F,st as G,wg as H,r0 as I,uu as J,Cr as K,dg as L,hg as M,Ao as N,pg as O,ht as P,mg as Q,yg as R,ya as S,Oe as T,nt as U,dr as V,Nt as W,uc as a,lc as b,qn as c,rr as d,Un as e,Cu as f,He as g,yn as h,cg as i,Ae as j,gn as k,mn as l,fc as m,a0 as n,c0 as o,Jn as p,we as q,un as r,ag as s,pc as t,_o as u,dc as v,gg as w,og as x,nr as y,Tu as z};
//# sourceMappingURL=solana-Db9ZLp6L.js.map
