{"version":3,"mappings":"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","names":["bufferPolyfill.Buffer","fn","testBuffer","err","f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","buffer","client","PhantomWalletName","PhantomWalletAdapter","BaseMessageSignerWalletAdapter","config","WalletReadyState","wallet","WalletDisconnectedError","newPublicKey","publicKey","PublicKey","error","WalletPublicKeyError","isIosAndRedirectable","scopePollingDetectionStrategy","url","ref","WalletNotReadyError","WalletConnectionError","WalletAccountError","WalletDisconnectionError","transaction","connection","options","WalletNotConnectedError","signers","sendOptions","isVersionedTransaction","signature","WalletError","WalletSendTransactionError","WalletSignTransactionError","transactions","message","WalletSignMessageError","icon","__classPrivateFieldGet","receiver","state","kind","__classPrivateFieldSet","value","_SolflareMetaMaskWallet_instances","_SolflareMetaMaskWallet_listeners","_SolflareMetaMaskWallet_version","_SolflareMetaMaskWallet_name","_SolflareMetaMaskWallet_icon","_SolflareMetaMaskWallet_solflareMetaMask","_SolflareMetaMaskWallet_on","_SolflareMetaMaskWallet_emit","_SolflareMetaMaskWallet_off","_SolflareMetaMaskWallet_connect","_SolflareMetaMaskWallet_disconnect","_SolflareMetaMaskWallet_signAndSendTransaction","_SolflareMetaMaskWallet_signTransaction","_SolflareMetaMaskWallet_signMessage","SolflareMetaMaskWallet","event","listener","SolflareMetaMaskClass","__vite_default__","properties","inputs","SOLANA_MAINNET_CHAIN","SOLANA_DEVNET_CHAIN","SOLANA_TESTNET_CHAIN","StandardConnect","StandardDisconnect","StandardEvents","SolanaSignAndSendTransaction","SolanaSignTransaction","SolanaSignMessage","args","existingListener","registered","register","registerWallet","detectAndRegisterSolflareMetaMaskWallet","id","postMessage","onMessage","SolflareWalletName","SolflareWalletAdapter","SolflareClass","__vitePreload","WalletLoadError","WalletConfigError","BackpackWalletName","BackpackWalletAdapter","CoinbaseWalletName","CoinbaseWalletAdapter","R","ReflectApply","target","ReflectOwnKeys","ProcessEmitWarning","warning","NumberIsNaN","EventEmitter","eventsModule","once","defaultMaxListeners","checkListener","arg","_getMaxListeners","that","type","i","doError","events","er","handler","len","listeners","arrayClone","_addListener","prepend","existing","w","onceWrapper","_onceWrap","wrapped","list","position","originalListener","spliceOne","keys","key","_listeners","unwrap","evlistener","unwrapListeners","emitter","listenerCount","arr","copy","index","ret","name","resolve","reject","errorListener","resolver","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","flags","wrapListener","errorClasses","deserializers","addCustomErrorDeserializer","deserializer","createCustomErrorClass","CustomErrorClass","fields","isObject","cause","deserializeError","object","msg","des","constructor","prop","serializeError","destroyCircular","from","seen","to","AccountNameRequiredError","AccountNotSupported","AccountAwaitingSendPendingOperations","AmountRequired","BluetoothRequired","BtcUnmatchedApp","CantOpenDevice","CashAddrNotSupported","ClaimRewardsFeesWarning","CurrencyNotSupported","DeviceAppVerifyNotSupported","DeviceGenuineSocketEarlyClose","DeviceNotGenuineError","DeviceOnDashboardExpected","DeviceOnDashboardUnexpected","DeviceInOSUExpected","DeviceHalted","DeviceNameInvalid","DeviceSocketFail","DeviceSocketNoBulkStatus","DeviceNeedsRestart","UnresponsiveDeviceError","DisconnectedDevice","DisconnectedDeviceDuringOperation","DeviceExtractOnboardingStateError","DeviceOnboardingStatePollingError","EnpointConfigError","EthAppPleaseEnableContractData","FeeEstimationFailed","FirmwareNotRecognized","HardResetFail","InvalidXRPTag","InvalidAddress","InvalidNonce","InvalidAddressBecauseDestinationIsAlsoSource","LatestMCUInstalledError","UnknownMCU","LedgerAPIError","LedgerAPIErrorWithMessage","LedgerAPINotAvailable","ManagerAppAlreadyInstalledError","ManagerAppRelyOnBTCError","ManagerAppDepInstallRequired","ManagerAppDepUninstallRequired","ManagerDeviceLockedError","ManagerFirmwareNotEnoughSpaceError","ManagerNotEnoughSpaceError","ManagerUninstallBTCDep","NetworkDown","NetworkError","NoAddressesFound","NotEnoughBalance","NotEnoughBalanceSwap","NotEnoughBalanceToDelegate","NotEnoughBalanceInParentAccount","NotEnoughSpendableBalance","NotEnoughBalanceBecauseDestinationNotCreated","NoAccessToCamera","NotEnoughGas","NotEnoughGasSwap","TronEmptyAccount","MaybeKeepTronAccountAlive","NotSupportedLegacyAddress","GasLessThanEstimate","PriorityFeeTooLow","PriorityFeeTooHigh","PriorityFeeHigherThanMaxFee","MaxFeeTooLow","PasswordsDontMatchError","PasswordIncorrectError","RecommendSubAccountsToEmpty","RecommendUndelegation","TimeoutTagged","UnexpectedBootloader","MCUNotGenuineToDashboard","RecipientRequired","UnavailableTezosOriginatedAccountReceive","UnavailableTezosOriginatedAccountSend","UpdateFetchFileFail","UpdateIncorrectHash","UpdateIncorrectSig","UpdateYourApp","UserRefusedDeviceNameChange","UserRefusedAddress","UserRefusedFirmwareUpdate","UserRefusedAllowManager","UserRefusedOnDevice","PinNotSet","ExpertModeRequired","TransportOpenUserCancelled","TransportInterfaceNotAvailable","TransportRaceCondition","TransportWebUSBGestureRequired","TransactionHasBeenValidatedError","TransportExchangeTimeoutError","DeviceShouldStayInApp","WebsocketConnectionError","WebsocketConnectionFailed","WrongDeviceForAccount","WrongDeviceForAccountPayout","WrongDeviceForAccountRefund","WrongAppForCurrency","ETHAddressNonEIP","CantScanQRCode","FeeNotLoaded","FeeNotLoadedSwap","FeeRequired","FeeTooHigh","PendingOperation","SyncError","PairingFailed","PeerRemovedPairing","GenuineCheckFailed","LedgerAPI4xx","LedgerAPI5xx","FirmwareOrAppUpdateRequired","ReplacementTransactionUnderpriced","OpReturnDataSizeLimit","DustLimit","LanguageNotFound","NoDBPathGiven","DBWrongPassword","DBNotReset","SequenceNumberError","DisabledTransactionBroadcastError","HwTransportErrorType","HwTransportError","TransportError","StatusCodes","getAltStatusMessage","code","TransportStatusError","statusCode","canBeMappedToChildError","statusText","smsg","statusCodeStr","LockedDeviceError","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","step","rejected","result","__generator","body","_","t","y","verb","v","op","__read","o","ar","__spreadArray","pack","__values","s","Transport","_this","cla","ins","p1","p2","data","statusList","response","sw","_a","resolveBusy","busyPromise","unresponsiveReached","timeout","res","r","_apdu","_key","eventName","cb","_i","exchangeTimeout","unresponsiveTimeout","openTimeout","listenTimeout","found","sub","listenTimeoutId","self","methods","scrambleKey","e_1","methods_1","methods_1_1","methodName","e_1_1","ctx","_appAPIlock","getDerivationPath","account","change","derivationPath","offset","harden","BIP32_HARDENED_BIT","INS_GET_PUBKEY","INS_SIGN_MESSAGE","P1_NON_CONFIRM","P1_CONFIRM","P2_EXTEND","P2_MORE","MAX_PAYLOAD","LEDGER_CLA","getPublicKey","transport","bytes","send","signTransaction","paths","instruction","LedgerWalletName","LedgerWalletAdapter","BaseSignerWalletAdapter","TransportWebHIDClass","__viteBrowserExternal","ERROR","WINDOW","root","WEB_WORKER","NODE_JS","COMMON_JS","module","ARRAY_BUFFER","HEX_CHARS","EXTRA","SHIFT","K","OUTPUT_TYPES","blocks","obj","createOutputMethod","outputType","is224","Sha256","createMethod","method","nodeWrap","crypto","Buffer","require$$1","algorithm","bufferFrom","nodeMethod","createHmacOutputMethod","HmacSha256","createHmacMethod","sharedMemory","notString","length","j","s0","s1","maj","t1","t2","ch","ab","da","cd","bc","h0","h1","h2","h3","h4","h5","h6","h7","hex","dataView","oKeyPad","iKeyPad","innerHash","exports","struct","borsh.struct","borshFields","field","fieldValue","buf","safeDeserialize","schema","classType","borsh.deserialize","GameView","GameState","CurrencyMode","BettingStrategy","Choice","FEE_SETTINGS","CURRENCY_BENEFITS","RPS_TOKEN_MINT","FEE_ACCOUNT","calculateFee","amount","currencyMode","baseFee","calculateBonusPot","getTokenBalances","walletPublicKey","LAMPORTS_PER_SOL","createPaymentTransaction","gameAccount","Transaction","fee","paymentAmount","SystemProgram","getFreeRPSTokens","Player","__publicField","Game","playerSchema","gameSchema","RPSGameClient","programId","gamePublicKey","accountInfo","gameId","onUpdate","subscriptionId","minPlayers","maxPlayers","totalRounds","entryFeeSol","timeoutSeconds","losersCanRejoin","gameKeypair","Keypair","initInstruction","signedTx","txId","entryFeeLamports","adjustedEntryFee","bonusPotPercentage","layout","TransactionInstruction","entryFee","createGameSchema","instructionData","borsh.serialize","choice","salt","choiceBuffer","saltBuffer","hash","sha256","hashedChoice","commitChoiceSchema","saltBytes","revealChoiceSchema","claimWinningsSchema","rejoinGameSchema","startNewRoundSchema","joinInstruction","feeTransaction","updatedGameAccount","commitInstruction","revealInstruction","timeoutInstruction","claimInstruction","rejoinInstruction","startRoundInstruction","accounts","activeGames","pubkey","demoMetrics","SecurityDashboard","compact","showMetrics","metrics","setMetrics","useState","expanded","setExpanded","useEffect","interval","prev","formatTimeAgo","timestamp","secondsAgo","securityFeatures","scalingCapabilities","jsxs","jsx","feature","capability","HomeView","setCurrentView","connected","handleCreateGame","handleJoinGame","handleAutoPlay","CurrencySelector","selectedCurrency","onCurrencyChange","onEntryFeeChange","disabled","CreateGameView","gameClient","createGame","loading","setEntryFee","playerCount","setPlayerCount","setTotalRounds","setTimeoutSeconds","setLosersCanRejoin","setCurrencyMode","useSecureMode","setUseSecureMode","isSubmitting","setIsSubmitting","handleBack","handleSubmit","isLoading","JoinGameView","joinGame","setGameId","AudioService","savedMuted","savedVolume","AudioContext","audioContext","loadPromises","sound","audio","soundId","soundClone","category","categorySound","muted","volume","audioService","GameLobbyView","onGameStarted","onLeaveGame","gameData","setGameData","copied","setCopied","setLoading","subscribed","setSubscribed","userPublicKey","setUserPublicKey","updatedGame","hostKey","players","player","handleStartGame","shortenPubkey","formatSol","lamports","copyGameId","isHost","readyToStart","Fragment","CommitChoiceView","onCommitChoice","selectedChoice","setSelectedChoice","hasCommitted","choices","handleSelect","handleCommit","getPlayerStatus","RevealChoiceView","userChoice","onRevealChoice","hasRevealed","getChoiceEmoji","getChoiceName","GameResultsView","onClaimWinnings","onRejoinGame","onStartNewRound","onBackToHome","currentPlayer","highestScore","winners","isWinner","isLastRound","canClaim","canRejoin","canContinue","RPSAutoPlayer","wagerAmount","currency","strategy","gameSpeed","onRoundComplete","onError","playerChoice","outcomes","opponentChoices","gameOutcome","AutoPlayPanel","isActive","onToggle","setWagerAmount","stats","gameHistory","stopOnProfit","stopOnLoss","useStopLimits","animateWins","setAnimateWins","animateLosses","setAnimateLosses","animateProfit","setAnimateProfit","latestGame","handleButtonHover","handleButtonClick","safeNumber","formatNumber","mode","game","choiceIcons","resultIcons","GameAnimation","isPlaying","opponentChoice","animationState","setAnimationState","countdown","setCountdown","showResult","setShowResult","shakePlayer","setShakePlayer","shakeOpponent","setShakeOpponent","showParticles","setShowParticles","showConfetti","setShowConfetti","particlesRef","useRef","countdownItems","intervalId","generateParticles","particles","delay","size","duration","x","tx","ty","rotate","scale","color","particleStyle","AutoPlayView","autoPlayer","setAutoPlayer","isAutoPlaying","setIsAutoPlaying","setSelectedCurrency","setStrategy","setGameSpeed","setStopOnProfit","setStopOnLoss","setUseStopLimits","setStats","currentGame","setCurrentGame","errorMessage","setErrorMessage","handleToggleAutoPlay","getNextWagerAmount","currentWager","lastResult","streak","unit","negStreak","temp","newStats","lastGame","nextWager","handleCurrencyChange","handleReset","WalletHelper","className","browser","setBrowser","os","setOS","isPhantomInstalled","setIsPhantomInstalled","isSolflareInstalled","setIsSolflareInstalled","activeTab","setActiveTab","showMonadInfo","setShowMonadInfo","detectBrowserAndOS","checkWalletInstallation","userAgent","detectedBrowser","detectedOS","isPhantom","isSolflare","getWalletDownloadLink","walletName","getWalletInstallInstructions","walletDisplayName","handleTabChange","tab","renderWalletStatus","isInstalled","WalletMultiButton","WelcomeView","SecurityView","onBack","GameMonitor","endpoint","connectedWallets","setConnectedWallets","gameState","setGameState","lastUpdate","setLastUpdate","setError","setSubscriptionId","Connection","programPublicKey","wallets","TestingView","useWallet","deviceId","setDeviceId","showMonitor","setShowMonitor","deviceName","setDeviceName","browserInfo","setBrowserInfo","setProgramId","setEndpoint","clusterApiUrl","nav","screen","idStr","ua","browserName","osName","handleGameIdChange","handleDeviceNameChange","handleMonitorToggle","TokenDisplay","balance","isMobile","onClick","handleClick","cursorClass","transitionClass","TokenSwap","onSwap","setAmount","swapping","setSwapping","setMessage","swapDirection","setSwapDirection","handleSwap","fromToken","toToken","toggleSwapDirection","isSwapDisabled","getMaxAmount","TokenModal","onClose","onGetFree","handleBackdropClick","handleGetFreeTokens","SoundControl","showVolume","setMuted","setVolume","showVolumeSlider","setShowVolumeSlider","isMuted","vol","toggleMute","newMuted","handleVolumeChange","toggleVolumeSlider","ErrorBoundary","Component","props","errorInfo","network","WalletAdapterNetwork","RPS_PROGRAM_ID","App","ConnectionProvider","WalletProvider","WalletModalProvider","RPSGame","sendTransaction","setGameClient","currentView","setUserChoice","setSalt","statusMessage","setStatusMessage","isMobileMenuOpen","setIsMobileMenuOpen","tokenBalance","setTokenBalance","loadingBalance","setLoadingBalance","isTokenModalOpen","setIsTokenModalOpen","balances","balanceError","viewProps","betAmount","gameIdToJoin","updatedBalance","rootElement","ReactDOM","React"],"ignoreList":[1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19],"sources":["../../src/polyfill-bundle.js","../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../src/utils/polyfill-setup.js","../../node_modules/react-dom/client.js","../../node_modules/@solana/wallet-adapter-phantom/lib/esm/adapter.js","../../node_modules/@solana/wallet-adapter-solflare/lib/esm/metamask/icon.js","../../node_modules/@solana/wallet-adapter-solflare/lib/esm/metamask/wallet.js","../../node_modules/@solana/wallet-adapter-solflare/lib/esm/metamask/detect.js","../../node_modules/@solana/wallet-adapter-solflare/lib/esm/adapter.js","../../node_modules/@solana/wallet-adapter-backpack/lib/esm/adapter.js","../../node_modules/@solana/wallet-adapter-coinbase/lib/esm/adapter.js","../../node_modules/events/events.js","../../node_modules/@ledgerhq/errors/lib-es/helpers.js","../../node_modules/@ledgerhq/errors/lib-es/index.js","../../node_modules/@ledgerhq/hw-transport/lib-es/Transport.js","../../node_modules/@solana/wallet-adapter-ledger/lib/esm/util.js","../../node_modules/@solana/wallet-adapter-ledger/lib/esm/adapter.js","../../__vite-browser-external","../../node_modules/js-sha256/src/sha256.js","../../src/utils/fixborsh.ts","../../src/types.ts","../../src/services/token-service.ts","../../src/rps-client.ts","../../src/components/SecurityDashboard.tsx","../../src/views/HomeView.tsx","../../src/components/CurrencySelector.tsx","../../src/views/CreateGameView.tsx","../../src/views/JoinGameView.tsx","../../src/services/audio-service.ts","../../src/views/GameLobbyView.tsx","../../src/views/CommitChoiceView.tsx","../../src/views/RevealChoiceView.tsx","../../src/views/GameResultsView.tsx","../../src/autoplay/RPSAutoPlayer.ts","../../src/autoplay/AutoPlayPanel.tsx","../../src/autoplay/GameAnimation.tsx","../../src/views/AutoPlayView.tsx","../../src/components/WalletHelper.tsx","../../src/views/WelcomeView.tsx","../../src/views/SecurityView.tsx","../../src/components/GameMonitor.tsx","../../src/views/TestingView.tsx","../../src/components/TokenDisplay.tsx","../../src/components/TokenSwap.tsx","../../src/components/TokenModal.tsx","../../src/components/SoundControl.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["// This script sets up all the necessary polyfills for Node.js builtins\n/**\n * Polyfill bundle for Solana applications\n * Sets up Buffer and process globals required by Solana web3.js\n * This file must be loaded BEFORE any other modules that use these globals\n */\n\n// Import Buffer from 'buffer'\nimport * as bufferPolyfill from 'buffer';\n\n// Set globals needed by Solana web3.js\nwindow.global = window;\nwindow.Buffer = bufferPolyfill.Buffer;\n\n// Polyfill process\nwindow.process = window.process || {\n  env: {},\n  browser: true,\n  nextTick: (fn) => setTimeout(fn, 0),\n};\n\n// Test the Buffer polyfill\ntry {\n  // Create an ed25519 public key to test Buffer\n  const testKey = '7Y9dRMY6V9cmVkXNFrHeUZmYf2tAV5wSVFcYyD5bLQpZ';\n  const testBuffer = Buffer.from(testKey);\n\n  console.log(' Polyfills initialized successfully!', {\n    hasBuffer: typeof Buffer !== 'undefined',\n    hasBufferFrom: typeof Buffer.from === 'function',\n    bufferTest: testBuffer.toString('hex').substring(0, 10) + '...',\n    hasProcess: typeof process !== 'undefined'\n  });\n} catch (err) {\n  console.error(' Failed to initialize polyfills:', err);\n}\n\nconsole.log('Polyfills loaded successfully:', {\n  buffer: typeof window.Buffer !== 'undefined',\n  bufferFrom: typeof window.Buffer.from === 'function',\n  bufferAlloc: typeof window.Buffer.alloc === 'function',\n  process: typeof window.process !== 'undefined'\n});\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","// Global Buffer polyfill for Solana web3.js\n// This file needs to be loaded before any Solana-related code\n\n// Create process global\nwindow.process = window.process || {\n  env: {},\n  browser: true,\n  version: '',\n  versions: { node: '' },\n  nextTick: function(fn) { setTimeout(fn, 0); },\n  cwd: function() { return '/'; }\n};\n\n// When imported by Vite, these will be properly bundled\n// Because buffer has a .js extension, it will be properly resolved\nimport buffer from 'buffer';\n\n// Set Buffer as a global\nwindow.Buffer = buffer.Buffer;\n\n// Set global object for compatibility\nwindow.global = window;\n\nconsole.log('[Polyfills] Initialized successfully');\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import { BaseMessageSignerWalletAdapter, isIosAndRedirectable, isVersionedTransaction, scopePollingDetectionStrategy, WalletAccountError, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSendTransactionError, WalletSignMessageError, WalletSignTransactionError, } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nexport const PhantomWalletName = 'Phantom';\nexport class PhantomWalletAdapter extends BaseMessageSignerWalletAdapter {\n    constructor(config = {}) {\n        super();\n        this.name = PhantomWalletName;\n        this.url = 'https://phantom.app';\n        this.icon = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==';\n        this.supportedTransactionVersions = new Set(['legacy', 0]);\n        this._readyState = typeof window === 'undefined' || typeof document === 'undefined'\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.NotDetected;\n        this._disconnected = () => {\n            const wallet = this._wallet;\n            if (wallet) {\n                wallet.off('disconnect', this._disconnected);\n                wallet.off('accountChanged', this._accountChanged);\n                this._wallet = null;\n                this._publicKey = null;\n                this.emit('error', new WalletDisconnectedError());\n                this.emit('disconnect');\n            }\n        };\n        this._accountChanged = (newPublicKey) => {\n            const publicKey = this._publicKey;\n            if (!publicKey)\n                return;\n            try {\n                newPublicKey = new PublicKey(newPublicKey.toBytes());\n            }\n            catch (error) {\n                this.emit('error', new WalletPublicKeyError(error?.message, error));\n                return;\n            }\n            if (publicKey.equals(newPublicKey))\n                return;\n            this._publicKey = newPublicKey;\n            this.emit('connect', newPublicKey);\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._publicKey = null;\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            if (isIosAndRedirectable()) {\n                // when in iOS (not webview), set Phantom as loadable instead of checking for install\n                this._readyState = WalletReadyState.Loadable;\n                this.emit('readyStateChange', this._readyState);\n            }\n            else {\n                scopePollingDetectionStrategy(() => {\n                    if (window.phantom?.solana?.isPhantom || window.solana?.isPhantom) {\n                        this._readyState = WalletReadyState.Installed;\n                        this.emit('readyStateChange', this._readyState);\n                        return true;\n                    }\n                    return false;\n                });\n            }\n        }\n    }\n    get publicKey() {\n        return this._publicKey;\n    }\n    get connecting() {\n        return this._connecting;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n    async autoConnect() {\n        // Skip autoconnect in the Loadable state\n        // We can't redirect to a universal link without user input\n        if (this.readyState === WalletReadyState.Installed) {\n            await this.connect();\n        }\n    }\n    async connect() {\n        try {\n            if (this.connected || this.connecting)\n                return;\n            if (this.readyState === WalletReadyState.Loadable) {\n                // redirect to the Phantom /browse universal link\n                // this will open the current URL in the Phantom in-wallet browser\n                const url = encodeURIComponent(window.location.href);\n                const ref = encodeURIComponent(window.location.origin);\n                window.location.href = `https://phantom.app/ul/browse/${url}?ref=${ref}`;\n                return;\n            }\n            if (this.readyState !== WalletReadyState.Installed)\n                throw new WalletNotReadyError();\n            this._connecting = true;\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            const wallet = window.phantom?.solana || window.solana;\n            if (!wallet.isConnected) {\n                try {\n                    await wallet.connect();\n                }\n                catch (error) {\n                    throw new WalletConnectionError(error?.message, error);\n                }\n            }\n            if (!wallet.publicKey)\n                throw new WalletAccountError();\n            let publicKey;\n            try {\n                publicKey = new PublicKey(wallet.publicKey.toBytes());\n            }\n            catch (error) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n            wallet.on('disconnect', this._disconnected);\n            wallet.on('accountChanged', this._accountChanged);\n            this._wallet = wallet;\n            this._publicKey = publicKey;\n            this.emit('connect', publicKey);\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n        finally {\n            this._connecting = false;\n        }\n    }\n    async disconnect() {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.off('disconnect', this._disconnected);\n            wallet.off('accountChanged', this._accountChanged);\n            this._wallet = null;\n            this._publicKey = null;\n            try {\n                await wallet.disconnect();\n            }\n            catch (error) {\n                this.emit('error', new WalletDisconnectionError(error?.message, error));\n            }\n        }\n        this.emit('disconnect');\n    }\n    async sendTransaction(transaction, connection, options = {}) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                const { signers, ...sendOptions } = options;\n                if (isVersionedTransaction(transaction)) {\n                    signers?.length && transaction.sign(signers);\n                }\n                else {\n                    transaction = (await this.prepareTransaction(transaction, connection, sendOptions));\n                    signers?.length && transaction.partialSign(...signers);\n                }\n                sendOptions.preflightCommitment = sendOptions.preflightCommitment || connection.commitment;\n                const { signature } = await wallet.signAndSendTransaction(transaction, sendOptions);\n                return signature;\n            }\n            catch (error) {\n                if (error instanceof WalletError)\n                    throw error;\n                throw new WalletSendTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signTransaction(transaction) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signTransaction(transaction)) || transaction;\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signAllTransactions(transactions) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signAllTransactions(transactions)) || transactions;\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signMessage(message) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                const { signature } = await wallet.signMessage(message);\n                return signature;\n            }\n            catch (error) {\n                throw new WalletSignMessageError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n}\n//# sourceMappingURL=adapter.js.map","/** @internal */\nexport const icon = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=';\n//# sourceMappingURL=icon.js.map","var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _SolflareMetaMaskWallet_instances, _SolflareMetaMaskWallet_listeners, _SolflareMetaMaskWallet_version, _SolflareMetaMaskWallet_name, _SolflareMetaMaskWallet_icon, _SolflareMetaMaskWallet_solflareMetaMask, _SolflareMetaMaskWallet_on, _SolflareMetaMaskWallet_emit, _SolflareMetaMaskWallet_off, _SolflareMetaMaskWallet_connect, _SolflareMetaMaskWallet_disconnect, _SolflareMetaMaskWallet_signAndSendTransaction, _SolflareMetaMaskWallet_signTransaction, _SolflareMetaMaskWallet_signMessage;\nimport { WalletNotConnectedError } from '@solana/wallet-adapter-base';\nimport { SOLANA_DEVNET_CHAIN, SOLANA_MAINNET_CHAIN, SOLANA_TESTNET_CHAIN } from '@solana/wallet-standard-chains';\nimport { SolanaSignAndSendTransaction, SolanaSignMessage, SolanaSignTransaction, } from '@solana/wallet-standard-features';\nimport { StandardConnect, StandardDisconnect, StandardEvents, } from '@wallet-standard/features';\nimport { icon } from './icon.js';\nexport class SolflareMetaMaskWallet {\n    constructor() {\n        _SolflareMetaMaskWallet_instances.add(this);\n        _SolflareMetaMaskWallet_listeners.set(this, {});\n        _SolflareMetaMaskWallet_version.set(this, '1.0.0');\n        _SolflareMetaMaskWallet_name.set(this, 'MetaMask');\n        _SolflareMetaMaskWallet_icon.set(this, icon);\n        _SolflareMetaMaskWallet_solflareMetaMask.set(this, null);\n        _SolflareMetaMaskWallet_on.set(this, (event, listener) => {\n            __classPrivateFieldGet(this, _SolflareMetaMaskWallet_listeners, \"f\")[event]?.push(listener) || (__classPrivateFieldGet(this, _SolflareMetaMaskWallet_listeners, \"f\")[event] = [listener]);\n            return () => __classPrivateFieldGet(this, _SolflareMetaMaskWallet_instances, \"m\", _SolflareMetaMaskWallet_off).call(this, event, listener);\n        });\n        _SolflareMetaMaskWallet_connect.set(this, async () => {\n            if (!__classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\")) {\n                let SolflareMetaMaskClass;\n                try {\n                    SolflareMetaMaskClass = (await import('@solflare-wallet/metamask-sdk')).default;\n                }\n                catch (error) {\n                    throw new Error('Unable to load Solflare MetaMask SDK');\n                }\n                __classPrivateFieldSet(this, _SolflareMetaMaskWallet_solflareMetaMask, new SolflareMetaMaskClass(), \"f\");\n                __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").on('standard_change', (properties) => __classPrivateFieldGet(this, _SolflareMetaMaskWallet_instances, \"m\", _SolflareMetaMaskWallet_emit).call(this, 'change', properties));\n            }\n            if (!this.accounts.length) {\n                await __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").connect();\n            }\n            return { accounts: this.accounts };\n        });\n        _SolflareMetaMaskWallet_disconnect.set(this, async () => {\n            if (!__classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\"))\n                return;\n            await __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").disconnect();\n        });\n        _SolflareMetaMaskWallet_signAndSendTransaction.set(this, async (...inputs) => {\n            if (!__classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\"))\n                throw new WalletNotConnectedError();\n            return await __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").standardSignAndSendTransaction(...inputs);\n        });\n        _SolflareMetaMaskWallet_signTransaction.set(this, async (...inputs) => {\n            if (!__classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\"))\n                throw new WalletNotConnectedError();\n            return await __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").standardSignTransaction(...inputs);\n        });\n        _SolflareMetaMaskWallet_signMessage.set(this, async (...inputs) => {\n            if (!__classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\"))\n                throw new WalletNotConnectedError();\n            return await __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").standardSignMessage(...inputs);\n        });\n    }\n    get version() {\n        return __classPrivateFieldGet(this, _SolflareMetaMaskWallet_version, \"f\");\n    }\n    get name() {\n        return __classPrivateFieldGet(this, _SolflareMetaMaskWallet_name, \"f\");\n    }\n    get icon() {\n        return __classPrivateFieldGet(this, _SolflareMetaMaskWallet_icon, \"f\");\n    }\n    get chains() {\n        return [SOLANA_MAINNET_CHAIN, SOLANA_DEVNET_CHAIN, SOLANA_TESTNET_CHAIN];\n    }\n    get features() {\n        return {\n            [StandardConnect]: {\n                version: '1.0.0',\n                connect: __classPrivateFieldGet(this, _SolflareMetaMaskWallet_connect, \"f\"),\n            },\n            [StandardDisconnect]: {\n                version: '1.0.0',\n                disconnect: __classPrivateFieldGet(this, _SolflareMetaMaskWallet_disconnect, \"f\"),\n            },\n            [StandardEvents]: {\n                version: '1.0.0',\n                on: __classPrivateFieldGet(this, _SolflareMetaMaskWallet_on, \"f\"),\n            },\n            [SolanaSignAndSendTransaction]: {\n                version: '1.0.0',\n                supportedTransactionVersions: ['legacy', 0],\n                signAndSendTransaction: __classPrivateFieldGet(this, _SolflareMetaMaskWallet_signAndSendTransaction, \"f\"),\n            },\n            [SolanaSignTransaction]: {\n                version: '1.0.0',\n                supportedTransactionVersions: ['legacy', 0],\n                signTransaction: __classPrivateFieldGet(this, _SolflareMetaMaskWallet_signTransaction, \"f\"),\n            },\n            [SolanaSignMessage]: {\n                version: '1.0.0',\n                signMessage: __classPrivateFieldGet(this, _SolflareMetaMaskWallet_signMessage, \"f\"),\n            },\n        };\n    }\n    get accounts() {\n        return __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\") ? __classPrivateFieldGet(this, _SolflareMetaMaskWallet_solflareMetaMask, \"f\").standardAccounts : [];\n    }\n}\n_SolflareMetaMaskWallet_listeners = new WeakMap(), _SolflareMetaMaskWallet_version = new WeakMap(), _SolflareMetaMaskWallet_name = new WeakMap(), _SolflareMetaMaskWallet_icon = new WeakMap(), _SolflareMetaMaskWallet_solflareMetaMask = new WeakMap(), _SolflareMetaMaskWallet_on = new WeakMap(), _SolflareMetaMaskWallet_connect = new WeakMap(), _SolflareMetaMaskWallet_disconnect = new WeakMap(), _SolflareMetaMaskWallet_signAndSendTransaction = new WeakMap(), _SolflareMetaMaskWallet_signTransaction = new WeakMap(), _SolflareMetaMaskWallet_signMessage = new WeakMap(), _SolflareMetaMaskWallet_instances = new WeakSet(), _SolflareMetaMaskWallet_emit = function _SolflareMetaMaskWallet_emit(event, ...args) {\n    // eslint-disable-next-line prefer-spread\n    __classPrivateFieldGet(this, _SolflareMetaMaskWallet_listeners, \"f\")[event]?.forEach((listener) => listener.apply(null, args));\n}, _SolflareMetaMaskWallet_off = function _SolflareMetaMaskWallet_off(event, listener) {\n    __classPrivateFieldGet(this, _SolflareMetaMaskWallet_listeners, \"f\")[event] = __classPrivateFieldGet(this, _SolflareMetaMaskWallet_listeners, \"f\")[event]?.filter((existingListener) => listener !== existingListener);\n};\n//# sourceMappingURL=wallet.js.map","import { registerWallet } from '@wallet-standard/wallet';\nimport { SolflareMetaMaskWallet } from './wallet.js';\nlet registered = false;\nfunction register() {\n    if (registered)\n        return;\n    registerWallet(new SolflareMetaMaskWallet());\n    registered = true;\n}\n/** @internal */\nexport async function detectAndRegisterSolflareMetaMaskWallet() {\n    const id = 'solflare-detect-metamask';\n    function postMessage() {\n        window.postMessage({\n            target: 'metamask-contentscript',\n            data: {\n                name: 'metamask-provider',\n                data: {\n                    id,\n                    jsonrpc: '2.0',\n                    method: 'wallet_getSnaps',\n                },\n            },\n        }, window.location.origin);\n    }\n    function onMessage(event) {\n        const message = event.data;\n        if (message?.target === 'metamask-inpage' && message.data?.name === 'metamask-provider') {\n            if (message.data.data?.id === id) {\n                window.removeEventListener('message', onMessage);\n                if (!message.data.data.error) {\n                    register();\n                }\n            }\n            else {\n                postMessage();\n            }\n        }\n    }\n    window.addEventListener('message', onMessage);\n    window.setTimeout(() => window.removeEventListener('message', onMessage), 5000);\n    postMessage();\n}\n//# sourceMappingURL=detect.js.map","import { BaseMessageSignerWalletAdapter, WalletConfigError, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletError, WalletLoadError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSendTransactionError, WalletSignMessageError, WalletSignTransactionError, isIosAndRedirectable, isVersionedTransaction, scopePollingDetectionStrategy, } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nimport { detectAndRegisterSolflareMetaMaskWallet } from './metamask/detect.js';\nexport const SolflareWalletName = 'Solflare';\nexport class SolflareWalletAdapter extends BaseMessageSignerWalletAdapter {\n    constructor(config = {}) {\n        super();\n        this.name = SolflareWalletName;\n        this.url = 'https://solflare.com';\n        this.icon = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgNTAgNTAiIHdpZHRoPSI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmMxMGIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmYjNmMmUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI2LjQ3ODM1IiB4Mj0iMzQuOTEwNyIgeGxpbms6aHJlZj0iI2EiIHkxPSI3LjkyIiB5Mj0iMzMuNjU5MyIvPjxyYWRpYWxHcmFkaWVudCBpZD0iYyIgY3g9IjAiIGN5PSIwIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDQuOTkyMTg4MzIgMTIuMDYzODc5NjMgLTEyLjE4MTEzNjU1IDUuMDQwNzEwNzQgMjIuNTIwMiAyMC42MTgzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHI9IjEiIHhsaW5rOmhyZWY9IiNhIi8+PHBhdGggZD0ibTI1LjE3MDggNDcuOTEwNGMuNTI1IDAgLjk1MDcuNDIxLjk1MDcuOTQwM3MtLjQyNTcuOTQwMi0uOTUwNy45NDAyLS45NTA3LS40MjA5LS45NTA3LS45NDAyLjQyNTctLjk0MDMuOTUwNy0uOTQwM3ptLTEuMDMyOC00NC45MTU2NWMuNDY0Ni4wMzgzNi44Mzk4LjM5MDQuOTAyNy44NDY4MWwxLjEzMDcgOC4yMTU3NGMuMzc5OCAyLjcxNDMgMy42NTM1IDMuODkwNCA1LjY3NDMgMi4wNDU5bDExLjMyOTEtMTAuMzExNThjLjI3MzMtLjI0ODczLjY5ODktLjIzMTQ5Ljk1MDcuMDM4NTEuMjMwOS4yNDc3Mi4yMzc5LjYyNjk3LjAxNjEuODgyNzdsLTkuODc5MSAxMS4zOTU4Yy0xLjgxODcgMi4wOTQyLS40NzY4IDUuMzY0MyAyLjI5NTYgNS41OTc4bDguNzE2OC44NDAzYy40MzQxLjA0MTguNzUxNy40MjM0LjcwOTMuODUyNC0uMDM0OS4zNTM3LS4zMDc0LjYzOTUtLjY2MjguNjk0OWwtOS4xNTk0IDEuNDMwMmMtMi42NTkzLjM2MjUtMy44NjM2IDMuNTExNy0yLjEzMzkgNS41NTc2bDMuMjIgMy43OTYxYy4yNTk0LjMwNTguMjE4OC43NjE1LS4wOTA4IDEuMDE3OC0uMjYyMi4yMTcyLS42NDE5LjIyNTYtLjkxMzguMDIwM2wtMy45Njk0LTIuOTk3OGMtMi4xNDIxLTEuNjEwOS01LjIyOTctLjI0MTctNS40NTYxIDIuNDI0M2wtLjg3NDcgMTAuMzk3NmMtLjAzNjIuNDI5NS0uNDE3OC43NDg3LS44NTI1LjcxMy0uMzY5LS4wMzAzLS42NjcxLS4zMDk3LS43MTcxLS42NzIxbC0xLjM4NzEtMTAuMDQzN2MtLjM3MTctMi43MTQ0LTMuNjQ1NC0zLjg5MDQtNS42NzQzLTIuMDQ1OWwtMTIuMDUxOTUgMTAuOTc0Yy0uMjQ5NDcuMjI3MS0uNjM4MDkuMjExNC0uODY4LS4wMzUtLjIxMDk0LS4yMjYyLS4yMTczNS0uNTcyNC0uMDE0OTMtLjgwNmwxMC41MTgxOC0xMi4xMzg1YzEuODE4Ny0yLjA5NDIuNDg0OS01LjM2NDQtMi4yODc2LTUuNTk3OGwtOC43MTg3Mi0uODQwNWMtLjQzNDEzLS4wNDE4LS43NTE3Mi0uNDIzNS0uNzA5MzYtLjg1MjQuMDM0OTMtLjM1MzcuMzA3MzktLjYzOTQuNjYyNy0uNjk1bDkuMTUzMzgtMS40Mjk5YzIuNjU5NC0uMzYyNSAzLjg3MTgtMy41MTE3IDIuMTQyMS01LjU1NzZsLTIuMTkyLTIuNTg0MWMtLjMyMTctLjM3OTItLjI3MTMtLjk0NDMuMTEyNi0xLjI2MjEuMzI1My0uMjY5NC43OTYzLS4yNzk3IDEuMTMzNC0uMDI0OWwyLjY5MTggMi4wMzQ3YzIuMTQyMSAxLjYxMDkgNS4yMjk3LjI0MTcgNS40NTYxLTIuNDI0M2wuNzI0MS04LjU1OTk4Yy4wNDU3LS41NDA4LjUyNjUtLjk0MjU3IDEuMDczOS0uODk3Mzd6bS0yMy4xODczMyAyMC40Mzk2NWMuNTI1MDQgMCAuOTUwNjcuNDIxLjk1MDY3Ljk0MDNzLS40MjU2My45NDAzLS45NTA2Ny45NDAzYy0uNTI1MDQxIDAtLjk1MDY3LS40MjEtLjk1MDY3LS45NDAzcy40MjU2MjktLjk0MDMuOTUwNjctLjk0MDN6bTQ3LjY3OTczLS45NTQ3Yy41MjUgMCAuOTUwNy40MjEuOTUwNy45NDAzcy0uNDI1Ny45NDAyLS45NTA3Ljk0MDItLjk1MDctLjQyMDktLjk1MDctLjk0MDIuNDI1Ny0uOTQwMy45NTA3LS45NDAzem0tMjQuNjI5Ni0yMi40Nzk3Yy41MjUgMCAuOTUwNi40MjA5NzMuOTUwNi45NDAyNyAwIC41MTkzLS40MjU2Ljk0MDI3LS45NTA2Ljk0MDI3LS41MjUxIDAtLjk1MDctLjQyMDk3LS45NTA3LS45NDAyNyAwLS41MTkyOTcuNDI1Ni0uOTQwMjcuOTUwNy0uOTQwMjd6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0ibTI0LjU3MSAzMi43NzkyYzQuOTU5NiAwIDguOTgwMi0zLjk3NjUgOC45ODAyLTguODgxOSAwLTQuOTA1My00LjAyMDYtOC44ODE5LTguOTgwMi04Ljg4MTlzLTguOTgwMiAzLjk3NjYtOC45ODAyIDguODgxOWMwIDQuOTA1NCA0LjAyMDYgOC44ODE5IDguOTgwMiA4Ljg4MTl6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+';\n        this.supportedTransactionVersions = new Set(['legacy', 0]);\n        this._readyState = typeof window === 'undefined' || typeof document === 'undefined'\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.Loadable;\n        this._disconnected = () => {\n            const wallet = this._wallet;\n            if (wallet) {\n                wallet.off('disconnect', this._disconnected);\n                this._wallet = null;\n                this._publicKey = null;\n                this.emit('error', new WalletDisconnectedError());\n                this.emit('disconnect');\n            }\n        };\n        this._accountChanged = (newPublicKey) => {\n            if (!newPublicKey)\n                return;\n            const publicKey = this._publicKey;\n            if (!publicKey)\n                return;\n            try {\n                newPublicKey = new PublicKey(newPublicKey.toBytes());\n            }\n            catch (error) {\n                this.emit('error', new WalletPublicKeyError(error?.message, error));\n                return;\n            }\n            if (publicKey.equals(newPublicKey))\n                return;\n            this._publicKey = newPublicKey;\n            this.emit('connect', newPublicKey);\n        };\n        this._connecting = false;\n        this._publicKey = null;\n        this._wallet = null;\n        this._config = config;\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            scopePollingDetectionStrategy(() => {\n                if (window.solflare?.isSolflare || window.SolflareApp) {\n                    this._readyState = WalletReadyState.Installed;\n                    this.emit('readyStateChange', this._readyState);\n                    return true;\n                }\n                return false;\n            });\n            detectAndRegisterSolflareMetaMaskWallet();\n        }\n    }\n    get publicKey() {\n        return this._publicKey;\n    }\n    get connecting() {\n        return this._connecting;\n    }\n    get connected() {\n        return !!this._wallet?.connected;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n    async autoConnect() {\n        // Skip autoconnect in the Loadable state on iOS\n        // We can't redirect to a universal link without user input\n        if (!(this.readyState === WalletReadyState.Loadable && isIosAndRedirectable())) {\n            await this.connect();\n        }\n    }\n    async connect() {\n        try {\n            if (this.connected || this.connecting)\n                return;\n            if (this._readyState !== WalletReadyState.Loadable && this._readyState !== WalletReadyState.Installed)\n                throw new WalletNotReadyError();\n            // redirect to the Solflare /browse universal link\n            // this will open the current URL in the Solflare in-wallet browser\n            if (this.readyState === WalletReadyState.Loadable && isIosAndRedirectable()) {\n                const url = encodeURIComponent(window.location.href);\n                const ref = encodeURIComponent(window.location.origin);\n                window.location.href = `https://solflare.com/ul/v1/browse/${url}?ref=${ref}`;\n                return;\n            }\n            let SolflareClass;\n            try {\n                SolflareClass = (await import('@solflare-wallet/sdk')).default;\n            }\n            catch (error) {\n                throw new WalletLoadError(error?.message, error);\n            }\n            let wallet;\n            try {\n                wallet = new SolflareClass({ network: this._config.network });\n            }\n            catch (error) {\n                throw new WalletConfigError(error?.message, error);\n            }\n            this._connecting = true;\n            if (!wallet.connected) {\n                try {\n                    await wallet.connect();\n                }\n                catch (error) {\n                    throw new WalletConnectionError(error?.message, error);\n                }\n            }\n            if (!wallet.publicKey)\n                throw new WalletConnectionError();\n            let publicKey;\n            try {\n                publicKey = new PublicKey(wallet.publicKey.toBytes());\n            }\n            catch (error) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n            wallet.on('disconnect', this._disconnected);\n            wallet.on('accountChanged', this._accountChanged);\n            this._wallet = wallet;\n            this._publicKey = publicKey;\n            this.emit('connect', publicKey);\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n        finally {\n            this._connecting = false;\n        }\n    }\n    async disconnect() {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.off('disconnect', this._disconnected);\n            wallet.off('accountChanged', this._accountChanged);\n            this._wallet = null;\n            this._publicKey = null;\n            try {\n                await wallet.disconnect();\n            }\n            catch (error) {\n                this.emit('error', new WalletDisconnectionError(error?.message, error));\n            }\n        }\n        this.emit('disconnect');\n    }\n    async sendTransaction(transaction, connection, options = {}) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                const { signers, ...sendOptions } = options;\n                if (isVersionedTransaction(transaction)) {\n                    signers?.length && transaction.sign(signers);\n                }\n                else {\n                    transaction = (await this.prepareTransaction(transaction, connection, sendOptions));\n                    signers?.length && transaction.partialSign(...signers);\n                }\n                sendOptions.preflightCommitment = sendOptions.preflightCommitment || connection.commitment;\n                return await wallet.signAndSendTransaction(transaction, sendOptions);\n            }\n            catch (error) {\n                if (error instanceof WalletError)\n                    throw error;\n                throw new WalletSendTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signTransaction(transaction) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signTransaction(transaction)) || transaction;\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signAllTransactions(transactions) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signAllTransactions(transactions)) || transactions;\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signMessage(message) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return await wallet.signMessage(message, 'utf8');\n            }\n            catch (error) {\n                throw new WalletSignMessageError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n}\n//# sourceMappingURL=adapter.js.map","import { BaseMessageSignerWalletAdapter, scopePollingDetectionStrategy, WalletAccountError, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSendTransactionError, WalletSignMessageError, WalletSignTransactionError, } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nexport const BackpackWalletName = 'Backpack';\nexport class BackpackWalletAdapter extends BaseMessageSignerWalletAdapter {\n    constructor(config = {}) {\n        super();\n        this.name = BackpackWalletName;\n        this.url = 'https://backpack.app';\n        this.icon = 'data:image/png;base64,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';\n        this.supportedTransactionVersions = null;\n        this._readyState = typeof window === 'undefined' || typeof document === 'undefined'\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.NotDetected;\n        this._disconnected = () => {\n            const wallet = this._wallet;\n            if (wallet) {\n                wallet.off('disconnect', this._disconnected);\n                this._wallet = null;\n                this._publicKey = null;\n                this.emit('error', new WalletDisconnectedError());\n                this.emit('disconnect');\n            }\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._publicKey = null;\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            scopePollingDetectionStrategy(() => {\n                if (window.backpack?.isBackpack) {\n                    this._readyState = WalletReadyState.Installed;\n                    this.emit('readyStateChange', this._readyState);\n                    return true;\n                }\n                return false;\n            });\n        }\n    }\n    get publicKey() {\n        return this._publicKey;\n    }\n    get connecting() {\n        return this._connecting;\n    }\n    get connected() {\n        return !!this._wallet?.isConnected;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n    async connect() {\n        try {\n            if (this.connected || this.connecting)\n                return;\n            if (this._readyState !== WalletReadyState.Installed)\n                throw new WalletNotReadyError();\n            this._connecting = true;\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            const wallet = window.backpack;\n            try {\n                await wallet.connect();\n            }\n            catch (error) {\n                throw new WalletConnectionError(error?.message, error);\n            }\n            if (!wallet.publicKey)\n                throw new WalletAccountError();\n            let publicKey;\n            try {\n                publicKey = new PublicKey(wallet.publicKey.toBytes());\n            }\n            catch (error) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n            wallet.on('disconnect', this._disconnected);\n            this._wallet = wallet;\n            this._publicKey = publicKey;\n            this.emit('connect', publicKey);\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n        finally {\n            this._connecting = false;\n        }\n    }\n    async disconnect() {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.off('disconnect', this._disconnected);\n            this._wallet = null;\n            this._publicKey = null;\n            try {\n                await wallet.disconnect();\n            }\n            catch (error) {\n                this.emit('error', new WalletDisconnectionError(error?.message, error));\n            }\n        }\n        this.emit('disconnect');\n    }\n    async sendTransaction(transaction, connection, options = {}) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            const { signers, ...sendOptions } = options;\n            try {\n                return await wallet.send(transaction, signers, sendOptions, connection, this.publicKey);\n            }\n            catch (error) {\n                throw new WalletSendTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signTransaction(transaction) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signTransaction(transaction, this.publicKey));\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signAllTransactions(transactions) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signAllTransactions(transactions, this.publicKey));\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signMessage(message) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return await wallet.signMessage(message, this.publicKey);\n            }\n            catch (error) {\n                throw new WalletSignMessageError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n}\n//# sourceMappingURL=adapter.js.map","import { BaseMessageSignerWalletAdapter, isVersionedTransaction, scopePollingDetectionStrategy, WalletAccountError, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSendTransactionError, WalletSignTransactionError, } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nexport const CoinbaseWalletName = 'Coinbase Wallet';\nexport class CoinbaseWalletAdapter extends BaseMessageSignerWalletAdapter {\n    constructor(config = {}) {\n        super();\n        this.name = CoinbaseWalletName;\n        this.url = 'https://chrome.google.com/webstore/detail/coinbase-wallet-extension/hnfanknocfeofbddgcijnmhnfnkdnaad';\n        this.icon = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=';\n        this.supportedTransactionVersions = new Set(['legacy', 0]);\n        this._readyState = typeof window === 'undefined' || typeof document === 'undefined'\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.NotDetected;\n        this._disconnected = () => {\n            const wallet = this._wallet;\n            if (wallet) {\n                wallet.off('disconnect', this._disconnected);\n                this._wallet = null;\n                this._publicKey = null;\n                this.emit('error', new WalletDisconnectedError());\n                this.emit('disconnect');\n            }\n        };\n        this._connecting = false;\n        this._wallet = null;\n        this._publicKey = null;\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            scopePollingDetectionStrategy(() => {\n                if (window?.coinbaseSolana) {\n                    this._readyState = WalletReadyState.Installed;\n                    this.emit('readyStateChange', this._readyState);\n                    return true;\n                }\n                return false;\n            });\n        }\n    }\n    get publicKey() {\n        return this._publicKey;\n    }\n    get connecting() {\n        return this._connecting;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n    async connect() {\n        try {\n            if (this.connected || this.connecting)\n                return;\n            if (this._readyState !== WalletReadyState.Installed)\n                throw new WalletNotReadyError();\n            this._connecting = true;\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            const wallet = window.coinbaseSolana;\n            try {\n                await wallet.connect();\n            }\n            catch (error) {\n                throw new WalletConnectionError(error?.message, error);\n            }\n            if (!wallet.publicKey)\n                throw new WalletAccountError();\n            let publicKey;\n            try {\n                publicKey = new PublicKey(wallet.publicKey.toBytes());\n            }\n            catch (error) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n            wallet.on('disconnect', this._disconnected);\n            this._wallet = wallet;\n            this._publicKey = publicKey;\n            this.emit('connect', publicKey);\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n        finally {\n            this._connecting = false;\n        }\n    }\n    async disconnect() {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.off('disconnect', this._disconnected);\n            this._wallet = null;\n            this._publicKey = null;\n            try {\n                await wallet.disconnect();\n            }\n            catch (error) {\n                this.emit('error', new WalletDisconnectionError(error?.message, error));\n            }\n        }\n        this.emit('disconnect');\n    }\n    async sendTransaction(transaction, connection, options = {}) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                const { signers, ...sendOptions } = options;\n                if (isVersionedTransaction(transaction)) {\n                    signers?.length && transaction.sign(signers);\n                }\n                else {\n                    transaction = (await this.prepareTransaction(transaction, connection, sendOptions));\n                    signers?.length && transaction.partialSign(...signers);\n                }\n                sendOptions.preflightCommitment = sendOptions.preflightCommitment || connection.commitment;\n                const { signature } = await wallet.signAndSendTransaction(transaction, sendOptions);\n                return signature;\n            }\n            catch (error) {\n                if (error instanceof WalletError)\n                    throw error;\n                throw new WalletSendTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signTransaction(transaction) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signTransaction(transaction)) || transaction;\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signAllTransactions(transactions) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                return (await wallet.signAllTransactions(transactions)) || transactions;\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n    async signMessage(message) {\n        try {\n            const wallet = this._wallet;\n            if (!wallet)\n                throw new WalletNotConnectedError();\n            try {\n                const { signature } = await wallet.signMessage(message);\n                return signature;\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n}\n//# sourceMappingURL=adapter.js.map","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/* eslint-disable no-continue */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-prototype-builtins */\nconst errorClasses = {};\nconst deserializers = {};\nexport const addCustomErrorDeserializer = (name, deserializer) => {\n    deserializers[name] = deserializer;\n};\nexport const createCustomErrorClass = (name) => {\n    class CustomErrorClass extends Error {\n        constructor(message, fields, options) {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            super(message || name, options);\n            // Set the prototype explicitly. See https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n            Object.setPrototypeOf(this, CustomErrorClass.prototype);\n            this.name = name;\n            if (fields) {\n                for (const k in fields) {\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-ignore\n                    this[k] = fields[k];\n                }\n            }\n            if (options && isObject(options) && \"cause\" in options && !(\"cause\" in this)) {\n                // .cause was specified but the superconstructor\n                // did not create an instance property.\n                const cause = options.cause;\n                this.cause = cause;\n                if (\"stack\" in cause) {\n                    this.stack = this.stack + \"\\nCAUSE: \" + cause.stack;\n                }\n            }\n        }\n    }\n    errorClasses[name] = CustomErrorClass;\n    return CustomErrorClass;\n};\nfunction isObject(value) {\n    return typeof value === \"object\";\n}\n// inspired from https://github.com/programble/errio/blob/master/index.js\nexport const deserializeError = (object) => {\n    if (object && typeof object === \"object\") {\n        try {\n            if (typeof object.message === \"string\") {\n                const msg = JSON.parse(object.message);\n                if (msg.message && msg.name) {\n                    object = msg;\n                }\n            }\n        }\n        catch (e) {\n            // nothing\n        }\n        let error;\n        if (typeof object.name === \"string\") {\n            const { name } = object;\n            const des = deserializers[name];\n            if (des) {\n                error = des(object);\n            }\n            else {\n                let constructor = name === \"Error\" ? Error : errorClasses[name];\n                if (!constructor) {\n                    console.warn(\"deserializing an unknown class '\" + name + \"'\");\n                    constructor = createCustomErrorClass(name);\n                }\n                error = Object.create(constructor.prototype);\n                try {\n                    for (const prop in object) {\n                        if (object.hasOwnProperty(prop)) {\n                            error[prop] = object[prop];\n                        }\n                    }\n                }\n                catch (e) {\n                    // sometimes setting a property can fail (e.g. .name)\n                }\n            }\n        }\n        else {\n            if (typeof object.message === \"string\") {\n                error = new Error(object.message);\n            }\n        }\n        if (error && !error.stack && Error.captureStackTrace) {\n            Error.captureStackTrace(error, deserializeError);\n        }\n        return error;\n    }\n    return new Error(String(object));\n};\n// inspired from https://github.com/sindresorhus/serialize-error/blob/master/index.js\nexport const serializeError = (value) => {\n    if (!value)\n        return value;\n    if (typeof value === \"object\") {\n        return destroyCircular(value, []);\n    }\n    if (typeof value === \"function\") {\n        return `[Function: ${value.name || \"anonymous\"}]`;\n    }\n    return value;\n};\n// https://www.npmjs.com/package/destroy-circular\nfunction destroyCircular(from, seen) {\n    const to = {};\n    seen.push(from);\n    for (const key of Object.keys(from)) {\n        const value = from[key];\n        if (typeof value === \"function\") {\n            continue;\n        }\n        if (!value || typeof value !== \"object\") {\n            to[key] = value;\n            continue;\n        }\n        if (seen.indexOf(from[key]) === -1) {\n            to[key] = destroyCircular(from[key], seen.slice(0));\n            continue;\n        }\n        to[key] = \"[Circular]\";\n    }\n    if (typeof from.name === \"string\") {\n        to.name = from.name;\n    }\n    if (typeof from.message === \"string\") {\n        to.message = from.message;\n    }\n    if (typeof from.stack === \"string\") {\n        to.stack = from.stack;\n    }\n    return to;\n}\n//# sourceMappingURL=helpers.js.map","import { serializeError, deserializeError, createCustomErrorClass, addCustomErrorDeserializer, } from \"./helpers\";\nexport { serializeError, deserializeError, createCustomErrorClass, addCustomErrorDeserializer };\nexport const AccountNameRequiredError = createCustomErrorClass(\"AccountNameRequired\");\nexport const AccountNotSupported = createCustomErrorClass(\"AccountNotSupported\");\nexport const AccountAwaitingSendPendingOperations = createCustomErrorClass(\"AccountAwaitingSendPendingOperations\");\nexport const AmountRequired = createCustomErrorClass(\"AmountRequired\");\nexport const BluetoothRequired = createCustomErrorClass(\"BluetoothRequired\");\nexport const BtcUnmatchedApp = createCustomErrorClass(\"BtcUnmatchedApp\");\nexport const CantOpenDevice = createCustomErrorClass(\"CantOpenDevice\");\nexport const CashAddrNotSupported = createCustomErrorClass(\"CashAddrNotSupported\");\nexport const ClaimRewardsFeesWarning = createCustomErrorClass(\"ClaimRewardsFeesWarning\");\nexport const CurrencyNotSupported = createCustomErrorClass(\"CurrencyNotSupported\");\nexport const DeviceAppVerifyNotSupported = createCustomErrorClass(\"DeviceAppVerifyNotSupported\");\nexport const DeviceGenuineSocketEarlyClose = createCustomErrorClass(\"DeviceGenuineSocketEarlyClose\");\nexport const DeviceNotGenuineError = createCustomErrorClass(\"DeviceNotGenuine\");\nexport const DeviceOnDashboardExpected = createCustomErrorClass(\"DeviceOnDashboardExpected\");\nexport const DeviceOnDashboardUnexpected = createCustomErrorClass(\"DeviceOnDashboardUnexpected\");\nexport const DeviceInOSUExpected = createCustomErrorClass(\"DeviceInOSUExpected\");\nexport const DeviceHalted = createCustomErrorClass(\"DeviceHalted\");\nexport const DeviceNameInvalid = createCustomErrorClass(\"DeviceNameInvalid\");\nexport const DeviceSocketFail = createCustomErrorClass(\"DeviceSocketFail\");\nexport const DeviceSocketNoBulkStatus = createCustomErrorClass(\"DeviceSocketNoBulkStatus\");\nexport const DeviceNeedsRestart = createCustomErrorClass(\"DeviceSocketNoBulkStatus\");\nexport const UnresponsiveDeviceError = createCustomErrorClass(\"UnresponsiveDeviceError\");\nexport const DisconnectedDevice = createCustomErrorClass(\"DisconnectedDevice\");\nexport const DisconnectedDeviceDuringOperation = createCustomErrorClass(\"DisconnectedDeviceDuringOperation\");\nexport const DeviceExtractOnboardingStateError = createCustomErrorClass(\"DeviceExtractOnboardingStateError\");\nexport const DeviceOnboardingStatePollingError = createCustomErrorClass(\"DeviceOnboardingStatePollingError\");\nexport const EnpointConfigError = createCustomErrorClass(\"EnpointConfig\");\nexport const EthAppPleaseEnableContractData = createCustomErrorClass(\"EthAppPleaseEnableContractData\");\nexport const FeeEstimationFailed = createCustomErrorClass(\"FeeEstimationFailed\");\nexport const FirmwareNotRecognized = createCustomErrorClass(\"FirmwareNotRecognized\");\nexport const HardResetFail = createCustomErrorClass(\"HardResetFail\");\nexport const InvalidXRPTag = createCustomErrorClass(\"InvalidXRPTag\");\nexport const InvalidAddress = createCustomErrorClass(\"InvalidAddress\");\nexport const InvalidNonce = createCustomErrorClass(\"InvalidNonce\");\nexport const InvalidAddressBecauseDestinationIsAlsoSource = createCustomErrorClass(\"InvalidAddressBecauseDestinationIsAlsoSource\");\nexport const LatestMCUInstalledError = createCustomErrorClass(\"LatestMCUInstalledError\");\nexport const UnknownMCU = createCustomErrorClass(\"UnknownMCU\");\nexport const LedgerAPIError = createCustomErrorClass(\"LedgerAPIError\");\nexport const LedgerAPIErrorWithMessage = createCustomErrorClass(\"LedgerAPIErrorWithMessage\");\nexport const LedgerAPINotAvailable = createCustomErrorClass(\"LedgerAPINotAvailable\");\nexport const ManagerAppAlreadyInstalledError = createCustomErrorClass(\"ManagerAppAlreadyInstalled\");\nexport const ManagerAppRelyOnBTCError = createCustomErrorClass(\"ManagerAppRelyOnBTC\");\nexport const ManagerAppDepInstallRequired = createCustomErrorClass(\"ManagerAppDepInstallRequired\");\nexport const ManagerAppDepUninstallRequired = createCustomErrorClass(\"ManagerAppDepUninstallRequired\");\nexport const ManagerDeviceLockedError = createCustomErrorClass(\"ManagerDeviceLocked\");\nexport const ManagerFirmwareNotEnoughSpaceError = createCustomErrorClass(\"ManagerFirmwareNotEnoughSpace\");\nexport const ManagerNotEnoughSpaceError = createCustomErrorClass(\"ManagerNotEnoughSpace\");\nexport const ManagerUninstallBTCDep = createCustomErrorClass(\"ManagerUninstallBTCDep\");\nexport const NetworkDown = createCustomErrorClass(\"NetworkDown\");\nexport const NetworkError = createCustomErrorClass(\"NetworkError\");\nexport const NoAddressesFound = createCustomErrorClass(\"NoAddressesFound\");\nexport const NotEnoughBalance = createCustomErrorClass(\"NotEnoughBalance\");\nexport const NotEnoughBalanceSwap = createCustomErrorClass(\"NotEnoughBalanceSwap\");\nexport const NotEnoughBalanceToDelegate = createCustomErrorClass(\"NotEnoughBalanceToDelegate\");\nexport const NotEnoughBalanceInParentAccount = createCustomErrorClass(\"NotEnoughBalanceInParentAccount\");\nexport const NotEnoughSpendableBalance = createCustomErrorClass(\"NotEnoughSpendableBalance\");\nexport const NotEnoughBalanceBecauseDestinationNotCreated = createCustomErrorClass(\"NotEnoughBalanceBecauseDestinationNotCreated\");\nexport const NoAccessToCamera = createCustomErrorClass(\"NoAccessToCamera\");\nexport const NotEnoughGas = createCustomErrorClass(\"NotEnoughGas\");\n// Error message specifically for the PTX swap flow\nexport const NotEnoughGasSwap = createCustomErrorClass(\"NotEnoughGasSwap\");\nexport const TronEmptyAccount = createCustomErrorClass(\"TronEmptyAccount\");\nexport const MaybeKeepTronAccountAlive = createCustomErrorClass(\"MaybeKeepTronAccountAlive\");\nexport const NotSupportedLegacyAddress = createCustomErrorClass(\"NotSupportedLegacyAddress\");\nexport const GasLessThanEstimate = createCustomErrorClass(\"GasLessThanEstimate\");\nexport const PriorityFeeTooLow = createCustomErrorClass(\"PriorityFeeTooLow\");\nexport const PriorityFeeTooHigh = createCustomErrorClass(\"PriorityFeeTooHigh\");\nexport const PriorityFeeHigherThanMaxFee = createCustomErrorClass(\"PriorityFeeHigherThanMaxFee\");\nexport const MaxFeeTooLow = createCustomErrorClass(\"MaxFeeTooLow\");\nexport const PasswordsDontMatchError = createCustomErrorClass(\"PasswordsDontMatch\");\nexport const PasswordIncorrectError = createCustomErrorClass(\"PasswordIncorrect\");\nexport const RecommendSubAccountsToEmpty = createCustomErrorClass(\"RecommendSubAccountsToEmpty\");\nexport const RecommendUndelegation = createCustomErrorClass(\"RecommendUndelegation\");\nexport const TimeoutTagged = createCustomErrorClass(\"TimeoutTagged\");\nexport const UnexpectedBootloader = createCustomErrorClass(\"UnexpectedBootloader\");\nexport const MCUNotGenuineToDashboard = createCustomErrorClass(\"MCUNotGenuineToDashboard\");\nexport const RecipientRequired = createCustomErrorClass(\"RecipientRequired\");\nexport const UnavailableTezosOriginatedAccountReceive = createCustomErrorClass(\"UnavailableTezosOriginatedAccountReceive\");\nexport const UnavailableTezosOriginatedAccountSend = createCustomErrorClass(\"UnavailableTezosOriginatedAccountSend\");\nexport const UpdateFetchFileFail = createCustomErrorClass(\"UpdateFetchFileFail\");\nexport const UpdateIncorrectHash = createCustomErrorClass(\"UpdateIncorrectHash\");\nexport const UpdateIncorrectSig = createCustomErrorClass(\"UpdateIncorrectSig\");\nexport const UpdateYourApp = createCustomErrorClass(\"UpdateYourApp\");\nexport const UserRefusedDeviceNameChange = createCustomErrorClass(\"UserRefusedDeviceNameChange\");\nexport const UserRefusedAddress = createCustomErrorClass(\"UserRefusedAddress\");\nexport const UserRefusedFirmwareUpdate = createCustomErrorClass(\"UserRefusedFirmwareUpdate\");\nexport const UserRefusedAllowManager = createCustomErrorClass(\"UserRefusedAllowManager\");\nexport const UserRefusedOnDevice = createCustomErrorClass(\"UserRefusedOnDevice\"); // TODO rename because it's just for transaction refusal\nexport const PinNotSet = createCustomErrorClass(\"PinNotSet\");\nexport const ExpertModeRequired = createCustomErrorClass(\"ExpertModeRequired\");\nexport const TransportOpenUserCancelled = createCustomErrorClass(\"TransportOpenUserCancelled\");\nexport const TransportInterfaceNotAvailable = createCustomErrorClass(\"TransportInterfaceNotAvailable\");\nexport const TransportRaceCondition = createCustomErrorClass(\"TransportRaceCondition\");\nexport const TransportWebUSBGestureRequired = createCustomErrorClass(\"TransportWebUSBGestureRequired\");\nexport const TransactionHasBeenValidatedError = createCustomErrorClass(\"TransactionHasBeenValidatedError\");\nexport const TransportExchangeTimeoutError = createCustomErrorClass(\"TransportExchangeTimeoutError\");\nexport const DeviceShouldStayInApp = createCustomErrorClass(\"DeviceShouldStayInApp\");\nexport const WebsocketConnectionError = createCustomErrorClass(\"WebsocketConnectionError\");\nexport const WebsocketConnectionFailed = createCustomErrorClass(\"WebsocketConnectionFailed\");\nexport const WrongDeviceForAccount = createCustomErrorClass(\"WrongDeviceForAccount\");\nexport const WrongDeviceForAccountPayout = createCustomErrorClass(\"WrongDeviceForAccountPayout\");\nexport const WrongDeviceForAccountRefund = createCustomErrorClass(\"WrongDeviceForAccountRefund\");\nexport const WrongAppForCurrency = createCustomErrorClass(\"WrongAppForCurrency\");\nexport const ETHAddressNonEIP = createCustomErrorClass(\"ETHAddressNonEIP\");\nexport const CantScanQRCode = createCustomErrorClass(\"CantScanQRCode\");\nexport const FeeNotLoaded = createCustomErrorClass(\"FeeNotLoaded\");\nexport const FeeNotLoadedSwap = createCustomErrorClass(\"FeeNotLoadedSwap\");\nexport const FeeRequired = createCustomErrorClass(\"FeeRequired\");\nexport const FeeTooHigh = createCustomErrorClass(\"FeeTooHigh\");\nexport const PendingOperation = createCustomErrorClass(\"PendingOperation\");\nexport const SyncError = createCustomErrorClass(\"SyncError\");\nexport const PairingFailed = createCustomErrorClass(\"PairingFailed\");\nexport const PeerRemovedPairing = createCustomErrorClass(\"PeerRemovedPairing\");\nexport const GenuineCheckFailed = createCustomErrorClass(\"GenuineCheckFailed\");\nexport const LedgerAPI4xx = createCustomErrorClass(\"LedgerAPI4xx\");\nexport const LedgerAPI5xx = createCustomErrorClass(\"LedgerAPI5xx\");\nexport const FirmwareOrAppUpdateRequired = createCustomErrorClass(\"FirmwareOrAppUpdateRequired\");\n// SpeedUp / Cancel EVM tx\nexport const ReplacementTransactionUnderpriced = createCustomErrorClass(\"ReplacementTransactionUnderpriced\");\n// Bitcoin family\nexport const OpReturnDataSizeLimit = createCustomErrorClass(\"OpReturnSizeLimit\");\nexport const DustLimit = createCustomErrorClass(\"DustLimit\");\n// Language\nexport const LanguageNotFound = createCustomErrorClass(\"LanguageNotFound\");\n// db stuff, no need to translate\nexport const NoDBPathGiven = createCustomErrorClass(\"NoDBPathGiven\");\nexport const DBWrongPassword = createCustomErrorClass(\"DBWrongPassword\");\nexport const DBNotReset = createCustomErrorClass(\"DBNotReset\");\nexport const SequenceNumberError = createCustomErrorClass(\"SequenceNumberError\");\nexport const DisabledTransactionBroadcastError = createCustomErrorClass(\"DisabledTransactionBroadcastError\");\n/**\n * Type of a Transport error used to represent all equivalent errors coming from all possible implementation of Transport\n */\nexport var HwTransportErrorType;\n(function (HwTransportErrorType) {\n    HwTransportErrorType[\"Unknown\"] = \"Unknown\";\n    HwTransportErrorType[\"LocationServicesDisabled\"] = \"LocationServicesDisabled\";\n    HwTransportErrorType[\"LocationServicesUnauthorized\"] = \"LocationServicesUnauthorized\";\n    HwTransportErrorType[\"BluetoothScanStartFailed\"] = \"BluetoothScanStartFailed\";\n})(HwTransportErrorType || (HwTransportErrorType = {}));\n/**\n * Represents an error coming from the usage of any Transport implementation.\n *\n * Needed to map a specific implementation error into an error that\n * can be managed by any code unaware of the specific Transport implementation\n * that was used.\n */\nexport class HwTransportError extends Error {\n    constructor(type, message) {\n        super(message);\n        this.name = \"HwTransportError\";\n        this.type = type;\n        // Needed as long as we target < ES6\n        Object.setPrototypeOf(this, HwTransportError.prototype);\n    }\n}\n/**\n * TransportError is used for any generic transport errors.\n * e.g. Error thrown when data received by exchanges are incorrect or if exchanged failed to communicate with the device for various reason.\n */\nexport class TransportError extends Error {\n    constructor(message, id) {\n        const name = \"TransportError\";\n        super(message || name);\n        this.name = name;\n        this.message = message;\n        this.stack = new Error(message).stack;\n        this.id = id;\n    }\n}\naddCustomErrorDeserializer(\"TransportError\", e => new TransportError(e.message, e.id));\nexport const StatusCodes = {\n    ACCESS_CONDITION_NOT_FULFILLED: 0x9804,\n    ALGORITHM_NOT_SUPPORTED: 0x9484,\n    CLA_NOT_SUPPORTED: 0x6e00,\n    CODE_BLOCKED: 0x9840,\n    CODE_NOT_INITIALIZED: 0x9802,\n    COMMAND_INCOMPATIBLE_FILE_STRUCTURE: 0x6981,\n    CONDITIONS_OF_USE_NOT_SATISFIED: 0x6985,\n    CONTRADICTION_INVALIDATION: 0x9810,\n    CONTRADICTION_SECRET_CODE_STATUS: 0x9808,\n    DEVICE_IN_RECOVERY_MODE: 0x662f,\n    CUSTOM_IMAGE_EMPTY: 0x662e,\n    FILE_ALREADY_EXISTS: 0x6a89,\n    FILE_NOT_FOUND: 0x9404,\n    GP_AUTH_FAILED: 0x6300,\n    HALTED: 0x6faa,\n    INCONSISTENT_FILE: 0x9408,\n    INCORRECT_DATA: 0x6a80,\n    INCORRECT_LENGTH: 0x6700,\n    INCORRECT_P1_P2: 0x6b00,\n    INS_NOT_SUPPORTED: 0x6d00,\n    DEVICE_NOT_ONBOARDED: 0x6d07,\n    DEVICE_NOT_ONBOARDED_2: 0x6611,\n    INVALID_KCV: 0x9485,\n    INVALID_OFFSET: 0x9402,\n    LICENSING: 0x6f42,\n    LOCKED_DEVICE: 0x5515,\n    MAX_VALUE_REACHED: 0x9850,\n    MEMORY_PROBLEM: 0x9240,\n    MISSING_CRITICAL_PARAMETER: 0x6800,\n    NO_EF_SELECTED: 0x9400,\n    NOT_ENOUGH_MEMORY_SPACE: 0x6a84,\n    OK: 0x9000,\n    PIN_REMAINING_ATTEMPTS: 0x63c0,\n    REFERENCED_DATA_NOT_FOUND: 0x6a88,\n    SECURITY_STATUS_NOT_SATISFIED: 0x6982,\n    TECHNICAL_PROBLEM: 0x6f00,\n    UNKNOWN_APDU: 0x6d02,\n    USER_REFUSED_ON_DEVICE: 0x5501,\n    NOT_ENOUGH_SPACE: 0x5102,\n    APP_NOT_FOUND_OR_INVALID_CONTEXT: 0x5123,\n    INVALID_APP_NAME_LENGTH: 0x670a,\n    GEN_AES_KEY_FAILED: 0x5419,\n    INTERNAL_CRYPTO_OPERATION_FAILED: 0x541a,\n    INTERNAL_COMPUTE_AES_CMAC_FAILED: 0x541b,\n    ENCRYPT_APP_STORAGE_FAILED: 0x541c,\n    INVALID_BACKUP_STATE: 0x6642,\n    PIN_NOT_SET: 0x5502,\n    INVALID_BACKUP_LENGTH: 0x6733,\n    INVALID_RESTORE_STATE: 0x6643,\n    INVALID_CHUNK_LENGTH: 0x6734,\n    INVALID_BACKUP_HEADER: 0x684a,\n    // Not documented:\n    TRUSTCHAIN_WRONG_SEED: 0xb007,\n};\nexport function getAltStatusMessage(code) {\n    switch (code) {\n        // improve text of most common errors\n        case 0x6700:\n            return \"Incorrect length\";\n        case 0x6800:\n            return \"Missing critical parameter\";\n        case 0x6982:\n            return \"Security not satisfied (dongle locked or have invalid access rights)\";\n        case 0x6985:\n            return \"Condition of use not satisfied (denied by the user?)\";\n        case 0x6a80:\n            return \"Invalid data received\";\n        case 0x6b00:\n            return \"Invalid parameter received\";\n        case 0x5515:\n            return \"Locked device\";\n    }\n    if (0x6f00 <= code && code <= 0x6fff) {\n        return \"Internal error, please report\";\n    }\n}\n/**\n * Error thrown when a device returned a non success status.\n * the error.statusCode is one of the `StatusCodes` exported by this library.\n */\nexport class TransportStatusError extends Error {\n    /**\n     * @param statusCode The error status code coming from a Transport implementation\n     * @param options containing:\n     *  - canBeMappedToChildError: enable the mapping of TransportStatusError to an error extending/inheriting from it\n     *  . Ex: LockedDeviceError. Default to true.\n     */\n    constructor(statusCode, { canBeMappedToChildError = true } = {}) {\n        const statusText = Object.keys(StatusCodes).find(k => StatusCodes[k] === statusCode) || \"UNKNOWN_ERROR\";\n        const smsg = getAltStatusMessage(statusCode) || statusText;\n        const statusCodeStr = statusCode.toString(16);\n        const message = `Ledger device: ${smsg} (0x${statusCodeStr})`;\n        super(message);\n        this.name = \"TransportStatusError\";\n        this.statusCode = statusCode;\n        this.statusText = statusText;\n        Object.setPrototypeOf(this, TransportStatusError.prototype);\n        // Maps to a LockedDeviceError\n        if (canBeMappedToChildError && statusCode === StatusCodes.LOCKED_DEVICE) {\n            return new LockedDeviceError(message);\n        }\n    }\n}\nexport class LockedDeviceError extends TransportStatusError {\n    constructor(message) {\n        super(StatusCodes.LOCKED_DEVICE, { canBeMappedToChildError: false });\n        if (message) {\n            this.message = message;\n        }\n        this.name = \"LockedDeviceError\";\n        Object.setPrototypeOf(this, LockedDeviceError.prototype);\n    }\n}\naddCustomErrorDeserializer(\"TransportStatusError\", e => new TransportStatusError(e.statusCode));\n//# sourceMappingURL=index.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport EventEmitter from \"events\";\nimport { TransportRaceCondition, TransportError, StatusCodes, getAltStatusMessage, TransportStatusError, } from \"@ledgerhq/errors\";\nexport { TransportError, TransportStatusError, StatusCodes, getAltStatusMessage, };\n/**\n * Transport defines the generic interface to share between node/u2f impl\n * A **Descriptor** is a parametric type that is up to be determined for the implementation.\n * it can be for instance an ID, an file path, a URL,...\n */\nvar Transport = /** @class */ (function () {\n    function Transport() {\n        var _this = this;\n        this.exchangeTimeout = 30000;\n        this.unresponsiveTimeout = 15000;\n        this.deviceModel = null;\n        this._events = new EventEmitter();\n        /**\n         * wrapper on top of exchange to simplify work of the implementation.\n         * @param cla\n         * @param ins\n         * @param p1\n         * @param p2\n         * @param data\n         * @param statusList is a list of accepted status code (shorts). [0x9000] by default\n         * @return a Promise of response buffer\n         */\n        this.send = function (cla, ins, p1, p2, data, statusList) {\n            if (data === void 0) { data = Buffer.alloc(0); }\n            if (statusList === void 0) { statusList = [StatusCodes.OK]; }\n            return __awaiter(_this, void 0, void 0, function () {\n                var response, sw;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            if (data.length >= 256) {\n                                throw new TransportError(\"data.length exceed 256 bytes limit. Got: \" + data.length, \"DataLengthTooBig\");\n                            }\n                            return [4 /*yield*/, this.exchange(Buffer.concat([\n                                    Buffer.from([cla, ins, p1, p2]),\n                                    Buffer.from([data.length]),\n                                    data,\n                                ]))];\n                        case 1:\n                            response = _a.sent();\n                            sw = response.readUInt16BE(response.length - 2);\n                            if (!statusList.some(function (s) { return s === sw; })) {\n                                throw new TransportStatusError(sw);\n                            }\n                            return [2 /*return*/, response];\n                    }\n                });\n            });\n        };\n        this.exchangeAtomicImpl = function (f) { return __awaiter(_this, void 0, void 0, function () {\n            var resolveBusy, busyPromise, unresponsiveReached, timeout, res;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.exchangeBusyPromise) {\n                            throw new TransportRaceCondition(\"An action was already pending on the Ledger device. Please deny or reconnect.\");\n                        }\n                        busyPromise = new Promise(function (r) {\n                            resolveBusy = r;\n                        });\n                        this.exchangeBusyPromise = busyPromise;\n                        unresponsiveReached = false;\n                        timeout = setTimeout(function () {\n                            unresponsiveReached = true;\n                            _this.emit(\"unresponsive\");\n                        }, this.unresponsiveTimeout);\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, , 3, 4]);\n                        return [4 /*yield*/, f()];\n                    case 2:\n                        res = _a.sent();\n                        if (unresponsiveReached) {\n                            this.emit(\"responsive\");\n                        }\n                        return [2 /*return*/, res];\n                    case 3:\n                        clearTimeout(timeout);\n                        if (resolveBusy)\n                            resolveBusy();\n                        this.exchangeBusyPromise = null;\n                        return [7 /*endfinally*/];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        }); };\n        this._appAPIlock = null;\n    }\n    /**\n     * low level api to communicate with the device\n     * This method is for implementations to implement but should not be directly called.\n     * Instead, the recommanded way is to use send() method\n     * @param apdu the data to send\n     * @return a Promise of response data\n     */\n    Transport.prototype.exchange = function (_apdu) {\n        throw new Error(\"exchange not implemented\");\n    };\n    /**\n     * set the \"scramble key\" for the next exchanges with the device.\n     * Each App can have a different scramble key and they internally will set it at instanciation.\n     * @param key the scramble key\n     */\n    Transport.prototype.setScrambleKey = function (_key) { };\n    /**\n     * close the exchange with the device.\n     * @return a Promise that ends when the transport is closed.\n     */\n    Transport.prototype.close = function () {\n        return Promise.resolve();\n    };\n    /**\n     * Listen to an event on an instance of transport.\n     * Transport implementation can have specific events. Here is the common events:\n     * * `\"disconnect\"` : triggered if Transport is disconnected\n     */\n    Transport.prototype.on = function (eventName, cb) {\n        this._events.on(eventName, cb);\n    };\n    /**\n     * Stop listening to an event on an instance of transport.\n     */\n    Transport.prototype.off = function (eventName, cb) {\n        this._events.removeListener(eventName, cb);\n    };\n    Transport.prototype.emit = function (event) {\n        var _a;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        (_a = this._events).emit.apply(_a, __spreadArray([event], __read(args), false));\n    };\n    /**\n     * Enable or not logs of the binary exchange\n     */\n    Transport.prototype.setDebugMode = function () {\n        console.warn(\"setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.\");\n    };\n    /**\n     * Set a timeout (in milliseconds) for the exchange call. Only some transport might implement it. (e.g. U2F)\n     */\n    Transport.prototype.setExchangeTimeout = function (exchangeTimeout) {\n        this.exchangeTimeout = exchangeTimeout;\n    };\n    /**\n     * Define the delay before emitting \"unresponsive\" on an exchange that does not respond\n     */\n    Transport.prototype.setExchangeUnresponsiveTimeout = function (unresponsiveTimeout) {\n        this.unresponsiveTimeout = unresponsiveTimeout;\n    };\n    /**\n     * create() allows to open the first descriptor available or\n     * throw if there is none or if timeout is reached.\n     * This is a light helper, alternative to using listen() and open() (that you may need for any more advanced usecase)\n     * @example\n    TransportFoo.create().then(transport => ...)\n     */\n    Transport.create = function (openTimeout, listenTimeout) {\n        var _this = this;\n        if (openTimeout === void 0) { openTimeout = 3000; }\n        return new Promise(function (resolve, reject) {\n            var found = false;\n            var sub = _this.listen({\n                next: function (e) {\n                    found = true;\n                    if (sub)\n                        sub.unsubscribe();\n                    if (listenTimeoutId)\n                        clearTimeout(listenTimeoutId);\n                    _this.open(e.descriptor, openTimeout).then(resolve, reject);\n                },\n                error: function (e) {\n                    if (listenTimeoutId)\n                        clearTimeout(listenTimeoutId);\n                    reject(e);\n                },\n                complete: function () {\n                    if (listenTimeoutId)\n                        clearTimeout(listenTimeoutId);\n                    if (!found) {\n                        reject(new TransportError(_this.ErrorMessage_NoDeviceFound, \"NoDeviceFound\"));\n                    }\n                }\n            });\n            var listenTimeoutId = listenTimeout\n                ? setTimeout(function () {\n                    sub.unsubscribe();\n                    reject(new TransportError(_this.ErrorMessage_ListenTimeout, \"ListenTimeout\"));\n                }, listenTimeout)\n                : null;\n        });\n    };\n    Transport.prototype.decorateAppAPIMethods = function (self, methods, scrambleKey) {\n        var e_1, _a;\n        try {\n            for (var methods_1 = __values(methods), methods_1_1 = methods_1.next(); !methods_1_1.done; methods_1_1 = methods_1.next()) {\n                var methodName = methods_1_1.value;\n                self[methodName] = this.decorateAppAPIMethod(methodName, self[methodName], self, scrambleKey);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (methods_1_1 && !methods_1_1.done && (_a = methods_1[\"return\"])) _a.call(methods_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    Transport.prototype.decorateAppAPIMethod = function (methodName, f, ctx, scrambleKey) {\n        var _this = this;\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return __awaiter(_this, void 0, void 0, function () {\n                var _appAPIlock;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            _appAPIlock = this._appAPIlock;\n                            if (_appAPIlock) {\n                                return [2 /*return*/, Promise.reject(new TransportError(\"Ledger Device is busy (lock \" + _appAPIlock + \")\", \"TransportLocked\"))];\n                            }\n                            _a.label = 1;\n                        case 1:\n                            _a.trys.push([1, , 3, 4]);\n                            this._appAPIlock = methodName;\n                            this.setScrambleKey(scrambleKey);\n                            return [4 /*yield*/, f.apply(ctx, args)];\n                        case 2: return [2 /*return*/, _a.sent()];\n                        case 3:\n                            this._appAPIlock = null;\n                            return [7 /*endfinally*/];\n                        case 4: return [2 /*return*/];\n                    }\n                });\n            });\n        };\n    };\n    Transport.ErrorMessage_ListenTimeout = \"No Ledger device found (timeout)\";\n    Transport.ErrorMessage_NoDeviceFound = \"No Ledger device found\";\n    return Transport;\n}());\nexport default Transport;\n//# sourceMappingURL=Transport.js.map","import { StatusCodes, TransportStatusError } from '@ledgerhq/hw-transport';\nimport { isVersionedTransaction } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nimport './polyfills/index.js';\nexport function getDerivationPath(account, change) {\n    const length = account !== undefined ? (change === undefined ? 3 : 4) : 2;\n    const derivationPath = Buffer.alloc(1 + length * 4);\n    let offset = derivationPath.writeUInt8(length, 0);\n    offset = derivationPath.writeUInt32BE(harden(44), offset); // Using BIP44\n    offset = derivationPath.writeUInt32BE(harden(501), offset); // Solana's BIP44 path\n    if (account !== undefined) {\n        offset = derivationPath.writeUInt32BE(harden(account), offset);\n        if (change !== undefined) {\n            derivationPath.writeUInt32BE(harden(change), offset);\n        }\n    }\n    return derivationPath;\n}\nconst BIP32_HARDENED_BIT = (1 << 31) >>> 0;\nfunction harden(n) {\n    return (n | BIP32_HARDENED_BIT) >>> 0;\n}\nconst INS_GET_PUBKEY = 0x05;\nconst INS_SIGN_MESSAGE = 0x06;\nconst P1_NON_CONFIRM = 0x00;\nconst P1_CONFIRM = 0x01;\nconst P2_EXTEND = 0x01;\nconst P2_MORE = 0x02;\nconst MAX_PAYLOAD = 255;\nconst LEDGER_CLA = 0xe0;\n/** @internal */\nexport async function getPublicKey(transport, derivationPath) {\n    const bytes = await send(transport, INS_GET_PUBKEY, P1_NON_CONFIRM, derivationPath);\n    return new PublicKey(bytes);\n}\n/** @internal */\nexport async function signTransaction(transport, transaction, derivationPath) {\n    const paths = Buffer.alloc(1);\n    paths.writeUInt8(1, 0);\n    const message = isVersionedTransaction(transaction)\n        ? transaction.message.serialize()\n        : transaction.serializeMessage();\n    const data = Buffer.concat([paths, derivationPath, message]);\n    return await send(transport, INS_SIGN_MESSAGE, P1_CONFIRM, data);\n}\nasync function send(transport, instruction, p1, data) {\n    let p2 = 0;\n    let offset = 0;\n    if (data.length > MAX_PAYLOAD) {\n        while (data.length - offset > MAX_PAYLOAD) {\n            const buffer = data.slice(offset, offset + MAX_PAYLOAD);\n            const response = await transport.send(LEDGER_CLA, instruction, p1, p2 | P2_MORE, buffer);\n            // @ts-ignore -- TransportStatusError is a constructor Function, not a Class\n            if (response.length !== 2)\n                throw new TransportStatusError(StatusCodes.INCORRECT_DATA);\n            p2 |= P2_EXTEND;\n            offset += MAX_PAYLOAD;\n        }\n    }\n    const buffer = data.slice(offset);\n    const response = await transport.send(LEDGER_CLA, instruction, p1, p2, buffer);\n    return response.slice(0, response.length - 2);\n}\n//# sourceMappingURL=util.js.map","import { BaseSignerWalletAdapter, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletLoadError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSignTransactionError, } from '@solana/wallet-adapter-base';\nimport './polyfills/index.js';\nimport { getDerivationPath, getPublicKey, signTransaction } from './util.js';\nexport const LedgerWalletName = 'Ledger';\nexport class LedgerWalletAdapter extends BaseSignerWalletAdapter {\n    constructor(config = {}) {\n        super();\n        this.name = LedgerWalletName;\n        this.url = 'https://ledger.com';\n        this.icon = 'data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzUgMzUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0ibTIzLjU4OCAwaC0xNnYyMS41ODNoMjEuNnYtMTZhNS41ODUgNS41ODUgMCAwIDAgLTUuNi01LjU4M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5KSIvPjxwYXRoIGQ9Im04LjM0MiAwaC0yLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCAtNS41ODUgNS41ODV2Mi43NTdoOC4zNDJ6Ii8+PHBhdGggZD0ibTAgNy41OWg4LjM0MnY4LjM0MmgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDUuNzM5KSIvPjxwYXRoIGQ9Im0xNS4xOCAyMy40NTFoMi43NTdhNS41ODUgNS41ODUgMCAwIDAgNS41ODUtNS42di0yLjY3MWgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMS40NzggMTEuNDc4KSIvPjxwYXRoIGQ9Im03LjU5IDE1LjE4aDguMzQydjguMzQyaC04LjM0MnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5IDExLjQ3OCkiLz48cGF0aCBkPSJtMCAxNS4xOHYyLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCA1LjU4NSA1LjU4NWgyLjc1N3YtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDExLjQ3OCkiLz48L2c+PC9zdmc+';\n        this.supportedTransactionVersions = new Set(['legacy', 0]);\n        this._readyState = typeof window === 'undefined' ||\n            typeof document === 'undefined' ||\n            typeof navigator === 'undefined' ||\n            !navigator.hid\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.Loadable;\n        this._disconnected = () => {\n            const transport = this._transport;\n            if (transport) {\n                transport.off('disconnect', this._disconnected);\n                this._transport = null;\n                this._publicKey = null;\n                this.emit('error', new WalletDisconnectedError());\n                this.emit('disconnect');\n            }\n        };\n        this._derivationPath = config.derivationPath || getDerivationPath(0, 0);\n        this._connecting = false;\n        this._transport = null;\n        this._publicKey = null;\n    }\n    get publicKey() {\n        return this._publicKey;\n    }\n    get connecting() {\n        return this._connecting;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n    async connect() {\n        try {\n            if (this.connected || this.connecting)\n                return;\n            if (this._readyState !== WalletReadyState.Loadable)\n                throw new WalletNotReadyError();\n            this._connecting = true;\n            let TransportWebHIDClass;\n            try {\n                TransportWebHIDClass = (await import('@ledgerhq/hw-transport-webhid')).default;\n            }\n            catch (error) {\n                throw new WalletLoadError(error?.message, error);\n            }\n            let transport;\n            try {\n                transport = await TransportWebHIDClass.create();\n            }\n            catch (error) {\n                throw new WalletConnectionError(error?.message, error);\n            }\n            let publicKey;\n            try {\n                publicKey = await getPublicKey(transport, this._derivationPath);\n            }\n            catch (error) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n            transport.on('disconnect', this._disconnected);\n            this._transport = transport;\n            this._publicKey = publicKey;\n            this.emit('connect', publicKey);\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n        finally {\n            this._connecting = false;\n        }\n    }\n    async disconnect() {\n        const transport = this._transport;\n        if (transport) {\n            transport.off('disconnect', this._disconnected);\n            this._transport = null;\n            this._publicKey = null;\n            try {\n                await transport.close();\n            }\n            catch (error) {\n                this.emit('error', new WalletDisconnectionError(error?.message, error));\n            }\n        }\n        this.emit('disconnect');\n    }\n    async signTransaction(transaction) {\n        try {\n            const transport = this._transport;\n            const publicKey = this._publicKey;\n            if (!transport || !publicKey)\n                throw new WalletNotConnectedError();\n            try {\n                const signature = await signTransaction(transport, transaction, this._derivationPath);\n                transaction.addSignature(publicKey, signature);\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n            return transaction;\n        }\n        catch (error) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n}\n//# sourceMappingURL=adapter.js.map","export default {}","/**\n * [js-sha256]{@link https://github.com/emn178/js-sha256}\n *\n * @version 0.11.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2024\n * @license MIT\n */\n/*jslint bitwise: true */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_SHA256_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_SHA256_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_SHA256_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_SHA256_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var K = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n  ];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  if (root.JS_SHA256_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  var createOutputMethod = function (outputType, is224) {\n    return function (message) {\n      return new Sha256(is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function (is224) {\n    var method = createOutputMethod('hex', is224);\n    if (NODE_JS) {\n      method = nodeWrap(method, is224);\n    }\n    method.create = function () {\n      return new Sha256(is224);\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method, is224) {\n    var crypto = require('crypto')\n    var Buffer = require('buffer').Buffer;\n    var algorithm = is224 ? 'sha224' : 'sha256';\n    var bufferFrom;\n    if (Buffer.from && !root.JS_SHA256_NO_BUFFER_FROM) {\n      bufferFrom = Buffer.from;\n    } else {\n      bufferFrom = function (message) {\n        return new Buffer(message);\n      };\n    }\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash(algorithm).update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw new Error(ERROR);\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash(algorithm).update(bufferFrom(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  var createHmacOutputMethod = function (outputType, is224) {\n    return function (key, message) {\n      return new HmacSha256(key, is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createHmacMethod = function (is224) {\n    var method = createHmacOutputMethod('hex', is224);\n    method.create = function (key) {\n      return new HmacSha256(key, is224);\n    };\n    method.update = function (key, message) {\n      return method.create(key).update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createHmacOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  function Sha256(is224, sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    if (is224) {\n      this.h0 = 0xc1059ed8;\n      this.h1 = 0x367cd507;\n      this.h2 = 0x3070dd17;\n      this.h3 = 0xf70e5939;\n      this.h4 = 0xffc00b31;\n      this.h5 = 0x68581511;\n      this.h6 = 0x64f98fa7;\n      this.h7 = 0xbefa4fa4;\n    } else { // 256\n      this.h0 = 0x6a09e667;\n      this.h1 = 0xbb67ae85;\n      this.h2 = 0x3c6ef372;\n      this.h3 = 0xa54ff53a;\n      this.h4 = 0x510e527f;\n      this.h5 = 0x9b05688c;\n      this.h6 = 0x1f83d9ab;\n      this.h7 = 0x5be0cd19;\n    }\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n    this.is224 = is224;\n  }\n\n  Sha256.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        this.block = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n          blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n          blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n          blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        for (i = this.start; index < length && i < 64; ++index) {\n          blocks[i >>> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < 64; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >>> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >>> 2] |= (0xc0 | (code >>> 6)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >>> 2] |= (0xe0 | (code >>> 12)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | ((code >>> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >>> 2] |= (0xf0 | (code >>> 18)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | ((code >>> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | ((code >>> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >>> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.block = blocks[16];\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha256.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >>> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha256.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6,\n      h = this.h7, blocks = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n\n    for (j = 16; j < 64; ++j) {\n      // rightrotate\n      t1 = blocks[j - 15];\n      s0 = ((t1 >>> 7) | (t1 << 25)) ^ ((t1 >>> 18) | (t1 << 14)) ^ (t1 >>> 3);\n      t1 = blocks[j - 2];\n      s1 = ((t1 >>> 17) | (t1 << 15)) ^ ((t1 >>> 19) | (t1 << 13)) ^ (t1 >>> 10);\n      blocks[j] = blocks[j - 16] + s0 + blocks[j - 7] + s1 << 0;\n    }\n\n    bc = b & c;\n    for (j = 0; j < 64; j += 4) {\n      if (this.first) {\n        if (this.is224) {\n          ab = 300032;\n          t1 = blocks[0] - 1413257819;\n          h = t1 - 150054599 << 0;\n          d = t1 + 24177077 << 0;\n        } else {\n          ab = 704751109;\n          t1 = blocks[0] - 210244248;\n          h = t1 - 1521486534 << 0;\n          d = t1 + 143694565 << 0;\n        }\n        this.first = false;\n      } else {\n        s0 = ((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10));\n        s1 = ((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7));\n        ab = a & b;\n        maj = ab ^ (a & c) ^ bc;\n        ch = (e & f) ^ (~e & g);\n        t1 = h + s1 + ch + K[j] + blocks[j];\n        t2 = s0 + maj;\n        h = d + t1 << 0;\n        d = t1 + t2 << 0;\n      }\n      s0 = ((d >>> 2) | (d << 30)) ^ ((d >>> 13) | (d << 19)) ^ ((d >>> 22) | (d << 10));\n      s1 = ((h >>> 6) | (h << 26)) ^ ((h >>> 11) | (h << 21)) ^ ((h >>> 25) | (h << 7));\n      da = d & a;\n      maj = da ^ (d & b) ^ ab;\n      ch = (h & e) ^ (~h & f);\n      t1 = g + s1 + ch + K[j + 1] + blocks[j + 1];\n      t2 = s0 + maj;\n      g = c + t1 << 0;\n      c = t1 + t2 << 0;\n      s0 = ((c >>> 2) | (c << 30)) ^ ((c >>> 13) | (c << 19)) ^ ((c >>> 22) | (c << 10));\n      s1 = ((g >>> 6) | (g << 26)) ^ ((g >>> 11) | (g << 21)) ^ ((g >>> 25) | (g << 7));\n      cd = c & d;\n      maj = cd ^ (c & a) ^ da;\n      ch = (g & h) ^ (~g & e);\n      t1 = f + s1 + ch + K[j + 2] + blocks[j + 2];\n      t2 = s0 + maj;\n      f = b + t1 << 0;\n      b = t1 + t2 << 0;\n      s0 = ((b >>> 2) | (b << 30)) ^ ((b >>> 13) | (b << 19)) ^ ((b >>> 22) | (b << 10));\n      s1 = ((f >>> 6) | (f << 26)) ^ ((f >>> 11) | (f << 21)) ^ ((f >>> 25) | (f << 7));\n      bc = b & c;\n      maj = bc ^ (b & d) ^ cd;\n      ch = (f & g) ^ (~f & h);\n      t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n      t2 = s0 + maj;\n      e = a + t1 << 0;\n      a = t1 + t2 << 0;\n      this.chromeBugWorkAround = true;\n    }\n\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n    this.h5 = this.h5 + f << 0;\n    this.h6 = this.h6 + g << 0;\n    this.h7 = this.h7 + h << 0;\n  };\n\n  Sha256.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var hex = HEX_CHARS[(h0 >>> 28) & 0x0F] + HEX_CHARS[(h0 >>> 24) & 0x0F] +\n      HEX_CHARS[(h0 >>> 20) & 0x0F] + HEX_CHARS[(h0 >>> 16) & 0x0F] +\n      HEX_CHARS[(h0 >>> 12) & 0x0F] + HEX_CHARS[(h0 >>> 8) & 0x0F] +\n      HEX_CHARS[(h0 >>> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h1 >>> 28) & 0x0F] + HEX_CHARS[(h1 >>> 24) & 0x0F] +\n      HEX_CHARS[(h1 >>> 20) & 0x0F] + HEX_CHARS[(h1 >>> 16) & 0x0F] +\n      HEX_CHARS[(h1 >>> 12) & 0x0F] + HEX_CHARS[(h1 >>> 8) & 0x0F] +\n      HEX_CHARS[(h1 >>> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h2 >>> 28) & 0x0F] + HEX_CHARS[(h2 >>> 24) & 0x0F] +\n      HEX_CHARS[(h2 >>> 20) & 0x0F] + HEX_CHARS[(h2 >>> 16) & 0x0F] +\n      HEX_CHARS[(h2 >>> 12) & 0x0F] + HEX_CHARS[(h2 >>> 8) & 0x0F] +\n      HEX_CHARS[(h2 >>> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h3 >>> 28) & 0x0F] + HEX_CHARS[(h3 >>> 24) & 0x0F] +\n      HEX_CHARS[(h3 >>> 20) & 0x0F] + HEX_CHARS[(h3 >>> 16) & 0x0F] +\n      HEX_CHARS[(h3 >>> 12) & 0x0F] + HEX_CHARS[(h3 >>> 8) & 0x0F] +\n      HEX_CHARS[(h3 >>> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h4 >>> 28) & 0x0F] + HEX_CHARS[(h4 >>> 24) & 0x0F] +\n      HEX_CHARS[(h4 >>> 20) & 0x0F] + HEX_CHARS[(h4 >>> 16) & 0x0F] +\n      HEX_CHARS[(h4 >>> 12) & 0x0F] + HEX_CHARS[(h4 >>> 8) & 0x0F] +\n      HEX_CHARS[(h4 >>> 4) & 0x0F] + HEX_CHARS[h4 & 0x0F] +\n      HEX_CHARS[(h5 >>> 28) & 0x0F] + HEX_CHARS[(h5 >>> 24) & 0x0F] +\n      HEX_CHARS[(h5 >>> 20) & 0x0F] + HEX_CHARS[(h5 >>> 16) & 0x0F] +\n      HEX_CHARS[(h5 >>> 12) & 0x0F] + HEX_CHARS[(h5 >>> 8) & 0x0F] +\n      HEX_CHARS[(h5 >>> 4) & 0x0F] + HEX_CHARS[h5 & 0x0F] +\n      HEX_CHARS[(h6 >>> 28) & 0x0F] + HEX_CHARS[(h6 >>> 24) & 0x0F] +\n      HEX_CHARS[(h6 >>> 20) & 0x0F] + HEX_CHARS[(h6 >>> 16) & 0x0F] +\n      HEX_CHARS[(h6 >>> 12) & 0x0F] + HEX_CHARS[(h6 >>> 8) & 0x0F] +\n      HEX_CHARS[(h6 >>> 4) & 0x0F] + HEX_CHARS[h6 & 0x0F];\n    if (!this.is224) {\n      hex += HEX_CHARS[(h7 >>> 28) & 0x0F] + HEX_CHARS[(h7 >>> 24) & 0x0F] +\n        HEX_CHARS[(h7 >>> 20) & 0x0F] + HEX_CHARS[(h7 >>> 16) & 0x0F] +\n        HEX_CHARS[(h7 >>> 12) & 0x0F] + HEX_CHARS[(h7 >>> 8) & 0x0F] +\n        HEX_CHARS[(h7 >>> 4) & 0x0F] + HEX_CHARS[h7 & 0x0F];\n    }\n    return hex;\n  };\n\n  Sha256.prototype.toString = Sha256.prototype.hex;\n\n  Sha256.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var arr = [\n      (h0 >>> 24) & 0xFF, (h0 >>> 16) & 0xFF, (h0 >>> 8) & 0xFF, h0 & 0xFF,\n      (h1 >>> 24) & 0xFF, (h1 >>> 16) & 0xFF, (h1 >>> 8) & 0xFF, h1 & 0xFF,\n      (h2 >>> 24) & 0xFF, (h2 >>> 16) & 0xFF, (h2 >>> 8) & 0xFF, h2 & 0xFF,\n      (h3 >>> 24) & 0xFF, (h3 >>> 16) & 0xFF, (h3 >>> 8) & 0xFF, h3 & 0xFF,\n      (h4 >>> 24) & 0xFF, (h4 >>> 16) & 0xFF, (h4 >>> 8) & 0xFF, h4 & 0xFF,\n      (h5 >>> 24) & 0xFF, (h5 >>> 16) & 0xFF, (h5 >>> 8) & 0xFF, h5 & 0xFF,\n      (h6 >>> 24) & 0xFF, (h6 >>> 16) & 0xFF, (h6 >>> 8) & 0xFF, h6 & 0xFF\n    ];\n    if (!this.is224) {\n      arr.push((h7 >>> 24) & 0xFF, (h7 >>> 16) & 0xFF, (h7 >>> 8) & 0xFF, h7 & 0xFF);\n    }\n    return arr;\n  };\n\n  Sha256.prototype.array = Sha256.prototype.digest;\n\n  Sha256.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(this.is224 ? 28 : 32);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    dataView.setUint32(20, this.h5);\n    dataView.setUint32(24, this.h6);\n    if (!this.is224) {\n      dataView.setUint32(28, this.h7);\n    }\n    return buffer;\n  };\n\n  function HmacSha256(key, is224, sharedMemory) {\n    var i, type = typeof key;\n    if (type === 'string') {\n      var bytes = [], length = key.length, index = 0, code;\n      for (i = 0; i < length; ++i) {\n        code = key.charCodeAt(i);\n        if (code < 0x80) {\n          bytes[index++] = code;\n        } else if (code < 0x800) {\n          bytes[index++] = (0xc0 | (code >>> 6));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else if (code < 0xd800 || code >= 0xe000) {\n          bytes[index++] = (0xe0 | (code >>> 12));\n          bytes[index++] = (0x80 | ((code >>> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else {\n          code = 0x10000 + (((code & 0x3ff) << 10) | (key.charCodeAt(++i) & 0x3ff));\n          bytes[index++] = (0xf0 | (code >>> 18));\n          bytes[index++] = (0x80 | ((code >>> 12) & 0x3f));\n          bytes[index++] = (0x80 | ((code >>> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        }\n      }\n      key = bytes;\n    } else {\n      if (type === 'object') {\n        if (key === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && key.constructor === ArrayBuffer) {\n          key = new Uint8Array(key);\n        } else if (!Array.isArray(key)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(key)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n    }\n\n    if (key.length > 64) {\n      key = (new Sha256(is224, true)).update(key).array();\n    }\n\n    var oKeyPad = [], iKeyPad = [];\n    for (i = 0; i < 64; ++i) {\n      var b = key[i] || 0;\n      oKeyPad[i] = 0x5c ^ b;\n      iKeyPad[i] = 0x36 ^ b;\n    }\n\n    Sha256.call(this, is224, sharedMemory);\n\n    this.update(iKeyPad);\n    this.oKeyPad = oKeyPad;\n    this.inner = true;\n    this.sharedMemory = sharedMemory;\n  }\n  HmacSha256.prototype = new Sha256();\n\n  HmacSha256.prototype.finalize = function () {\n    Sha256.prototype.finalize.call(this);\n    if (this.inner) {\n      this.inner = false;\n      var innerHash = this.array();\n      Sha256.call(this, this.is224, this.sharedMemory);\n      this.update(this.oKeyPad);\n      this.update(innerHash);\n      Sha256.prototype.finalize.call(this);\n    }\n  };\n\n  var exports = createMethod();\n  exports.sha256 = exports;\n  exports.sha224 = createMethod(true);\n  exports.sha256.hmac = createHmacMethod();\n  exports.sha224.hmac = createHmacMethod(true);\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha256 = exports.sha256;\n    root.sha224 = exports.sha224;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","import * as borsh from 'borsh';\nimport { Buffer } from 'buffer';\n\n// Create a borsh struct helper function\nexport const struct = (fields: Array<{ key: string, type: string }>) => {\n  // Check if borsh.struct exists natively\n  if (typeof borsh.struct === 'function') {\n    // Convert our field format to borsh's format\n    const borshFields = fields.map(field => [field.key, field.type]);\n    return borsh.struct(borshFields);\n  }\n\n  // Fallback implementation if borsh.struct doesn't exist\n  return {\n    encode: (value: any, buffer: Buffer): number => {\n      let offset = 0;\n\n      fields.forEach(field => {\n        const fieldValue = value[field.key];\n\n        switch (field.type) {\n          case 'u8':\n            buffer.writeUInt8(fieldValue, offset);\n            offset += 1;\n            break;\n          case 'u16':\n            buffer.writeUInt16LE(fieldValue, offset);\n            offset += 2;\n            break;\n          case 'u32':\n            buffer.writeUInt32LE(fieldValue, offset);\n            offset += 4;\n            break;\n          case 'u64':\n            // For big numbers like u64, we need to handle them carefully\n            if (typeof fieldValue === 'bigint') {\n              const buf = Buffer.alloc(8);\n              buf.writeBigUInt64LE(fieldValue, 0);\n              buf.copy(buffer, offset);\n            } else if (typeof fieldValue === 'number') {\n              const buf = Buffer.alloc(8);\n              buf.writeBigUInt64LE(BigInt(fieldValue), 0);\n              buf.copy(buffer, offset);\n            }\n            offset += 8;\n            break;\n          default:\n            throw new Error(`Unsupported type: ${field.type}`);\n        }\n      });\n\n      return offset;\n    },\n\n    // Add decode if needed\n    decode: (buffer: Buffer): any => {\n      const result: any = {};\n      let offset = 0;\n\n      fields.forEach(field => {\n        switch (field.type) {\n          case 'u8':\n            result[field.key] = buffer.readUInt8(offset);\n            offset += 1;\n            break;\n          case 'u16':\n            result[field.key] = buffer.readUInt16LE(offset);\n            offset += 2;\n            break;\n          case 'u32':\n            result[field.key] = buffer.readUInt32LE(offset);\n            offset += 4;\n            break;\n          case 'u64':\n            result[field.key] = buffer.readBigUInt64LE(offset);\n            offset += 8;\n            break;\n          default:\n            throw new Error(`Unsupported type: ${field.type}`);\n        }\n      });\n\n      return result;\n    }\n  };\n};\n\n// Safe deserialize function\nexport function safeDeserialize(schema: any, classType: any, data: Buffer): any {\n  try {\n    return borsh.deserialize(schema, classType, data);\n  } catch (error) {\n    console.error('Error deserializing data:', error);\n    // Return a default instance with minimal data\n    return new classType({});\n  }\n}\n","// Game view states for the application\nimport { PublicKey } from '@solana/web3.js';\n\n// Add global declarations for TypeScript\ndeclare global {\n  interface Window {\n    Buffer: typeof Buffer;\n    process: any;\n  }\n}\n\nexport enum GameView {\n  HOME = 'HOME',\n  CREATE_GAME = 'CREATE_GAME',\n  JOIN_GAME = 'JOIN_GAME',\n  GAME_LOBBY = 'GAME_LOBBY',\n  COMMIT_CHOICE = 'COMMIT_CHOICE',\n  REVEAL_CHOICE = 'REVEAL_CHOICE',\n  GAME_RESULTS = 'GAME_RESULTS',\n  AUTO_PLAY = 'AUTO_PLAY', // New view for auto-play mode\n  SECURITY = 'SECURITY', // New view for security information\n  TESTING = 'TESTING', // New view for testing\n}\n\n// Game states as defined in the Solana program\nexport enum GameState {\n  WAITING_FOR_PLAYER_TWO = 0,\n  WAITING_FOR_PLAYER_ONE_CHOICE = 1,\n  WAITING_FOR_PLAYER_TWO_CHOICE = 2,\n  WAITING_FOR_PLAYER_ONE_REVEAL = 3,\n  WAITING_FOR_PLAYER_TWO_TIMEOUT_CLAIM = 4,\n  GAME_COMPLETED = 5,\n  GAME_CANCELLED = 6,\n}\n\n// Game modes\nexport enum GameMode {\n  Manual = 0,\n  Automated = 1\n}\n\n// Currency mode\nexport enum CurrencyMode {\n  SOL = 'SOL',\n  RPS_TOKEN = 'RPS_TOKEN',\n  NEW_CURRENCY = 2 // Extended CurrencyMode enum\n}\n\n// Betting strategies\nexport enum BettingStrategy {\n  FIXED = 'fixed',\n  MARTINGALE = 'martingale',\n  DALEMBERT = \"dalembert\",\n  FIBONACCI = \"fibonacci\"\n}\n\n// Fee settings\nexport interface FeeSettings {\n  feePercentage: number; // 0.1% = 0.001\n  rpsTokenFeeDiscount: number; // 50% discount = 0.5\n}\n\n// Currency benefits\nexport interface CurrencyBenefits {\n  rpsTokenBonusPotPercentage: number; // 5% bonus = 0.05\n}\n\n// Player choice options\nexport enum Choice {\n  None = 0,\n  Rock = 1,\n  Paper = 2,\n  Scissors = 3\n}\n\n// Game outcome\nexport type GameOutcome = 'win' | 'loss' | 'tie';\n\n// Game history item\nexport interface GameHistoryItem {\n  playerChoice: number;\n  opponentChoices: number[];\n  result: GameOutcome;\n  timestamp: number;\n  wagerAmount: number;\n}\n\n// Auto-play statistics\nexport interface AutoPlayStats {\n  currentStreak: number;\n  wins: number;\n  losses: number;\n  ties: number;\n  totalWagered: number;\n  netProfit: number;\n  gameHistory: GameHistoryItem[];\n}\n\n// Player data structure\nexport interface Player {\n  pubkey: string;\n  choice: number;\n  committedChoice: number[];\n  revealed: boolean;\n  score: number;\n}\n\n// Game data structure\nexport interface Game {\n  host: string;\n  players: Player[];\n  minPlayers: number;\n  maxPlayers: number;\n  state: number;\n  currentRound: number;\n  totalRounds: number;\n  entryFee: number;\n  gamePot: number;\n  requiredTimeout: number;\n  lastActionTimestamp: number;\n  playerCount: number;\n  losersCanRejoin: boolean;\n  gameMode?: GameMode; // Optional for backward compatibility\n  autoRoundDelay?: number; // Time between automated rounds in seconds\n  maxAutoRounds?: number; // Maximum number of automated rounds\n  currentAutoRound?: number; // Current auto round counter\n  currencyMode?: CurrencyMode; // Which currency is being used\n  tokenMint?: string; // Public key of token mint (if using RPSTOKEN)\n  feeAccount?: string; // Public key of fee account\n}\n\n// Token balance\nexport interface TokenBalance {\n  sol: number;\n  rpsToken: number;\n}\n\n// Game data structure for UI\nexport interface GameData {\n  escrowPubkey: PublicKey;\n  playerOne: PublicKey;\n  playerTwo: PublicKey | null;\n  state: GameState;\n  wager: number;\n  timeoutStart: number | null;\n  result: GameOutcome | null;\n  playerOneChoice: number | null;\n  playerTwoChoice: number | null;\n}\n\n// Player data structure - used for the UI\nexport interface PlayerInfo {\n  publicKey: PublicKey;\n  isCurrentUser: boolean;\n  hasCommitted: boolean;\n  choice: number | null;\n}\n\n// Game settings structure\nexport interface GameSettings {\n  betAmount: number;\n  currencyMode: CurrencyMode;\n}\n\n// Timer data for UI\nexport interface TimerData {\n  isActive: boolean;\n  startTime: number | null;\n  duration: number;\n}\n\n// Game message for in-game chat or notifications\nexport interface GameMessage {\n  id: string;\n  sender: string;\n  text: string;\n  timestamp: number;\n  isSystem?: boolean;\n}\n\n// Transaction notification data\nexport interface TransactionNotification {\n  type: 'success' | 'error' | 'info';\n  message: string;\n  txId?: string;\n  autoClose?: boolean;\n  duration?: number;\n}\n\n// Export AppProps explicitly as needed\nexport type AppProps = unknown;\n","import { Connection, PublicKey, Transaction, SystemProgram, LAMPORTS_PER_SOL } from '@solana/web3.js';\nimport { TokenBalance, CurrencyMode, FeeSettings } from '../types';\n\n// Constants for fees and benefits\nexport const FEE_SETTINGS: FeeSettings = {\n  feePercentage: 0.001, // 0.1%\n  rpsTokenFeeDiscount: 0.5, // 50% discount for RPSTOKEN\n};\n\nexport const CURRENCY_BENEFITS = {\n  rpsTokenBonusPotPercentage: 0.05, // 5% bonus for RPSTOKEN\n};\n\n// Mock RPS token mint address - in a real implementation, this would be a real token\nexport const RPS_TOKEN_MINT = new PublicKey('EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v');\n\n// Mock fee account - in a real implementation, this would be the protocol's fee collector\nexport const FEE_ACCOUNT = new PublicKey('FeeKHhL1CcJCyd82xextWTbBT5jGzVQwXVQKNjHV8SDD');\n\n/**\n * Calculate the fee for a transaction based on the amount and currency\n */\nexport function calculateFee(amount: number, currencyMode: CurrencyMode): number {\n  const baseFee = amount * FEE_SETTINGS.feePercentage;\n\n  if (currencyMode === CurrencyMode.RPSTOKEN) {\n    return baseFee * FEE_SETTINGS.rpsTokenFeeDiscount; // 50% discount for RPSTOKEN\n  }\n\n  return baseFee;\n}\n\n/**\n * Calculate the bonus pot amount for RPSTOKEN games\n */\nexport function calculateBonusPot(amount: number, currencyMode: CurrencyMode): number {\n  if (currencyMode === CurrencyMode.RPSTOKEN) {\n    return amount * CURRENCY_BENEFITS.rpsTokenBonusPotPercentage;\n  }\n\n  return 0;\n}\n\n/**\n * Get user's token balances\n * For this mock implementation, we'll fetch the SOL balance from the network\n * and generate a random RPSTOKEN balance.\n */\nexport const getTokenBalances = async (\n  connection: Connection,\n  walletPublicKey: PublicKey\n): Promise<TokenBalance> => {\n  try {\n    // Check if Buffer is properly defined\n    if (typeof Buffer === 'undefined' || typeof Buffer.from !== 'function') {\n      console.error('Buffer or Buffer.from is not defined in token-service');\n      return { sol: 0, rpsToken: 0 };\n    }\n\n    // Get SOL balance\n    const solBalance = await connection.getBalance(walletPublicKey);\n\n    // In a production app, we would query for the actual RPS token\n    // For now, we're just simulating the RPS token balance\n    const rpsTokenBalance = 100; // Simulated balance\n\n    return {\n      sol: solBalance / LAMPORTS_PER_SOL,\n      rpsToken: rpsTokenBalance\n    };\n  } catch (error) {\n    console.error('Error fetching token balances:', error);\n    // Return default values in case of error\n    return {\n      sol: 0,\n      rpsToken: 0\n    };\n  }\n};\n\n/**\n * Create a transaction for payment, including fees\n * This is a simplified mock implementation\n */\nexport function createPaymentTransaction(\n  amount: number,\n  walletPublicKey: PublicKey,\n  gameAccount: PublicKey,\n  currencyMode: CurrencyMode\n): Transaction {\n  const transaction = new Transaction();\n\n  if (currencyMode === CurrencyMode.SOL) {\n    // Calculate fee\n    const fee = calculateFee(amount, currencyMode);\n    const paymentAmount = amount - fee;\n\n    // Add transfer to fee account\n    transaction.add(\n      SystemProgram.transfer({\n        fromPubkey: walletPublicKey,\n        toPubkey: FEE_ACCOUNT,\n        lamports: fee * LAMPORTS_PER_SOL\n      })\n    );\n\n    // Add transfer to game account\n    transaction.add(\n      SystemProgram.transfer({\n        fromPubkey: walletPublicKey,\n        toPubkey: gameAccount,\n        lamports: paymentAmount * LAMPORTS_PER_SOL\n      })\n    );\n  } else {\n    // RPSTOKEN implementation would use Token Program instructions\n    // This is just a placeholder\n    console.log('RPSTOKEN payment transaction would be created here');\n    // In a real implementation, we would add Token Program instructions for token transfers\n  }\n\n  return transaction;\n}\n\n/**\n * Get free RPSTOKEN (for testing/demo)\n * In a real implementation, this might be a faucet or token swap\n */\nexport const getFreeRPSTokens = async (\n  connection: Connection,\n  walletPublicKey: PublicKey\n): Promise<boolean> => {\n  try {\n    console.log('Requesting free RPS tokens for', walletPublicKey.toString());\n\n    // In a real application, this would call a faucet service\n    // For now, just simulate a successful request\n\n    // Simulated delay\n    await new Promise(resolve => setTimeout(resolve, 1000));\n\n    return true;\n  } catch (error) {\n    console.error('Error getting free RPS tokens:', error);\n    return false;\n  }\n};\n\n/**\n * Correctly format currency amount based on currency mode\n */\nexport const formatCurrencyAmount = (amount: number, currencyMode: number): string => {\n  // Convert from lamports to SOL (or equivalent)\n  const convertedAmount = amount / 1000000000;\n\n  if (currencyMode === 1) { // RPSTOKEN\n    return `${convertedAmount.toFixed(2)} RPSTOKEN`;\n  } else { // SOL\n    return `${convertedAmount.toFixed(4)} SOL`;\n  }\n}\n\n// Added for debugging\nconsole.log('[token-service] Loaded, Buffer status:', {\n  hasBuffer: typeof Buffer !== 'undefined',\n  hasBufferFrom: Buffer && typeof Buffer.from === 'function'\n});\n","import {\n  type Connection,\n  PublicKey,\n  Transaction,\n  SystemProgram,\n  Keypair,\n  TransactionInstruction,\n  LAMPORTS_PER_SOL,\n  sendAndConfirmTransaction,\n  AccountInfo,\n  AccountMeta\n} from '@solana/web3.js';\nimport * as borsh from 'borsh';\nimport { Buffer } from 'buffer';\nimport { sha256 } from 'js-sha256';\nimport { struct, safeDeserialize } from './utils/fixborsh';\n\n// Import additional types and functions for currency support\nimport { CurrencyMode } from './types';\nimport {\n  calculateFee,\n  calculateBonusPot,\n  FEE_ACCOUNT,\n  RPS_TOKEN_MINT,\n  createPaymentTransaction\n} from './services/token-service';\n\n// Define schema for Borsh serialization/deserialization\nenum Choice {\n  None = 0,\n  Rock = 1,\n  Paper = 2,\n  Scissors = 3\n}\n\nenum GameState {\n  WaitingForPlayers = 0,\n  CommitPhase = 1,\n  RevealPhase = 2,\n  Finished = 3\n}\n\n// RPS Instruction types\nenum RPSInstructionType {\n  InitializeGame = 0,\n  JoinGame = 1,\n  CommitChoice = 2,\n  RevealChoice = 3,\n  ResolveTimeout = 4,\n  ClaimWinnings = 5,\n  RejoinGame = 6,\n  StartNewGameRound = 7\n}\n\n// Schema for Player struct\nclass Player {\n  pubkey: Uint8Array;\n  choice: number;\n  committedChoice: Uint8Array;\n  revealed: boolean;\n  score: number;\n\n  constructor(fields: {\n    pubkey: Uint8Array,\n    choice: number,\n    committedChoice: Uint8Array,\n    revealed: boolean,\n    score: number\n  }) {\n    this.pubkey = fields.pubkey;\n    this.choice = fields.choice;\n    this.committedChoice = fields.committedChoice;\n    this.revealed = fields.revealed;\n    this.score = fields.score;\n  }\n}\n\n// Schema for Game struct\nclass Game {\n  host: Uint8Array;\n  players: Player[];\n  minPlayers: number;\n  maxPlayers: number;\n  state: number;\n  currentRound: number;\n  totalRounds: number;\n  entryFee: bigint;\n  gamePot: bigint;\n  requiredTimeout: bigint;\n  lastActionTimestamp: bigint;\n  playerCount: number;\n  losersCanRejoin: boolean;\n  currencyMode: CurrencyMode; // Add currencyMode field\n\n  constructor(fields: {\n    host: Uint8Array,\n    players: Player[],\n    minPlayers: number,\n    maxPlayers: number,\n    state: number,\n    currentRound: number,\n    totalRounds: number,\n    entryFee: bigint,\n    gamePot: bigint,\n    requiredTimeout: bigint,\n    lastActionTimestamp: bigint,\n    playerCount: number,\n    losersCanRejoin: boolean,\n    currencyMode: CurrencyMode // Include currencyMode in constructor\n  }) {\n    this.host = fields.host;\n    this.players = fields.players;\n    this.minPlayers = fields.minPlayers;\n    this.maxPlayers = fields.maxPlayers;\n    this.state = fields.state;\n    this.currentRound = fields.currentRound;\n    this.totalRounds = fields.totalRounds;\n    this.entryFee = fields.entryFee;\n    this.gamePot = fields.gamePot;\n    this.requiredTimeout = fields.requiredTimeout;\n    this.lastActionTimestamp = fields.lastActionTimestamp;\n    this.playerCount = fields.playerCount;\n    this.losersCanRejoin = fields.losersCanRejoin;\n    this.currencyMode = fields.currencyMode; // Initialize currencyMode\n  }\n}\n\n// Define borsh schemas for serialization/deserialization\nconst playerSchema = {\n  kind: 'struct',\n  fields: [\n    ['pubkey', [32]],\n    ['choice', 'u8'],\n    ['committedChoice', [32]],\n    ['revealed', 'u8'],\n    ['score', 'u8'],\n  ],\n};\n\nconst gameSchema = {\n  kind: 'struct',\n  fields: [\n    ['host', [32]],\n    ['players', [playerSchema]],\n    ['minPlayers', 'u8'],\n    ['maxPlayers', 'u8'],\n    ['state', 'u8'],\n    ['currentRound', 'u8'],\n    ['totalRounds', 'u8'],\n    ['entryFee', 'u64'],\n    ['gamePot', 'u64'],\n    ['requiredTimeout', 'u64'],\n    ['lastActionTimestamp', 'u64'],\n    ['playerCount', 'u8'],\n    ['losersCanRejoin', 'u8'],\n    ['currencyMode', 'u8'],\n  ],\n};\n\n// Create schema registry\nconst schema = new Map([\n  [Player, playerSchema],\n  [Game, gameSchema],\n]);\n\n// Create instruction data\nconst createInstructionData = (instruction: RPSInstructionType, data: any = null) => {\n  // Instruction data layout\n  const instructionSchema = {\n    kind: 'struct',\n    fields: [\n      ['instruction', 'u8'],\n      ...(data ? Object.entries(data) : []),\n    ],\n  };\n\n  // Serialize instruction data\n  const instructionData = Buffer.alloc(1000); // Allocate enough space\n  const len = borsh.serialize(\n    instructionSchema,\n    { instruction, ...data },\n    instructionData\n  );\n\n  return instructionData.slice(0, len);\n};\n\n// Interface for wallet integration\nexport interface Wallet {\n  publicKey: PublicKey;\n  signTransaction: (transaction: Transaction) => Promise<Transaction>;\n  sendTransaction: (\n    transaction: Transaction,\n    connection: Connection\n  ) => Promise<string>;\n}\n\n// Client configuration\ninterface RPSClientConfig {\n  onError?: (error: Error) => void;\n  onStatusUpdate?: (message: string) => void;\n}\n\n// Main client class\nexport class RPSGameClient {\n  private connection: Connection;\n  private wallet: Wallet;\n  private programId: PublicKey;\n  private config: RPSClientConfig;\n  private gameSubscriptions: Map<string, number> = new Map();\n\n  constructor(\n    connection: Connection,\n    wallet: Wallet,\n    programId: PublicKey,\n    config: RPSClientConfig = {}\n  ) {\n    this.connection = connection;\n    this.wallet = wallet;\n    this.programId = programId;\n    this.config = config;\n  }\n\n  // Helper functions\n  private async getProgramAccounts() {\n    return await this.connection.getProgramAccounts(this.programId);\n  }\n\n  private async getGameAccount(gamePublicKey: PublicKey) {\n    const accountInfo = await this.connection.getAccountInfo(gamePublicKey);\n    if (!accountInfo) {\n      throw new Error(`Game account not found: ${gamePublicKey.toBase58()}`);\n    }\n    return this.deserializeGameAccount(accountInfo.data);\n  }\n\n  private deserializeGameAccount(data: Buffer): Game {\n    try {\n      return safeDeserialize(schema, Game, data);\n    } catch (error) {\n      console.error('Error deserializing game account:', error);\n      // Return a default game object with minimal data\n      return new Game({\n        host: new Uint8Array(32),\n        players: [],\n        minPlayers: 2,\n        maxPlayers: 4,\n        state: 0,\n        currentRound: 0,\n        totalRounds: 1,\n        entryFee: BigInt(0),\n        gamePot: BigInt(0),\n        requiredTimeout: BigInt(0),\n        lastActionTimestamp: BigInt(0),\n        playerCount: 0,\n        losersCanRejoin: false,\n        currencyMode: CurrencyMode.SOL\n      });\n    }\n  }\n\n  private notifyStatus(message: string) {\n    if (this.config.onStatusUpdate) {\n      this.config.onStatusUpdate(message);\n    }\n  }\n\n  private notifyError(error: Error) {\n    if (this.config.onError) {\n      this.config.onError(error);\n    }\n  }\n\n  // Subscribe to a game account to receive updates\n  public async subscribeToGameUpdates(\n    gameId: string,\n    onUpdate: (gameAccount: Game) => void\n  ) {\n    const gamePublicKey = new PublicKey(gameId);\n    if (this.gameSubscriptions.has(gameId)) {\n      // Unsubscribe from previous subscription\n      const subscriptionId = this.gameSubscriptions.get(gameId) as number;\n      this.connection.removeAccountChangeListener(subscriptionId);\n    }\n\n    const subscriptionId = this.connection.onAccountChange(\n      gamePublicKey,\n      (accountInfo) => {\n        try {\n          const gameAccount = this.deserializeGameAccount(accountInfo.data);\n          onUpdate(gameAccount);\n        } catch (error) {\n          this.notifyError(error as Error);\n        }\n      }\n    );\n\n    this.gameSubscriptions.set(gameId, subscriptionId);\n    return subscriptionId;\n  }\n\n  // Unsubscribe from game updates\n  public unsubscribeFromGameUpdates(gameId: string) {\n    if (this.gameSubscriptions.has(gameId)) {\n      const subscriptionId = this.gameSubscriptions.get(gameId) as number;\n      this.connection.removeAccountChangeListener(subscriptionId);\n      this.gameSubscriptions.delete(gameId);\n    }\n  }\n\n  // Create a new game instruction\n  public async createGame(\n    minPlayers: number,\n    maxPlayers: number,\n    totalRounds: number,\n    entryFeeSol: number,\n    timeoutSeconds: number,\n    losersCanRejoin: boolean,\n    currencyMode: CurrencyMode = CurrencyMode.SOL // Add currencyMode parameter\n  ): Promise<{ gameId: string; gameAccount: Game }> {\n    this.notifyStatus('Creating new game...');\n\n    const gameKeypair = Keypair.generate();\n    const initInstruction = this.createInitializeGameInstruction(\n      gameKeypair.publicKey,\n      minPlayers,\n      maxPlayers,\n      totalRounds,\n      entryFeeSol,\n      timeoutSeconds,\n      losersCanRejoin,\n      currencyMode // Pass currencyMode to the instruction\n    );\n\n    const transaction = new Transaction().add(initInstruction);\n\n    try {\n      // Sign transaction\n      transaction.feePayer = this.wallet.publicKey;\n      transaction.recentBlockhash = (\n        await this.connection.getLatestBlockhash()\n      ).blockhash;\n\n      // Make sure we add the gameKeypair as a signer\n      const signedTx = await this.wallet.signTransaction(transaction);\n      signedTx.partialSign(gameKeypair);\n\n      // Send transaction\n      const txId = await this.wallet.sendTransaction(signedTx, this.connection);\n      await this.connection.confirmTransaction(txId, 'confirmed');\n\n      // Calculate fee for display purposes\n      const fee = calculateFee(entryFeeSol, currencyMode);\n      this.notifyStatus(`Game created with ${fee.toFixed(6)} ${currencyMode === CurrencyMode.SOL ? 'SOL' : 'RPSTOKEN'} fee.`);\n\n      // Get the created game account\n      const gameAccount = await this.getGameAccount(gameKeypair.publicKey);\n\n      this.notifyStatus('Game created successfully!');\n      return {\n        gameId: gameKeypair.publicKey.toString(),\n        gameAccount\n      };\n    } catch (error) {\n      this.notifyError(error as Error);\n      throw error;\n    }\n  }\n\n  // Update createInitializeGameInstruction to include currency mode\n  private createInitializeGameInstruction(\n    gameAccount: PublicKey,\n    minPlayers: number,\n    maxPlayers: number,\n    totalRounds: number,\n    entryFeeSol: number,\n    timeoutSeconds: number,\n    losersCanRejoin: boolean,\n    currencyMode: CurrencyMode = CurrencyMode.SOL // Add currencyMode parameter\n  ): TransactionInstruction {\n    const entryFeeLamports = Math.round(entryFeeSol * LAMPORTS_PER_SOL);\n\n    // Add bonus pot for RPSTOKEN games\n    let adjustedEntryFee = entryFeeLamports;\n    if (currencyMode === CurrencyMode.RPSTOKEN) {\n      // Apply 5% bonus to the entry fee\n      const bonusPotPercentage = calculateBonusPot(entryFeeSol, currencyMode);\n      adjustedEntryFee = Math.round(entryFeeLamports * (1 + bonusPotPercentage));\n    }\n\n    // Create instruction data using our struct helper instead of borsh.struct directly\n    const layout = struct([\n      { key: 'instruction', type: 'u8' },\n      { key: 'minPlayers', type: 'u8' },\n      { key: 'maxPlayers', type: 'u8' },\n      { key: 'totalRounds', type: 'u8' },\n      { key: 'entryFee', type: 'u64' },\n      { key: 'timeoutSeconds', type: 'u64' },\n      { key: 'losersCanRejoin', type: 'u8' },\n      { key: 'currencyMode', type: 'u8' },\n      { key: 'autoRoundDelay', type: 'u64' },\n      { key: 'maxAutoRounds', type: 'u64' }\n    ]);\n\n    const data = Buffer.alloc(1000);\n    try {\n      const length = layout.encode(\n        {\n          instruction: RPSInstructionType.InitializeGame,\n          minPlayers,\n          maxPlayers,\n          totalRounds,\n          entryFee: adjustedEntryFee,\n          timeoutSeconds,\n          losersCanRejoin: losersCanRejoin ? 1 : 0,\n          currencyMode,\n          autoRoundDelay: 0, // Default value\n          maxAutoRounds: 0   // Default value\n        },\n        data\n      );\n\n      const keys = [\n        { pubkey: this.wallet.publicKey, isSigner: true, isWritable: true },\n        { pubkey: gameAccount, isSigner: true, isWritable: true },\n        { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },\n        { pubkey: FEE_ACCOUNT, isSigner: false, isWritable: true }\n      ];\n\n      // If using RPSTOKEN, include token program and mint\n      if (currencyMode === CurrencyMode.RPSTOKEN) {\n        keys.push({ pubkey: RPS_TOKEN_MINT, isSigner: false, isWritable: false });\n      }\n\n      return new TransactionInstruction({\n        keys,\n        programId: this.programId,\n        data: data.slice(0, length)\n      });\n    } catch (error) {\n      throw new Error('Error encoding instruction data: ' + error.message);\n    }\n  }\n\n  // Create a new game instruction\n  private createGameInstruction(\n    minPlayers: number,\n    maxPlayers: number,\n    totalRounds: number,\n    entryFee: number,\n    timeoutSeconds: number,\n    losersCanRejoin: boolean,\n    currencyMode: CurrencyMode = CurrencyMode.SOL\n  ): TransactionInstruction {\n    // Create new keypair for the game account\n    const gameKeypair = Keypair.generate();\n\n    // Define create game instruction data schema\n    const createGameSchema = {\n      kind: 'struct',\n      fields: [\n        ['instruction', 'u8'],\n        ['minPlayers', 'u8'],\n        ['maxPlayers', 'u8'],\n        ['totalRounds', 'u8'],\n        ['entryFee', 'u64'],\n        ['timeoutSeconds', 'u64'],\n        ['losersCanRejoin', 'u8'],\n        ['currencyMode', 'u8'],\n      ],\n    };\n\n    // Convert entry fee to lamports\n    const entryFeeLamports = entryFee * LAMPORTS_PER_SOL;\n\n    // Create buffer for instruction data\n    const instructionData = Buffer.alloc(100); // Allocate enough space\n    const len = borsh.serialize(\n      createGameSchema,\n      {\n        instruction: RPSInstructionType.InitializeGame,\n        minPlayers,\n        maxPlayers,\n        totalRounds,\n        entryFee: BigInt(entryFeeLamports),\n        timeoutSeconds: BigInt(timeoutSeconds),\n        losersCanRejoin: losersCanRejoin ? 1 : 0,\n        currencyMode,\n      },\n      instructionData\n    );\n\n    // Create the transaction instruction\n    return new TransactionInstruction({\n      keys: [\n        { pubkey: this.wallet.publicKey, isSigner: true, isWritable: true },\n        { pubkey: gameKeypair.publicKey, isSigner: true, isWritable: true },\n        { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },\n      ],\n      programId: this.programId,\n      data: instructionData.slice(0, len),\n    });\n  }\n\n  // Join game instruction\n  private createJoinGameInstruction(\n    gameAccount: PublicKey,\n    entryFee: number,\n    currencyMode: CurrencyMode\n  ): TransactionInstruction {\n    // Define join game instruction data schema using our struct helper\n    const layout = struct([\n      { key: 'instruction', type: 'u8' }\n    ]);\n\n    const data = Buffer.alloc(1); // 1 byte for instruction\n    try {\n      const length = layout.encode(\n        { instruction: RPSInstructionType.JoinGame },\n        data\n      );\n\n      const keys = [\n        { pubkey: this.wallet.publicKey, isSigner: true, isWritable: true },\n        { pubkey: gameAccount, isSigner: false, isWritable: true },\n        { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },\n      ];\n\n      // If using RPS token, add the token accounts\n      if (currencyMode === CurrencyMode.RPSTOKEN) {\n        keys.push({ pubkey: RPS_TOKEN_MINT, isSigner: false, isWritable: false });\n      }\n\n      return new TransactionInstruction({\n        keys,\n        programId: this.programId,\n        data: data.slice(0, length),\n      });\n    } catch (error) {\n      throw new Error('Error encoding instruction data: ' + error.message);\n    }\n  }\n\n  // Commit choice instruction\n  private createCommitChoiceInstruction(\n    gameAccount: PublicKey,\n    choice: number,\n    salt: string\n  ): TransactionInstruction {\n    if (!this.wallet || !this.wallet.publicKey) throw new Error('Wallet not connected');\n\n    // Hash the choice with salt\n    const choiceBuffer = Buffer.from([choice]);\n    const saltBuffer = Buffer.from(salt, 'hex');\n    const message = Buffer.concat([choiceBuffer, saltBuffer]);\n    const hash = sha256.create();\n    hash.update(message);\n    const hashedChoice = Buffer.from(hash.hex(), 'hex');\n\n    // Define commit choice instruction data schema\n    const commitChoiceSchema = {\n      kind: 'struct',\n      fields: [\n        ['instruction', 'u8'],\n        ['hashedChoice', [32]],\n      ],\n    };\n\n    const instructionData = Buffer.alloc(33); // 1 byte for instruction + 32 bytes for hash\n    const len = borsh.serialize(\n      commitChoiceSchema,\n      { instruction: RPSInstructionType.CommitChoice, hashedChoice },\n      instructionData\n    );\n\n    return new TransactionInstruction({\n      keys: [\n        { pubkey: this.wallet.publicKey, isSigner: true, isWritable: true },\n        { pubkey: gameAccount, isSigner: false, isWritable: true }\n      ],\n      programId: this.programId,\n      data: instructionData.slice(0, len)\n    });\n  }\n\n  // Reveal choice instruction\n  private createRevealChoiceInstruction(\n    gameAccount: PublicKey,\n    choice: number,\n    salt: string\n  ): TransactionInstruction {\n    if (!this.wallet || !this.wallet.publicKey) throw new Error('Wallet not connected');\n\n    // Convert salt string to byte array\n    const saltBytes = Buffer.from(salt, 'hex');\n\n    // Define reveal choice instruction data schema\n    const revealChoiceSchema = {\n      kind: 'struct',\n      fields: [\n        ['instruction', 'u8'],\n        ['choice', 'u8'],\n        ['salt', [32]],\n      ],\n    };\n\n    const instructionData = Buffer.alloc(34); // 1 byte for instruction + 1 byte for choice + 32 bytes for salt\n    const len = borsh.serialize(\n      revealChoiceSchema,\n      { instruction: RPSInstructionType.RevealChoice, choice, salt: saltBytes },\n      instructionData\n    );\n\n    return new TransactionInstruction({\n      keys: [\n        { pubkey: this.wallet.publicKey, isSigner: true, isWritable: true },\n        { pubkey: gameAccount, isSigner: false, isWritable: true }\n      ],\n      programId: this.programId,\n      data: instructionData.slice(0, len)\n    });\n  }\n\n  // Create timeout resolution instruction\n  private createResolveTimeoutInstruction(\n    gameAccount: PublicKey\n  ): TransactionInstruction {\n    // Serialize instruction data using our struct helper\n    const layout = struct([\n      { key: 'instruction', type: 'u8' }\n    ]);\n\n    const data = Buffer.alloc(1);\n    try {\n      layout.encode(\n        { instruction: RPSInstructionType.ResolveTimeout },\n        data\n      );\n\n      return new TransactionInstruction({\n        keys: [\n          { pubkey: gameAccount, isSigner: false, isWritable: true },\n          { pubkey: this.wallet.publicKey, isSigner: true, isWritable: false },\n        ],\n        programId: this.programId,\n        data: data\n      });\n    } catch (error) {\n      throw new Error('Error encoding instruction data: ' + error.message);\n    }\n  }\n\n  // Claim winnings instruction\n  private createClaimWinningsInstruction(\n    gameAccount: PublicKey\n  ): TransactionInstruction {\n    // Define claim winnings instruction data schema\n    const claimWinningsSchema = {\n      kind: 'struct',\n      fields: [\n        ['instruction', 'u8'],\n      ],\n    };\n\n    const instructionData = Buffer.alloc(1); // 1 byte for instruction\n    const len = borsh.serialize(\n      claimWinningsSchema,\n      { instruction: RPSInstructionType.ClaimWinnings },\n      instructionData\n    );\n\n    return new TransactionInstruction({\n      keys: [\n        { pubkey: gameAccount, isSigner: false, isWritable: true },\n        { pubkey: this.wallet.publicKey, isSigner: true, isWritable: true },\n      ],\n      programId: this.programId,\n      data: instructionData.slice(0, len),\n    });\n  }\n\n  // Rejoin game instruction\n  private createRejoinGameInstruction(\n    gameAccount: PublicKey,\n    entryFee: number,\n    currencyMode: CurrencyMode\n  ): TransactionInstruction {\n    // Define rejoin game instruction data schema\n    const rejoinGameSchema = {\n      kind: 'struct',\n      fields: [\n        ['instruction', 'u8'],\n      ],\n    };\n\n    const instructionData = Buffer.alloc(1); // 1 byte for instruction\n    const len = borsh.serialize(\n      rejoinGameSchema,\n      { instruction: RPSInstructionType.RejoinGame },\n      instructionData\n    );\n\n    return new TransactionInstruction({\n      keys: [\n        { pubkey: gameAccount, isSigner: false, isWritable: true },\n        { pubkey: this.wallet.publicKey, isSigner: true, isWritable: true },\n      ],\n      programId: this.programId,\n      data: instructionData.slice(0, len),\n    });\n  }\n\n  // Start new game round instruction\n  private createStartNewGameRoundInstruction(\n    gameAccount: PublicKey\n  ): TransactionInstruction {\n    // Define start new round instruction data schema\n    const startNewRoundSchema = {\n      kind: 'struct',\n      fields: [\n        ['instruction', 'u8'],\n      ],\n    };\n\n    const instructionData = Buffer.alloc(1); // 1 byte for instruction\n    const len = borsh.serialize(\n      startNewRoundSchema,\n      { instruction: RPSInstructionType.StartNewGameRound },\n      instructionData\n    );\n\n    return new TransactionInstruction({\n      keys: [\n        { pubkey: gameAccount, isSigner: false, isWritable: true },\n        { pubkey: this.wallet.publicKey, isSigner: true, isWritable: false },\n      ],\n      programId: this.programId,\n      data: instructionData.slice(0, len),\n    });\n  }\n\n  // Update joinGame to support dual currency\n  public async joinGame(gameId: string): Promise<Game> {\n    this.notifyStatus('Joining game...');\n\n    const gamePublicKey = new PublicKey(gameId);\n    const joinInstruction = this.createJoinGameInstruction(gamePublicKey, 0, CurrencyMode.SOL);\n\n    const transaction = new Transaction().add(joinInstruction);\n\n    try {\n      // Get game account first to verify entry fee and currency\n      const gameAccount = await this.getGameAccount(gamePublicKey);\n      const currencyMode = gameAccount.currencyMode || CurrencyMode.SOL;\n\n      // Add fee payment instructions to the transaction\n      const feeTransaction = createPaymentTransaction(\n        gameAccount.entryFee,\n        this.wallet.publicKey,\n        gamePublicKey,\n        currencyMode\n      );\n\n      // Combine transactions\n      for (const instruction of feeTransaction.instructions) {\n        transaction.add(instruction);\n      }\n\n      // Sign and send transaction\n      transaction.feePayer = this.wallet.publicKey;\n      transaction.recentBlockhash = (\n        await this.connection.getLatestBlockhash()\n      ).blockhash;\n\n      const signedTx = await this.wallet.signTransaction(transaction);\n      const txId = await this.wallet.sendTransaction(signedTx, this.connection);\n      await this.connection.confirmTransaction(txId, 'confirmed');\n\n      // Get updated game account\n      const updatedGameAccount = await this.getGameAccount(gamePublicKey);\n\n      this.notifyStatus('Joined game successfully!');\n      return updatedGameAccount;\n    } catch (error) {\n      this.notifyError(error as Error);\n      throw error;\n    }\n  }\n\n  // Start game - only host can do this\n  public async startGame(gameId: string): Promise<void> {\n    // This is a convenience method - the actual game starts automatically when enough players join\n    this.notifyStatus('Game will start automatically when enough players join...');\n\n    // Just check if the game exists and is valid\n    const gamePublicKey = new PublicKey(gameId);\n    const gameAccount = await this.getGameAccount(gamePublicKey);\n\n    // Verify the caller is the host\n    if (gameAccount.host.toString() !== this.wallet.publicKey.toBuffer().toString()) {\n      throw new Error('Only the host can start the game');\n    }\n\n    // If game isn't already in the right state, show appropriate message\n    if (gameAccount.state !== GameState.WaitingForPlayers) {\n      if (gameAccount.state === GameState.CommitPhase) {\n        this.notifyStatus('Game has already started! Time to commit your choice.');\n      } else {\n        this.notifyStatus('Game has already started!');\n      }\n    } else if (gameAccount.players.length < gameAccount.minPlayers) {\n      this.notifyStatus(`Waiting for more players (${gameAccount.players.length}/${gameAccount.minPlayers})...`);\n    }\n  }\n\n  // Commit a choice\n  public async commitChoice(gameId: string, choice: number, salt: string): Promise<void> {\n    this.notifyStatus('Committing your choice...');\n\n    const gamePublicKey = new PublicKey(gameId);\n    const commitInstruction = this.createCommitChoiceInstruction(\n      gamePublicKey,\n      choice,\n      salt\n    );\n\n    const transaction = new Transaction().add(commitInstruction);\n\n    try {\n      // Sign and send transaction\n      transaction.feePayer = this.wallet.publicKey;\n      transaction.recentBlockhash = (\n        await this.connection.getLatestBlockhash()\n      ).blockhash;\n\n      const signedTx = await this.wallet.signTransaction(transaction);\n      const txId = await this.wallet.sendTransaction(signedTx, this.connection);\n      await this.connection.confirmTransaction(txId, 'confirmed');\n\n      this.notifyStatus('Choice committed successfully! Waiting for others...');\n    } catch (error) {\n      this.notifyError(error as Error);\n      throw error;\n    }\n  }\n\n  // Reveal a choice\n  public async revealChoice(gameId: string, choice: number, salt: string): Promise<void> {\n    this.notifyStatus('Revealing your choice...');\n\n    const gamePublicKey = new PublicKey(gameId);\n    const revealInstruction = this.createRevealChoiceInstruction(\n      gamePublicKey,\n      choice,\n      salt\n    );\n\n    const transaction = new Transaction().add(revealInstruction);\n\n    try {\n      // Sign and send transaction\n      transaction.feePayer = this.wallet.publicKey;\n      transaction.recentBlockhash = (\n        await this.connection.getLatestBlockhash()\n      ).blockhash;\n\n      const signedTx = await this.wallet.signTransaction(transaction);\n      const txId = await this.wallet.sendTransaction(signedTx, this.connection);\n      await this.connection.confirmTransaction(txId, 'confirmed');\n\n      this.notifyStatus('Choice revealed successfully! Waiting for others...');\n    } catch (error) {\n      this.notifyError(error as Error);\n      throw error;\n    }\n  }\n\n  // Resolve timeout\n  public async resolveTimeout(gameId: string): Promise<void> {\n    this.notifyStatus('Resolving timeout...');\n\n    const gamePublicKey = new PublicKey(gameId);\n    const timeoutInstruction = this.createResolveTimeoutInstruction(gamePublicKey);\n\n    const transaction = new Transaction().add(timeoutInstruction);\n\n    try {\n      // Sign and send transaction\n      transaction.feePayer = this.wallet.publicKey;\n      transaction.recentBlockhash = (\n        await this.connection.getLatestBlockhash()\n      ).blockhash;\n\n      const signedTx = await this.wallet.signTransaction(transaction);\n      const txId = await this.wallet.sendTransaction(signedTx, this.connection);\n      await this.connection.confirmTransaction(txId, 'confirmed');\n\n      this.notifyStatus('Timeout resolved successfully!');\n    } catch (error) {\n      this.notifyError(error as Error);\n      throw error;\n    }\n  }\n\n  // Claim winnings\n  public async claimWinnings(gameId: string): Promise<void> {\n    this.notifyStatus('Claiming winnings...');\n\n    const gamePublicKey = new PublicKey(gameId);\n    const claimInstruction = this.createClaimWinningsInstruction(gamePublicKey);\n\n    const transaction = new Transaction().add(claimInstruction);\n\n    try {\n      // Sign and send transaction\n      transaction.feePayer = this.wallet.publicKey;\n      transaction.recentBlockhash = (\n        await this.connection.getLatestBlockhash()\n      ).blockhash;\n\n      const signedTx = await this.wallet.signTransaction(transaction);\n      const txId = await this.wallet.sendTransaction(signedTx, this.connection);\n      await this.connection.confirmTransaction(txId, 'confirmed');\n\n      this.notifyStatus('Winnings claimed successfully!');\n    } catch (error) {\n      this.notifyError(error as Error);\n      throw error;\n    }\n  }\n\n  // Rejoin game\n  public async rejoinGame(gameId: string): Promise<void> {\n    this.notifyStatus('Rejoining game...');\n\n    const gamePublicKey = new PublicKey(gameId);\n    const rejoinInstruction = this.createRejoinGameInstruction(gamePublicKey, 0, CurrencyMode.SOL);\n\n    const transaction = new Transaction().add(rejoinInstruction);\n\n    try {\n      // Sign and send transaction\n      transaction.feePayer = this.wallet.publicKey;\n      transaction.recentBlockhash = (\n        await this.connection.getLatestBlockhash()\n      ).blockhash;\n\n      const signedTx = await this.wallet.signTransaction(transaction);\n      const txId = await this.wallet.sendTransaction(signedTx, this.connection);\n      await this.connection.confirmTransaction(txId, 'confirmed');\n\n      this.notifyStatus('Rejoined game successfully!');\n    } catch (error) {\n      this.notifyError(error as Error);\n      throw error;\n    }\n  }\n\n  // Start new game round\n  public async startNewGameRound(gameId: string): Promise<void> {\n    this.notifyStatus('Starting new game round...');\n\n    const gamePublicKey = new PublicKey(gameId);\n    const startRoundInstruction = this.createStartNewGameRoundInstruction(gamePublicKey);\n\n    const transaction = new Transaction().add(startRoundInstruction);\n\n    try {\n      // Sign and send transaction\n      transaction.feePayer = this.wallet.publicKey;\n      transaction.recentBlockhash = (\n        await this.connection.getLatestBlockhash()\n      ).blockhash;\n\n      const signedTx = await this.wallet.signTransaction(transaction);\n      const txId = await this.wallet.sendTransaction(signedTx, this.connection);\n      await this.connection.confirmTransaction(txId, 'confirmed');\n\n      this.notifyStatus('New game round started successfully!');\n    } catch (error) {\n      this.notifyError(error as Error);\n      throw error;\n    }\n  }\n\n  // Get all active games\n  public async getAllActiveGames(): Promise<{ gameId: string; gameAccount: Game }[]> {\n    this.notifyStatus('Fetching active games...');\n\n    try {\n      const accounts = await this.getProgramAccounts();\n      const activeGames = [];\n\n      for (const { pubkey, account } of accounts) {\n        try {\n          const gameAccount = this.deserializeGameAccount(account.data);\n          // Only include games in WaitingForPlayers state\n          if (gameAccount.state === GameState.WaitingForPlayers) {\n            activeGames.push({\n              gameId: pubkey.toString(),\n              gameAccount\n            });\n          }\n        } catch (error) {\n          // Skip accounts that can't be deserialized as games\n          continue;\n        }\n      }\n\n      return activeGames;\n    } catch (error) {\n      this.notifyError(error as Error);\n      throw error;\n    }\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport { RpsSecurityService, SecurityMetrics } from '../services/security-service';\nimport { Connection } from '@solana/web3.js';\n\ninterface SecurityDashboardProps {\n  compact?: boolean;\n  showMetrics?: boolean;\n}\n\n// Mock data for demonstration purposes\nconst demoMetrics: SecurityMetrics = {\n  requestsPerMinute: 3240,\n  failedAttempts: 47,\n  concurrentGames: 826,\n  activeUsers: 3214,\n  averageLatency: 78, // ms\n  lastAttackTimestamp: Date.now() - 1000 * 60 * 60 * 3, // 3 hours ago\n};\n\nconst SecurityDashboard: React.FC<SecurityDashboardProps> = ({\n  compact = false,\n  showMetrics = true\n}) => {\n  const [metrics, setMetrics] = useState<SecurityMetrics>(demoMetrics);\n  const [expanded, setExpanded] = useState(false);\n\n  // Simulate updating metrics periodically\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setMetrics(prev => ({\n        ...prev,\n        requestsPerMinute: Math.floor(prev.requestsPerMinute + Math.random() * 100 - 50),\n        concurrentGames: Math.floor(prev.concurrentGames + Math.random() * 10 - 5),\n        activeUsers: Math.floor(prev.activeUsers + Math.random() * 20 - 10),\n        averageLatency: Math.floor(prev.averageLatency + Math.random() * 10 - 5),\n      }));\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const formatTimeAgo = (timestamp: number | null): string => {\n    if (!timestamp) return 'Never';\n\n    const secondsAgo = Math.floor((Date.now() - timestamp) / 1000);\n\n    if (secondsAgo < 60) return `${secondsAgo} sec ago`;\n    if (secondsAgo < 3600) return `${Math.floor(secondsAgo / 60)} min ago`;\n    if (secondsAgo < 86400) return `${Math.floor(secondsAgo / 3600)} hrs ago`;\n    return `${Math.floor(secondsAgo / 86400)} days ago`;\n  };\n\n  // Security features with descriptions\n  const securityFeatures = [\n    {\n      name: 'Anti-DDoS Protection',\n      description: 'Distributed relay network prevents direct attacks on game servers',\n      icon: ''\n    },\n    {\n      name: 'On-Chain Verification',\n      description: 'All game moves are cryptographically secured on the Solana blockchain',\n      icon: ''\n    },\n    {\n      name: 'Multi-Region Scaling',\n      description: 'Load balancing across global regions ensures low latency and high availability',\n      icon: ''\n    },\n    {\n      name: 'Anti-Bot Protection',\n      description: 'Advanced behavior analysis detects and prevents automated gameplay',\n      icon: ''\n    },\n    {\n      name: 'Encrypted Game Moves',\n      description: 'Commit-reveal pattern prevents players from seeing others\\' moves in advance',\n      icon: ''\n    },\n    {\n      name: 'Fraud Detection',\n      description: 'Continuous monitoring for suspicious activity and cheating attempts',\n      icon: ''\n    },\n  ];\n\n  // Scaling capabilities with descriptions\n  const scalingCapabilities = [\n    {\n      name: 'Horizontal Scaling',\n      description: 'Automatically scales to handle thousands of concurrent games',\n      value: '50,000+ concurrent players'\n    },\n    {\n      name: 'Database Sharding',\n      description: 'Game data is distributed across multiple database shards for high performance',\n      value: '200+ transactions per second'\n    },\n    {\n      name: 'High Availability',\n      description: '99.9% uptime with multi-region redundancy',\n      value: '< 200ms global latency'\n    }\n  ];\n\n  if (compact) {\n    return (\n      <div className=\"bg-purple-900 bg-opacity-30 rounded-lg p-4 border border-purple-800\">\n        <div className=\"flex justify-between items-center\">\n          <h3 className=\"text-lg font-semibold text-white mb-0\">Enhanced Security & Scaling</h3>\n          <button\n            onClick={() => setExpanded(!expanded)}\n            className=\"text-purple-300 hover:text-purple-100\"\n          >\n            {expanded ? ' Hide' : ' Details'}\n          </button>\n        </div>\n\n        {expanded && (\n          <div className=\"mt-3\">\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 mb-4\">\n              {securityFeatures.slice(0, 3).map((feature, index) => (\n                <div key={index} className=\"flex items-start space-x-2\">\n                  <div className=\"text-xl\">{feature.icon}</div>\n                  <div className=\"text-sm\">{feature.name}</div>\n                </div>\n              ))}\n            </div>\n            <div className=\"text-sm text-purple-300\">\n              Supports 50,000+ concurrent players with 99.9% uptime\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-gray-800 rounded-xl border border-purple-800 overflow-hidden\">\n      <div className=\"bg-gradient-to-r from-purple-900 to-indigo-900 px-6 py-4\">\n        <h2 className=\"text-2xl font-bold text-white\">Security & Scaling Dashboard</h2>\n        <p className=\"text-purple-200\">Enterprise-grade protection and performance for Rock Paper Scissors</p>\n      </div>\n\n      {showMetrics && (\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 p-4 bg-gray-900\">\n          <div className=\"bg-gray-800 p-3 rounded-lg\">\n            <div className=\"text-sm text-gray-400\">Active Users</div>\n            <div className=\"text-xl font-bold text-white\">{metrics.activeUsers.toLocaleString()}</div>\n          </div>\n\n          <div className=\"bg-gray-800 p-3 rounded-lg\">\n            <div className=\"text-sm text-gray-400\">Concurrent Games</div>\n            <div className=\"text-xl font-bold text-white\">{metrics.concurrentGames.toLocaleString()}</div>\n          </div>\n\n          <div className=\"bg-gray-800 p-3 rounded-lg\">\n            <div className=\"text-sm text-gray-400\">Requests/min</div>\n            <div className=\"text-xl font-bold text-white\">{metrics.requestsPerMinute.toLocaleString()}</div>\n          </div>\n\n          <div className=\"bg-gray-800 p-3 rounded-lg\">\n            <div className=\"text-sm text-gray-400\">Avg Latency</div>\n            <div className=\"text-xl font-bold text-green-400\">{metrics.averageLatency} ms</div>\n          </div>\n\n          <div className=\"bg-gray-800 p-3 rounded-lg\">\n            <div className=\"text-sm text-gray-400\">Failed Attempts</div>\n            <div className=\"text-xl font-bold text-red-400\">{metrics.failedAttempts}</div>\n          </div>\n\n          <div className=\"bg-gray-800 p-3 rounded-lg\">\n            <div className=\"text-sm text-gray-400\">Last Attack</div>\n            <div className=\"text-xl font-bold text-yellow-400\">{formatTimeAgo(metrics.lastAttackTimestamp)}</div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"p-6\">\n        <h3 className=\"text-xl font-semibold mb-4 text-purple-300\">Security Features</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6\">\n          {securityFeatures.map((feature, index) => (\n            <div key={index} className=\"bg-gray-900 p-4 rounded-lg flex items-start space-x-3\">\n              <div className=\"text-3xl\">{feature.icon}</div>\n              <div>\n                <h4 className=\"font-semibold text-white\">{feature.name}</h4>\n                <p className=\"text-sm text-gray-400\">{feature.description}</p>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <h3 className=\"text-xl font-semibold mb-4 text-purple-300\">Scaling Capabilities</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          {scalingCapabilities.map((capability, index) => (\n            <div key={index} className=\"bg-gray-900 p-4 rounded-lg\">\n              <h4 className=\"font-semibold text-white\">{capability.name}</h4>\n              <p className=\"text-sm text-gray-400 mb-2\">{capability.description}</p>\n              <div className=\"text-lg font-bold text-green-400\">{capability.value}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SecurityDashboard;\n","import React from 'react';\nimport SecurityDashboard from '../components/SecurityDashboard';\nimport { GameView } from '../types';\n\ninterface HomeViewProps {\n  setCurrentView: (view: GameView) => void;\n  connected: boolean;\n  [key: string]: any; // Accept additional props\n}\n\nconst HomeView: React.FC<HomeViewProps> = ({ setCurrentView, connected }) => {\n  const handleCreateGame = () => {\n    if (!connected) {\n      alert(\"Please connect your wallet first\");\n      return;\n    }\n    setCurrentView(GameView.CREATE_GAME);\n  };\n\n  const handleJoinGame = () => {\n    if (!connected) {\n      alert(\"Please connect your wallet first\");\n      return;\n    }\n    setCurrentView(GameView.JOIN_GAME);\n  };\n\n  const handleAutoPlay = () => {\n    if (!connected) {\n      alert(\"Please connect your wallet first\");\n      return;\n    }\n    setCurrentView(GameView.AUTO_PLAY);\n  };\n\n  return (\n    <div className=\"flex flex-col items-center\">\n      <h2 className=\"text-3xl font-bold mb-8 text-center\">\n        Multiplayer Rock Paper Scissors on Solana\n      </h2>\n\n      <div className=\"flex flex-col md:flex-row justify-center w-full gap-8 mb-8\">\n        <div\n          className=\"card flex flex-col items-center justify-center p-8 cursor-pointer hover:bg-gray-700 transition-colors duration-200 w-full md:w-1/3\"\n          onClick={handleCreateGame}\n        >\n          <div className=\"text-5xl mb-4\"></div>\n          <h3 className=\"text-2xl font-bold mb-2\">Create Game</h3>\n          <p className=\"text-gray-300 text-center\">\n            Create a new game and invite friends to play\n          </p>\n          <button className=\"mt-4 btn btn-primary\">Create Game</button>\n        </div>\n\n        <div\n          className=\"card flex flex-col items-center justify-center p-8 cursor-pointer hover:bg-gray-700 transition-colors duration-200 w-full md:w-1/3\"\n          onClick={handleJoinGame}\n        >\n          <div className=\"text-5xl mb-4\"></div>\n          <h3 className=\"text-2xl font-bold mb-2\">Join Game</h3>\n          <p className=\"text-gray-300 text-center\">\n            Enter a specific game ID to join friends or a tournament game\n          </p>\n          <button className=\"mt-4 btn btn-secondary\">Join Game</button>\n        </div>\n\n        <div\n          className=\"card flex flex-col items-center justify-center p-8 cursor-pointer hover:bg-gray-700 transition-colors duration-200 w-full md:w-1/3\"\n          onClick={handleAutoPlay}\n        >\n          <div className=\"text-5xl mb-4\"></div>\n          <h3 className=\"text-2xl font-bold mb-2\">Auto Play</h3>\n          <p className=\"text-gray-300 text-center\">\n            Set your strategy and let the system play for you automatically\n          </p>\n          <button className=\"mt-4 btn btn-success\">Auto Play</button>\n        </div>\n      </div>\n\n      {/* Security Dashboard (Compact Version) */}\n      <div className=\"w-full mb-8\">\n        <SecurityDashboard compact={true} showMetrics={false} />\n      </div>\n\n      <div className=\"card w-full max-w-3xl p-6\">\n        <h3 className=\"text-xl font-bold mb-4\">How to Play</h3>\n        <ol className=\"list-decimal list-inside space-y-2 text-gray-300\">\n          <li>Connect your Solana wallet (Phantom, Solflare, etc.)</li>\n          <li>Choose to join the player queue or enter a specific game ID</li>\n          <li>Pay the entry fee in SOL or RPS Tokens</li>\n          <li>Choose rock, paper, or scissors manually or set to auto-play</li>\n          <li>Win by having the highest score after all rounds!</li>\n        </ol>\n\n        <div className=\"mt-6 p-4 bg-purple-900 bg-opacity-50 rounded-lg\">\n          <h4 className=\"font-bold mb-2\">Game Rules</h4>\n          <ul className=\"list-disc list-inside space-y-1 text-gray-300\">\n            <li>Rock beats Scissors</li>\n            <li>Scissors beats Paper</li>\n            <li>Paper beats Rock</li>\n            <li>Each player earns 1 point for each win against another player</li>\n            <li>The player with the most points after all rounds wins</li>\n            <li>Games require 3-4 players to start automatically</li>\n          </ul>\n        </div>\n      </div>\n\n      {/* Scaling and Security Section */}\n      <div className=\"card w-full max-w-3xl p-6 mt-6\">\n        <h3 className=\"text-xl font-bold mb-4\">Enterprise-Grade Security & Scaling</h3>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n          <div className=\"bg-gray-900 bg-opacity-50 p-4 rounded-lg\">\n            <h4 className=\"text-lg font-semibold mb-2 flex items-center\">\n              <span className=\"text-xl mr-2\"></span>\n              <span>Security Features</span>\n            </h4>\n            <ul className=\"space-y-2 text-sm\">\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Military-grade encryption for all game moves</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Solana blockchain verification prevents cheating</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>AI-powered anti-bot protection</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>DDoS protection with global traffic filtering</span>\n              </li>\n            </ul>\n          </div>\n\n          <div className=\"bg-gray-900 bg-opacity-50 p-4 rounded-lg\">\n            <h4 className=\"text-lg font-semibold mb-2 flex items-center\">\n              <span className=\"text-xl mr-2\"></span>\n              <span>Scaling Capabilities</span>\n            </h4>\n            <ul className=\"space-y-2 text-sm\">\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Support for 50,000+ concurrent players</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Global infrastructure across 12 regions</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Auto-scaling to handle sudden player surges</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Low latency (&lt; 200ms) gameplay worldwide</span>\n              </li>\n            </ul>\n          </div>\n        </div>\n\n        <div className=\"text-center text-sm text-purple-300 mt-2\">\n          Our infrastructure can handle thousands of concurrent games with enterprise-grade security.\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HomeView;\n","import React from 'react';\nimport { CurrencyMode } from '../types';\n\ninterface CurrencySelectorProps {\n  selectedCurrency: CurrencyMode;\n  onCurrencyChange: (currency: CurrencyMode) => void;\n  entryFee: number;\n  onEntryFeeChange: (fee: number) => void;\n  disabled?: boolean;\n}\n\nconst CurrencySelector: React.FC<CurrencySelectorProps> = ({\n  selectedCurrency,\n  onCurrencyChange,\n  entryFee,\n  onEntryFeeChange,\n  disabled = false\n}) => {\n  return (\n    <div className=\"mt-4\">\n      <label className=\"form-label\">Currency</label>\n      <div className=\"flex space-x-4\">\n        <button\n          type=\"button\"\n          onClick={() => onCurrencyChange(CurrencyMode.SOL)}\n          disabled={disabled}\n          className={`flex-1 py-2 rounded-lg transition-colors ${\n            selectedCurrency === CurrencyMode.SOL\n              ? 'bg-purple-600 hover:bg-purple-700'\n              : 'bg-gray-700 hover:bg-gray-600'\n          } ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}`}\n        >\n          <div className=\"flex items-center justify-center\">\n            <img\n              src=\"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png\"\n              alt=\"SOL\"\n              className=\"w-5 h-5 mr-2\"\n            />\n            SOL\n          </div>\n        </button>\n        <button\n          type=\"button\"\n          onClick={() => onCurrencyChange(CurrencyMode.RPS_TOKEN)}\n          disabled={disabled}\n          className={`flex-1 py-2 rounded-lg transition-colors ${\n            selectedCurrency === CurrencyMode.RPS_TOKEN\n              ? 'bg-purple-600 hover:bg-purple-700'\n              : 'bg-gray-700 hover:bg-gray-600'\n          } ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}`}\n        >\n          <div className=\"flex items-center justify-center\">\n            <img\n              src=\"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R/logo.png\"\n              alt=\"RPS\"\n              className=\"w-5 h-5 mr-2\"\n            />\n            RPS Token\n          </div>\n        </button>\n      </div>\n\n      {selectedCurrency === CurrencyMode.RPS_TOKEN && (\n        <div className=\"mt-2 p-2 bg-green-800 bg-opacity-30 rounded-lg\">\n          <p className=\"text-green-400 text-sm\">\n            <span className=\"font-bold\">+5% Bonus!</span> Using RPS Tokens gives you a larger pot!\n          </p>\n        </div>\n      )}\n\n      <div className=\"mt-4\">\n        <label className=\"form-label\">\n          Entry Fee ({selectedCurrency === CurrencyMode.SOL ? 'SOL' : 'RPS Token'})\n        </label>\n        <div className=\"relative\">\n          <input\n            type=\"number\"\n            value={entryFee}\n            onChange={(e) => onEntryFeeChange(Math.max(0.01, parseFloat(e.target.value) || 0.01))}\n            min=\"0.01\"\n            step=\"0.01\"\n            disabled={disabled}\n            className={`form-control pr-12 ${\n              disabled ? 'opacity-50 cursor-not-allowed' : ''\n            }`}\n          />\n          <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400\">\n            {selectedCurrency === CurrencyMode.SOL ? 'SOL' : 'RPS'}\n          </div>\n        </div>\n\n        {selectedCurrency === CurrencyMode.RPS_TOKEN && (\n          <p className=\"text-xs text-gray-400 mt-1\">\n            Only 0.05% fee instead of 0.1% when using RPS Tokens!\n          </p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CurrencySelector;\n","import React, { useState } from 'react';\nimport { CurrencyMode, GameView } from '../types';\nimport CurrencySelector from '../components/CurrencySelector';\n\ninterface CreateGameViewProps {\n  setCurrentView: (view: GameView) => void;\n  gameClient: any;\n  createGame: (betAmount: number, currencyMode: CurrencyMode) => Promise<void>;\n  loading: boolean;\n  [key: string]: any; // Accept additional props\n}\n\nconst CreateGameView: React.FC<CreateGameViewProps> = ({\n  setCurrentView,\n  gameClient,\n  createGame,\n  loading = false,\n}) => {\n  const [entryFee, setEntryFee] = useState<number>(0.1);\n  const [playerCount, setPlayerCount] = useState<number>(3);\n  const [totalRounds, setTotalRounds] = useState<number>(3);\n  const [timeoutSeconds, setTimeoutSeconds] = useState<number>(60);\n  const [losersCanRejoin, setLosersCanRejoin] = useState<boolean>(true);\n  const [currencyMode, setCurrencyMode] = useState<CurrencyMode>(CurrencyMode.SOL);\n  const [useSecureMode, setUseSecureMode] = useState<boolean>(true);\n  const [isSubmitting, setIsSubmitting] = useState<boolean>(false);\n\n  const handleBack = () => {\n    setCurrentView(GameView.HOME);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!gameClient) {\n      alert(\"Game client not initialized. Please connect your wallet.\");\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      // Call the createGame function passed via props\n      await createGame(entryFee, currencyMode);\n    } catch (error: any) {\n      console.error(\"Failed to create game:\", error);\n      alert(`Failed to create game: ${error.message || 'Unknown error'}`);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Combined loading state from props and local state\n  const isLoading = loading || isSubmitting;\n\n  return (\n    <div className=\"max-w-3xl mx-auto\">\n      <div className=\"card\">\n        <h2 className=\"text-2xl font-bold mb-6\">Create New Game</h2>\n\n        <form onSubmit={handleSubmit}>\n          <CurrencySelector\n            selectedCurrency={currencyMode}\n            onCurrencyChange={setCurrencyMode}\n            entryFee={entryFee}\n            onEntryFeeChange={setEntryFee}\n            disabled={isLoading}\n          />\n\n          <div className=\"form-group mt-6\">\n            <label className=\"form-label\">Player Count</label>\n            <div className=\"flex space-x-4\">\n              <button\n                type=\"button\"\n                className={`flex-1 py-3 rounded-lg ${\n                  playerCount === 3\n                    ? 'bg-purple-600'\n                    : 'bg-gray-700 hover:bg-gray-600'\n                }`}\n                onClick={() => setPlayerCount(3)}\n                disabled={isLoading}\n              >\n                3 Players\n              </button>\n              <button\n                type=\"button\"\n                className={`flex-1 py-3 rounded-lg ${\n                  playerCount === 4\n                    ? 'bg-purple-600'\n                    : 'bg-gray-700 hover:bg-gray-600'\n                }`}\n                onClick={() => setPlayerCount(4)}\n                disabled={isLoading}\n              >\n                4 Players\n              </button>\n            </div>\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"form-label\">Number of Rounds</label>\n            <input\n              type=\"number\"\n              className=\"form-control\"\n              value={totalRounds}\n              onChange={(e) => setTotalRounds(parseInt(e.target.value))}\n              min={1}\n              max={10}\n              required\n              disabled={isLoading}\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"form-label\">Timeout (seconds)</label>\n            <input\n              type=\"number\"\n              className=\"form-control\"\n              value={timeoutSeconds}\n              onChange={(e) => setTimeoutSeconds(parseInt(e.target.value))}\n              min={30}\n              required\n              disabled={isLoading}\n            />\n            <p className=\"text-xs text-gray-400 mt-1\">\n              Time before a player is considered inactive\n            </p>\n          </div>\n\n          <div className=\"form-group flex items-center\">\n            <input\n              type=\"checkbox\"\n              id=\"losersCanRejoin\"\n              className=\"mr-2 h-5 w-5 rounded text-purple-500 focus:ring-purple-500\"\n              checked={losersCanRejoin}\n              onChange={(e) => setLosersCanRejoin(e.target.checked)}\n              disabled={isLoading}\n            />\n            <label htmlFor=\"losersCanRejoin\" className=\"text-white\">\n              Allow losers to rejoin\n            </label>\n          </div>\n\n          {/* Enhanced security option */}\n          <div className=\"form-group flex items-center mt-4\">\n            <input\n              type=\"checkbox\"\n              id=\"useSecureMode\"\n              className=\"mr-2 h-5 w-5 rounded text-purple-500 focus:ring-purple-500\"\n              checked={useSecureMode}\n              onChange={(e) => setUseSecureMode(e.target.checked)}\n              disabled={isLoading}\n            />\n            <label htmlFor=\"useSecureMode\" className=\"text-white\">\n              Enable enhanced security mode\n            </label>\n            <div className=\"ml-2 group relative\">\n              <span className=\"cursor-help text-gray-400\"></span>\n              <div className=\"absolute bottom-full mb-2 hidden group-hover:block bg-gray-800 p-2 rounded shadow-lg w-64 text-xs\">\n                Enhanced security mode enables additional verification of player moves, DDoS protection, and bot detection.\n              </div>\n            </div>\n          </div>\n\n          <div className=\"mt-6 p-4 bg-gray-800 rounded-lg\">\n            <h3 className=\"text-lg font-semibold mb-2 text-purple-300\">Security Information</h3>\n            <ul className=\"text-sm text-gray-300 space-y-2\">\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>All game moves are cryptographically secured on the Solana blockchain</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Commit-reveal pattern prevents cheating by hiding your choice until all players commit</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Game state is entirely on-chain, ensuring 100% transparency and fairness</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Auto-scaling infrastructure supports up to 50,000 concurrent players</span>\n              </li>\n            </ul>\n          </div>\n\n          <div className=\"flex justify-between mt-8\">\n            <button\n              type=\"button\"\n              onClick={handleBack}\n              className=\"btn btn-gray\"\n              disabled={isLoading}\n            >\n              Back\n            </button>\n\n            <button\n              type=\"submit\"\n              className=\"btn btn-primary\"\n              disabled={isLoading}\n            >\n              {isLoading ? 'Creating Game...' : 'Create Game'}\n            </button>\n          </div>\n\n          <div className=\"mt-6 p-3 bg-gray-800 rounded-lg text-sm text-gray-400\">\n            <div className=\"flex items-start\">\n              <span className=\"text-purple-400 mr-2\"></span>\n              <p>\n                A {currencyMode === CurrencyMode.SOL ? '0.1%' : '0.05%'} fee will be applied to your entry fee.\n                {currencyMode === CurrencyMode.RPS_TOKEN && ' RPS Token games have 50% lower fees!'}\n              </p>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateGameView;\n","import type React from 'react';\nimport { useState } from 'react';\nimport { GameView } from '../types';\n\ninterface JoinGameViewProps {\n  setCurrentView: (view: GameView) => void;\n  gameClient: any;\n  joinGame: (gameIdToJoin: string) => Promise<void>;\n  loading: boolean;\n  [key: string]: any; // Accept additional props\n}\n\nconst JoinGameView: React.FC<JoinGameViewProps> = ({\n  setCurrentView,\n  gameClient,\n  joinGame,\n  loading = false,\n}) => {\n  const [gameId, setGameId] = useState<string>('');\n  const [isSubmitting, setIsSubmitting] = useState<boolean>(false);\n\n  const handleBack = () => {\n    setCurrentView(GameView.HOME);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!gameId.trim() || !gameClient) {\n      alert(\"Please enter a game ID and make sure your wallet is connected\");\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      await joinGame(gameId.trim());\n    } catch (error: any) {\n      console.error(\"Failed to join game:\", error);\n      alert(`Failed to join game: ${error.message || 'Unknown error'}`);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Combined loading state from props and local state\n  const isLoading = loading || isSubmitting;\n\n  return (\n    <div className=\"max-w-3xl mx-auto\">\n      <div className=\"card\">\n        <h2 className=\"text-2xl font-bold mb-6\">Join Existing Game</h2>\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label className=\"form-label\">Game ID</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              value={gameId}\n              onChange={(e) => setGameId(e.target.value)}\n              placeholder=\"Enter game ID\"\n              required\n              disabled={isLoading}\n            />\n            <p className=\"text-xs text-gray-400 mt-1\">\n              Enter the ID of the game you want to join\n            </p>\n          </div>\n\n          <div className=\"mt-6 p-4 bg-gray-800 rounded-lg\">\n            <h3 className=\"text-lg font-semibold mb-2 text-purple-300\">Security Features</h3>\n            <ul className=\"text-sm text-gray-300 space-y-2\">\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Anti-fraud protection verifies all game transactions</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Secure socket connection with 256-bit encryption</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Load balancing across multiple regions ensures low latency</span>\n              </li>\n            </ul>\n          </div>\n\n          <div className=\"mt-8 bg-purple-900 bg-opacity-50 p-4 rounded-lg mb-8\">\n            <h3 className=\"text-lg font-semibold mb-2\">Important Note</h3>\n            <p className=\"text-gray-300 text-sm\">\n              By joining a game, you agree to pay the entry fee specified by the game creator.\n              Make sure you have enough SOL in your wallet to cover the entry fee.\n            </p>\n          </div>\n\n          <div className=\"flex justify-between\">\n            <button\n              type=\"button\"\n              onClick={handleBack}\n              className=\"btn btn-gray\"\n              disabled={isLoading}\n            >\n              Back\n            </button>\n\n            <button\n              type=\"submit\"\n              className=\"btn btn-secondary\"\n              disabled={isLoading || !gameId.trim()}\n            >\n              {isLoading ? 'Joining Game...' : 'Join Game'}\n            </button>\n          </div>\n        </form>\n      </div>\n\n      <div className=\"mt-6 card\">\n        <h3 className=\"text-lg font-semibold mb-4\">How to Join a Game</h3>\n        <ol className=\"list-decimal list-inside space-y-2 text-gray-300\">\n          <li>Get the game ID from the game creator</li>\n          <li>Enter the game ID in the field above</li>\n          <li>Click \"Join Game\" to join the game</li>\n          <li>Confirm the transaction in your wallet to pay the entry fee</li>\n          <li>Wait for other players to join (games automatically start when full)</li>\n        </ol>\n      </div>\n    </div>\n  );\n};\n\nexport default JoinGameView;\n","// Audio service for managing game sound effects\nclass AudioService {\n  private sounds: Record<string, HTMLAudioElement> = {};\n  private muted: boolean = false;\n  private volume: number = 0.8; // Default volume (0-1)\n  private initialized: boolean = false;\n\n  // Sound categories\n  public readonly CATEGORIES = {\n    UI: 'ui',\n    GAME: 'game',\n    WIN: 'win',\n    LOSE: 'lose',\n  };\n\n  // List of sound files to preload\n  private readonly SOUND_FILES = [\n    { id: 'click', src: '/sounds/click.mp3', category: 'ui' },\n    { id: 'hover', src: '/sounds/hover.mp3', category: 'ui' },\n    { id: 'countdown', src: '/sounds/countdown.mp3', category: 'game' },\n    { id: 'reveal', src: '/sounds/reveal.mp3', category: 'game' },\n    { id: 'win', src: '/sounds/win.mp3', category: 'win' },\n    { id: 'lose', src: '/sounds/lose.mp3', category: 'lose' },\n    { id: 'tie', src: '/sounds/tie.mp3', category: 'game' },\n    { id: 'coins', src: '/sounds/coins.mp3', category: 'win' },\n    { id: 'error', src: '/sounds/error.mp3', category: 'ui' },\n    { id: 'success', src: '/sounds/success.mp3', category: 'ui' },\n  ];\n\n  constructor() {\n    // Load saved settings from localStorage\n    const savedMuted = localStorage.getItem('rps-audio-muted');\n    if (savedMuted !== null) {\n      this.muted = savedMuted === 'true';\n    }\n\n    const savedVolume = localStorage.getItem('rps-audio-volume');\n    if (savedVolume !== null) {\n      this.volume = parseFloat(savedVolume);\n    }\n\n    // Initialize immediately\n    this.initialize();\n  }\n\n  /**\n   * Initialize the audio service\n   * This should be called when the user interacts with the page\n   * to ensure browser audio autoplay policies are satisfied\n   */\n  public async initialize(): Promise<void> {\n    if (this.initialized) return;\n\n    try {\n      // Load preference from localStorage\n      this.loadPreferences();\n\n      // Create a dummy audio context to enable audio on first user interaction\n      const AudioContext = window.AudioContext || (window as any).webkitAudioContext;\n      const audioContext = new AudioContext();\n\n      // Preload all sounds\n      await this.preloadSounds();\n\n      this.initialized = true;\n      console.log('Audio service initialized');\n    } catch (error) {\n      console.error('Failed to initialize audio service:', error);\n    }\n  }\n\n  /**\n   * Preload all sound effects\n   */\n  private async preloadSounds(): Promise<void> {\n    const loadPromises = this.SOUND_FILES.map(sound => {\n      return new Promise<void>((resolve, reject) => {\n        const audio = new Audio();\n        audio.src = sound.src;\n        audio.volume = this.volume;\n        audio.preload = 'auto';\n\n        audio.oncanplaythrough = () => {\n          this.sounds[sound.id] = audio;\n          resolve();\n        };\n\n        audio.onerror = (error) => {\n          console.warn(`Failed to load sound ${sound.id}:`, error);\n          resolve(); // Resolve anyway to prevent blocking other sounds\n        };\n\n        // Add to DOM to trigger loading\n        audio.load();\n      });\n    });\n\n    try {\n      await Promise.all(loadPromises);\n    } catch (error) {\n      console.error('Error preloading sounds:', error);\n    }\n  }\n\n  /**\n   * Play a sound effect by ID\n   * @param soundId The ID of the sound to play\n   */\n  public play(soundId: string): void {\n    if (!this.initialized || this.muted) return;\n\n    const sound = this.sounds[soundId];\n    if (!sound) {\n      console.warn(`Sound with ID \"${soundId}\" not found`);\n      return;\n    }\n\n    // Clone the audio element to allow multiple plays at once\n    const soundClone = sound.cloneNode() as HTMLAudioElement;\n    soundClone.volume = this.volume;\n\n    // Play and clean up when done\n    soundClone.play().catch(error => {\n      console.warn(`Error playing sound ${soundId}:`, error);\n    });\n\n    soundClone.onended = () => {\n      soundClone.remove();\n    };\n  }\n\n  /**\n   * Play a sound from a specific category\n   * @param category The category of sound to play\n   */\n  public playCategory(category: string): void {\n    if (!this.initialized || this.muted) return;\n\n    // Find sounds in the category\n    const categorySound = this.SOUND_FILES.find(sound => sound.category === category);\n    if (categorySound) {\n      this.play(categorySound.id);\n    }\n  }\n\n  /**\n   * Toggle mute status\n   * @returns New mute status\n   */\n  public toggleMute(): boolean {\n    this.muted = !this.muted;\n    this.savePreferences();\n    return this.muted;\n  }\n\n  /**\n   * Set the mute status\n   * @param muted Whether sounds should be muted\n   */\n  public setMuted(muted: boolean): void {\n    this.muted = muted;\n    localStorage.setItem('rps-audio-muted', muted.toString());\n  }\n\n  /**\n   * Set the volume level\n   * @param volume Volume level (0-1)\n   */\n  public setVolume(volume: number): void {\n    this.volume = Math.max(0, Math.min(1, volume)); // Clamp between 0 and 1\n\n    // Update volume for all loaded sounds\n    Object.values(this.sounds).forEach(sound => {\n      sound.volume = this.volume;\n    });\n\n    localStorage.setItem('rps-audio-volume', volume.toString());\n  }\n\n  /**\n   * Get the current mute status\n   */\n  public getMuted(): boolean {\n    return this.muted;\n  }\n\n  /**\n   * Get the current volume level\n   */\n  public getVolume(): number {\n    return this.volume;\n  }\n\n  /**\n   * Save audio preferences to localStorage\n   */\n  private savePreferences(): void {\n    try {\n      localStorage.setItem('rps-audio-muted', JSON.stringify(this.muted));\n      localStorage.setItem('rps-audio-volume', JSON.stringify(this.volume));\n    } catch (error) {\n      console.warn('Failed to save audio preferences:', error);\n    }\n  }\n\n  /**\n   * Load audio preferences from localStorage\n   */\n  private loadPreferences(): void {\n    try {\n      const muted = localStorage.getItem('rps-audio-muted');\n      if (muted !== null) {\n        this.muted = JSON.parse(muted);\n      }\n\n      const volume = localStorage.getItem('rps-audio-volume');\n      if (volume !== null) {\n        this.volume = JSON.parse(volume);\n      }\n    } catch (error) {\n      console.warn('Failed to load audio preferences:', error);\n    }\n  }\n}\n\n// Export singleton instance\nexport const audioService = new AudioService();\n\nexport default audioService;\n","import React, { useState, useEffect } from 'react';\nimport { Game, GameState, CurrencyMode } from '../types';\nimport { formatCurrencyAmount } from '../services/token-service';\nimport { RPSGameClient } from '../rps-client';\nimport audioService from '../services/audio-service';\n\ninterface GameLobbyViewProps {\n  gameClient: RPSGameClient;\n  gameId: string;\n  onGameStarted: (gameData: any) => void;\n  onLeaveGame: () => void;\n}\n\nconst GameLobbyView: React.FC<GameLobbyViewProps> = ({\n  gameClient,\n  gameId,\n  onGameStarted,\n  onLeaveGame\n}) => {\n  const [gameData, setGameData] = useState<Game | null>(null);\n  const [copied, setCopied] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [subscribed, setSubscribed] = useState<boolean>(false);\n  const [userPublicKey, setUserPublicKey] = useState<string>('');\n\n  // Load game data and subscribe to updates\n  useEffect(() => {\n    const loadGameData = async () => {\n      try {\n        setLoading(true);\n\n        // Get user wallet public key\n        if (gameClient) {\n          const wallet = (gameClient as any).wallet;\n          if (wallet && wallet.publicKey) {\n            setUserPublicKey(wallet.publicKey.toString());\n          }\n        }\n\n        // Subscribe to game updates\n        if (!subscribed && gameClient) {\n          const id = await gameClient.subscribeToGameUpdates(\n            gameId,\n            (updatedGame) => {\n              console.log('Game updated:', updatedGame);\n              // Convert Uint8Array to string for host\n              const hostKey = Buffer.from(updatedGame.host).toString('hex');\n\n              // Convert players data\n              const players = updatedGame.players.map(player => ({\n                ...player,\n                pubkey: Buffer.from(player.pubkey).toString('hex')\n              }));\n\n              setGameData({\n                ...updatedGame,\n                host: hostKey,\n                players: players\n              });\n\n              // Check if the game has started\n              if (updatedGame.state === GameState.CommitPhase && !loading) {\n                console.log('Game started!');\n                onGameStarted(updatedGame);\n              }\n\n              setLoading(false);\n            }\n          );\n          setSubscribed(true);\n          console.log(`Subscribed to game ${gameId} with ID: ${id}`);\n        }\n      } catch (error) {\n        console.error('Error loading game data:', error);\n        setLoading(false);\n      }\n    };\n\n    loadGameData();\n\n    // Cleanup subscription\n    return () => {\n      if (subscribed && gameClient) {\n        gameClient.unsubscribeFromGameUpdates(gameId);\n        console.log(`Unsubscribed from game ${gameId}`);\n      }\n    };\n  }, [gameClient, gameId, subscribed]);\n\n  // Start the game\n  const handleStartGame = async () => {\n    try {\n      setLoading(true);\n      await gameClient.startGame(gameId);\n      audioService.play('success');\n    } catch (error) {\n      console.error('Error starting game:', error);\n      setLoading(false);\n    }\n  };\n\n  // Get shortened version of public key for display\n  const shortenPubkey = (pubkey: string) => {\n    if (!pubkey) return '';\n    return `${pubkey.substring(0, 6)}...${pubkey.substring(pubkey.length - 4)}`;\n  };\n\n  // Format SOL amounts for display\n  const formatSol = (lamports: number) => {\n    return (lamports / 1000000000).toFixed(4);\n  };\n\n  // Copy game ID to clipboard\n  const copyGameId = () => {\n    navigator.clipboard.writeText(gameId);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n    audioService.play('click');\n  };\n\n  // Loading state\n  if (loading && !gameData) {\n    return (\n      <div className=\"max-w-3xl mx-auto\">\n        <div className=\"card\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h2 className=\"text-2xl font-bold\">Loading Game...</h2>\n          </div>\n          <div className=\"flex justify-center items-center py-20\">\n            <div className=\"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-500\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Error state if no game data\n  if (!gameData) {\n    return (\n      <div className=\"max-w-3xl mx-auto\">\n        <div className=\"card\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h2 className=\"text-2xl font-bold\">Game Not Found</h2>\n          </div>\n          <p className=\"mb-4\">Could not load game data. The game might not exist or has ended.</p>\n          <button\n            onClick={onLeaveGame}\n            className=\"w-full py-3 rounded-lg bg-purple-600 hover:bg-purple-700\"\n          >\n            Back to Home\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const isHost = gameData.host === userPublicKey;\n  const playerCount = gameData.players.length;\n  const minPlayers = gameData.minPlayers;\n  const readyToStart = playerCount >= minPlayers;\n  const currencyMode = gameData.currencyMode || CurrencyMode.SOL;\n\n  return (\n    <div className=\"max-w-3xl mx-auto\">\n      <div className=\"card\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-2xl font-bold\">Game Lobby</h2>\n\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-gray-300 text-sm\">Game ID:</span>\n            <div className=\"relative\">\n              <button\n                onClick={copyGameId}\n                className=\"bg-gray-700 text-white px-3 py-1 rounded text-sm font-mono\"\n              >\n                {shortenPubkey(gameId)}\n              </button>\n              {copied && (\n                <span className=\"absolute -bottom-8 left-0 bg-gray-800 text-white text-xs px-2 py-1 rounded\">\n                  Copied!\n                </span>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mb-6\">\n          <h3 className=\"text-lg font-semibold mb-3\">\n            Players <span className=\"text-purple-400\">({playerCount}/{gameData.maxPlayers})</span>\n          </h3>\n\n          {/* Your wallet */}\n          <div className=\"bg-purple-900 bg-opacity-30 p-3 rounded-lg mb-4\">\n            <div className=\"flex justify-between items-center\">\n              <div className=\"flex items-center\">\n                <span className=\"text-xl mr-3\"></span>\n                <span className=\"font-mono text-purple-200\">\n                  {shortenPubkey(userPublicKey)} (You)\n                </span>\n              </div>\n              {gameData.host === userPublicKey && (\n                <span className=\"badge badge-host\">Host</span>\n              )}\n            </div>\n          </div>\n\n          {gameData.players\n            .filter(player => player.pubkey !== userPublicKey) // Filter out current user\n            .map((player, index) => (\n              <div\n                key={index}\n                className=\"flex justify-between items-center bg-gray-700 p-3 rounded-lg mb-2\"\n              >\n                <div className=\"flex items-center\">\n                  <span className=\"text-xl mr-3\"></span>\n                  <span className=\"font-mono\">\n                    {shortenPubkey(player.pubkey)}\n                  </span>\n                </div>\n                {player.pubkey === gameData.host && (\n                  <span className=\"badge badge-host\">Host</span>\n                )}\n              </div>\n            ))}\n\n          {/* Empty player slots */}\n          {Array(gameData.maxPlayers - playerCount)\n            .fill(0)\n            .map((_, index) => (\n              <div\n                key={`empty-${index}`}\n                className=\"flex items-center bg-gray-700 bg-opacity-40 p-3 rounded-lg mb-2 text-gray-400\"\n              >\n                <span className=\"text-xl mr-3\"></span>\n                <span>Waiting for player...</span>\n              </div>\n            ))}\n        </div>\n\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\n          <div className=\"bg-gray-700 p-4 rounded-lg\">\n            <h4 className=\"text-sm text-gray-400 mb-1\">Entry Fee</h4>\n            <div className=\"flex items-center\">\n              <p className=\"text-xl font-bold\">\n                {formatSol(gameData.entryFee)} {currencyMode === CurrencyMode.SOL ? 'SOL' : 'RPSTOKEN'}\n              </p>\n              {currencyMode === CurrencyMode.RPSTOKEN && (\n                <span className=\"ml-2 px-2 py-1 bg-green-800 bg-opacity-40 rounded text-xs text-green-400\">\n                  -50% Fee\n                </span>\n              )}\n            </div>\n          </div>\n\n          <div className=\"bg-gray-700 p-4 rounded-lg\">\n            <h4 className=\"text-sm text-gray-400 mb-1\">Currency</h4>\n            <p className=\"text-xl font-bold flex items-center\">\n              {currencyMode === CurrencyMode.SOL ? (\n                <>\n                  <span className=\"w-5 h-5 mr-1 bg-yellow-500 rounded-full flex items-center justify-center text-xs text-black\">S</span>\n                  SOL\n                </>\n              ) : (\n                <>\n                  <span className=\"w-5 h-5 mr-1 bg-purple-500 rounded-full flex items-center justify-center text-xs text-black\">R</span>\n                  RPSTOKEN\n                </>\n              )}\n            </p>\n          </div>\n\n          <div className=\"bg-gray-700 p-4 rounded-lg\">\n            <h4 className=\"text-sm text-gray-400 mb-1\">Total Rounds</h4>\n            <p className=\"text-xl font-bold\">{gameData.totalRounds}</p>\n          </div>\n\n          <div className=\"bg-gray-700 p-4 rounded-lg\">\n            <h4 className=\"text-sm text-gray-400 mb-1\">Prize Pool</h4>\n            <div className=\"flex items-center\">\n              <p className=\"text-xl font-bold\">\n                {formatSol(gameData.gamePot)} {currencyMode === CurrencyMode.SOL ? 'SOL' : 'RPSTOKEN'}\n              </p>\n              {currencyMode === CurrencyMode.RPSTOKEN && (\n                <span className=\"ml-2 px-2 py-1 bg-green-800 bg-opacity-40 rounded text-xs text-green-400\">\n                  +5% Bonus\n                </span>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex space-x-4\">\n          <button\n            onClick={onLeaveGame}\n            className=\"flex-1 py-3 rounded-lg text-lg font-bold bg-gray-700 hover:bg-gray-600\"\n            disabled={loading}\n          >\n            Leave Game\n          </button>\n\n          {isHost ? (\n            <button\n              onClick={handleStartGame}\n              className={`flex-1 py-3 rounded-lg text-lg font-bold ${\n                readyToStart && !loading\n                  ? 'bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700'\n                  : 'bg-gray-600 cursor-not-allowed opacity-50'\n              }`}\n              disabled={!readyToStart || loading}\n            >\n              {loading\n                ? 'Starting Game...'\n                : readyToStart\n                ? 'Start Game'\n                : `Need ${minPlayers - playerCount} More Player${minPlayers - playerCount !== 1 ? 's' : ''}`}\n            </button>\n          ) : (\n            <div className=\"flex-1 bg-gray-700 p-3 rounded-lg text-center\">\n              <p className=\"text-lg\">\n                {readyToStart\n                  ? 'Waiting for host to start...'\n                  : `Need ${minPlayers - playerCount} more player${minPlayers - playerCount !== 1 ? 's' : ''}`}\n              </p>\n            </div>\n          )}\n        </div>\n\n        <div className=\"mt-6\">\n          <h3 className=\"text-lg font-semibold mb-2\">How to Invite Players</h3>\n          <p className=\"text-gray-300\">\n            Share your Game ID with friends so they can join your game. They will need to have\n            a Solana wallet with sufficient {currencyMode === CurrencyMode.SOL ? 'SOL' : 'RPSTOKEN'} to join.\n          </p>\n          <div className=\"mt-4 p-3 bg-gray-800 rounded-lg\">\n            <p className=\"text-sm text-white font-semibold mb-2\">Copy this invite:</p>\n            <div className=\"bg-gray-900 p-2 rounded font-mono text-xs break-all\">\n              Join my Rock-Paper-Scissors game on Solana! Game ID: {gameId}\n            </div>\n            <button\n              onClick={() => {\n                navigator.clipboard.writeText(`Join my Rock-Paper-Scissors game on Solana! Game ID: ${gameId}`);\n                audioService.play('click');\n                alert('Invite copied to clipboard!');\n              }}\n              className=\"mt-2 text-sm bg-purple-600 hover:bg-purple-700 px-3 py-1 rounded\"\n            >\n              Copy Invite\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GameLobbyView;\n","import type React from 'react';\nimport { useState } from 'react';\nimport { type Game, GameState, Choice } from '../types';\n\ninterface CommitChoiceViewProps {\n  gameData: Game;\n  userPublicKey: string;\n  onCommitChoice: (choice: number) => void;\n  loading: boolean;\n}\n\nconst CommitChoiceView: React.FC<CommitChoiceViewProps> = ({\n  gameData,\n  userPublicKey,\n  onCommitChoice,\n  loading\n}) => {\n  const [selectedChoice, setSelectedChoice] = useState<number | null>(null);\n\n  // Get player info\n  const currentPlayer = gameData.players.find(\n    player => player.pubkey === userPublicKey\n  );\n\n  // Check if player has already committed\n  const hasCommitted = currentPlayer?.committedChoice?.some(b => b !== 0);\n\n  // Options for the game\n  const choices = [\n    { value: Choice.Rock, emoji: '', label: 'Rock' },\n    { value: Choice.Paper, emoji: '', label: 'Paper' },\n    { value: Choice.Scissors, emoji: '', label: 'Scissors' }\n  ];\n\n  // Handle selecting and committing a choice\n  const handleSelect = (choice: number) => {\n    if (loading || hasCommitted) return;\n    setSelectedChoice(choice);\n  };\n\n  const handleCommit = () => {\n    if (selectedChoice !== null && !loading && !hasCommitted) {\n      onCommitChoice(selectedChoice);\n    }\n  };\n\n  // Get player status\n  const getPlayerStatus = (player: any) => {\n    if (player.pubkey === userPublicKey) {\n      return hasCommitted ? 'You have committed your choice' : 'Make your choice';\n    }\n    return player.committedChoice?.some(b => b !== 0)\n      ? 'Has committed a choice'\n      : 'Waiting for choice';\n  };\n\n  return (\n    <div className=\"max-w-3xl mx-auto\">\n      <div className=\"card\">\n        <div className=\"text-center mb-8\">\n          <h2 className=\"text-2xl font-bold mb-2\">Make Your Choice</h2>\n          <p className=\"text-gray-300\">\n            Choose rock, paper, or scissors. Your choice will be kept secret until everyone reveals.\n          </p>\n        </div>\n\n        <div className=\"flex flex-col md:flex-row justify-center gap-4 mb-8\">\n          {choices.map((choice) => (\n            <div\n              key={choice.value}\n              className={`choice-btn ${\n                selectedChoice === choice.value\n                  ? 'choice-btn-selected'\n                  : 'choice-btn-default'\n              } ${hasCommitted ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}`}\n              onClick={() => handleSelect(choice.value)}\n            >\n              <div className=\"text-5xl mb-2\">{choice.emoji}</div>\n              <div className=\"font-medium\">{choice.label}</div>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"text-center mb-8\">\n          <button\n            onClick={handleCommit}\n            className={`px-8 py-3 rounded-lg font-bold ${\n              selectedChoice !== null && !hasCommitted && !loading\n                ? 'bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700'\n                : 'bg-gray-600 cursor-not-allowed opacity-50'\n            }`}\n            disabled={selectedChoice === null || hasCommitted || loading}\n          >\n            {loading\n              ? 'Committing...'\n              : hasCommitted\n              ? 'Choice Committed'\n              : 'Commit Choice'}\n          </button>\n\n          {hasCommitted && (\n            <p className=\"mt-2 text-green-400\">\n              Your choice has been committed! Waiting for other players...\n            </p>\n          )}\n        </div>\n\n        <div className=\"bg-gray-800 rounded-lg p-4\">\n          <h3 className=\"text-lg font-semibold mb-3\">Player Status</h3>\n\n          <div className=\"space-y-2\">\n            {gameData.players.map((player, index) => (\n              <div\n                key={index}\n                className=\"flex justify-between items-center bg-gray-700 p-3 rounded-lg\"\n              >\n                <div className=\"flex items-center\">\n                  <span className=\"text-xl mr-3\">\n                    {player.pubkey === userPublicKey ? '' : ''}\n                  </span>\n                  <span>\n                    {`Player ${index + 1}`}\n                    {player.pubkey === userPublicKey && ' (You)'}\n                  </span>\n                </div>\n                <div className=\"flex items-center\">\n                  <span className={`text-sm ${\n                    player.committedChoice?.some(b => b !== 0)\n                      ? 'text-green-400'\n                      : 'text-yellow-400'\n                  }`}>\n                    {getPlayerStatus(player)}\n                  </span>\n                  {player.committedChoice?.some(b => b !== 0) && (\n                    <span className=\"ml-2 text-green-400\"></span>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CommitChoiceView;\n","import type React from 'react';\nimport { type Game, GameState, Choice } from '../types';\n\ninterface RevealChoiceViewProps {\n  gameData: Game;\n  userPublicKey: string;\n  userChoice: number;\n  onRevealChoice: () => void;\n  loading: boolean;\n}\n\nconst RevealChoiceView: React.FC<RevealChoiceViewProps> = ({\n  gameData,\n  userPublicKey,\n  userChoice,\n  onRevealChoice,\n  loading\n}) => {\n  // Get player info\n  const currentPlayer = gameData.players.find(\n    player => player.pubkey === userPublicKey\n  );\n\n  // Check if player has already revealed\n  const hasRevealed = currentPlayer?.revealed;\n\n  // Get choice emoji\n  const getChoiceEmoji = (choice: number) => {\n    switch (choice) {\n      case Choice.Rock:\n        return '';\n      case Choice.Paper:\n        return '';\n      case Choice.Scissors:\n        return '';\n      default:\n        return '';\n    }\n  };\n\n  // Get choice name\n  const getChoiceName = (choice: number) => {\n    switch (choice) {\n      case Choice.Rock:\n        return 'Rock';\n      case Choice.Paper:\n        return 'Paper';\n      case Choice.Scissors:\n        return 'Scissors';\n      default:\n        return 'Unknown';\n    }\n  };\n\n  // Get player status\n  const getPlayerStatus = (player: any) => {\n    if (player.pubkey === userPublicKey) {\n      return hasRevealed ? 'You have revealed your choice' : 'Reveal your choice';\n    }\n    return player.revealed\n      ? 'Has revealed their choice'\n      : 'Waiting for reveal';\n  };\n\n  return (\n    <div className=\"max-w-3xl mx-auto\">\n      <div className=\"card\">\n        <div className=\"text-center mb-8\">\n          <h2 className=\"text-2xl font-bold mb-2\">Reveal Your Choice</h2>\n          <p className=\"text-gray-300\">\n            All players have committed their choices. Now it's time to reveal what you selected.\n          </p>\n        </div>\n\n        <div className=\"flex justify-center mb-8\">\n          <div className=\"text-center\">\n            <div className=\"text-6xl mb-4 animate-pulse\">{getChoiceEmoji(userChoice)}</div>\n            <h3 className=\"text-xl font-bold\">{getChoiceName(userChoice)}</h3>\n            <p className=\"text-gray-400 mt-1\">Your committed choice</p>\n          </div>\n        </div>\n\n        <div className=\"text-center mb-8\">\n          <button\n            onClick={onRevealChoice}\n            className={`px-8 py-3 rounded-lg font-bold ${\n              !hasRevealed && !loading\n                ? 'bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700'\n                : 'bg-gray-600 cursor-not-allowed opacity-50'\n            }`}\n            disabled={hasRevealed || loading}\n          >\n            {loading\n              ? 'Revealing...'\n              : hasRevealed\n              ? 'Choice Revealed'\n              : 'Reveal Choice'}\n          </button>\n\n          {hasRevealed && (\n            <p className=\"mt-2 text-green-400\">\n              Your choice has been revealed! Waiting for other players...\n            </p>\n          )}\n        </div>\n\n        <div className=\"bg-gray-800 rounded-lg p-4\">\n          <h3 className=\"text-lg font-semibold mb-3\">Player Status</h3>\n\n          <div className=\"space-y-2\">\n            {gameData.players.map((player, index) => (\n              <div\n                key={index}\n                className=\"flex justify-between items-center bg-gray-700 p-3 rounded-lg\"\n              >\n                <div className=\"flex items-center\">\n                  <span className=\"text-xl mr-3\">\n                    {player.pubkey === userPublicKey ? '' : ''}\n                  </span>\n                  <span>\n                    {`Player ${index + 1}`}\n                    {player.pubkey === userPublicKey && ' (You)'}\n                  </span>\n                </div>\n                <div className=\"flex items-center\">\n                  <span className={`text-sm ${\n                    player.revealed\n                      ? 'text-green-400'\n                      : 'text-yellow-400'\n                  }`}>\n                    {getPlayerStatus(player)}\n                  </span>\n                  {player.revealed && (\n                    <span className=\"ml-2 text-green-400\"></span>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"mt-8 bg-purple-900 bg-opacity-50 p-4 rounded-lg\">\n          <h3 className=\"font-semibold mb-2\">What happens next?</h3>\n          <p className=\"text-gray-300 text-sm\">\n            Once all players have revealed their choices, the game will determine the winner based on the\n            rock-paper-scissors rules. Each player's choice will be compared against all other players,\n            and points will be awarded for each winning comparison.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RevealChoiceView;\n","import type React from 'react';\nimport { type Game, GameState, Choice } from '../types';\n\ninterface GameResultsViewProps {\n  gameData: Game;\n  userPublicKey: string;\n  onClaimWinnings: () => void;\n  onRejoinGame: () => void;\n  onStartNewRound: () => void;\n  onBackToHome: () => void;\n  loading: boolean;\n}\n\nconst GameResultsView: React.FC<GameResultsViewProps> = ({\n  gameData,\n  userPublicKey,\n  onClaimWinnings,\n  onRejoinGame,\n  onStartNewRound,\n  onBackToHome,\n  loading\n}) => {\n  // Format SOL amounts for display\n  const formatSol = (lamports: number) => {\n    return (lamports / 1000000000).toFixed(2);\n  };\n\n  // Get player info\n  const currentPlayer = gameData.players.find(\n    player => player.pubkey === userPublicKey\n  );\n\n  // Determine winners (players with highest score)\n  const highestScore = Math.max(...gameData.players.map(p => p.score));\n  const winners = gameData.players.filter(p => p.score === highestScore);\n  const isWinner = currentPlayer?.score === highestScore;\n\n  // Check if this is the last round or if there are more rounds\n  const isLastRound = gameData.currentRound >= gameData.totalRounds;\n\n  // Check if player can claim winnings\n  const canClaim = isWinner && isLastRound;\n\n  // Check if player can rejoin (is a loser and losers can rejoin)\n  const canRejoin = !isWinner && gameData.losersCanRejoin && isLastRound;\n\n  // Check if game can continue to next round\n  const canContinue = !isLastRound && gameData.state === GameState.Finished;\n\n  // Get choice emoji\n  const getChoiceEmoji = (choice: number) => {\n    switch (choice) {\n      case Choice.Rock:\n        return '';\n      case Choice.Paper:\n        return '';\n      case Choice.Scissors:\n        return '';\n      default:\n        return '';\n    }\n  };\n\n  return (\n    <div className=\"max-w-3xl mx-auto\">\n      <div className=\"card\">\n        <div className=\"text-center mb-8\">\n          <h2 className=\"text-2xl font-bold mb-2\">Game Results</h2>\n\n          <div className=\"winner-banner\">\n            <div className=\"text-6xl mb-2\">\n              {isWinner ? '' : ''}\n            </div>\n            <h3 className=\"winner-text text-3xl mb-2\">\n              {isWinner\n                ? winners.length > 1\n                  ? 'You Tied for First Place!'\n                  : 'You Won!'\n                : 'You Lost!'}\n            </h3>\n            <p className=\"text-gray-300\">\n              {isLastRound\n                ? 'Final Results'\n                : `Round ${gameData.currentRound} of ${gameData.totalRounds}`}\n            </p>\n\n            {isLastRound && (\n              <p className=\"mt-2 text-xl\">\n                Prize Pool: {formatSol(gameData.gamePot)} SOL\n              </p>\n            )}\n          </div>\n        </div>\n\n        <div className=\"mb-8\">\n          <h3 className=\"text-lg font-semibold mb-3\">Player Results</h3>\n\n          {/* Header */}\n          <div className=\"grid grid-cols-8 gap-2 bg-gray-800 p-3 rounded-t-lg font-medium\">\n            <div className=\"col-span-3\">Player</div>\n            <div className=\"col-span-2 text-center\">Choice</div>\n            <div className=\"col-span-1 text-center\">Wins</div>\n            <div className=\"col-span-2 text-center\">Score</div>\n          </div>\n\n          {/* Players */}\n          {gameData.players\n            .slice()\n            .sort((a, b) => b.score - a.score)\n            .map((player, index) => (\n              <div\n                key={index}\n                className={`grid grid-cols-8 gap-2 p-3 ${\n                  index % 2 === 0 ? 'bg-gray-700' : 'bg-gray-700 bg-opacity-50'\n                } ${player.score === highestScore ? 'border-l-4 border-yellow-400' : ''}`}\n              >\n                <div className=\"col-span-3 flex items-center\">\n                  <span className=\"text-xl mr-2\">\n                    {player.pubkey === userPublicKey ? '' : ''}\n                  </span>\n                  <span>\n                    {`Player ${index + 1}`}\n                    {player.pubkey === userPublicKey && ' (You)'}\n                  </span>\n                </div>\n                <div className=\"col-span-2 text-center text-2xl\">\n                  {getChoiceEmoji(player.choice)}\n                </div>\n                <div className=\"col-span-1 text-center\">\n                  {player.score}\n                </div>\n                <div\n                  className={`col-span-2 text-center font-bold ${\n                    player.score === highestScore ? 'text-yellow-400' : ''\n                  }`}\n                >\n                  {player.score === highestScore\n                    ? winners.length > 1 ? 'Tied for 1st' : 'Winner'\n                    : ''}\n                </div>\n              </div>\n            ))}\n        </div>\n\n        <div className=\"flex flex-col space-y-3\">\n          {canClaim && (\n            <button\n              onClick={onClaimWinnings}\n              className={`px-6 py-3 rounded-lg font-bold ${\n                !loading\n                  ? 'bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700'\n                  : 'bg-gray-600 cursor-not-allowed opacity-50'\n              }`}\n              disabled={loading}\n            >\n              {loading ? 'Processing...' : 'Claim Winnings'}\n            </button>\n          )}\n\n          {canRejoin && (\n            <button\n              onClick={onRejoinGame}\n              className={`px-6 py-3 rounded-lg font-bold ${\n                !loading\n                  ? 'bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700'\n                  : 'bg-gray-600 cursor-not-allowed opacity-50'\n              }`}\n              disabled={loading}\n            >\n              {loading ? 'Processing...' : 'Rejoin Game (Pay Entry Fee)'}\n            </button>\n          )}\n\n          {canContinue && (\n            <button\n              onClick={onStartNewRound}\n              className={`px-6 py-3 rounded-lg font-bold ${\n                !loading\n                  ? 'bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700'\n                  : 'bg-gray-600 cursor-not-allowed opacity-50'\n              }`}\n              disabled={loading}\n            >\n              {loading ? 'Processing...' : 'Continue to Next Round'}\n            </button>\n          )}\n\n          <button\n            onClick={onBackToHome}\n            className=\"px-6 py-3 bg-gray-700 rounded-lg hover:bg-gray-600 font-medium\"\n            disabled={loading}\n          >\n            Back to Home\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default GameResultsView;\n","import { RPSGameClient } from '../rps-client';\nimport { AutoPlayStats, CurrencyMode, GameHistoryItem, GameOutcome, BettingStrategy } from '../types';\n\nexport class RPSAutoPlayer {\n  private client: RPSGameClient;\n  private isRunning: boolean = false;\n  private stats: AutoPlayStats = {\n    currentStreak: 0,\n    wins: 0,\n    losses: 0,\n    ties: 0,\n    totalWagered: 0,\n    netProfit: 0,\n    gameHistory: [],\n  };\n  private currentWager: number = 0;\n\n  constructor(client: RPSGameClient) {\n    this.client = client;\n  }\n\n  // Start automated gameplay\n  public async start(\n    wagerAmount: number,\n    currency: CurrencyMode,\n    strategy: BettingStrategy,\n    gameSpeed: number = 2000,\n    onRoundComplete: (\n      stats: AutoPlayStats,\n      lastGame: GameHistoryItem,\n      currentWager: number\n    ) => number, // Returns next wager amount\n    onError: (error: Error) => void\n  ) {\n    if (this.isRunning) return;\n\n    this.isRunning = true;\n    this.currentWager = wagerAmount;\n    // Avoid resetting stats to allow for continuing sessions\n\n    // Continue playing rounds until stopped\n    while (this.isRunning) {\n      try {\n        // 1. Create a new game\n        const { gameId } = await this.client.createGame(\n          3, // minPlayers\n          3, // maxPlayers - using 3 for faster games\n          1, // totalRounds\n          this.currentWager,\n          30, // timeoutSeconds\n          false // losersCanRejoin\n        );\n\n        // 2. For demo purposes, we'll assume the game is filled with bot players\n        // In a real implementation, this would be handled by the server\n\n        // 3. Generate a random choice (1=Rock, 2=Paper, 3=Scissors)\n        const playerChoice = Math.floor(Math.random() * 3) + 1;\n\n        // 4. Commit the choice\n        const salt = this.generateRandomSalt();\n        await this.client.commitChoice(gameId, playerChoice, salt);\n\n        // 5. Simulate other players committing choices (in real implementation this would be done by other players)\n        // In this demo, we'll just pretend this happens instantly\n\n        // 6. Reveal the choice and get results\n        await this.client.revealChoice(gameId, playerChoice, salt);\n\n        // 7. In a real implementation, we would wait for game results from the blockchain\n        // For demo purposes, we'll simulate a random result\n        const outcomes: GameOutcome[] = ['win', 'loss', 'tie'];\n        const result = outcomes[Math.floor(Math.random() * outcomes.length)];\n\n        // 8. Simulate opponent choices\n        const opponentChoices = [\n          Math.floor(Math.random() * 3) + 1,\n          Math.floor(Math.random() * 3) + 1\n        ];\n\n        // 9. Update stats\n        this.stats.totalWagered += this.currentWager;\n\n        const gameOutcome: GameHistoryItem = {\n          playerChoice,\n          opponentChoices,\n          result,\n          timestamp: Date.now(),\n          wagerAmount: this.currentWager\n        };\n\n        if (result === 'win') {\n          this.stats.wins++;\n          this.stats.currentStreak = Math.max(0, this.stats.currentStreak) + 1;\n          this.stats.netProfit += this.currentWager * 1.9; // Simplified payout (90% of pool after fees)\n        } else if (result === 'loss') {\n          this.stats.losses++;\n          this.stats.currentStreak = this.stats.currentStreak > 0 ? -1 : this.stats.currentStreak - 1;\n          this.stats.netProfit -= this.currentWager;\n        } else {\n          this.stats.ties++;\n          // No change to streak for ties\n        }\n\n        this.stats.gameHistory.push(gameOutcome);\n\n        // 10. Notify callback and get next wager amount\n        this.currentWager = onRoundComplete(this.stats, gameOutcome, this.currentWager);\n\n        // 11. Small delay between rounds based on game speed setting\n        await new Promise(resolve => setTimeout(resolve, gameSpeed));\n\n      } catch (error) {\n        console.error(\"Auto-play error:\", error);\n        onError(error as Error);\n        // Pause briefly on error\n        await new Promise(resolve => setTimeout(resolve, 5000));\n      }\n    }\n  }\n\n  // Stop automated gameplay\n  public stop() {\n    this.isRunning = false;\n  }\n\n  // Get current stats\n  public getStats(): AutoPlayStats {\n    return { ...this.stats };\n  }\n\n  // Check if auto-play is running\n  public isAutoPlaying(): boolean {\n    return this.isRunning;\n  }\n\n  // Reset stats\n  public resetStats() {\n    this.stats = {\n      currentStreak: 0,\n      wins: 0,\n      losses: 0,\n      ties: 0,\n      totalWagered: 0,\n      netProfit: 0,\n      gameHistory: [],\n    };\n  }\n\n  // Helper to generate random salt\n  private generateRandomSalt(): string {\n    return Array.from(crypto.getRandomValues(new Uint8Array(32)))\n      .map(b => b.toString(16).padStart(2, '0'))\n      .join('');\n  }\n}\n","import React, { useState, useEffect } from 'react';\nimport { AutoPlayStats, CurrencyMode, GameHistoryItem, BettingStrategy } from '../types';\nimport audioService from '../services/audio-service';\n\ninterface AutoPlayPanelProps {\n  isActive: boolean;\n  onToggle: () => void;\n  wagerAmount: number;\n  setWagerAmount: (amount: number) => void;\n  stats: AutoPlayStats;\n  selectedCurrency: CurrencyMode;\n  onCurrencyChange: (currency: CurrencyMode) => void;\n  gameHistory: GameHistoryItem[];\n  strategy: BettingStrategy;\n  gameSpeed: number;\n  stopOnProfit: number;\n  stopOnLoss: number;\n  useStopLimits: boolean;\n}\n\nconst AutoPlayPanel: React.FC<AutoPlayPanelProps> = ({\n  isActive,\n  onToggle,\n  wagerAmount,\n  setWagerAmount,\n  stats,\n  selectedCurrency,\n  onCurrencyChange,\n  gameHistory,\n  strategy,\n  gameSpeed,\n  stopOnProfit,\n  stopOnLoss,\n  useStopLimits\n}) => {\n  const [animateWins, setAnimateWins] = useState(false);\n  const [animateLosses, setAnimateLosses] = useState(false);\n  const [animateProfit, setAnimateProfit] = useState(false);\n\n  // Monitor stats changes to trigger animations\n  useEffect(() => {\n    // Play sounds on significant events\n    if (gameHistory.length > 0) {\n      const latestGame = gameHistory[gameHistory.length - 1];\n\n      if (latestGame.result === 'win') {\n        setAnimateWins(true);\n        setTimeout(() => setAnimateWins(false), 1000);\n\n        if (stats.netProfit > 0) {\n          setAnimateProfit(true);\n          setTimeout(() => setAnimateProfit(false), 1000);\n        }\n      } else if (latestGame.result === 'loss') {\n        setAnimateLosses(true);\n        setTimeout(() => setAnimateLosses(false), 1000);\n      }\n    }\n  }, [gameHistory, stats.netProfit]);\n\n  // Button sound effects\n  const handleButtonHover = () => {\n    audioService.play('hover');\n  };\n\n  const handleButtonClick = () => {\n    audioService.play('click');\n    onToggle();\n  };\n\n  // Ensure numeric values are valid and not NaN\n  const safeNumber = (value: number | undefined): number => {\n    return typeof value === 'number' && !isNaN(value) ? value : 0;\n  };\n\n  // Format numeric values for display with protection against NaN\n  const formatNumber = (value: number): string => {\n    const safeValue = safeNumber(value);\n    return safeValue.toFixed(2);\n  };\n\n  return (\n    <div className=\"bg-gray-800 rounded-lg p-4 md:p-6 mb-8 shadow-lg border border-gray-700\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h3 className=\"text-xl font-bold\">Auto Play</h3>\n        <div className=\"flex items-center\">\n          <span className=\"mr-3 hidden sm:inline\">{isActive ? 'Running' : 'Stopped'}</span>\n          <button\n            onClick={handleButtonClick}\n            onMouseEnter={handleButtonHover}\n            className={`px-4 py-2 rounded font-bold transform transition-all duration-150 hover:scale-105 ${\n              isActive\n                ? 'bg-red-600 hover:bg-red-700 shadow-lg shadow-red-700/20'\n                : 'bg-green-600 hover:bg-green-700 shadow-lg shadow-green-700/20'\n            }`}\n          >\n            {isActive ? 'STOP' : 'START'}\n          </button>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-6\">\n        <div className=\"bg-gray-900 p-4 rounded-lg shadow-inner\">\n          <label className=\"block text-sm font-medium mb-2\">Wager Amount</label>\n          <div className=\"flex\">\n            <input\n              type=\"number\"\n              value={wagerAmount}\n              onChange={(e) => {\n                setWagerAmount(parseFloat(e.target.value) || 0.01);\n                audioService.play('hover');\n              }}\n              min=\"0.01\"\n              step=\"0.01\"\n              disabled={isActive}\n              className=\"w-full px-4 py-2 bg-gray-700 rounded-l border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-purple-500\"\n            />\n            <select\n              value={selectedCurrency}\n              onChange={(e) => {\n                // Convert string enum value to CurrencyMode enum\n                const mode = e.target.value === \"SOL\" ? CurrencyMode.SOL : CurrencyMode.RPSTOKEN;\n                onCurrencyChange(mode);\n                audioService.play('click');\n              }}\n              disabled={isActive}\n              className=\"bg-gray-700 border-l-0 border border-gray-600 rounded-r px-3 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n            >\n              <option value=\"SOL\">SOL</option>\n              <option value=\"RPS_TOKEN\">RPSTOKEN</option>\n            </select>\n          </div>\n        </div>\n\n        <div className=\"bg-gray-900 p-4 rounded-lg shadow-inner\">\n          <label className=\"block text-sm font-medium mb-2\">Betting Strategy</label>\n          <select\n            value={strategy}\n            onChange={(e) => {\n              // Add strategy change handler if needed\n              audioService.play('click');\n            }}\n            disabled={isActive}\n            className=\"w-full px-4 py-2 bg-gray-700 rounded border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-purple-500\"\n          >\n            <option value={BettingStrategy.FIXED}>Fixed Bet</option>\n            <option value={BettingStrategy.MARTINGALE}>Martingale (Double on Loss)</option>\n            <option value={BettingStrategy.DALEMBERT}>D'Alembert (Increase 1 Unit on Loss)</option>\n            <option value={BettingStrategy.FIBONACCI}>Fibonacci Sequence</option>\n          </select>\n        </div>\n\n        <div className=\"bg-gray-900 p-4 rounded-lg shadow-inner\">\n          <label className=\"block text-sm font-medium mb-2\">Game Speed (ms)</label>\n          <input\n            type=\"range\"\n            min=\"500\"\n            max=\"5000\"\n            step=\"500\"\n            value={gameSpeed}\n            onChange={(e) => {\n              audioService.play('hover');\n            }}\n            disabled={isActive}\n            className=\"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer\"\n          />\n          <div className=\"flex justify-between text-xs text-gray-400 mt-1\">\n            <span>Fast</span>\n            <span>{gameSpeed}ms</span>\n            <span>Slow</span>\n          </div>\n        </div>\n\n        <div className=\"bg-gray-900 p-4 rounded-lg shadow-inner\">\n          <div className=\"flex items-center mb-2\">\n            <input\n              type=\"checkbox\"\n              id=\"useStopLimits\"\n              checked={useStopLimits}\n              onChange={(e) => {\n                audioService.play('click');\n              }}\n              disabled={isActive}\n              className=\"mr-2 h-4 w-4 rounded text-purple-500 focus:ring-purple-500\"\n            />\n            <label htmlFor=\"useStopLimits\" className=\"text-sm font-medium\">Auto-Stop Limits</label>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-2\">\n            <div>\n              <label className=\"block text-xs text-gray-400\">Stop on Profit</label>\n              <input\n                type=\"number\"\n                value={stopOnProfit}\n                onChange={(e) => {\n                  audioService.play('hover');\n                }}\n                min=\"0\"\n                step=\"0.1\"\n                disabled={isActive || !useStopLimits}\n                className=\"w-full px-2 py-1 bg-gray-700 rounded border border-gray-600 text-white text-sm focus:outline-none focus:ring-1 focus:ring-purple-500\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-xs text-gray-400\">Stop on Loss</label>\n              <input\n                type=\"number\"\n                value={stopOnLoss}\n                onChange={(e) => {\n                  audioService.play('hover');\n                }}\n                min=\"0\"\n                step=\"0.1\"\n                disabled={isActive || !useStopLimits}\n                className=\"w-full px-2 py-1 bg-gray-700 rounded border border-gray-600 text-white text-sm focus:outline-none focus:ring-1 focus:ring-purple-500\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Panel */}\n      <div className=\"bg-gray-900 rounded-lg p-4 shadow-inner\">\n        <h4 className=\"text-lg font-medium mb-4\">Session Stats</h4>\n        <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4 text-center\">\n          <div className=\"bg-gray-800 p-3 rounded-lg shadow\">\n            <div className=\"text-sm text-gray-400\">Current Streak</div>\n            <div className={`text-xl font-bold ${\n              safeNumber(stats.currentStreak) > 0\n                ? 'text-green-400 drop-shadow-glow-green'\n                : safeNumber(stats.currentStreak) < 0\n                  ? 'text-red-400 drop-shadow-glow-red'\n                  : 'text-white'\n            }`}>\n              {safeNumber(stats.currentStreak) > 0 ? `+${safeNumber(stats.currentStreak)}` : safeNumber(stats.currentStreak)}\n            </div>\n          </div>\n\n          <div className={`bg-gray-800 p-3 rounded-lg shadow transition-all duration-300 ${animateWins ? 'scale-110 bg-green-900 bg-opacity-50' : ''}`}>\n            <div className=\"text-sm text-gray-400\">Wins</div>\n            <div className=\"text-xl font-bold text-green-400\">{safeNumber(stats.wins)}</div>\n          </div>\n\n          <div className={`bg-gray-800 p-3 rounded-lg shadow transition-all duration-300 ${animateLosses ? 'scale-110 bg-red-900 bg-opacity-50' : ''}`}>\n            <div className=\"text-sm text-gray-400\">Losses</div>\n            <div className=\"text-xl font-bold text-red-400\">{safeNumber(stats.losses)}</div>\n          </div>\n\n          <div className=\"bg-gray-800 p-3 rounded-lg shadow\">\n            <div className=\"text-sm text-gray-400\">Total Wagered</div>\n            <div className=\"text-xl font-bold\">{formatNumber(stats.totalWagered)} {selectedCurrency === CurrencyMode.SOL ? 'SOL' : 'RPSTOKEN'}</div>\n          </div>\n\n          <div className={`bg-gray-800 p-3 rounded-lg shadow transition-all duration-300 ${animateProfit ? 'scale-110 bg-green-900 bg-opacity-50' : ''}`}>\n            <div className=\"text-sm text-gray-400\">Net Profit</div>\n            <div className={`text-xl font-bold ${safeNumber(stats.netProfit) >= 0 ? 'text-green-400' : 'text-red-400'}`}>\n              {safeNumber(stats.netProfit) > 0 ? '+' : ''}{formatNumber(stats.netProfit)} {selectedCurrency === CurrencyMode.SOL ? 'SOL' : 'RPSTOKEN'}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Game History Visualization */}\n      <div className=\"mt-6\">\n        <h4 className=\"text-lg font-medium mb-2\">Game History</h4>\n        <div className=\"bg-gray-900 p-3 rounded-lg shadow-inner overflow-x-auto\">\n          <div className=\"flex flex-wrap gap-1 min-h-16\">\n            {gameHistory.map((game, index) => (\n              <div\n                key={index}\n                className={`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold transition-all duration-300 hover:scale-110 ${\n                  game.result === 'win' ? 'bg-green-600 hover:bg-green-500' :\n                  game.result === 'loss' ? 'bg-red-600 hover:bg-red-500' : 'bg-gray-600 hover:bg-gray-500'\n                }`}\n                title={`Game ${index + 1}: ${game.playerChoice} vs ${game.opponentChoices.join(', ')} - ${game.result.toUpperCase()}`}\n                onMouseEnter={() => audioService.play('hover')}\n              >\n                {game.result === 'win' ? 'W' : game.result === 'loss' ? 'L' : 'T'}\n              </div>\n            ))}\n            {gameHistory.length === 0 && (\n              <div className=\"text-gray-500 text-sm py-3\">No games played yet</div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AutoPlayPanel;\n","import React, { useEffect, useState, useRef } from 'react';\nimport { GameOutcome } from '../types';\nimport audioService from '../services/audio-service';\n\ninterface GameAnimationProps {\n  isPlaying: boolean;\n  playerChoice?: number;\n  opponentChoice?: number;\n  result?: GameOutcome;\n}\n\n// Mapping for choice icons\nconst choiceIcons: Record<number, string> = {\n  0: '',\n  1: '',\n  2: '',\n  3: ''\n};\n\n// Mapping for larger result icons\nconst resultIcons: Record<string, string> = {\n  win: '',\n  loss: '',\n  tie: ''\n};\n\nconst GameAnimation: React.FC<GameAnimationProps> = ({\n  isPlaying,\n  playerChoice = 0,\n  opponentChoice = 0,\n  result\n}) => {\n  const [animationState, setAnimationState] = useState<'idle' | 'counting' | 'result'>('idle');\n  const [countdown, setCountdown] = useState<string>('');\n  const [showResult, setShowResult] = useState<boolean>(false);\n  const [shakePlayer, setShakePlayer] = useState<boolean>(false);\n  const [shakeOpponent, setShakeOpponent] = useState<boolean>(false);\n  const [showParticles, setShowParticles] = useState<boolean>(false);\n  const [showConfetti, setShowConfetti] = useState<boolean>(false);\n\n  // Refs for particle effects\n  const particlesRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (isPlaying) {\n      // Start counting animation\n      setAnimationState('counting');\n      setShowResult(false);\n      setShowParticles(false);\n      setShowConfetti(false);\n\n      // Play countdown sound\n      audioService.play('countdown');\n\n      // Countdown animation: \"Rock, Paper, Scissors, Shoot!\"\n      const countdownItems = [\"Rock\", \"Paper\", \"Scissors\", \"Shoot!\"];\n      let index = 0;\n\n      const intervalId = setInterval(() => {\n        if (index < countdownItems.length) {\n          setCountdown(countdownItems[index]);\n\n          // Add shake animation on each count\n          setShakePlayer(true);\n          setShakeOpponent(true);\n\n          // Reset shake after animation completes\n          setTimeout(() => {\n            setShakePlayer(false);\n            setShakeOpponent(false);\n          }, 200);\n\n          index++;\n        } else {\n          clearInterval(intervalId);\n          setAnimationState('result');\n\n          // Delay showing the result for dramatic effect\n          setTimeout(() => {\n            setShowResult(true);\n\n            // Play appropriate sound for the outcome\n            if (result === 'win') {\n              audioService.play('win');\n              setShowConfetti(true);\n\n              // Hide confetti after animation completes\n              setTimeout(() => setShowConfetti(false), 7000);\n            } else if (result === 'loss') {\n              audioService.play('lose');\n            } else {\n              audioService.play('tie');\n            }\n\n            // Add some particle effects based on the result\n            setShowParticles(true);\n\n            // Hide particles after animation completes\n            setTimeout(() => setShowParticles(false), 2000);\n          }, 500);\n        }\n      }, 800); // Slightly slower for more dramatic effect\n\n      return () => {\n        clearInterval(intervalId);\n      };\n    } else {\n      setAnimationState('idle');\n      setShowResult(false);\n      setShowParticles(false);\n      setShowConfetti(false);\n    }\n  }, [isPlaying, result]);\n\n  // Generate particle elements\n  const generateParticles = () => {\n    const particles = [];\n    const count = 20;\n\n    for (let i = 0; i < count; i++) {\n      const delay = Math.random() * 0.5;\n      const size = Math.random() * 12 + 5;\n      const duration = Math.random() * 1 + 1;\n      const x = Math.random() * 100;\n      const y = Math.random() * 100;\n\n      // Calculate translation values for CSS variables\n      const tx = `${Math.random() > 0.5 ? '-' : ''}${Math.random() * 100 + 50}px`;\n      const ty = `${Math.random() > 0.5 ? '-' : ''}${Math.random() * 100 + 50}px`;\n      const rotate = `${Math.random() * 360}deg`;\n      const scale = String(Math.random() * 0.5 + 0.5);\n\n      const color = result === 'win'\n        ? `hsl(${Math.random() * 60 + 30}, 100%, 50%)` // Gold/yellow for win\n        : result === 'loss'\n          ? `hsl(${Math.random() * 20 + 350}, 100%, 50%)` // Red for loss\n          : `hsl(${Math.random() * 60 + 200}, 100%, 50%)`; // Blue for tie\n\n      // Define particle style with proper typing\n      const particleStyle: React.CSSProperties = {\n        width: `${size}px`,\n        height: `${size}px`,\n        backgroundColor: color,\n        left: `${x}%`,\n        top: `${y}%`,\n        '--tx': tx,\n        '--ty': ty,\n        '--rotate': rotate,\n        '--scale': scale,\n        animation: `particle-animation ${duration}s ease-out ${delay}s forwards`\n      } as React.CSSProperties;\n\n      particles.push(\n        <div\n          key={i}\n          className=\"particle\"\n          style={particleStyle}\n        />\n      );\n    }\n\n    return particles;\n  };\n\n  return (\n    <div className=\"relative w-full max-w-md mx-auto h-64 bg-gray-800 bg-opacity-40 rounded-xl p-4 overflow-hidden\">\n      {/* Confetti overlay for wins */}\n      {showConfetti && <div className=\"confetti-overlay\" />}\n\n      {/* Background decoration */}\n      <div className=\"absolute inset-0 overflow-hidden\">\n        <div className=\"absolute -left-8 -bottom-8 w-32 h-32 rounded-full bg-purple-900 opacity-20 animate-float\" />\n        <div className=\"absolute -right-8 -top-8 w-24 h-24 rounded-full bg-blue-900 opacity-20 animate-float-reverse\" />\n      </div>\n\n      {/* Container for the animation */}\n      <div className=\"relative z-10 h-full flex flex-col items-center justify-center\">\n        {animationState === 'idle' && (\n          <div className=\"text-center text-gray-400\">\n            <div className=\"text-4xl mb-2\"></div>\n            <p>Waiting for game to start...</p>\n          </div>\n        )}\n\n        {animationState === 'counting' && (\n          <div className=\"text-center\">\n            <div className=\"text-4xl font-bold mb-4\">{countdown}</div>\n            <div className=\"flex justify-center items-center gap-12\">\n              <div className={`text-5xl ${shakePlayer ? 'animate-shake' : ''}`}>\n                \n              </div>\n              <div className=\"text-xl\">VS</div>\n              <div className={`text-5xl ${shakeOpponent ? 'animate-shake' : ''}`}>\n                \n              </div>\n            </div>\n          </div>\n        )}\n\n        {animationState === 'result' && (\n          <div className=\"text-center\">\n            {!showResult ? (\n              <div className=\"text-4xl animate-loading\"></div>\n            ) : (\n              <>\n                <div className=\"flex justify-center items-center gap-12 mb-6\">\n                  <div className={`text-5xl transition-all duration-500 transform ${result === 'win' ? 'scale-125 drop-shadow-glow-green' : ''}`}>\n                    {choiceIcons[playerChoice]}\n                  </div>\n                  <div className=\"text-xl\">VS</div>\n                  <div className={`text-5xl transition-all duration-500 transform ${result === 'loss' ? 'scale-125 drop-shadow-glow-red' : ''}`}>\n                    {choiceIcons[opponentChoice]}\n                  </div>\n                </div>\n\n                <div className={`text-center p-3 rounded-lg transition-all duration-500 ${\n                  result === 'win' ? 'bg-green-900 bg-opacity-40' :\n                  result === 'loss' ? 'bg-red-900 bg-opacity-40' :\n                  'bg-blue-900 bg-opacity-40'\n                }`}>\n                  <div className=\"text-4xl mb-2\">\n                    {resultIcons[result || 'tie']}\n                  </div>\n                  <div className=\"font-bold text-xl\">\n                    {result === 'win' ? 'You Win!' :\n                     result === 'loss' ? 'You Lose!' :\n                     'It\\'s a Tie!'}\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Particle container */}\n      {showParticles && (\n        <div ref={particlesRef} className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n          {generateParticles()}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GameAnimation;\n","import React, { useEffect, useState } from 'react';\nimport { RPSGameClient } from '../rps-client';\nimport { RPSAutoPlayer } from '../autoplay/RPSAutoPlayer';\nimport AutoPlayPanel from '../autoplay/AutoPlayPanel';\nimport GameAnimation from '../autoplay/GameAnimation';\nimport { AutoPlayStats, CurrencyMode, GameHistoryItem, GameOutcome, BettingStrategy } from '../types';\n\ninterface AutoPlayViewProps {\n  gameClient: RPSGameClient;\n  onBackToHome: () => void;\n}\n\nconst AutoPlayView: React.FC<AutoPlayViewProps> = ({ gameClient, onBackToHome }) => {\n  const [autoPlayer, setAutoPlayer] = useState<RPSAutoPlayer | null>(null);\n  const [isAutoPlaying, setIsAutoPlaying] = useState(false);\n  const [wagerAmount, setWagerAmount] = useState(0.1);\n  const [selectedCurrency, setSelectedCurrency] = useState(CurrencyMode.SOL);\n  const [strategy, setStrategy] = useState<BettingStrategy>(BettingStrategy.FIXED);\n  const [gameSpeed, setGameSpeed] = useState<number>(2000);\n  const [stopOnProfit, setStopOnProfit] = useState<number>(5);\n  const [stopOnLoss, setStopOnLoss] = useState<number>(5);\n  const [useStopLimits, setUseStopLimits] = useState<boolean>(false);\n  const [stats, setStats] = useState<AutoPlayStats>({\n    currentStreak: 0,\n    wins: 0,\n    losses: 0,\n    ties: 0,\n    totalWagered: 0,\n    netProfit: 0,\n    gameHistory: [],\n  });\n  const [currentGame, setCurrentGame] = useState<{\n    isPlaying: boolean;\n    playerChoice?: number;\n    opponentChoice?: number;\n    result?: GameOutcome;\n  }>({\n    isPlaying: false\n  });\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  // Initialize the auto player when the game client changes\n  useEffect(() => {\n    if (gameClient) {\n      setAutoPlayer(new RPSAutoPlayer(gameClient));\n    }\n  }, [gameClient]);\n\n  // Check for stop conditions\n  useEffect(() => {\n    if (isAutoPlaying && useStopLimits && autoPlayer) {\n      if ((stopOnProfit > 0 && stats.netProfit >= stopOnProfit) ||\n          (stopOnLoss > 0 && stats.netProfit <= -stopOnLoss)) {\n        handleToggleAutoPlay();\n      }\n    }\n  }, [stats.netProfit, isAutoPlaying, useStopLimits, stopOnProfit, stopOnLoss]);\n\n  // Apply betting strategy to determine next wager\n  const getNextWagerAmount = (currentWager: number, lastResult: GameOutcome | undefined, streak: number): number => {\n    if (!lastResult || strategy === BettingStrategy.FIXED) {\n      return currentWager;\n    }\n\n    switch (strategy) {\n      case BettingStrategy.MARTINGALE:\n        // Double bet after each loss, reset after win\n        return lastResult === 'loss' ? currentWager * 2 : wagerAmount;\n\n      case BettingStrategy.DALEMBERT:\n        // Increase by 1 unit after loss, decrease by 1 unit after win\n        const unit = wagerAmount * 0.1; // 10% of base wager is 1 unit\n        if (lastResult === 'loss') {\n          return currentWager + unit;\n        } else if (lastResult === 'win') {\n          return Math.max(wagerAmount, currentWager - unit);\n        }\n        return currentWager;\n\n      case BettingStrategy.FIBONACCI:\n        // Use Fibonacci sequence after losses (1, 1, 2, 3, 5, 8, 13, ...)\n        if (lastResult === 'win' || lastResult === 'tie') {\n          return wagerAmount; // Reset to base wager\n        }\n\n        // Calculate Fibonacci number based on losing streak\n        const negStreak = streak < 0 ? Math.abs(streak) : 0;\n        if (negStreak <= 1) return wagerAmount;\n\n        // Calculate the Fibonacci number for this position\n        let a = 1, b = 1;\n        for (let i = 2; i < negStreak; i++) {\n          const temp = a + b;\n          a = b;\n          b = temp;\n        }\n\n        return wagerAmount * b;\n\n      default:\n        return currentWager;\n    }\n  };\n\n  // Toggle auto-play\n  const handleToggleAutoPlay = async () => {\n    if (!autoPlayer) return;\n\n    if (isAutoPlaying) {\n      // Stop auto-play\n      autoPlayer.stop();\n      setIsAutoPlaying(false);\n      setCurrentGame({ isPlaying: false });\n    } else {\n      // Start auto-play\n      setIsAutoPlaying(true);\n      setErrorMessage(\"\");\n\n      try {\n        await autoPlayer.start(\n          wagerAmount,\n          selectedCurrency,\n          strategy,\n          gameSpeed,\n          (newStats, lastGame, currentWager) => {\n            // Calculate next wager based on strategy\n            const nextWager = getNextWagerAmount(\n              currentWager,\n              lastGame.result,\n              newStats.currentStreak\n            );\n\n            setStats(newStats);\n            // Update animation\n            setCurrentGame({\n              isPlaying: true,\n              playerChoice: lastGame.playerChoice,\n              opponentChoice: lastGame.opponentChoices[0], // Just show the first opponent for simplicity\n              result: lastGame.result\n            });\n\n            // Reset animation after a delay\n            setTimeout(() => {\n              setCurrentGame(prev => ({ ...prev, isPlaying: false }));\n              setTimeout(() => {\n                setCurrentGame({ isPlaying: true });\n              }, 300);\n            }, gameSpeed * 0.8); // Animation timing based on game speed\n\n            return nextWager;\n          },\n          (error) => {\n            setErrorMessage(`Error: ${error.message}`);\n          }\n        );\n      } catch (error) {\n        console.error(\"Failed to start auto-play:\", error);\n        setIsAutoPlaying(false);\n        setErrorMessage(`Failed to start auto-play: ${(error as Error).message}`);\n      }\n    }\n  };\n\n  const handleCurrencyChange = (currency: CurrencyMode) => {\n    setSelectedCurrency(currency);\n  };\n\n  const handleReset = () => {\n    if (autoPlayer) {\n      autoPlayer.resetStats();\n      setStats({\n        currentStreak: 0,\n        wins: 0,\n        losses: 0,\n        ties: 0,\n        totalWagered: 0,\n        netProfit: 0,\n        gameHistory: [],\n      });\n    }\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <div className=\"card bg-gray-800 p-6 rounded-lg shadow-lg mb-6\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-2xl font-bold\">Automated RPS</h2>\n          <button\n            onClick={onBackToHome}\n            className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded\"\n          >\n            Back to Home\n          </button>\n        </div>\n\n        {errorMessage && (\n          <div className=\"bg-red-600 bg-opacity-70 rounded-lg p-4 mb-6 text-center\">\n            {errorMessage}\n          </div>\n        )}\n\n        <GameAnimation\n          isPlaying={currentGame.isPlaying}\n          playerChoice={currentGame.playerChoice}\n          opponentChoice={currentGame.opponentChoice}\n          result={currentGame.result}\n        />\n\n        <AutoPlayPanel\n          isActive={isAutoPlaying}\n          onToggle={handleToggleAutoPlay}\n          wagerAmount={wagerAmount}\n          setWagerAmount={setWagerAmount}\n          stats={stats}\n          selectedCurrency={selectedCurrency}\n          onCurrencyChange={handleCurrencyChange}\n          gameHistory={stats.gameHistory}\n          strategy={strategy}\n          gameSpeed={gameSpeed}\n          stopOnProfit={stopOnProfit}\n          stopOnLoss={stopOnLoss}\n          useStopLimits={useStopLimits}\n        />\n\n        <div className=\"flex justify-between mt-6\">\n          <button\n            onClick={handleReset}\n            className=\"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded\"\n            disabled={isAutoPlaying}\n          >\n            Reset Stats\n          </button>\n\n          <div className=\"text-sm text-gray-400\">\n            Note: This is a simulation. Real blockchain transactions are not being made.\n          </div>\n        </div>\n      </div>\n\n      <div className=\"card bg-gray-800 p-6 rounded-lg shadow-lg\">\n        <h3 className=\"text-xl font-bold mb-4\">Strategy Details</h3>\n        <div className=\"text-gray-300 mb-4\">\n          <h4 className=\"font-bold\">Betting Strategies:</h4>\n          <ul className=\"list-disc list-inside space-y-1 mt-2 ml-4\">\n            <li><span className=\"font-semibold\">Fixed:</span> Always bet the same amount</li>\n            <li><span className=\"font-semibold\">Martingale:</span> Double your bet after each loss, reset after a win</li>\n            <li><span className=\"font-semibold\">D'Alembert:</span> Increase bet by one unit after a loss, decrease by one unit after a win</li>\n            <li><span className=\"font-semibold\">Fibonacci:</span> Follow the Fibonacci sequence (1,1,2,3,5,8...) during losing streaks</li>\n          </ul>\n        </div>\n\n        <div className=\"text-gray-300\">\n          <h4 className=\"font-bold\">Auto-Stop Limits:</h4>\n          <p className=\"mt-2 ml-4\">\n            Set profit or loss limits to automatically stop playing when reached. This helps\n            manage your bankroll and avoid excessive losses.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AutoPlayView;\n","import React, { useEffect, useState } from 'react';\nimport { WalletMultiButton } from '@solana/wallet-adapter-react-ui';\nimport audioService from '../services/audio-service';\n\ninterface WalletHelperProps {\n  className?: string;\n}\n\nconst WalletHelper: React.FC<WalletHelperProps> = ({ className = '' }) => {\n  const [browser, setBrowser] = useState<string>('');\n  const [os, setOS] = useState<string>('');\n  const [isPhantomInstalled, setIsPhantomInstalled] = useState<boolean>(false);\n  const [isSolflareInstalled, setIsSolflareInstalled] = useState<boolean>(false);\n  const [activeTab, setActiveTab] = useState<'phantom' | 'solflare'>('phantom');\n  const [showMonadInfo, setShowMonadInfo] = useState<boolean>(false);\n\n  // Detect browser and OS\n  useEffect(() => {\n    detectBrowserAndOS();\n    checkWalletInstallation();\n  }, []);\n\n  const detectBrowserAndOS = () => {\n    // Detect browser\n    const userAgent = navigator.userAgent;\n    let detectedBrowser = '';\n\n    if (userAgent.indexOf('Chrome') > -1) {\n      detectedBrowser = 'Chrome';\n    } else if (userAgent.indexOf('Firefox') > -1) {\n      detectedBrowser = 'Firefox';\n    } else if (userAgent.indexOf('Safari') > -1) {\n      detectedBrowser = 'Safari';\n    } else if (userAgent.indexOf('Edge') > -1 || userAgent.indexOf('Edg') > -1) {\n      detectedBrowser = 'Edge';\n    } else if (userAgent.indexOf('Opera') > -1 || userAgent.indexOf('OPR') > -1) {\n      detectedBrowser = 'Opera';\n    } else {\n      detectedBrowser = 'Unknown';\n    }\n\n    // Detect OS\n    let detectedOS = '';\n    if (userAgent.indexOf('Win') > -1) {\n      detectedOS = 'Windows';\n    } else if (userAgent.indexOf('Mac') > -1) {\n      detectedOS = 'macOS';\n    } else if (userAgent.indexOf('Linux') > -1) {\n      detectedOS = 'Linux';\n    } else if (userAgent.indexOf('Android') > -1) {\n      detectedOS = 'Android';\n    } else if (userAgent.indexOf('iPhone') > -1 || userAgent.indexOf('iPad') > -1) {\n      detectedOS = 'iOS';\n    } else {\n      detectedOS = 'Unknown';\n    }\n\n    setBrowser(detectedBrowser);\n    setOS(detectedOS);\n  };\n\n  const checkWalletInstallation = () => {\n    // Check if Phantom is installed\n    const isPhantom = window.phantom?.solana?.isPhantom;\n    setIsPhantomInstalled(!!isPhantom);\n\n    // Check if Solflare is installed\n    const isSolflare = window.solflare?.isSolflare;\n    setIsSolflareInstalled(!!isSolflare);\n  };\n\n  const getWalletDownloadLink = (walletName: 'phantom' | 'solflare') => {\n    if (walletName === 'phantom') {\n      if (os === 'iOS' || os === 'Android') {\n        return 'https://phantom.app/download';\n      }\n\n      if (browser === 'Chrome') {\n        return 'https://chrome.google.com/webstore/detail/phantom/bfnaelmomeimhlpmgjnjophhpkkoljpa';\n      } else if (browser === 'Firefox') {\n        return 'https://addons.mozilla.org/en-US/firefox/addon/phantom-app/';\n      } else if (browser === 'Edge') {\n        return 'https://microsoftedge.microsoft.com/addons/detail/phantom/dfpilgmgeoehhkocfmppkegbjpkgfgha';\n      } else {\n        return 'https://phantom.app/download';\n      }\n    } else {\n      if (os === 'iOS' || os === 'Android') {\n        return 'https://solflare.com/download';\n      }\n\n      if (browser === 'Chrome') {\n        return 'https://chrome.google.com/webstore/detail/solflare-wallet/bhhhlbepdkbapadjdnnojkbgioiodbic';\n      } else if (browser === 'Firefox') {\n        return 'https://addons.mozilla.org/en-US/firefox/addon/solflare-wallet/';\n      } else if (browser === 'Edge') {\n        return 'https://microsoftedge.microsoft.com/addons/detail/solflare-wallet/hgkjjcnchdejehjfomkjeoeebkmgeknd';\n      } else {\n        return 'https://solflare.com/download';\n      }\n    }\n  };\n\n  const getWalletInstallInstructions = (walletName: 'phantom' | 'solflare') => {\n    const walletDisplayName = walletName === 'phantom' ? 'Phantom' : 'Solflare';\n\n    if (os === 'iOS' || os === 'Android') {\n      return (\n        <ol className=\"list-decimal list-inside text-left text-gray-300 space-y-2 mb-4\">\n          <li>Download the {walletDisplayName} app from the app store</li>\n          <li>Create a new wallet or import an existing one</li>\n          <li>Open the app and use the built-in browser to return to this site</li>\n        </ol>\n      );\n    }\n\n    return (\n      <ol className=\"list-decimal list-inside text-left text-gray-300 space-y-2 mb-4\">\n        <li>Click the download button to install the {walletDisplayName} extension</li>\n        <li>Follow the installation instructions in your browser</li>\n        <li>Create a new wallet or import an existing one</li>\n        <li>Return to this page and refresh to connect</li>\n      </ol>\n    );\n  };\n\n  const handleTabChange = (tab: 'phantom' | 'solflare') => {\n    setActiveTab(tab);\n    audioService.play('click');\n  };\n\n  const renderWalletStatus = (walletName: 'phantom' | 'solflare') => {\n    const isInstalled = walletName === 'phantom' ? isPhantomInstalled : isSolflareInstalled;\n    const walletDisplayName = walletName === 'phantom' ? 'Phantom' : 'Solflare';\n\n    if (isInstalled) {\n      return (\n        <div className=\"flex items-center text-green-500 mb-2\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n            <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n          </svg>\n          <span>{walletDisplayName} is installed</span>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"flex items-center text-yellow-500 mb-2\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n          <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n        </svg>\n        <span>{walletDisplayName} is not installed</span>\n      </div>\n    );\n  };\n\n  return (\n    <div className={`wallet-helper ${className}`}>\n      <div className=\"wallet-status text-center mb-6\">\n        <h2 className=\"text-2xl font-bold text-white mb-2\">Connect a Wallet</h2>\n        <p className=\"text-gray-300 mb-4\">\n          You need a Solana wallet to play Rock Paper Scissors on the blockchain.\n        </p>\n\n        {(isPhantomInstalled || isSolflareInstalled) && (\n          <div className=\"mt-4 max-w-md mx-auto\">\n            <p className=\"text-green-400 mb-2\">Wallet detected! Click below to connect:</p>\n            <div className=\"transform hover:scale-105 transition-transform duration-300\">\n              <WalletMultiButton className=\"!bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 !rounded-xl !py-4 !px-8 !text-xl\" />\n            </div>\n          </div>\n        )}\n      </div>\n\n      {(!isPhantomInstalled && !isSolflareInstalled) && (\n        <div className=\"wallet-installation bg-gray-800 bg-opacity-50 rounded-xl p-6 max-w-2xl mx-auto\">\n          <div className=\"wallet-tabs flex mb-4\">\n            <button\n              className={`flex-1 py-2 ${activeTab === 'phantom' ? 'border-b-2 border-purple-500 text-purple-400' : 'text-gray-400'}`}\n              onClick={() => handleTabChange('phantom')}\n            >\n              <span className=\"flex items-center justify-center\">\n                <img\n                  src=\"https://phantom.app/apple-touch-icon.png\"\n                  alt=\"Phantom\"\n                  className=\"w-5 h-5 mr-2\"\n                />\n                Phantom\n              </span>\n            </button>\n            <button\n              className={`flex-1 py-2 ${activeTab === 'solflare' ? 'border-b-2 border-orange-500 text-orange-400' : 'text-gray-400'}`}\n              onClick={() => handleTabChange('solflare')}\n            >\n              <span className=\"flex items-center justify-center\">\n                <img\n                  src=\"https://solflare.com/assets/icon-solflare-orange.svg\"\n                  alt=\"Solflare\"\n                  className=\"w-5 h-5 mr-2\"\n                />\n                Solflare\n              </span>\n            </button>\n          </div>\n\n          <div className=\"wallet-content\">\n            {activeTab === 'phantom' ? (\n              <div className=\"phantom-content\">\n                {renderWalletStatus('phantom')}\n                <p className=\"text-gray-300 mb-4\">\n                  Phantom is a friendly Solana wallet built for DeFi & NFTs.\n                </p>\n                {getWalletInstallInstructions('phantom')}\n                <a\n                  href={getWalletDownloadLink('phantom')}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"inline-block bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg transition-colors\"\n                  onClick={() => audioService.play('click')}\n                >\n                  Download Phantom for {browser}\n                </a>\n              </div>\n            ) : (\n              <div className=\"solflare-content\">\n                {renderWalletStatus('solflare')}\n                <p className=\"text-gray-300 mb-4\">\n                  Solflare is a powerful wallet for Solana with full DeFi support.\n                </p>\n                {getWalletInstallInstructions('solflare')}\n                <a\n                  href={getWalletDownloadLink('solflare')}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"inline-block bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded-lg transition-colors\"\n                  onClick={() => audioService.play('click')}\n                >\n                  Download Solflare for {browser}\n                </a>\n              </div>\n            )}\n          </div>\n\n          <div className=\"wallet-footer mt-6 pt-4 border-t border-gray-700\">\n            <p className=\"text-sm text-gray-400\">\n              By connecting a wallet, you agree to the game's <a href=\"#\" className=\"text-purple-400 hover:underline\">Terms of Service</a> and acknowledge the <a href=\"#\" className=\"text-purple-400 hover:underline\">Privacy Policy</a>.\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* Add Monad Testnet information */}\n      <div className=\"mt-6 p-4 bg-purple-900 bg-opacity-20 rounded-lg border border-purple-700\">\n        <div className=\"flex items-start\">\n          <div className=\"text-purple-400 text-xl mr-3\"></div>\n          <div>\n            <h3 className=\"text-lg font-semibold text-purple-300 mb-1\">About Wallet Popups</h3>\n            <p className=\"text-gray-300 mb-2\">\n              When connecting your Phantom wallet, you may see a popup about \"Monad Testnet\". This is unrelated to our app.\n            </p>\n            <button\n              onClick={() => setShowMonadInfo(!showMonadInfo)}\n              className=\"text-purple-400 hover:text-purple-300 text-sm flex items-center\"\n            >\n              {showMonadInfo ? 'Hide details' : 'Show details'}\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className={`h-4 w-4 ml-1 transition-transform ${showMonadInfo ? 'rotate-180' : ''}`} viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n              </svg>\n            </button>\n\n            {showMonadInfo && (\n              <div className=\"mt-2 p-3 bg-gray-800 rounded-lg text-sm\">\n                <p className=\"mb-2\">\n                  <strong>What is Monad Testnet?</strong> Monad is an Ethereum-compatible blockchain that Phantom is testing. It's completely separate from Solana and our game.\n                </p>\n                <p className=\"mb-2\">\n                  <strong>Should you enable it?</strong> You don't need to enable Monad for our Rock Paper Scissors game. Our game runs exclusively on Solana.\n                </p>\n                <p>\n                  <strong>What to do:</strong> You can simply click \"Not Now\" on the Monad popup and continue using our game normally on Solana.\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default WalletHelper;\n","import React from 'react';\nimport WalletHelper from '../components/WalletHelper';\n\nconst WelcomeView: React.FC = () => {\n  return (\n    <div className=\"min-h-screen w-full flex flex-col justify-center items-center bg-gradient-to-b from-purple-900 via-indigo-900 to-blue-900 relative overflow-hidden\">\n      {/* Animated background elements */}\n      <div className=\"absolute inset-0 overflow-hidden\">\n        {/* Rock icon */}\n        <div className=\"absolute text-8xl opacity-10 text-white animate-float top-1/4 left-1/4\">\n          \n        </div>\n        {/* Paper icon */}\n        <div className=\"absolute text-8xl opacity-10 text-white animate-float-delayed top-3/4 right-1/3\">\n          \n        </div>\n        {/* Scissors icon */}\n        <div className=\"absolute text-8xl opacity-10 text-white animate-float-reverse top-1/3 right-1/4\">\n          \n        </div>\n        {/* Solana logo */}\n        <div className=\"absolute bottom-10 left-10 opacity-10\">\n          <svg width=\"100\" height=\"100\" viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M99.5815 78.0568L83.5815 99.0568C83.3815 99.3235 83.1149 99.5235 82.8149 99.6568C82.5149 99.7902 82.1815 99.8568 81.8482 99.8568H1.84818C1.38151 99.8568 0.948177 99.6568 0.648177 99.2902C0.348177 98.9235 0.215011 98.4235 0.315011 97.9568C0.381677 97.6902 0.515011 97.4568 0.681677 97.2568L16.6817 76.2568C16.8817 75.9902 17.1482 75.7902 17.4482 75.6568C17.7482 75.5235 18.0817 75.4568 18.415 75.4568H98.415C98.8817 75.4568 99.315 75.6568 99.615 76.0235C99.915 76.3902 100.048 76.8902 99.9483 77.3568C99.8817 77.6235 99.7483 77.8568 99.5815 78.0568ZM83.5815 40.2568C83.3815 39.9902 83.1149 39.7902 82.8149 39.6568C82.5149 39.5235 82.1815 39.4568 81.8482 39.4568H1.84818C1.38151 39.4568 0.948177 39.6568 0.648177 40.0235C0.348177 40.3902 0.215011 40.8902 0.315011 41.3568C0.381677 41.6235 0.515011 41.8569 0.681677 42.0568L16.6817 63.0568C16.8817 63.3235 17.1482 63.5235 17.4482 63.6568C17.7482 63.7902 18.0817 63.8568 18.415 63.8568H98.415C98.8817 63.8568 99.315 63.6568 99.615 63.2902C99.915 62.9235 100.048 62.4235 99.9483 61.9568C99.8817 61.6902 99.7483 61.4568 99.5815 61.2568L83.5815 40.2568ZM1.84818 27.8568H81.8482C82.1815 27.8568 82.5149 27.7902 82.8149 27.6568C83.1149 27.5235 83.3815 27.3235 83.5815 27.0568L99.5815 6.05679C99.7483 5.85679 99.8817 5.62346 99.9483 5.35679C100.048 4.89012 99.915 4.39012 99.615 4.02346C99.315 3.65679 98.8817 3.45679 98.415 3.45679H18.415C18.0817 3.45679 17.7482 3.52346 17.4482 3.65679C17.1482 3.79012 16.8817 3.99012 16.6817 4.25679L0.681677 25.2568C0.515011 25.4568 0.381677 25.6902 0.315011 25.9568C0.215011 26.4235 0.348177 26.9235 0.648177 27.2902C0.948177 27.6568 1.38151 27.8568 1.84818 27.8568Z\" fill=\"white\"/>\n          </svg>\n        </div>\n      </div>\n\n      {/* Main content */}\n      <div className=\"z-10 text-center p-8 max-w-4xl\">\n        <h1 className=\"text-6xl md:text-8xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 animate-pulse\">\n          Solana Rock Paper Scissors\n        </h1>\n\n        <div className=\"flex justify-center space-x-6 my-12\">\n          <div className=\"text-7xl transform transition-all duration-300 hover:scale-125 hover:rotate-12\"></div>\n          <div className=\"text-7xl transform transition-all duration-300 hover:scale-125 hover:rotate-12\"></div>\n          <div className=\"text-7xl transform transition-all duration-300 hover:scale-125 hover:rotate-12\"></div>\n        </div>\n\n        <p className=\"text-xl md:text-2xl mb-10 text-gray-300\">\n          Play the classic game on the Solana blockchain. Bet, win, and earn cryptocurrency!\n        </p>\n\n        <div className=\"mb-12\">\n          <h2 className=\"text-2xl font-bold text-purple-300 mb-4\">Features</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 text-left\">\n            <div className=\"bg-purple-900 bg-opacity-50 p-6 rounded-xl border border-purple-700 hover:shadow-lg hover:shadow-purple-600/30 transition-all duration-300\">\n              <div className=\"text-3xl mb-2\"></div>\n              <h3 className=\"text-xl font-bold mb-2 text-purple-300\">Crypto Betting</h3>\n              <p className=\"text-gray-300\">Place bets using SOL or RPS tokens and win real cryptocurrency</p>\n            </div>\n            <div className=\"bg-purple-900 bg-opacity-50 p-6 rounded-xl border border-purple-700 hover:shadow-lg hover:shadow-purple-600/30 transition-all duration-300\">\n              <div className=\"text-3xl mb-2\"></div>\n              <h3 className=\"text-xl font-bold mb-2 text-purple-300\">Auto Play</h3>\n              <p className=\"text-gray-300\">Set your strategy and let the system play automatically for you</p>\n            </div>\n            <div className=\"bg-purple-900 bg-opacity-50 p-6 rounded-xl border border-purple-700 hover:shadow-lg hover:shadow-purple-600/30 transition-all duration-300\">\n              <div className=\"text-3xl mb-2\"></div>\n              <h3 className=\"text-xl font-bold mb-2 text-purple-300\">Secure & Transparent</h3>\n              <p className=\"text-gray-300\">All gameplay is secured by the Solana blockchain for fair outcomes</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"py-8\">\n          {/* Replace the old WalletMultiButton with our new WalletHelper component */}\n          <WalletHelper />\n        </div>\n      </div>\n\n      {/* Footer */}\n      <div className=\"absolute bottom-4 text-gray-500 text-sm\">\n        Running on Solana Devnet   2025 Solana RPS Game\n      </div>\n    </div>\n  );\n};\n\nexport default WelcomeView;\n","import React from 'react';\nimport SecurityDashboard from '../components/SecurityDashboard';\n\ninterface SecurityViewProps {\n  onBack: () => void;\n}\n\nconst SecurityView: React.FC<SecurityViewProps> = ({ onBack }) => {\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <div className=\"mb-8\">\n        <SecurityDashboard showMetrics={true} />\n      </div>\n\n      <div className=\"card mb-8\">\n        <h2 className=\"text-2xl font-bold mb-6\">Security Architecture</h2>\n\n        <div className=\"mb-6\">\n          <h3 className=\"text-xl font-semibold mb-3 text-purple-300\">Blockchain Security</h3>\n          <p className=\"text-gray-300 mb-4\">\n            Our game leverages Solana's blockchain for secure and tamper-proof gameplay. All critical game actions are recorded on-chain, ensuring complete transparency and preventing cheating.\n          </p>\n\n          <div className=\"bg-gray-900 p-4 rounded-lg\">\n            <h4 className=\"font-semibold mb-2\">Key Security Features:</h4>\n            <ul className=\"space-y-2\">\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <div>\n                  <span className=\"font-medium\">Commit-Reveal Pattern</span>\n                  <p className=\"text-sm text-gray-400\">Players first commit to a hashed version of their choice, then reveal it later, preventing players from changing their mind after seeing others' choices.</p>\n                </div>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <div>\n                  <span className=\"font-medium\">Cryptographic Verification</span>\n                  <p className=\"text-sm text-gray-400\">All game moves are cryptographically signed and verified on the blockchain, ensuring only legitimate moves are counted.</p>\n                </div>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <div>\n                  <span className=\"font-medium\">Time-Based Security</span>\n                  <p className=\"text-sm text-gray-400\">Game rounds have secure timeouts to prevent players from stalling indefinitely.</p>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </div>\n\n        <div className=\"mb-6\">\n          <h3 className=\"text-xl font-semibold mb-3 text-purple-300\">Anti-Hacking Measures</h3>\n          <p className=\"text-gray-300 mb-4\">\n            Our multi-layered security approach prevents various attack vectors and ensures fair gameplay for all players.\n          </p>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"bg-gray-900 p-4 rounded-lg\">\n              <h4 className=\"font-semibold mb-2 flex items-center\">\n                <span className=\"text-xl mr-2\"></span>\n                <span>DDoS Protection</span>\n              </h4>\n              <p className=\"text-sm text-gray-400\">\n                Multiple layers of traffic filtering and rate limiting prevent distributed denial of service attacks, keeping games running smoothly even under attack.\n              </p>\n            </div>\n\n            <div className=\"bg-gray-900 p-4 rounded-lg\">\n              <h4 className=\"font-semibold mb-2 flex items-center\">\n                <span className=\"text-xl mr-2\"></span>\n                <span>Bot Detection</span>\n              </h4>\n              <p className=\"text-sm text-gray-400\">\n                Advanced behavior analysis algorithms detect and prevent automated gameplay, ensuring a fair environment for human players.\n              </p>\n            </div>\n\n            <div className=\"bg-gray-900 p-4 rounded-lg\">\n              <h4 className=\"font-semibold mb-2 flex items-center\">\n                <span className=\"text-xl mr-2\"></span>\n                <span>Secure Transactions</span>\n              </h4>\n              <p className=\"text-sm text-gray-400\">\n                All financial transactions are secured by Solana's cryptographic protocols, ensuring your funds are always safe.\n              </p>\n            </div>\n\n            <div className=\"bg-gray-900 p-4 rounded-lg\">\n              <h4 className=\"font-semibold mb-2 flex items-center\">\n                <span className=\"text-xl mr-2\"></span>\n                <span>Fraud Prevention</span>\n              </h4>\n              <p className=\"text-sm text-gray-400\">\n                Real-time monitoring systems detect suspicious activity and prevent fraudulent gameplay before it affects other players.\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"card mb-8\">\n        <h2 className=\"text-2xl font-bold mb-6\">Scaling Infrastructure</h2>\n\n        <div className=\"mb-6\">\n          <p className=\"text-gray-300 mb-4\">\n            Our infrastructure is designed to handle thousands of concurrent players with low latency and high availability.\n          </p>\n\n          <div className=\"bg-gradient-to-r from-purple-900 to-indigo-900 p-4 rounded-lg mb-6\">\n            <div className=\"text-center font-bold text-2xl mb-2\">50,000+</div>\n            <div className=\"text-center text-purple-200\">Concurrent Players Supported</div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"bg-gray-900 p-4 rounded-lg\">\n              <h4 className=\"font-semibold mb-2\">Horizontal Scaling</h4>\n              <p className=\"text-sm text-gray-400\">\n                Our infrastructure automatically scales out horizontally to handle traffic spikes and increased player load.\n              </p>\n            </div>\n\n            <div className=\"bg-gray-900 p-4 rounded-lg\">\n              <h4 className=\"font-semibold mb-2\">Global Distribution</h4>\n              <p className=\"text-sm text-gray-400\">\n                Game servers are distributed across 12 global regions to provide low-latency gameplay worldwide.\n              </p>\n            </div>\n\n            <div className=\"bg-gray-900 p-4 rounded-lg\">\n              <h4 className=\"font-semibold mb-2\">Database Sharding</h4>\n              <p className=\"text-sm text-gray-400\">\n                Game data is automatically sharded across multiple database instances for high throughput and performance.\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mb-6\">\n          <h3 className=\"text-xl font-semibold mb-3 text-purple-300\">Performance Metrics</h3>\n\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div className=\"bg-gray-900 p-4 rounded-lg text-center\">\n              <div className=\"text-2xl font-bold text-green-400\">99.9%</div>\n              <div className=\"text-sm text-gray-400\">Uptime</div>\n            </div>\n\n            <div className=\"bg-gray-900 p-4 rounded-lg text-center\">\n              <div className=\"text-2xl font-bold text-green-400\">&lt; 200ms</div>\n              <div className=\"text-sm text-gray-400\">Global Latency</div>\n            </div>\n\n            <div className=\"bg-gray-900 p-4 rounded-lg text-center\">\n              <div className=\"text-2xl font-bold text-green-400\">200+</div>\n              <div className=\"text-sm text-gray-400\">TPS</div>\n            </div>\n\n            <div className=\"bg-gray-900 p-4 rounded-lg text-center\">\n              <div className=\"text-2xl font-bold text-green-400\">12</div>\n              <div className=\"text-sm text-gray-400\">Global Regions</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex justify-center mb-8\">\n        <button\n          onClick={onBack}\n          className=\"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg hover:from-purple-700 hover:to-indigo-700 font-medium\"\n        >\n          Back to Home\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default SecurityView;\n","import React, { useState, useEffect } from 'react';\nimport { Connection, PublicKey } from '@solana/web3.js';\nimport { safeDeserialize } from '../utils/fixborsh';\n\ninterface GameMonitorProps {\n  gameId: string;\n  endpoint: string;\n  programId: string;\n}\n\nconst GameMonitor: React.FC<GameMonitorProps> = ({ gameId, endpoint, programId }) => {\n  const [connectedWallets, setConnectedWallets] = useState<string[]>([]);\n  const [gameState, setGameState] = useState<any>(null);\n  const [lastUpdate, setLastUpdate] = useState<string>('');\n  const [error, setError] = useState<string | null>(null);\n  const [subscriptionId, setSubscriptionId] = useState<number | null>(null);\n\n  useEffect(() => {\n    if (!gameId) return;\n\n    try {\n      // Initialize connection to Solana\n      const connection = new Connection(endpoint, 'confirmed');\n      const gamePublicKey = new PublicKey(gameId);\n      const programPublicKey = new PublicKey(programId);\n\n      // Function to fetch game state\n      const fetchGameState = async () => {\n        try {\n          const accountInfo = await connection.getAccountInfo(gamePublicKey);\n          if (!accountInfo) {\n            setError('Game account not found');\n            return;\n          }\n\n          // Update state\n          setGameState(accountInfo.data);\n          setLastUpdate(new Date().toLocaleTimeString());\n          setError(null);\n        } catch (err) {\n          console.error('Error fetching game state:', err);\n          setError(`Error fetching game state: ${err.message}`);\n        }\n      };\n\n      // Initial fetch\n      fetchGameState();\n\n      // Subscribe to game account changes\n      const id = connection.onAccountChange(\n        gamePublicKey,\n        (accountInfo) => {\n          setGameState(accountInfo.data);\n          setLastUpdate(new Date().toLocaleTimeString());\n        },\n        'confirmed'\n      );\n      setSubscriptionId(id);\n\n      // Check for wallet connections\n      const checkWallets = () => {\n        const wallets = [];\n\n        // Check for Phantom\n        if (window.phantom?.solana) {\n          wallets.push('Phantom');\n        }\n\n        // Check for Solflare\n        if (window.solflare) {\n          wallets.push('Solflare');\n        }\n\n        // Check for any other wallet adapters\n        if (window.solana) {\n          if (!wallets.includes('Phantom') && !wallets.includes('Solflare')) {\n            wallets.push('Other Solana wallet');\n          }\n        }\n\n        setConnectedWallets(wallets);\n      };\n\n      checkWallets();\n\n      // Cleanup subscription\n      return () => {\n        if (subscriptionId !== null) {\n          connection.removeAccountChangeListener(subscriptionId);\n        }\n      };\n    } catch (err) {\n      console.error('Error initializing game monitor:', err);\n      setError(`Error initializing game monitor: ${err.message}`);\n    }\n  }, [gameId, endpoint, programId]);\n\n  if (error) {\n    return (\n      <div className=\"bg-red-900 bg-opacity-50 p-4 rounded-lg my-4\">\n        <h3 className=\"text-lg font-semibold text-white mb-2\">Game Monitor Error</h3>\n        <p className=\"text-red-200\">{error}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-gray-800 bg-opacity-50 p-4 rounded-lg my-4\">\n      <h3 className=\"text-lg font-semibold text-white mb-2\">Game Monitor</h3>\n\n      <div className=\"mb-3\">\n        <p className=\"text-sm text-gray-300\">\n          <span className=\"font-semibold\">Game ID:</span> {gameId}\n        </p>\n        <p className=\"text-sm text-gray-300\">\n          <span className=\"font-semibold\">Last Updated:</span> {lastUpdate || 'Never'}\n        </p>\n      </div>\n\n      <div className=\"mb-3\">\n        <h4 className=\"text-md font-semibold text-purple-300 mb-1\">Connected Wallets</h4>\n        {connectedWallets.length > 0 ? (\n          <ul className=\"text-sm text-gray-300\">\n            {connectedWallets.map((wallet, index) => (\n              <li key={index} className=\"flex items-center\">\n                <span className=\"text-green-400 mr-2\"></span> {wallet}\n              </li>\n            ))}\n          </ul>\n        ) : (\n          <p className=\"text-sm text-yellow-400\">No wallets detected on this device</p>\n        )}\n      </div>\n\n      <div>\n        <h4 className=\"text-md font-semibold text-purple-300 mb-1\">Raw Game Data</h4>\n        {gameState ? (\n          <div className=\"text-xs text-gray-400 overflow-auto max-h-32 p-2 bg-gray-900 bg-opacity-50 rounded\">\n            <pre>{JSON.stringify(gameState, null, 2)}</pre>\n          </div>\n        ) : (\n          <p className=\"text-sm text-gray-400 italic\">Loading game data...</p>\n        )}\n      </div>\n\n      <div className=\"mt-3 text-right\">\n        <button\n          onClick={() => window.location.reload()}\n          className=\"text-xs bg-purple-700 hover:bg-purple-600 text-white px-2 py-1 rounded\"\n        >\n          Refresh\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default GameMonitor;\n","import React, { useState, useEffect } from 'react';\nimport { useWallet } from '@solana/wallet-adapter-react';\nimport { WalletMultiButton } from '@solana/wallet-adapter-react-ui';\nimport { clusterApiUrl } from '@solana/web3.js';\nimport GameMonitor from '../components/GameMonitor';\n\nconst TestingView: React.FC = () => {\n  const { connected, publicKey } = useWallet();\n  const [gameId, setGameId] = useState<string>('');\n  const [deviceId, setDeviceId] = useState<string>('');\n  const [showMonitor, setShowMonitor] = useState<boolean>(false);\n  const [deviceName, setDeviceName] = useState<string>('');\n  const [browserInfo, setBrowserInfo] = useState<string>('');\n  const [programId, setProgramId] = useState<string>('7Y9dRMY6V9cmVkXNFrHeUZmYf2tAV5wSVFcYyD5bLQpZ');\n  const [endpoint, setEndpoint] = useState<string>(clusterApiUrl('devnet'));\n\n  // Generate a unique device ID on component mount\n  useEffect(() => {\n    // Generate a simple device identifier based on browser and device information\n    const generateDeviceId = () => {\n      const nav = navigator;\n      const screen = window.screen;\n      const idStr =\n        nav.userAgent +\n        screen.width +\n        screen.height +\n        screen.colorDepth +\n        nav.language +\n        new Date().getTimezoneOffset();\n\n      return Array.from(\n        new Uint8Array(\n          new TextEncoder().encode(idStr)\n        )\n      ).map(b => b.toString(16).padStart(2, '0')).join('').substring(0, 16);\n    };\n\n    const id = generateDeviceId();\n    setDeviceId(id);\n\n    // Get browser and device information\n    const ua = navigator.userAgent;\n    let browserName = \"Unknown\";\n    let osName = \"Unknown\";\n\n    // Browser detection\n    if (ua.indexOf(\"Firefox\") > -1) {\n      browserName = \"Firefox\";\n    } else if (ua.indexOf(\"Opera\") > -1 || ua.indexOf(\"OPR\") > -1) {\n      browserName = \"Opera\";\n    } else if (ua.indexOf(\"Edge\") > -1) {\n      browserName = \"Edge\";\n    } else if (ua.indexOf(\"Chrome\") > -1) {\n      browserName = \"Chrome\";\n    } else if (ua.indexOf(\"Safari\") > -1) {\n      browserName = \"Safari\";\n    }\n\n    // OS detection\n    if (ua.indexOf(\"Windows\") > -1) {\n      osName = \"Windows\";\n    } else if (ua.indexOf(\"Mac\") > -1) {\n      osName = \"MacOS\";\n    } else if (ua.indexOf(\"Linux\") > -1) {\n      osName = \"Linux\";\n    } else if (ua.indexOf(\"Android\") > -1) {\n      osName = \"Android\";\n    } else if (ua.indexOf(\"iPhone\") > -1 || ua.indexOf(\"iPad\") > -1) {\n      osName = \"iOS\";\n    }\n\n    setBrowserInfo(`${browserName} on ${osName}`);\n\n    // Set default device name based on browser and OS\n    setDeviceName(`${osName}-${browserName}-${id.substring(0, 4)}`);\n  }, []);\n\n  const handleGameIdChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setGameId(e.target.value);\n  };\n\n  const handleDeviceNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setDeviceName(e.target.value);\n  };\n\n  const handleMonitorToggle = () => {\n    setShowMonitor(!showMonitor);\n  };\n\n  return (\n    <div className=\"max-w-3xl mx-auto\">\n      <div className=\"card\">\n        <h2 className=\"text-2xl font-bold mb-6\">Multi-Wallet Testing</h2>\n\n        <div className=\"mb-6 p-4 bg-purple-900 bg-opacity-20 rounded-lg border border-purple-700\">\n          <div className=\"flex items-start\">\n            <div className=\"text-purple-400 text-xl mr-3\"></div>\n            <div>\n              <h3 className=\"text-lg font-semibold text-purple-300 mb-1\">Testing Mode</h3>\n              <p className=\"text-gray-300 mb-2\">\n                This is a special view for testing the game with multiple wallets across different devices.\n              </p>\n              <p className=\"text-sm text-gray-400 mb-1\">\n                <span className=\"font-semibold\">Device ID:</span> {deviceId}\n              </p>\n              <p className=\"text-sm text-gray-400\">\n                <span className=\"font-semibold\">Browser:</span> {browserInfo}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mb-6\">\n          <div className=\"form-group\">\n            <label className=\"form-label\">Device Name (for testing)</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              value={deviceName}\n              onChange={handleDeviceNameChange}\n              placeholder=\"Give this device a name for testing\"\n            />\n          </div>\n\n          <div className=\"form-group\">\n            <label className=\"form-label\">Game ID to Monitor</label>\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              value={gameId}\n              onChange={handleGameIdChange}\n              placeholder=\"Enter a game ID to monitor\"\n            />\n          </div>\n\n          <div className=\"mt-3\">\n            <button\n              className={`w-full py-3 rounded-lg ${\n                gameId ? 'bg-purple-600 hover:bg-purple-700' : 'bg-gray-600 cursor-not-allowed opacity-60'\n              }`}\n              onClick={handleMonitorToggle}\n              disabled={!gameId}\n            >\n              {showMonitor ? 'Hide Game Monitor' : 'Show Game Monitor'}\n            </button>\n          </div>\n        </div>\n\n        {showMonitor && gameId && (\n          <GameMonitor\n            gameId={gameId}\n            endpoint={endpoint}\n            programId={programId}\n          />\n        )}\n\n        <div className=\"bg-gray-800 p-4 rounded-lg mb-4\">\n          <h3 className=\"text-lg font-semibold mb-2\">Wallet Status</h3>\n\n          <div className=\"flex items-center mb-2\">\n            <div className={`w-3 h-3 rounded-full mr-2 ${connected ? 'bg-green-500' : 'bg-red-500'}`}></div>\n            <span>{connected ? 'Connected' : 'Not Connected'}</span>\n          </div>\n\n          {connected && publicKey && (\n            <div className=\"mt-2 p-2 bg-gray-700 rounded overflow-x-auto\">\n              <code className=\"text-xs text-gray-300\">{publicKey.toString()}</code>\n            </div>\n          )}\n\n          <div className=\"mt-4\">\n            <WalletMultiButton className=\"!bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700\" />\n          </div>\n        </div>\n\n        <div className=\"mt-6 border-t border-gray-700 pt-4\">\n          <h3 className=\"text-lg font-semibold mb-3\">Testing Instructions</h3>\n          <ol className=\"text-gray-300 list-decimal list-inside space-y-2\">\n            <li>Connect your wallet on this device</li>\n            <li>Create a game or get a Game ID from another test device</li>\n            <li>Enter the Game ID above and click \"Show Game Monitor\"</li>\n            <li>You can observe the game state as it changes</li>\n            <li>Use multiple browsers/devices for comprehensive testing</li>\n          </ol>\n\n          <div className=\"mt-4 text-sm text-gray-400\">\n            <p>For detailed testing instructions, see the MULTI_WALLET_TESTING.md file in the project repository.</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TestingView;\n","import React from 'react';\nimport { TokenBalance } from '../types';\n\ninterface TokenDisplayProps {\n  balance: TokenBalance;\n  loading?: boolean;\n  isMobile?: boolean;\n  onClick?: () => void;\n}\n\nconst TokenDisplay: React.FC<TokenDisplayProps> = ({\n  balance,\n  loading = false,\n  isMobile = false,\n  onClick\n}) => {\n  const handleClick = () => {\n    if (onClick) onClick();\n  };\n\n  // Apply interactive cursor if onClick is provided\n  const cursorClass = onClick ? 'cursor-pointer hover:bg-gray-700' : '';\n  const transitionClass = onClick ? 'transition-all duration-200' : '';\n\n  if (isMobile) {\n    return (\n      <div\n        className={`flex flex-col items-end space-y-1 ${cursorClass} p-1 rounded-md ${transitionClass}`}\n        onClick={handleClick}\n      >\n        <div className=\"flex items-center text-sm\">\n          <img\n            src=\"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png\"\n            alt=\"SOL\"\n            className=\"w-4 h-4 mr-1\"\n          />\n          <span className=\"text-white font-medium\">\n            {loading ? '...' : balance.sol.toFixed(4)}\n          </span>\n        </div>\n        <div className=\"flex items-center text-sm\">\n          <img\n            src=\"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R/logo.png\"\n            alt=\"RPS\"\n            className=\"w-4 h-4 mr-1\"\n          />\n          <span className=\"text-white font-medium\">\n            {loading ? '...' : balance.rpsToken.toFixed(1)}\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={`bg-gray-800 bg-opacity-80 rounded-lg p-2 flex items-center space-x-4 ${cursorClass} ${transitionClass}`}\n      onClick={handleClick}\n    >\n      <div className=\"flex items-center\">\n        <img\n          src=\"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png\"\n          alt=\"SOL\"\n          className=\"w-5 h-5 mr-2\"\n        />\n        <span className=\"text-white font-medium\">\n          {loading ? '...' : balance.sol.toFixed(4)} SOL\n        </span>\n      </div>\n      <div className=\"flex items-center\">\n        <img\n          src=\"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R/logo.png\"\n          alt=\"RPS\"\n          className=\"w-5 h-5 mr-2\"\n        />\n        <span className=\"text-white font-medium\">\n          {loading ? '...' : balance.rpsToken.toFixed(1)} RPS\n        </span>\n      </div>\n      {onClick && (\n        <div className=\"ml-1 text-gray-300 hover:text-white\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n            <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n          </svg>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TokenDisplay;\n","import React, { useState } from 'react';\nimport { TokenBalance } from '../types';\n\ninterface TokenSwapProps {\n  balance: TokenBalance;\n  onSwap: (fromToken: string, toToken: string, amount: number) => Promise<boolean>;\n  disabled?: boolean;\n}\n\nconst TokenSwap: React.FC<TokenSwapProps> = ({\n  balance,\n  onSwap,\n  disabled = false\n}) => {\n  const [amount, setAmount] = useState<number>(0.1);\n  const [swapping, setSwapping] = useState<boolean>(false);\n  const [message, setMessage] = useState<{ text: string; type: 'success' | 'error' } | null>(null);\n  const [swapDirection, setSwapDirection] = useState<'SOL_TO_RPS' | 'RPS_TO_SOL'>('SOL_TO_RPS');\n\n  const handleSwap = async () => {\n    if (swapDirection === 'SOL_TO_RPS' && (amount <= 0 || amount > balance.sol)) return;\n    if (swapDirection === 'RPS_TO_SOL' && (amount <= 0 || amount > balance.rpsToken)) return;\n\n    setSwapping(true);\n    setMessage(null);\n\n    try {\n      const fromToken = swapDirection === 'SOL_TO_RPS' ? 'SOL' : 'RPS';\n      const toToken = swapDirection === 'SOL_TO_RPS' ? 'RPS' : 'SOL';\n\n      const success = await onSwap(fromToken, toToken, amount);\n\n      if (success) {\n        setMessage({\n          text: `Successfully swapped ${amount} ${fromToken} for ${toToken}!`,\n          type: 'success'\n        });\n        setAmount(0.1);\n      } else {\n        setMessage({\n          text: 'Failed to swap tokens. Please try again.',\n          type: 'error'\n        });\n      }\n    } catch (error) {\n      setMessage({\n        text: `Error: ${(error as Error).message || 'Unknown error'}`,\n        type: 'error'\n      });\n    } finally {\n      setSwapping(false);\n    }\n  };\n\n  const toggleSwapDirection = () => {\n    setSwapDirection(prev => prev === 'SOL_TO_RPS' ? 'RPS_TO_SOL' : 'SOL_TO_RPS');\n    setAmount(0.1);\n    setMessage(null);\n  };\n\n  const isSwapDisabled =\n    disabled ||\n    swapping ||\n    amount <= 0 ||\n    (swapDirection === 'SOL_TO_RPS' && amount > balance.sol) ||\n    (swapDirection === 'RPS_TO_SOL' && amount > balance.rpsToken);\n\n  const getMaxAmount = () => {\n    return swapDirection === 'SOL_TO_RPS'\n      ? balance.sol\n      : balance.rpsToken;\n  };\n\n  return (\n    <div className=\"p-4 bg-gray-800 rounded-lg border border-gray-700\">\n      <h3 className=\"text-lg font-semibold mb-4\">Swap Tokens</h3>\n\n      {message && (\n        <div\n          className={`p-3 mb-4 rounded-lg ${\n            message.type === 'success' ? 'bg-green-800 bg-opacity-40 text-green-400' : 'bg-red-800 bg-opacity-40 text-red-400'\n          }`}\n        >\n          {message.text}\n        </div>\n      )}\n\n      <div className=\"mb-4\">\n        <div className=\"flex justify-between mb-2\">\n          <label className=\"text-sm font-medium text-gray-300\">\n            {swapDirection === 'SOL_TO_RPS' ? 'Swap SOL for RPS' : 'Swap RPS for SOL'}\n          </label>\n          <button\n            onClick={toggleSwapDirection}\n            disabled={disabled || swapping}\n            className=\"text-xs text-purple-400 hover:text-purple-300\"\n          >\n            Switch Direction\n          </button>\n        </div>\n\n        <div className=\"flex space-x-2\">\n          <div className=\"flex-1 relative\">\n            <input\n              type=\"number\"\n              value={amount}\n              onChange={(e) => setAmount(Math.max(0, parseFloat(e.target.value) || 0))}\n              min=\"0.01\"\n              step=\"0.01\"\n              disabled={disabled || swapping}\n              className=\"w-full px-4 py-2 bg-gray-700 rounded-lg border border-gray-600 text-white pr-16\"\n            />\n            <div className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400\">\n              {swapDirection === 'SOL_TO_RPS' ? 'SOL' : 'RPS'}\n            </div>\n          </div>\n          <button\n            onClick={handleSwap}\n            disabled={isSwapDisabled}\n            className={`px-4 py-2 rounded-lg font-medium ${\n              isSwapDisabled\n                ? 'bg-gray-600 cursor-not-allowed opacity-50'\n                : 'bg-purple-600 hover:bg-purple-700'\n            }`}\n          >\n            {swapping ? 'Swapping...' : 'Swap'}\n          </button>\n        </div>\n\n        <div className=\"flex justify-between mt-1\">\n          <div className=\"text-xs text-gray-400\">\n            {swapDirection === 'SOL_TO_RPS'\n              ? 'Exchange rate: 1 SOL = 10 RPS'\n              : 'Exchange rate: 10 RPS = 1 SOL'}\n          </div>\n          <button\n            onClick={() => setAmount(getMaxAmount())}\n            disabled={disabled || swapping}\n            className=\"text-xs text-blue-400 hover:text-blue-300\"\n          >\n            Max\n          </button>\n        </div>\n\n        {(swapDirection === 'SOL_TO_RPS' && amount > balance.sol) && (\n          <div className=\"text-xs text-red-400 mt-1\">\n            Insufficient SOL balance\n          </div>\n        )}\n\n        {(swapDirection === 'RPS_TO_SOL' && amount > balance.rpsToken) && (\n          <div className=\"text-xs text-red-400 mt-1\">\n            Insufficient RPS balance\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default TokenSwap;\n","import React, { useState } from 'react';\nimport { TokenBalance } from '../types';\nimport TokenSwap from './TokenSwap';\nimport { PublicKey } from '@solana/web3.js';\n\ninterface TokenModalProps {\n  publicKey: PublicKey | null;\n  onClose: () => void;\n  balance: TokenBalance;\n  onGetFree: () => Promise<void>;\n}\n\nconst TokenModal: React.FC<TokenModalProps> = ({\n  publicKey,\n  onClose,\n  balance,\n  onGetFree\n}) => {\n  const [loading, setLoading] = useState(false);\n\n  const handleBackdropClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  const handleGetFreeTokens = async () => {\n    setLoading(true);\n    try {\n      await onGetFree();\n    } catch (error) {\n      console.error('Error getting free tokens:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // For simplicity, we'll use a placeholder swap function\n  const handleSwap = async (fromToken: string, toToken: string, amount: number) => {\n    setLoading(true);\n    try {\n      // Simulate delay\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      console.log(`Swapping ${amount} ${fromToken} to ${toToken}`);\n      return true;\n    } catch (error) {\n      console.error('Error swapping tokens:', error);\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4\"\n      onClick={handleBackdropClick}\n    >\n      <div\n        className=\"bg-gray-900 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto\"\n        onClick={e => e.stopPropagation()}\n      >\n        <div className=\"p-4 border-b border-gray-800 flex justify-between items-center\">\n          <h2 className=\"text-xl font-bold\">Manage Tokens</h2>\n          <button\n            onClick={onClose}\n            className=\"w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-800\"\n          >\n            \n          </button>\n        </div>\n\n        <div className=\"p-4\">\n          <div className=\"mb-6 p-4 bg-gray-800 rounded-lg\">\n            <h3 className=\"text-lg font-medium mb-2\">Your Balances</h3>\n            <div className=\"flex justify-between items-center\">\n              <div className=\"flex space-x-6\">\n                <div>\n                  <div className=\"text-sm text-gray-400\">SOL</div>\n                  <div className=\"text-xl font-bold\">{balance.sol.toFixed(4)}</div>\n                </div>\n                <div>\n                  <div className=\"text-sm text-gray-400\">RPS Token</div>\n                  <div className=\"text-xl font-bold\">{balance.rpsToken.toFixed(2)}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"p-4 bg-gray-800 rounded-lg mb-4\">\n            <h3 className=\"text-lg font-medium mb-3\">Get Free Tokens</h3>\n            <p className=\"text-gray-300 mb-3\">\n              New players can claim free RPS tokens to get started!\n            </p>\n            <button\n              className=\"btn btn-primary w-full\"\n              onClick={handleGetFreeTokens}\n              disabled={loading}\n            >\n              {loading ? 'Processing...' : 'Claim Free RPS Tokens'}\n            </button>\n            <p className=\"text-xs text-gray-400 mt-2\">\n              For testing purposes only. Limited to one claim per wallet.\n            </p>\n          </div>\n\n          <TokenSwap\n            balance={balance}\n            onSwap={handleSwap}\n            disabled={loading}\n          />\n\n          <div className=\"mt-6 p-4 bg-indigo-900 bg-opacity-30 rounded-lg\">\n            <h3 className=\"text-lg font-medium mb-2\">Why Use RPS Tokens?</h3>\n            <ul className=\"space-y-2\">\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>5% larger prize pools for all games</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>50% lower fees (0.05% instead of 0.1%)</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Exclusive game modes and tournaments</span>\n              </li>\n              <li className=\"flex items-start\">\n                <span className=\"text-green-400 mr-2\"></span>\n                <span>Future governance and staking rewards</span>\n              </li>\n            </ul>\n          </div>\n\n          {publicKey && (\n            <div className=\"mt-4 pt-3 border-t border-gray-700\">\n              <div className=\"text-xs text-gray-400\">\n                <span className=\"font-semibold\">Connected Wallet:</span>\n                <span className=\"ml-1\">\n                  {publicKey.toString().slice(0, 4)}...{publicKey.toString().slice(-4)}\n                </span>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TokenModal;\n","import React, { useState, useEffect } from 'react';\nimport audioService from '../services/audio-service';\n\ninterface SoundControlProps {\n  showVolume?: boolean;\n  className?: string;\n}\n\nconst SoundControl: React.FC<SoundControlProps> = ({ showVolume = false, className = '' }) => {\n  const [muted, setMuted] = useState<boolean>(false);\n  const [volume, setVolume] = useState<number>(0.8);\n  const [showVolumeSlider, setShowVolumeSlider] = useState<boolean>(false);\n\n  useEffect(() => {\n    // Initialize audio service with saved state\n    const savedMuted = localStorage.getItem('rps-audio-muted');\n    const savedVolume = localStorage.getItem('rps-audio-volume');\n\n    if (savedMuted !== null) {\n      const isMuted = savedMuted === 'true';\n      setMuted(isMuted);\n      audioService.setMuted(isMuted);\n    }\n\n    if (savedVolume !== null) {\n      const vol = parseFloat(savedVolume);\n      setVolume(vol);\n      audioService.setVolume(vol);\n    }\n  }, []);\n\n  const toggleMute = () => {\n    const newMuted = !muted;\n    setMuted(newMuted);\n    audioService.setMuted(newMuted);\n    localStorage.setItem('rps-audio-muted', newMuted.toString());\n    audioService.play('click');\n  };\n\n  const handleVolumeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const vol = parseFloat(e.target.value);\n    setVolume(vol);\n    audioService.setVolume(vol);\n    localStorage.setItem('rps-audio-volume', vol.toString());\n  };\n\n  const toggleVolumeSlider = () => {\n    setShowVolumeSlider(!showVolumeSlider);\n    audioService.play('click');\n  };\n\n  return (\n    <div className={`sound-control relative ${className}`}>\n      <div className=\"flex items-center space-x-2\">\n        <button\n          onClick={toggleMute}\n          className=\"p-2 rounded-full hover:bg-gray-700 transition-colors focus:outline-none\"\n          aria-label={muted ? 'Unmute' : 'Mute'}\n        >\n          {muted ? (\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path fillRule=\"evenodd\" d=\"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n            </svg>\n          ) : (\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-white\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path fillRule=\"evenodd\" d=\"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z\" clipRule=\"evenodd\" />\n            </svg>\n          )}\n        </button>\n\n        {!showVolume && (\n          <button\n            onClick={toggleVolumeSlider}\n            className=\"p-2 rounded-full hover:bg-gray-700 transition-colors focus:outline-none\"\n            aria-label=\"Volume settings\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-300\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path fillRule=\"evenodd\" d=\"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z\" clipRule=\"evenodd\" />\n            </svg>\n          </button>\n        )}\n      </div>\n\n      {(showVolume || showVolumeSlider) && (\n        <div className={`volume-slider mt-2 ${showVolume ? '' : 'absolute right-0 top-full mt-2 p-3 bg-gray-800 rounded-lg shadow-lg z-10'}`}>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"1\"\n            step=\"0.01\"\n            value={volume}\n            onChange={handleVolumeChange}\n            className=\"w-24 accent-purple-500\"\n            disabled={muted}\n          />\n          <div className=\"flex justify-between text-xs text-gray-400 mt-1\">\n            <span>0%</span>\n            <span>100%</span>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SoundControl;\n","import type React from 'react';\nimport { useState, useEffect, Component, ErrorInfo } from 'react';\nimport { WalletAdapterNetwork } from '@solana/wallet-adapter-base';\nimport { ConnectionProvider, WalletProvider, useWallet } from '@solana/wallet-adapter-react';\nimport { WalletModalProvider, WalletMultiButton } from '@solana/wallet-adapter-react-ui';\nimport { PhantomWalletAdapter } from '@solana/wallet-adapter-phantom';\nimport { SolflareWalletAdapter } from '@solana/wallet-adapter-solflare';\nimport { BackpackWalletAdapter } from '@solana/wallet-adapter-backpack';\nimport { CoinbaseWalletAdapter } from '@solana/wallet-adapter-coinbase';\nimport { LedgerWalletAdapter } from '@solana/wallet-adapter-ledger';\nimport { clusterApiUrl, Connection, PublicKey } from '@solana/web3.js';\nimport './App.css';\nimport { RPSGameClient } from './rps-client';\nimport { GameView, CurrencyMode, TokenBalance } from './types';\nimport HomeView from './views/HomeView';\nimport CreateGameView from './views/CreateGameView';\nimport JoinGameView from './views/JoinGameView';\nimport GameLobbyView from './views/GameLobbyView';\nimport CommitChoiceView from './views/CommitChoiceView';\nimport RevealChoiceView from './views/RevealChoiceView';\nimport GameResultsView from './views/GameResultsView';\nimport AutoPlayView from './views/AutoPlayView';\nimport WelcomeView from './views/WelcomeView';\nimport SecurityView from './views/SecurityView';\nimport TestingView from './views/TestingView'; // New import for TestingView\n\n// Import wallet adapter CSS\nimport '@solana/wallet-adapter-react-ui/styles.css';\n\n// New imports for token management\nimport TokenDisplay from './components/TokenDisplay';\nimport TokenModal from './components/TokenModal';\nimport { getTokenBalances, getFreeRPSTokens } from './services/token-service';\nimport SoundControl from './components/SoundControl';\nimport audioService from './services/audio-service';\n\n// Error boundary component\nclass ErrorBoundary extends Component<{children: React.ReactNode}, {hasError: boolean, error: Error | null}> {\n  constructor(props: {children: React.ReactNode}) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error) {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error(\"App error:\", error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"error-container\" style={{\n          padding: '20px',\n          margin: '20px',\n          backgroundColor: '#300',\n          color: 'white',\n          borderRadius: '8px',\n          fontFamily: 'sans-serif'\n        }}>\n          <h2 style={{ color: '#f55' }}>Something went wrong</h2>\n          <p>There was an issue loading the application:</p>\n          <pre style={{\n            backgroundColor: '#222',\n            padding: '10px',\n            borderRadius: '4px',\n            overflow: 'auto',\n            maxHeight: '200px'\n          }}>\n            {this.state.error?.toString() || 'Unknown error'}\n          </pre>\n          <p>The most common cause is missing browser polyfills for Node.js built-ins.</p>\n          <button\n            onClick={() => window.location.reload()}\n            style={{\n              backgroundColor: '#f55',\n              color: 'white',\n              border: 'none',\n              padding: '8px 16px',\n              borderRadius: '4px',\n              marginTop: '12px',\n              cursor: 'pointer'\n            }}\n          >\n            Reload Application\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// Default to devnet for development\nconst network = WalletAdapterNetwork.Devnet;\nconst endpoint = clusterApiUrl(network);\n\n// Wallet adapters - added more wallet options for better cross-OS support\nconst wallets = [\n  new PhantomWalletAdapter(),\n  new SolflareWalletAdapter({ network }),\n  new BackpackWalletAdapter(),\n  new CoinbaseWalletAdapter(),\n  new LedgerWalletAdapter(),\n];\n\n// RPS Program ID - a valid base58 public key (replace with your actual deployed program ID)\nconst RPS_PROGRAM_ID = new PublicKey('7Y9dRMY6V9cmVkXNFrHeUZmYf2tAV5wSVFcYyD5bLQpZ');\n\nconst App: React.FC = () => {\n  return (\n    <ErrorBoundary>\n      <ConnectionProvider endpoint={endpoint}>\n        <WalletProvider wallets={wallets} autoConnect>\n          <WalletModalProvider>\n            <RPSGame />\n          </WalletModalProvider>\n        </WalletProvider>\n      </ConnectionProvider>\n    </ErrorBoundary>\n  );\n};\n\nconst RPSGame: React.FC = () => {\n  const { connected, publicKey, signTransaction, sendTransaction } = useWallet();\n  const [gameClient, setGameClient] = useState<RPSGameClient | null>(null);\n  const [currentView, setCurrentView] = useState<GameView>(GameView.HOME);\n  const [gameId, setGameId] = useState<string>('');\n  const [gameData, setGameData] = useState<any>(null);\n  const [userChoice, setUserChoice] = useState<number>(0);\n  const [salt, setSalt] = useState<string>('');\n  const [errorMessage, setErrorMessage] = useState<string>('');\n  const [statusMessage, setStatusMessage] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n\n  // New state for responsive UI\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState<boolean>(false);\n\n  // New state for token management\n  const [tokenBalance, setTokenBalance] = useState<TokenBalance>({ sol: 0, rpsToken: 0 });\n  const [loadingBalance, setLoadingBalance] = useState<boolean>(false);\n  const [isTokenModalOpen, setIsTokenModalOpen] = useState<boolean>(false);\n\n  // Initialize game client when wallet is connected\n  useEffect(() => {\n    const initClient = async () => {\n      if (connected && publicKey && signTransaction) {\n        try {\n          console.log('Initializing game client for wallet:', publicKey.toString());\n\n          const connection = new Connection(endpoint, 'confirmed');\n\n          // Get initial token balances\n          setLoadingBalance(true);\n\n          try {\n            const balances = await getTokenBalances(connection, publicKey);\n            setTokenBalance(balances);\n          } catch (balanceError) {\n            console.warn('Error fetching token balances:', balanceError);\n            // Set default balances to prevent UI errors\n            setTokenBalance({ sol: 0, rpsToken: 0 });\n          }\n\n          setLoadingBalance(false);\n\n          // Initialize the game client with the wallet info\n          const client = new RPSGameClient(\n            connection,\n            RPS_PROGRAM_ID,\n            publicKey,\n            sendTransaction,\n            signTransaction\n          );\n\n          setGameClient(client);\n\n          console.log('Game client initialized successfully');\n        } catch (error) {\n          console.error('Error initializing game client:', error);\n          setErrorMessage('Failed to initialize game client. Please check console for details.');\n        }\n      } else {\n        // Clear game client when wallet disconnects\n        setGameClient(null);\n        // Reset any error messages\n        setErrorMessage('');\n        // Set default token balances\n        setTokenBalance({ sol: 0, rpsToken: 0 });\n      }\n    };\n\n    initClient();\n  }, [connected, publicKey, signTransaction, sendTransaction]);\n\n  // Function to create a new game\n  const createGame = async (betAmount: number, currencyMode: CurrencyMode) => {\n    if (!gameClient) {\n      setErrorMessage('Game client not initialized');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setStatusMessage('Creating new game...');\n\n      // Call the game client to create a game\n      const result = await gameClient.createGame(betAmount, currencyMode === CurrencyMode.SOL);\n\n      if (result.success) {\n        setGameId(result.gameId as string);\n        setGameData(result.gameData);\n        setCurrentView(GameView.GAME_LOBBY);\n      } else {\n        setErrorMessage(result.error || 'Failed to create game');\n      }\n    } catch (error) {\n      console.error('Error creating game:', error);\n      setErrorMessage('Error creating game');\n    } finally {\n      setLoading(false);\n      setStatusMessage('');\n    }\n  };\n\n  // Function to join an existing game\n  const joinGame = async (gameIdToJoin: string) => {\n    if (!gameClient) {\n      setErrorMessage('Game client not initialized');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setStatusMessage('Joining game...');\n\n      // Call the game client to join a game\n      const result = await gameClient.joinGame(gameIdToJoin);\n\n      if (result.success) {\n        setGameId(gameIdToJoin);\n        setGameData(result.gameData);\n        setCurrentView(GameView.GAME_LOBBY);\n      } else {\n        setErrorMessage(result.error || 'Failed to join game');\n      }\n    } catch (error) {\n      console.error('Error joining game:', error);\n      setErrorMessage('Error joining game');\n    } finally {\n      setLoading(false);\n      setStatusMessage('');\n    }\n  };\n\n  // Additional props needed for the views\n  const viewProps = {\n    gameClient,\n    publicKey,\n    connected,\n    gameId,\n    gameData,\n    userChoice,\n    salt,\n    errorMessage,\n    statusMessage,\n    loading,\n    tokenBalance,\n    loadingBalance,\n    // Functions\n    setCurrentView,\n    setGameId,\n    setGameData,\n    setUserChoice,\n    setSalt,\n    setErrorMessage,\n    setStatusMessage,\n    setLoading,\n    createGame,\n    joinGame,\n  };\n\n  // Main rendering logic\n  return (\n    <div className=\"app-container\">\n      {/* Header with wallet connection */}\n      <header className=\"app-header\">\n        <div className=\"logo\">Solana RPS Game</div>\n\n        <div className=\"header-actions\">\n          {/* Sound control */}\n          <SoundControl />\n\n          {/* Token display when wallet is connected */}\n          {connected && publicKey && (\n            <TokenDisplay\n              balance={tokenBalance}\n              loading={loadingBalance}\n              onClick={() => setIsTokenModalOpen(true)}\n            />\n          )}\n\n          {/* Wallet connection button */}\n          <WalletMultiButton />\n\n          {/* Mobile menu toggle */}\n          <button\n            className=\"mobile-menu-toggle\"\n            onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n          >\n            \n          </button>\n        </div>\n      </header>\n\n      {/* Navigation menu */}\n      <nav className={`app-nav ${isMobileMenuOpen ? 'open' : ''}`}>\n        <button onClick={() => setCurrentView(GameView.HOME)}>Home</button>\n        <button onClick={() => setCurrentView(GameView.CREATE_GAME)}>Create Game</button>\n        <button onClick={() => setCurrentView(GameView.JOIN_GAME)}>Join Game</button>\n        <button onClick={() => setCurrentView(GameView.AUTO_PLAY)}>Auto Play</button>\n        <button onClick={() => setCurrentView(GameView.WELCOME)}>Welcome</button>\n        <button onClick={() => setCurrentView(GameView.SECURITY)}>Security</button>\n        <button onClick={() => setCurrentView(GameView.TESTING)}>Testing</button>\n      </nav>\n\n      {/* Main content */}\n      <main className=\"app-main\">\n        {/* Render the appropriate view based on currentView */}\n        {currentView === GameView.HOME && <HomeView {...viewProps} />}\n        {currentView === GameView.CREATE_GAME && <CreateGameView {...viewProps} />}\n        {currentView === GameView.JOIN_GAME && <JoinGameView {...viewProps} />}\n        {currentView === GameView.GAME_LOBBY && <GameLobbyView {...viewProps} />}\n        {currentView === GameView.COMMIT_CHOICE && <CommitChoiceView {...viewProps} />}\n        {currentView === GameView.REVEAL_CHOICE && <RevealChoiceView {...viewProps} />}\n        {currentView === GameView.GAME_RESULTS && <GameResultsView {...viewProps} />}\n        {currentView === GameView.AUTO_PLAY && <AutoPlayView {...viewProps} />}\n        {currentView === GameView.WELCOME && <WelcomeView {...viewProps} />}\n        {currentView === GameView.SECURITY && <SecurityView {...viewProps} />}\n        {currentView === GameView.TESTING && <TestingView />}\n      </main>\n\n      {/* Footer */}\n      <footer className=\"app-footer\">\n        <p>Solana Rock Paper Scissors Game - Built with  for Solana</p>\n      </footer>\n\n      {/* Token Modal for managing tokens */}\n      {isTokenModalOpen && (\n        <TokenModal\n          publicKey={publicKey}\n          balance={tokenBalance}\n          onClose={() => setIsTokenModalOpen(false)}\n          onGetFree={async () => {\n            if (publicKey && gameClient) {\n              const connection = new Connection(endpoint, 'confirmed');\n              await getFreeRPSTokens(connection, publicKey);\n              const updatedBalance = await getTokenBalances(connection, publicKey);\n              setTokenBalance(updatedBalance);\n            }\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import './utils/polyfill-setup.js'; // Import polyfills first - this ensures Buffer and process are available\n\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App.tsx';\nimport './index.css';\nimport './styles/animations.css'; // Import animations CSS\n\nconst rootElement = document.getElementById('root');\nif (!rootElement) {\n  throw new Error('Failed to find root element');\n}\n\n// Log that main.tsx is loaded to verify the order\nconsole.log('Main.tsx loaded - React application starting');\n\nReactDOM.createRoot(rootElement).render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n);\n"],"file":"assets/index-E2FfCpCT.js"}